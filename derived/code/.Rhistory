getwd()
?dir
# Open Zip cod-level Zillow Data
filenames <- list.files(paste0(datadir))
#' This script formats variable names for Zip code level raw zillow data
library('tidyverse', 'data.table')
lib <- "../../lib/"
datadir <- '../../raw_data/zillow/'
tempdir <- "../temp/"
outputdir <- "../output/"
# Open Zip cod-level Zillow Data
filenames <- list.files(paste0(datadir))
filenames
str_detect(filenames, "Zip_")
str_detect(filenames, "Zip*")
str_detect(filenames, "_summary")
str_detect(filenames, "_Summary")
filenames <- str_detect(filenames, "Zip_*")
# Open Zip cod-level Zillow Data
filenames <- list.files(paste0(datadir))
filenames <- fliename[str_detect(filenames, "Zip_*")]
#' This script formats variable names for Zip code level raw zillow data
library('tidyverse', 'data.table')
lib <- "../../lib/"
datadir <- '../../raw_data/zillow/'
tempdir <- "../temp/"
outputdir <- "../output/"
# Open Zip cod-level Zillow Data
filenames <- list.files(paste0(datadir))
filenames <- filename[str_detect(filenames, "Zip_*")]
#' This script formats variable names for Zip code level raw zillow data
library('tidyverse', 'data.table')
lib <- "../../lib/"
datadir <- '../../raw_data/zillow/'
tempdir <- "../temp/"
outputdir <- "../output/"
# Open Zip cod-level Zillow Data
filenames <- list.files(paste0(datadir))
filenames <- filenames[str_detect(filenames, "Zip_*")]
filenames
filenames <- filenames[str_remove_all(filenames, "_Summary.csv")]
# Open Zip cod-level Zillow Data
filenames <- list.files(paste0(datadir))
filenames <- filenames[str_detect(filenames, "Zip_*")]
filenames <- filenames[!str_detect(filenames, "_Summary.csv")]
filenames
#' This script formats variable names for Zip code level raw zillow data
lib <- "../../lib/R/"
datadir <- '../../raw_data/zillow/'
tempdir <- "../temp/"
outputdir <- "../output/"
source(paste0(lib, 'check_packages.R'))
check_packages(c('tidyverse', 'data.table'))
# Open Zip cod-level Zillow Data
filenames <- list.files(paste0(datadir))
filenames <- filenames[str_detect(filenames, "Zip_*")]
filenames <- filenames[!str_detect(filenames, "_Summary.csv")]
# Prepare old and new columns name
oldnames = c('RegionName', 'City', 'State', 'Metro', 'CountyName')
newnames = c('zipcode', 'city', 'stateabb', 'msa', 'county')
format <- lapply(filenames, function(x) {
df <- data.table::fread(paste0(datadir, x), stringsAsFactors = F)
data.table::setnames(df, old = oldnames, new = newnames)
fwrite(df, file = paste0(outputdir,x))
})
#' This script formats variable names for Zip code level raw zillow data
# Set dependencies
lib <- "../../lib/R/"
datadir <- '../../raw_data/zillow/'
tempdir <- "../temp/"
outputdir <- "../output/"
# Import custom functions
source(paste0(lib, 'check_packages.R'))
# Import libraries
check_packages(c('tidyverse', 'data.table'))
# Open Zip cod-level Zillow Data
filenames <- list.files(paste0(datadir))
filenames <- filenames[str_detect(filenames, "Zip_*")]
filenames <- filenames[!str_detect(filenames, "_Summary.csv")]
# Prepare old and new columns name
oldnames = c('RegionName', 'City', 'State', 'Metro', 'CountyName')
newnames = c('zipcode', 'city', 'stateabb', 'msa', 'county')
format <- lapply(filenames, function(x) {
df <- data.table::fread(paste0(datadir, x), stringsAsFactors = F)
df[,SizeRank:=NULL]
data.table::setnames(df, old = oldnames, new = newnames)
fwrite(df, file = paste0(outputdir,x))
})
#' This script formats variable names for Zip code level raw zillow data
# Set dependencies
lib <- "../../lib/R/"
datadir <- '../../raw_data/zillow/'
tempdir <- "../temp/"
outputdir <- "../output/"
# Import custom functions
source(paste0(lib, 'check_packages.R'))
# Import libraries
check_packages(c('tidyverse', 'data.table'))
# Open Zip cod-level Zillow Data
filenames <- list.files(paste0(datadir))
filenames <- filenames[str_detect(filenames, "Zip_*")]
filenames <- filenames[!str_detect(filenames, "_Summary.csv")]
# Prepare old and new columns name
oldnames = c('RegionName', 'City', 'State', 'Metro', 'CountyName')
newnames = c('zipcode', 'city', 'stateabb', 'msa', 'county')
format <- lapply(filenames, function(x) {
df <- data.table::fread(paste0(datadir, x), stringsAsFactors = F)
df[,SizeRank:=NULL]
data.table::setnames(df, old = oldnames, new = newnames)
fwrite(df, file = paste0(outputdir,x))
})
#' This script formats variable names for Zip code level raw zillow data
# Set dependencies
lib <- "../../lib/R/"
datadir <- '../../raw_data/zillow/'
tempdir <- "../temp/"
outputdir <- "../output/"
# Import custom functions
source(paste0(lib, 'check_packages.R'))
# Import libraries
check_packages(c('tidyverse', 'data.table'))
# Open Zip cod-level Zillow Data
filenames <- list.files(paste0(datadir))
filenames <- filenames[str_detect(filenames, "Zip_*")]
filenames <- filenames[!str_detect(filenames, "_Summary.csv")]
# Prepare old and new columns name
oldnames = c('RegionName', 'City', 'State', 'Metro', 'CountyName')
newnames = c('zipcode', 'city', 'stateabb', 'msa', 'county')
format <- lapply(filenames, function(x) {
df <- data.table::fread(paste0(datadir, x), stringsAsFactors = F)
df[,SizeRank:=NULL]
data.table::setnames(df, old = oldnames, new = newnames)
df[, county := str_replace_all(county, " County", "")]
fwrite(df, file = paste0(outputdir,x))
})
source('C:/Users/gabriel/Dropbox (Brown)/research/min_wage_rent/base/code/main.R', echo=TRUE)
source('C:/Users/gabriel/Dropbox (Brown)/research/min_wage_rent/base/code/main.R', echo=TRUE)
source('C:/Users/gabriel/Dropbox (Brown)/research/min_wage_rent/base/code/main.R', echo=TRUE)
getwd()
source('C:/Users/gabriel/Dropbox (Brown)/research/min_wage_rent/base/code/main.R', echo=TRUE)
getwd()
rstudioapi::getSourceEditorContext()$path
dirname(rstudioapi::getSourceEditorContext()$path)
if getwd()!= dirname(rstudioapi::getSourceEditorContext()$path) setwd(dirname(rstudioapi::getSourceEditorContext()$path))
if (getwd()!= dirname(rstudioapi::getSourceEditorContext()$path)) setwd(dirname(rstudioapi::getSourceEditorContext()$path))
getwd()
source('C:/Users/gabriel/Dropbox (Brown)/research/min_wage_rent/derived/code/main.R', echo=TRUE)
source('C:/Users/gabriel/Dropbox (Brown)/research/min_wage_rent/derived/code/main.R', echo=TRUE)
lib <- "../../lib/R/"
datadir <- '../../base/output/zillow/'
tempdir <- "../temp/"
outputdir <- "../output/"
# Import custom functions
source(paste0(lib, 'check_packages.R'))
source(paste0(lib, 'fwrite_key.R'))
source(paste0(lib, 'setkey_unique.R'))
# Import libraries
check_packages(c('tidyverse', 'data.table'))
# Open Zip cod-level Zillow Data
filenames <- list.files(paste0(datadir))
filenames <- filenames[str_detect(filenames, "Zip_*")]
filenames <- filenames[!str_detect(filenames, "_Summary.csv")]
#Reshape each Zipcode-level dataframe (must be done individually since we need to rename the specific rent type)
idvars <- c('zipcode', 'city', 'stateabb', 'msa', 'county')
file4 <- fread(paste0(datadir,filenames[4]), stringsAsFactors = F)
