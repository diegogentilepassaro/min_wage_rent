
 make.py started: 2021-04-29 11:17:11 C:\Users\diegog\Desktop\Diego\min_wage_rent\derived\county_month\code 




Execute:  StataMP-64 /e do "./build_county_month_panel.do"

  ___  ____  ____  ____  ____ (R)
 /__    /   ____/   /   ____/
___/   /   /___/   /   /___/   15.1   Copyright 1985-2017 StataCorp LLC
  Statistics/Data Analysis            StataCorp
                                      4905 Lakeway Drive
     MP - Parallel Edition            College Station, Texas 77845 USA
                                      800-STATA-PC        http://www.stata.com
                                      979-696-4600        stata@stata.com
                                      979-696-4601 (fax)

Single-user 32-core Stata perpetual license:
       Serial number:  501506205566
         Licensed to:  KU Leuven FEB (CES)
                       KU Leuven

Notes:
      1.  Stata is running in batch mode.
      2.  Unicode is supported; see help unicode_advice.
      3.  More than 2 billion observations are allowed; see help obs_advice.
      4.  Maximum number of variables is set to 5000; see help set_maxvar.

. do ./build_county_month_panel.do 

. set more off

. clear all

. adopath + ../../../lib/stata/gslab_misc/ado
  [1]  (BASE)      "C:\Program Files\Stata15\ado\base/"
  [2]  (SITE)      "C:\Program Files\Stata15\ado\site/"
  [3]              "."
  [4]  (PERSONAL)  "c:\ado\personal/"
  [5]  (PLUS)      "c:\ado\plus/"
  [6]  (OLDPLACE)  "c:\ado/"
  [7]              "../../../lib/stata/gslab_misc/ado"

. adopath + ../../../lib/stata/mental_coupons/ado
  [1]  (BASE)      "C:\Program Files\Stata15\ado\base/"
  [2]  (SITE)      "C:\Program Files\Stata15\ado\site/"
  [3]              "."
  [4]  (PERSONAL)  "c:\ado\personal/"
  [5]  (PLUS)      "c:\ado\plus/"
  [6]  (OLDPLACE)  "c:\ado/"
  [7]              "../../../lib/stata/gslab_misc/ado"
  [8]              "../../../lib/stata/mental_coupons/ado"

. 
. program main
  1.     local instub_derived  "../../../drive/derived_large"
  2.     local instub_geo  "../../../base/geo_master/output"
  3.     local instub_base  "../../../drive/base_large"
  4.     local instub_qcew "../../../base/qcew/output"
  5.     local outstub "../../../drive/derived_large/county_month"
  6.     local logfile "../output/data_file_manifest.log"
  7. 
.     use countyfips statefips cbsa10 ///
>         using "`instub_geo'/zip_county_place_usps_all.dta", clear
  8.     duplicates drop
  9.     isid countyfips
 10.    
.     merge 1:m countyfips using "`instub_derived'/min_wage/county_statutory_mw
> .dta", ///
>        nogen assert(3) keepusing(year month actual_mw_wg_mean ///
>        actual_mw_ignore_local_wg_mean local_mw county_mw fed_mw state_mw ///
>        actual_mw binding_mw actual_mw_ignore_local binding_mw_ignore_local)
 11.     
.     merge 1:1 countyfips year month ///
>             using "`instub_derived'/min_wage/countyfips_experienced_mw.dta", 
> ///
>         assert(1 2 3) keep(1 3) nogen keepusing(exp_ln_mw_lowinc exp_ln_mw_lo
> winc_max ///
>                 exp_ln_mw_lowinc_wg_mean exp_mw_lowinc exp_mw_lowinc_max ///
>                 exp_mw_lowinc_wg_mean exp_ln_mw_tot exp_ln_mw_tot_max exp_ln_
> mw_tot_wg_mean          ///
>                 exp_mw_tot exp_mw_tot_max exp_mw_tot_wg_mean         ///
>                 exp_ln_mw_young exp_ln_mw_young_max exp_ln_mw_young_wg_mean /
> //
>                 exp_mw_young exp_mw_young_max exp_mw_young_wg_mean)   
 12.     
.     merge 1:1 countyfips year month using "`instub_base'/zillow/zillow_county
> _clean.dta"
 13.     qui sum medrentpricepsqft_SFCC if _merge == 2 & inrange(year, 2010, 20
> 19)    
 14.     assert r(N)==0
 15.     keep if inlist(_merge, 1, 3)
 16.     drop _merge
 17.     
.     /* Should we build ACS population by county-year? Probably we should! */
. 
.     merge m:1 statefips countyfips month year ///
>         using "`instub_qcew'/ind_emp_wage_countymonth.dta", ///
>         nogen keep(3) assert(1 2 3)
 18.     add_dates
 19. 
.     strcompress
 20.     save_data "`outstub'/county_month_panel.dta", replace ///
>         key(countyfips year month) log(`logfile')
 21. end

. 
. program add_dates
  1.     gen day = 1
  2.     gen date = mdy(month, day, year)
  3.     gen year_month = mofd(date)
  4.     format year_month %tm
  5.     gen year_quarter = qofd(date)
  6.     format year_quarter %tq
  7.     drop day date
  8. end

. 
. main

Duplicates in terms of all variables

(84,656 observations deleted)

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                           377,160  
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                           240
        from master                       240  
        from using                          0  

    matched                           376,920  
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                       292,320
        from master                   292,320  (_merge==1)
        from using                          0  (_merge==2)

    matched                            84,840  (_merge==3)
    -----------------------------------------
(0 observations deleted)

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                           367,413  
    -----------------------------------------
  Converting str to strL: countyfips cbsa10 statefips
    strcompress grew data 22% so far, but I'm not done yet!
  variable year_month was float now int
  variable year_quarter was float now int
  variable year was double now int
  variable month was double now byte
  variable binding_mw was double now byte
  variable binding_mw_ignore_local was double now byte
  variable countyfips was strL now str5
  variable cbsa10 was strL now str5
  variable statefips was strL now str2
  (58,106,920 bytes saved)
       compress shrank data 25%
    strcompress shrank data  8% overall
(data now sorted by countyfips year month)
  (0 bytes saved)
===============================================================================
File: ../../../drive/derived_large/county_month/county_month_panel.dta
Key: countyfips year month
===============================================================================
  367413:76(19983):991725894:4249969787

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
  countyfips |          0
        year |    367,413    2014.385    2.815947       2010       2019
       month |    367,413    6.384687    3.416516          1         12
      cbsa10 |          0
   statefips |          0
-------------+---------------------------------------------------------
ac~w_wg_mean |    367,413    7.666339    .8103903       7.25      15.59
ac~l_wg_mean |    367,413     7.66135    .7926218       7.25         14
    local_mw |      1,404    9.506652    2.179375       7.25      15.59
   county_mw |      1,053    8.749278    1.614672       7.25      14.25
      fed_mw |    367,413        7.25           0       7.25       7.25
-------------+---------------------------------------------------------
    state_mw |    367,413     7.66135    .7926218       7.25         14
   actual_mw |    367,413    7.665005    .8063405       7.25      15.59
  binding_mw |    367,413    1.337718    .4801858          1          4
actual_mw_~l |    367,413     7.66135    .7926218       7.25         14
binding_mw~l |    367,413    1.335026    .4720003          1          2
-------------+---------------------------------------------------------
  exp_mw_tot |    367,311    7.675264    .7830069       7.25   14.54545
exp_mw_young |    367,311    7.674319     .778451       7.25   14.50274
exp_mw_low~c |    367,311    7.672811    .7798719       7.25    14.6189
exp_ln_mw_~t |    367,311    2.032967    .0912669   1.981001   2.671741
exp_ln_mw_~g |    367,311     2.03285    .0907312   1.981001   2.668259
-------------+---------------------------------------------------------
exp_ln_mw_~c |    367,311    2.032712    .0910297   1.981001   2.676711
exp_mw_tot~n |    367,311    7.675264    .7830069       7.25   14.54545
exp_mw_you~n |    367,311    7.674319     .778451       7.25   14.50274
exp_mw_low~n |    367,311    7.672811    .7798719       7.25    14.6189
exp_ln_mw_.. |    367,311    2.032967    .0912669   1.981001   2.671741
-------------+---------------------------------------------------------
exp_ln_mw_.. |    367,311     2.03285    .0907312   1.981001   2.668259
exp_ln_mw_.. |    367,311    2.032712    .0910297   1.981001   2.676711
exp_mw_tot~x |    367,311     7.69016     .826141       7.25    15.4622
exp_mw_you~x |    367,311    7.689568    .8220767       7.25   15.40035
exp_mw_low~x |    367,311    7.686439    .8185718       7.25   15.38408
-------------+---------------------------------------------------------
exp_ln~t_max |    367,311      2.0343    .0945599   1.981001   2.733374
exp_ln~g_max |    367,311    2.034213    .0940657   1.981001   2.728225
exp_ln~c_max |    367,311     2.03394     .093993   1.981001   2.727204
medrentpri~C |     54,607    1.018609    .6322621   .4472472   17.05931
medrentpri~F |     51,687    .9826431    .5942865   .1214772   17.14286
-------------+---------------------------------------------------------
estcount_b~v |    366,414    479.3302    1868.482          1      56304
avgwwage_b~v |    366,414     762.195    394.2982          0      26956
 emp_bizserv |    366,414    5739.674    26282.36          0     642234
estcount_c~t |    366,111    236.7455    646.8231          1      16939
avgwwage_c~t |    366,111    748.0265    352.0097          0       8024
-------------+---------------------------------------------------------
   emp_const |    366,111    1930.747    6613.381          0     173773
estcount_e~e |    365,556    433.4597    3603.458          1     245645
avgwwage_e~e |    365,556    646.5441    221.6269          0       2749
   emp_eduhe |    365,556    6594.577    24304.88          0     835039
estcount_f~v |    367,260    19.40195    24.99491          1        456
-------------+---------------------------------------------------------
avgwwage_f~v |    367,260    1050.048    265.2232          0       3704
  emp_fedgov |    367,260    889.3014    4717.336          0     215436
estcount_fin |    366,261    259.0078    957.3936          1      30238
avgwwage_fin |    366,261    823.8644    369.5556          0      12775
     emp_fin |    366,261    2410.915    11726.85          0     398481
-------------+---------------------------------------------------------
estcount_i~o |    354,888    43.97572    237.4453          1      13212
avgwwage_i~o |    354,888    684.0963    499.5129          0      16227
    emp_info |    354,888      862.55    5790.862          0     240358
estcount_l~s |    366,363    252.9565    899.8766          1      39222
avgwwage_l~s |    366,363    274.8043    100.8308          0       2473
-------------+---------------------------------------------------------
    emp_leis |    366,363    4690.943    17491.63          0     551791
estcount_l~v |    367,413     53.0844    107.0175          1       4162
avgwwage_l~v |    367,413    624.3367    258.6861          0       2042
  emp_locgov |    367,413    4222.951    14628.22          0     463785
estcount_m~u |    360,396    106.6168    366.3782          1      13469
-------------+---------------------------------------------------------
avgwwage_m~u |    360,396    821.5354    406.1163          0       7592
    emp_manu |    360,396    3899.309    12097.54          0     376653
estcount_n~s |    364,284    42.22777     86.4193          1       1859
avgwwage_n~s |    364,284    744.2342    438.9917          0      23770
  emp_natres |    364,284    603.3366    2805.404          0      97846
-------------+---------------------------------------------------------
estcount_s~v |    359,982     21.9712    107.4494          1       5969
avgwwage_s~v |    359,982    751.6092    325.6164          0       4279
   emp_stgov |    359,982    1370.662    5076.744          0     114555
estcount_t~p |    367,341    557.0258    1824.249          1      59438
avgwwage_t~p |    367,341    650.7085    183.3208          0      11257
-------------+---------------------------------------------------------
  emp_transp |    367,341    8107.854    28176.44          0     872187
     quarter |    367,413    2.461562    1.105839          1          4
        qmon |    367,413    6.384687    3.416516          1         12
   end_month |    367,413    7.384687    3.317516          3         12
  year_month |    367,413    658.0047    33.77495        600        716
-------------+---------------------------------------------------------
year_quarter |    367,413    219.0016    11.25503        200        238




(note: file ../../../drive/derived_large/county_month/county_month_panel.dta no
> t found)
file ../../../drive/derived_large/county_month/county_month_panel.dta saved

. 
end of do-file

 make.py ended: 2021-04-29 11:17:28
