
 make.py started: 2022-03-15 07:43:43 C:\Users\diegog\Desktop\Diego\min_wage_rent\derived\estimation_samples\code 




Execute:  StataMP-64 /e do "./make_main_samples.do"

  ___  ____  ____  ____  ____ (R)
 /__    /   ____/   /   ____/
___/   /   /___/   /   /___/   15.1   Copyright 1985-2017 StataCorp LLC
  Statistics/Data Analysis            StataCorp
                                      4905 Lakeway Drive
     MP - Parallel Edition            College Station, Texas 77845 USA
                                      800-STATA-PC        http://www.stata.com
                                      979-696-4600        stata@stata.com
                                      979-696-4601 (fax)

Single-user 32-core Stata perpetual license:
       Serial number:  501506205566
         Licensed to:  KU Leuven FEB (CES)
                       KU Leuven

Notes:
      1.  Stata is running in batch mode.
      2.  Unicode is supported; see help unicode_advice.
      3.  More than 2 billion observations are allowed; see help obs_advice.
      4.  Maximum number of variables is set to 5000; see help set_maxvar.


running c:\ado\personal\profile.do ...

. do ./make_main_samples.do 

. set more off

. clear all

. adopath + ../../../lib/stata/gslab_misc/ado
  [1]  (BASE)      "C:\Program Files\Stata15\ado\base/"
  [2]  (SITE)      "C:\Program Files\Stata15\ado\site/"
  [3]              "."
  [4]  (PERSONAL)  "c:\ado\personal/"
  [5]  (PLUS)      "c:\ado\plus/"
  [6]  (OLDPLACE)  "c:\ado/"
  [7]              "../../../lib/stata/gslab_misc/ado"

. 
. program main
  1.     local in_zip_mth   "../../../drive/derived_large/zipcode_month"
  2.     local in_cty_mth   "../../../drive/derived_large/county_month"
  3.     local in_zipcode   "../../../drive/derived_large/zipcode"
  4.     local outstub      "../../../drive/derived_large/estimation_samples"
  5.     local logfile      "../output/data_file_manifest.log"
  6.     
.     local rent_var          "medrentpricepsqft_SFCC"
  7.     local start_year_month  "2010m1"
  8.     local end_year_month    "2019m12"
  9.     local target_year_month "2015m1"
 10.     local target_vars       "sh_white_cens2010 sh_black_cens2010 sh_hhlds_
> renteroccup_cens2010 med_hhld_inc_acs2011" // n_workers_acs2011 
 11.         
.     create_unbalanced_panel, instub(`in_zip_mth')                     ///
>         geo(zipcode) rent_var(`rent_var')                             ///
>         start_ym(`start_year_month') end_ym(`end_year_month')
 12. 
.     gen_vars, rent_var(`rent_var')
 13.     preserve 
 14.                 collapse (min) ym_entry_to_zillow = year_month ///
>                     if !missing(`rent_var'), by(zipcode)
 15.                 gen yr_entry_to_zillow = year(dofm(ym_entry_to_zillow))
 16.                 drop ym_entry_to_zillow
 17.                 save "../temp/ym_entry_to_zillow.dta", replace
 18.         restore
 19.         merge m:1 zipcode using "../temp/ym_entry_to_zillow.dta", ///
>                 nogen keep(1 3) assert(1 3)
 20.     flag_samples, instub(`in_zip_mth') geo(zipcode) geo_name(zipcode) ///
>         rent_var(`rent_var') target_ym(`target_year_month')
 21. 
.     compute_weights, instub(`in_zipcode') target_vars(`target_vars')
 22.     merge 1:1 zipcode year_month using "../temp/weights.dta", ///
>        nogen assert(2 3) keep(3)
 23. 
.     save_data "`outstub'/zipcode_months.dta", key(zipcode year_month) ///
>         replace log(`logfile')
 24.     export delimited "`outstub'/zipcode_months.csv", replace
 25.     
.     create_unbalanced_panel, instub(`in_cty_mth')                     ///
>         geo(county) rent_var(`rent_var')                             ///
>         start_ym(`start_year_month') end_ym(`end_year_month')
 26. 
.     gen_vars, rent_var(`rent_var')
 27. 
.     flag_samples, instub(`in_cty_mth') geo(county) geo_name(countyfips) ///
>         rent_var(`rent_var') target_ym(`target_year_month')
 28. 
.     save_data "`outstub'/county_months.dta", key(countyfips year_month) ///
>         replace log(`logfile')
 29.     export delimited "`outstub'/county_months.csv", replace
 30. end

. 
. program create_unbalanced_panel
  1.     syntax, instub(str) geo(str) rent_var(str)        ///
>             start_ym(str) end_ym(str)
  2.        
.     use "`instub'/`geo'_month_panel.dta" ///
>         if !missing(`rent_var'), clear
  3.     
.     keep if inrange(year_month, `=tm(`start_ym')', `=tm(`end_ym')')
  4. 
.     drop_vars
  5.     destring_geographies
  6. 
.     xtset `geo'_num year_month
  7. end

. 
. program gen_vars
  1.     syntax, rent_var(str)
  2. 
.     gen ln_rents = log(`rent_var')
  3.     
.     foreach ctrl_type in emp estcount avgwwage {
  4.         gen ln_`ctrl_type'_bizserv = log(`ctrl_type'_bizserv)
  5.         gen ln_`ctrl_type'_info    = log(`ctrl_type'_info)
  6.         gen ln_`ctrl_type'_fin     = log(`ctrl_type'_fin)
  7.         drop `ctrl_type'_*
  8.     }
  9. end

. 
. program flag_samples
  1.     syntax, instub(str) geo(str) geo_name(str) ///
>         rent_var(str) target_ym(str)
  2. 
.     preserve
  3.         use year_month `geo_name' medrentpricepsqft_SFCC   ///
>             using "`instub'/`geo'_month_panel.dta"         ///
>             if !missing(`rent_var'), clear
  4.         
.         gcollapse (min) min_year_month = year_month, by(`geo_name')
  5.         keep if min_year_month <= `=tm(`target_ym')'
  6.         
.         keep `geo_name'
  7.         gen baseline_sample = 1
  8.         
.         save_data "../temp/baseline_`geo'.dta", key(`geo_name') ///
>             replace log(none)
  9.     restore
 10.     
.     merge m:1 `geo_name' using "../temp/baseline_`geo'.dta", ///
>         nogen assert(1 3) keep(1 3)
 11.     
.     replace baseline_sample = 0 if missing(baseline_sample)
 12.     
.     gen     fullbal_sample = baseline_sample
 13.     replace fullbal_sample = 0 if year_month <= `=tm(`target_ym')'
 14. end

. 
. program compute_weights
  1.     syntax, instub(str) target_vars(str)
  2.     
.     preserve
  3.         merge m:1 zipcode using "`instub'/zipcode_cross.dta", ///
>             assert(2 3) keep(2 3) keepusing(`target_vars')
  4.         foreach var of local target_vars {
  5.             qui sum `var'
  6.             local mean = r(mean)
  7.             local target_means "`target_means' `mean'"
  8.         }
  9.                 
.         keep if _merge == 3
 10.         
.         ebalance `target_vars', manualtargets(`target_means')
 11.         rename _webal weights_unbal
 12.         
.         ebalance `target_vars' if baseline_sample, manualtargets(`target_mean
> s')
 13.         rename _webal weights_baseline
 14.         
.         ebalance `target_vars' if fullbal_sample, manualtargets(`target_means
> ')
 15.         rename _webal weights_fullbal
 16.         
.         keep zipcode year_month weights_unbal weights_baseline weights_fullba
> l
 17.         save "../temp/weights.dta", replace
 18.     restore
 19. end

. 
. program drop_vars
  1.     foreach var in medlistingprice_low_tier ///
>         medlistingprice_top_tier medpctpricereduction_SFCC ///
>         medrentprice_1BR medrentprice_4BR medrentprice_5BR ///
>         medrentprice_CC medrentprice_MFdxtx medrentprice_Mfr5Plus ///
>         medrentprice_SF medrentprice_Studio medrentpricepsqft_1BR ///
>         medrentpricepsqft_4BR medrentpricepsqft_5BR medrentpricepsqft_CC ///
>         medrentpricepsqft_MFdxtx medrentpricepsqft_Mfr5Plus ///
>         medrentpricepsqft_SF medrentpricepsqft_Studio ///
>         pctlistings_pricedown_SFCC SalesPrevForeclosed_Share ///
>         zhvi_2BR zhvi_SFCC zhvi_C zhvi_SF zri_SFCCMF zri_MF {
  2.         cap drop `var'
  3.     }
  4. end

. 
. program destring_geographies
  1. 
.     cap destring statefips,  gen(statefips_num)
  2.     cap destring cbsa,       gen(cbsa_num)
  3.     cap destring place_code, gen(place_code_num)
  4.     cap destring county,     gen(county_num)
  5.     cap destring countyfips, gen(county_num)
  6.     cap destring zipcode,    gen(zipcode_num)
  7. end

. 
. 
. main
(0 observations deleted)
       panel variable:  zipcode_num (unbalanced)
        time variable:  year_month, 2010m2 to 2019m12
                delta:  1 month
(12 missing values generated)
(1,132 missing values generated)
(24 missing values generated)
(12 missing values generated)
(12 missing values generated)
(1,132 missing values generated)
(24 missing values generated)
(note: file ../temp/ym_entry_to_zillow.dta not found)
file ../temp/ym_entry_to_zillow.dta saved

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                           197,978  
    -----------------------------------------
(1,971 observations deleted)
(data already sorted by zipcode)
  variable baseline_sample was float now byte
  (4,035 bytes saved)
===============================================================================
File: ../temp/baseline_zipcode.dta
Key: zipcode
===============================================================================
  1345:2(90900):3789710260:1235100634

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
     zipcode |          0
baseline_s~e |      1,345           1           0          1          1




(note: file ../temp/baseline_zipcode.dta not found)
file ../temp/baseline_zipcode.dta saved

    Result                           # of obs.
    -----------------------------------------
    not matched                        64,378
        from master                    64,378  
        from using                          0  

    matched                           133,600  
    -----------------------------------------
(64,378 real changes made)
(54,245 real changes made)

    Result                           # of obs.
    -----------------------------------------
    not matched                        28,510
        from master                         0  (_merge==1)
        from using                     28,510  (_merge==2)

    matched                           197,978  (_merge==3)
    -----------------------------------------
(28,510 observations deleted)


Data Setup
Covariate adjustment: sh_white_cens2010 sh_black_cens2010 sh_hhlds_renteroccup_
> cens2010 med_hhld_inc_acs2011


Optimizing...
Iteration 1: Max Difference = 1110309.74
Iteration 2: Max Difference = 408458.693
Iteration 3: Max Difference = 150262.122
Iteration 4: Max Difference = 55276.9112
Iteration 5: Max Difference = 20333.8052
Iteration 6: Max Difference = 7478.95507
Iteration 7: Max Difference = 2749.9205
Iteration 8: Max Difference = 1010.2073
Iteration 9: Max Difference = 370.206361
Iteration 10: Max Difference = 134.773408
Iteration 11: Max Difference = 48.189977
Iteration 12: Max Difference = 16.4101999
Iteration 13: Max Difference = 4.89908825
Iteration 14: Max Difference = 1.03799254
Iteration 15: Max Difference = .097847052
Iteration 16: Max Difference = .001519102
maximum difference smaller than the tolerance level; convergence achieved


No. of units adjusted: 189718 total of weights: 189718


Before: without weighting

             |      mean   variance   skewness 
-------------+---------------------------------
sh_whit~2010 |     .6766     .04093     -1.139 
sh_blac~2010 |     .1558     .03753      2.218 
sh_hhld~2010 |     .3326     .02033      .6726 
med_hhl~2011 |     58525   5.01e+08      .9945 


After:  _webal as the weighting variable

             |      mean   variance   skewness 
-------------+---------------------------------
sh_whit~2010 |     .6971     .03703     -1.208 
sh_blac~2010 |     .1456     .03163      2.354 
sh_hhld~2010 |     .3189     .01874      .7012 
med_hhl~2011 |     54278   3.77e+08      .9428 


Data Setup
Covariate adjustment: sh_white_cens2010 sh_black_cens2010 sh_hhlds_renteroccup_
> cens2010 med_hhld_inc_acs2011


Optimizing...
Iteration 1: Max Difference = 763842.206
Iteration 2: Max Difference = 281000.41
Iteration 3: Max Difference = 103372.84
Iteration 4: Max Difference = 38027.3084
Iteration 5: Max Difference = 13988.031
Iteration 6: Max Difference = 5144.47537
Iteration 7: Max Difference = 1891.11385
Iteration 8: Max Difference = 694.271178
Iteration 9: Max Difference = 253.983177
Iteration 10: Max Difference = 92.0259683
Iteration 11: Max Difference = 32.4871313
Iteration 12: Max Difference = 10.692159
Iteration 13: Max Difference = 2.9270829
Iteration 14: Max Difference = .513459762
Iteration 15: Max Difference = .033605183
Iteration 16: Max Difference = .000213625
maximum difference smaller than the tolerance level; convergence achieved


No. of units adjusted: 127628 total of weights: 127628


Before: without weighting

             |      mean   variance   skewness 
-------------+---------------------------------
sh_whit~2010 |     .6709     .03834     -1.188 
sh_blac~2010 |     .1603     .03674      2.254 
sh_hhld~2010 |     .3273     .01924      .7662 
med_hhl~2011 |     59850   4.65e+08      .9078 


After:  _webal as the weighting variable

             |      mean   variance   skewness 
-------------+---------------------------------
sh_whit~2010 |     .6971     .03279     -1.246 
sh_blac~2010 |     .1456     .02827      2.434 
sh_hhld~2010 |     .3189     .01821      .7962 
med_hhl~2011 |     54274   3.29e+08       .891 


Data Setup
Covariate adjustment: sh_white_cens2010 sh_black_cens2010 sh_hhlds_renteroccup_
> cens2010 med_hhld_inc_acs2011


Optimizing...
Iteration 1: Max Difference = 454814.258
Iteration 2: Max Difference = 167315.381
Iteration 3: Max Difference = 61550.4548
Iteration 4: Max Difference = 22641.7129
Iteration 5: Max Difference = 8327.98685
Iteration 6: Max Difference = 3062.26181
Iteration 7: Max Difference = 1125.11116
Iteration 8: Max Difference = 412.476894
Iteration 9: Max Difference = 150.323231
Iteration 10: Max Difference = 53.9087133
Iteration 11: Max Difference = 18.5093752
Iteration 12: Max Difference = 5.65934248
Iteration 13: Max Difference = 1.29072458
Iteration 14: Max Difference = .151797354
Iteration 15: Max Difference = .003852066
maximum difference smaller than the tolerance level; convergence achieved


No. of units adjusted: 75874 total of weights: 75874


Before: without weighting

             |      mean   variance   skewness 
-------------+---------------------------------
sh_whit~2010 |     .6699      .0387       -1.2 
sh_blac~2010 |     .1594     .03701      2.277 
sh_hhld~2010 |     .3308     .02006      .7589 
med_hhl~2011 |     59944   4.70e+08       .904 


After:  _webal as the weighting variable

             |      mean   variance   skewness 
-------------+---------------------------------
sh_whit~2010 |     .6971     .03324     -1.272 
sh_blac~2010 |     .1456     .02878      2.454 
sh_hhld~2010 |     .3189     .01864      .7892 
med_hhl~2011 |     54285   3.31e+08      .8855 
(note: file ../temp/weights.dta not found)
file ../temp/weights.dta saved

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                           197,978  
    -----------------------------------------
(data already sorted by zipcode year_month)
  variable yr_entry_to_zillow was float now int
  variable fullbal_sample was float now byte
  (989,890 bytes saved)
===============================================================================
File: ../../../drive/derived_large/estimation_samples/zipcode_months.dta
Key: zipcode year_month
===============================================================================
  197978:161(81192):828734722:3569057276

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
     zipcode |          0
  year_month |    197,978    679.8485    29.62182        601        719
 zipcode_num |    197,978    54551.65    29306.32       1545      99705
        year |    197,978    2016.184    2.460616       2010       2019
       month |    197,978    6.635217    3.444678          1         12
-------------+---------------------------------------------------------
  place_code |          0
place_code~m |    197,978     3304560     2945004     103076    9999999
  countyfips |          0
  county_num |    197,978    23793.24    16814.06       1001      56021
   statefips |          0
-------------+---------------------------------------------------------
statefips_~m |    197,978    23.69774     16.7631          1         56
        cbsa |          0
    cbsa_num |    197,978    30725.79    11059.78      10180      99999
statutory_mw |    197,978    8.490077    1.653734       7.25         16
      mw_res |    197,978    2.122701    .1733436   1.981001   2.772589
-------------+---------------------------------------------------------
  binding_mw |    197,978    1.710494    .6736844          1          4
binding_mw~l |    197,978    1.616025    .4863517          1          2
binding_mw~x |    197,978    1.726672      .70234          1          4
binding_mw~n |    197,978    1.685278    .6312945          1          4
mw_wkp_to~09 |    197,549    2.110157    .1734357   1.371012   2.691656
-------------+---------------------------------------------------------
mw_wkp_~9_09 |    197,549    2.113599    .1706218   1.493845   2.696938
mw_wkp_~4_09 |    197,549    2.109471    .1745941   1.319214   2.688022
mw_wkp_~5_09 |    197,549    2.107602    .1748354    1.15919   2.692894
mw_wkp_~0_09 |    197,549    2.113115    .1686556   1.391297    2.68406
mw_~_3333_09 |    197,549    2.112117    .1722945    1.43795   2.687926
-------------+---------------------------------------------------------
mw_~e3333_09 |    197,549    2.106257    .1784669   1.247891   2.697946
mw_wkp_go~09 |    197,549     2.12039    .1653718   1.793131   2.675497
mw_wkp_tr~09 |    197,549    2.110759    .1755848   1.510678   2.671746
mw_wkp_ot~09 |    197,549    2.108711    .1752524   1.197225   2.700762
mw_wkp_to~10 |    197,549    2.111318    .1751739   1.416477   2.691589
-------------+---------------------------------------------------------
mw_wkp_~9_10 |    197,549    2.114858    .1713683   1.450441   2.697745
mw_wkp_~4_10 |    197,549    2.110525      .17664   1.385754     2.6896
mw_wkp_~5_10 |    197,549    2.109362    .1767224   1.278214   2.701672
mw_wkp_~0_10 |    197,549     2.11389     .169362   1.344035   2.687006
mw_~_3333_10 |    197,549    2.113025    .1731012   1.435375   2.687218
-------------+---------------------------------------------------------
mw_~e3333_10 |    197,549    2.107593    .1815221   1.335299   2.697877
mw_wkp_go~10 |    197,549    2.120696     .165632    1.55633    2.68284
mw_wkp_tr~10 |    197,549    2.106523     .183064   1.276819   2.676319
mw_wkp_ot~10 |    197,549    2.111676    .1759405   1.273019   2.704047
mw_wkp_to~11 |    197,761     2.11136    .1740065   1.495337   2.707758
-------------+---------------------------------------------------------
mw_wkp_~9_11 |    197,761    2.114277     .170772   1.585098   2.729035
mw_wkp_~4_11 |    197,761     2.11091    .1752656   1.435842   2.702423
mw_wkp_~5_11 |    197,761    2.109211    .1755468   1.371867   2.700213
mw_wkp_~0_11 |    197,761    2.112391    .1682194    1.47123   2.713394
mw_~_3333_11 |    197,761    2.113331    .1721902   1.510977   2.701911
-------------+---------------------------------------------------------
mw_~e3333_11 |    197,761    2.108596    .1800072   1.252163    2.71382
mw_wkp_go~11 |    197,761    2.120989    .1654468   1.580299   2.688559
mw_wkp_tr~11 |    197,761    2.108144    .1779826   1.454692    2.70805
mw_wkp_ot~11 |    197,761    2.111202     .175586   1.344498   2.724681
mw_wkp_to~12 |    197,761    2.114476     .172821   1.247422   2.716431
-------------+---------------------------------------------------------
mw_wkp_~9_12 |    197,761    2.117035    .1695735   1.527868   2.710816
mw_wkp_~4_12 |    197,761    2.114068    .1740364   1.149974   2.719466
mw_wkp_~5_12 |    197,761    2.112709    .1741332   1.064985   2.709734
mw_wkp_~0_12 |    197,761    2.115887    .1663895   1.758108   2.713306
mw_~_3333_12 |    197,761    2.115644    .1711059   1.513415   2.714014
-------------+---------------------------------------------------------
mw_~e3333_12 |    197,761    2.112382    .1785573   .8584745   2.717151
mw_wkp_go~12 |    197,761    2.121244    .1650846   1.609398    2.69106
mw_wkp_tr~12 |    197,761    2.113305    .1722958    1.49126   2.703494
mw_wkp_ot~12 |    197,761    2.113947    .1749581   1.066326   2.725769
mw_wkp_to~13 |    197,761    2.114777     .172523   1.243621   2.723325
-------------+---------------------------------------------------------
mw_wkp_~9_13 |    197,761    2.117333    .1694655    1.55787   2.735872
mw_wkp_~4_13 |    197,761    2.114462    .1736769    1.16024   2.721404
mw_wkp_~5_13 |    197,761    2.112841    .1739523   1.021972   2.715742
mw_wkp_~0_13 |    197,761    2.116187    .1660876   1.760912   2.728561
mw_~_3333_13 |    197,761    2.116054    .1707632   1.512014   2.714919
-------------+---------------------------------------------------------
mw_~e3333_13 |    197,761    2.112644    .1781081   .8512771   2.723883
mw_wkp_go~13 |    197,761    2.121048    .1645227   1.717717   2.688457
mw_wkp_tr~13 |    197,761    2.113668    .1718463   1.500105   2.695763
mw_wkp_ot~13 |    197,761    2.114259    .1747059   1.066106   2.729256
mw_wkp_to~14 |    197,761    2.114711    .1721029   1.198626   2.722655
-------------+---------------------------------------------------------
mw_wkp_~9_14 |    197,761    2.117052    .1694591   1.369459   2.736814
mw_wkp_~4_14 |    197,761    2.114511     .173257    1.14611   2.720013
mw_wkp_~5_14 |    197,761    2.112725    .1728741   1.085828   2.716448
mw_wkp_~0_14 |    197,761    2.115189    .1657125   1.659895   2.735022
mw_~_3333_14 |    197,761    2.116187    .1706268    1.27901   2.716375
-------------+---------------------------------------------------------
mw_~e3333_14 |    197,761    2.113031    .1772974   .9220478   2.722252
mw_wkp_go~14 |    197,761    2.121432    .1638407   1.895516    2.70805
mw_wkp_tr~14 |    197,761    2.113458    .1717462   1.537597   2.690724
mw_wkp_ot~14 |    197,761    2.114113    .1742972   1.012266   2.734641
mw_wkp_to~15 |    197,761    2.113799    .1720296   1.272426     2.6843
-------------+---------------------------------------------------------
mw_wkp_~9_15 |    197,761    2.116179    .1695027   1.439306   2.696414
mw_wkp_~4_15 |    197,761    2.113641    .1731464   1.216833   2.685536
mw_wkp_~5_15 |    197,761    2.111657     .172809   1.151291    2.68107
mw_wkp_~0_15 |    197,761    2.114094    .1654223   1.550753   2.689313
mw_~_3333_15 |    197,761    2.115309    .1704171   1.356126   2.690777
-------------+---------------------------------------------------------
mw_~e3333_15 |    197,761    2.111838    .1770763   .9864618    2.69182
mw_wkp_go~15 |    197,761    2.121414    .1641973   1.816198   2.670133
mw_wkp_tr~15 |    197,761    2.113936    .1724708   1.540371   2.716242
mw_wkp_ot~15 |    197,761    2.112847    .1739029   1.085444   2.694545
mw_wkp_to~16 |    197,761    2.113352    .1720052   1.244324   2.687391
-------------+---------------------------------------------------------
mw_wkp_~9_16 |    197,761    2.115648    .1696553   1.391616    2.70167
mw_wkp_~4_16 |    197,761     2.11326    .1732843   1.163473   2.684705
mw_wkp_~5_16 |    197,761    2.111133    .1723632   1.211934   2.679673
mw_wkp_~0_16 |    197,761    2.112546    .1654848   1.543889   2.693111
mw_~_3333_16 |    197,761    2.114035     .171957   1.324207   2.684582
-------------+---------------------------------------------------------
mw_~e3333_16 |    197,761    2.112471    .1760486   .9636837   2.691162
mw_wkp_go~16 |    197,761    2.121439    .1641929   1.761365   2.671271
mw_wkp_tr~16 |    197,761    2.112532    .1724726    1.50332   2.715862
mw_wkp_ot~16 |    197,761    2.112575    .1740311   1.044275   2.693552
mw_wkp_to~17 |    197,761    2.114349    .1711354   1.271492   2.688884
-------------+---------------------------------------------------------
mw_wkp_~9_17 |    197,761    2.116299    .1687246   1.410909   2.704646
mw_wkp_~4_17 |    197,761    2.114423    .1723006   1.227557   2.686055
mw_wkp_~5_17 |    197,761    2.112042    .1716916   1.156366   2.678318
mw_wkp_~0_17 |    197,761    2.113381    .1649796   1.523804   2.681913
mw_~_3333_17 |    197,761    2.115587    .1691416    1.38224   2.681041
-------------+---------------------------------------------------------
mw_~e3333_17 |    197,761    2.113205    .1756346   .9871737    2.69384
mw_wkp_go~17 |    197,761    2.121602    .1640948    1.82908   2.665318
mw_wkp_tr~17 |    197,761     2.11293    .1723989   1.513893   2.721374
mw_wkp_ot~17 |    197,761    2.113807    .1726676   1.078004   2.692268
mw_wkp_to~18 |    197,761    2.113701    .1725303   1.610219   2.693405
-------------+---------------------------------------------------------
mw_wkp_~9_18 |    197,761    2.116303    .1699471   1.643204   2.708283
mw_wkp_~4_18 |    197,761    2.113743    .1737364   1.552368   2.690215
mw_wkp_~5_18 |    197,761    2.110903    .1730265   1.482997   2.681597
mw_wkp_~0_18 |    197,761    2.113503    .1647637    1.72545   2.680484
mw_~_3333_18 |    197,761     2.11595    .1697578   1.667945   2.681725
-------------+---------------------------------------------------------
mw_~e3333_18 |    197,761    2.111814    .1780053   1.390111   2.699122
mw_wkp_go~18 |    197,761    2.121408    .1638556   1.861334   2.667329
mw_wkp_tr~18 |    197,761    2.108973    .1775239   1.462239   2.728186
mw_wkp_ot~18 |    197,761    2.114128    .1733336   1.442361   2.696399
mw_wkp_tot~y |    158,041    2.092621     .148576   1.271492   2.656646
-------------+---------------------------------------------------------
m~9_timevary |    158,041    2.094997    .1460925   1.410909   2.671718
m~4_timevary |    158,041    2.092502    .1498363   1.227557   2.653376
m~5_timevary |    158,041    2.090433    .1490281   1.156366   2.644757
m~0_timevary |    158,041    2.092691    .1417238   1.571924   2.642999
mw_wkp_ear.. |    158,041    2.094297    .1468246    1.38224   2.645047
-------------+---------------------------------------------------------
mw_wkp_ear.. |    158,041    2.090885    .1534832   .9871737   2.662518
mw_wkp_goo~y |    158,041    2.100267     .140967    1.82908   2.602943
mw_wkp_tra~y |    158,041    2.090741    .1507508   1.457836   2.692696
mw_wkp_oth~y |    158,041    2.092234    .1501565   1.078004   2.655622
medDailyli~C |    148,860    179.1121    128.9684         12       2234
-------------+---------------------------------------------------------
medli~e_SFCC |    170,893    379874.6      372217      17800    6995000
medli~t_SFCC |    187,318    212.6468    208.2763   15.76577   2695.917
medli~w_tier |     94,049    132.8645    99.42843   15.82222   1672.388
medli~p_tier |    129,092    253.8545    245.4021   62.48275   2729.885
medren~e_2BR |     71,382     1774.83     916.481        475      19500
-------------+---------------------------------------------------------
medren~e_3BR |     65,676    1874.471    1501.986        595      40000
medre~e_SFCC |    170,424    1766.822    1557.824        500      50000
medren~t_2BR |     69,621    1.703064    .8434015   .5015198   12.55461
medren~t_3BR |     62,617     1.21819    .8192677   .5060225       17.5
medre~t_SFCC |    197,978    1.303812    1.033133   .1091193   23.96932
-------------+---------------------------------------------------------
Monthlylis~C |    154,730     231.081    153.6402         13       2540
NewMonthly~C |     56,926    62.24103    34.77379         11        609
 Sale_Counts |    178,604    60.58495    33.17106          0        382
     quarter |    197,978    2.542101    1.116308          1          4
year_quarter |    197,978    226.2799     9.87255        200        239
-------------+---------------------------------------------------------
    ln_rents |    197,978    .1260564    .4678614  -2.215314   3.176775
ln_emp_biz~v |    197,966    11.03427    1.381873   5.659482   13.38876
 ln_emp_info |    196,846    8.890655    1.580753   2.397895   12.38988
  ln_emp_fin |    197,954     10.0722    1.420266   2.944439   12.89542
ln_estcoun~v |    197,978    8.569249    1.254155   1.098612   10.96353
-------------+---------------------------------------------------------
ln_estcoun~o |    197,966    6.003222     1.36842          0   9.531191
ln_estcoun~n |    197,978    7.875171    1.205097   2.197225   10.33748
ln_avgwwag~v |    197,966    7.120423    .3153675   5.420535   8.461046
ln_avgwwag~o |    196,846    7.301237     .375169   5.891644   9.004791
ln_avgwwag~n |    197,954    7.274049    .3634351   6.061457   9.163982
-------------+---------------------------------------------------------
yr_entry_t~w |    197,978    2013.084      2.7304       2010       2019
baseline_s~e |    197,978    .6748225    .4684423          0          1
fullbal_sa~e |    197,978    .4008274    .4900673          0          1
weights_un~l |    189,718           1    .3035103   .1664966   3.365455
weights_ba~e |    127,628           1    .3792118   .1488978   3.870539
-------------+---------------------------------------------------------
weights_fu~l |     75,874           1    .3920062   .1435048   4.084836




(note: file ../../../drive/derived_large/estimation_samples/zipcode_months.dta 
> not found)
file ../../../drive/derived_large/estimation_samples/zipcode_months.dta saved
(note: file ../../../drive/derived_large/estimation_samples/zipcode_months.csv 
> not found)
file ../../../drive/derived_large/estimation_samples/zipcode_months.csv saved
(0 observations deleted)
       panel variable:  county_num (unbalanced)
        time variable:  year_month, 2010m1 to 2019m12
                delta:  1 month
(12 missing values generated)
(610 missing values generated)
(22 missing values generated)
(12 missing values generated)
(12 missing values generated)
(610 missing values generated)
(22 missing values generated)
(237 observations deleted)
(data already sorted by countyfips)
  variable baseline_sample was float now byte
  (1,398 bytes saved)
===============================================================================
File: ../temp/baseline_county.dta
Key: countyfips
===============================================================================
  466:2(99393):4052232618:2527939146

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
  countyfips |          0
baseline_s~e |        466           1           0          1          1




(note: file ../temp/baseline_county.dta not found)
file ../temp/baseline_county.dta saved

    Result                           # of obs.
    -----------------------------------------
    not matched                         7,758
        from master                     7,758  
        from using                          0  

    matched                            48,958  
    -----------------------------------------
(7,758 real changes made)
(21,464 real changes made)
(data now sorted by countyfips year_month)
  variable fullbal_sample was float now byte
  (170,148 bytes saved)
===============================================================================
File: ../../../drive/derived_large/estimation_samples/county_months.dta
Key: countyfips year_month
===============================================================================
  56716:154(85909):757811386:287098200

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
  countyfips |          0
  year_month |     56,716    671.0784    31.97101        600        719
  county_num |     56,716    28647.73    15943.77       1001      56025
        year |     56,716    2015.455    2.658355       2010       2019
       month |     56,716     6.61309    3.441929          1         12
-------------+---------------------------------------------------------
   statefips |          0
statefips_~m |     56,716    28.54641    15.90583          1         56
        cbsa |          0
    cbsa_num |     56,716    29735.19    12155.61      10140      99999
n_months_z~s |     56,716    96.84315    26.86998         12        120
-------------+---------------------------------------------------------
populat~2010 |     56,716    424244.9    666955.5          0    9818605
n_male_~2010 |     56,716    207844.8    327797.1          0    4839654
n_white~2010 |     56,716    289968.6    383518.1          0    4936599
n_black~2010 |     56,716    58781.05    113779.5          0    1287767
urb_pop~2010 |     56,597    .8269446    .1501677   .1866012          1
-------------+---------------------------------------------------------
n_hhlds_ce~0 |     56,716    175273.4    255846.8          0    3445076
n_hhlds_ur~0 |     56,716      161073    255663.4          0    3420978
n_hhlds_re~0 |     56,716    58517.92    110424.5          0    1696455
sh_whit~2010 |     56,597    .7506517    .1458593   .1609192   .9683796
sh_blac~2010 |     56,597    .1280459    .1302171   .0022105   .7910549
-------------+---------------------------------------------------------
sh_male~2010 |     56,597     .491266    .0107367   .4588652   .5895433
sh_hhlds_u~0 |     56,597    .8249587    .1541533   .1604094          1
sh_hhlds_r~0 |     56,597    .2975012    .0870243   .0811995   .7625533
statutory_mw |     56,716    8.024767    1.202293       7.25      15.59
      mw_res |     56,716    2.072885    .1339691   1.981001    2.74663
-------------+---------------------------------------------------------
  binding_mw |     56,716     1.49492    .5659775          1          4
binding_mw~l |     56,716    1.465407    .4988063          1          2
binding_mw~x |     56,716    1.512712    .6190122          1          4
binding_mw~n |     56,716    1.484643    .5458381          1          4
mw_wkp_to~09 |     56,716    2.075072     .133256   1.767212   2.673318
-------------+---------------------------------------------------------
mw_wkp_~9_09 |     56,716    2.074701    .1328199   1.839891    2.66908
mw_wkp_~4_09 |     56,716    2.075244    .1334851   1.764553   2.674276
mw_wkp_~5_09 |     56,716    2.074974    .1330609    1.71073   2.682501
mw_wkp_~0_09 |     56,716    2.074319     .132628   1.700987   2.679018
mw_~_3333_09 |     56,716    2.074394    .1325752   1.761385   2.673706
-------------+---------------------------------------------------------
mw_~e3333_09 |     56,716    2.076012    .1341161   1.826203   2.676492
mw_wkp_go~09 |     56,716    2.074301     .130581    1.84392   2.644641
mw_wkp_tr~09 |     56,716    2.074963    .1327513   1.905992   2.659792
mw_wkp_ot~09 |     56,716     2.07522    .1338737   1.688757   2.683148
mw_wkp_to~10 |     56,716     2.07648    .1333447   1.756176   2.673454
-------------+---------------------------------------------------------
mw_wkp_~9_10 |     56,716    2.075955    .1326923     1.8518   2.668698
mw_wkp_~4_10 |     56,716    2.076651    .1336374   1.745656   2.675307
mw_wkp_~5_10 |     56,716    2.076586    .1332356   1.700608   2.682528
mw_wkp_~0_10 |     56,716    2.075014    .1324011   1.700283   2.678897
mw_~_3333_10 |     56,716    2.075251    .1325373   1.721776    2.67404
-------------+---------------------------------------------------------
mw_~e3333_10 |     56,716     2.07791    .1344233   1.837362   2.678398
mw_wkp_go~10 |     56,716    2.074666     .130338   1.798767   2.643801
mw_wkp_tr~10 |     56,716     2.07536    .1325965   1.922663   2.659332
mw_wkp_ot~10 |     56,716    2.076927    .1340404   1.679497   2.683053
mw_wkp_to~11 |     56,716    2.076814    .1332997   1.723396   2.674503
-------------+---------------------------------------------------------
mw_wkp_~9_11 |     56,716    2.076245    .1325926   1.817656   2.666739
mw_wkp_~4_11 |     56,716    2.077012    .1336221   1.718313   2.675206
mw_wkp_~5_11 |     56,716    2.076902    .1331813   1.665809   2.681895
mw_wkp_~0_11 |     56,716    2.075252    .1323454    1.65234   2.678855
mw_~_3333_11 |     56,716    2.075496    .1324965   1.685239   2.672731
-------------+---------------------------------------------------------
mw_~e3333_11 |     56,716    2.078343    .1343733   1.818429   2.678303
mw_wkp_go~11 |     56,716    2.075211     .130266    1.80739   2.644087
mw_wkp_tr~11 |     56,716      2.0756    .1325775   1.894371    2.65919
mw_wkp_ot~11 |     56,716    2.077264    .1340155   1.631829   2.683813
mw_wkp_to~12 |     56,716    2.076904     .133243   1.746059   2.675264
-------------+---------------------------------------------------------
mw_wkp_~9_12 |     56,716    2.076199    .1325979   1.844784   2.671233
mw_wkp_~4_12 |     56,716    2.077158    .1335616   1.740758   2.675226
mw_wkp_~5_12 |     56,716    2.076951    .1330791   1.688328   2.679814
mw_wkp_~0_12 |     56,716    2.075366    .1323406   1.682079   2.680649
mw_~_3333_12 |     56,716    2.075566    .1323871   1.714264   2.673525
-------------+---------------------------------------------------------
mw_~e3333_12 |     56,716    2.078418    .1343362   1.826751   2.677715
mw_wkp_go~12 |     56,716    2.075361    .1302187   1.833494   2.644558
mw_wkp_tr~12 |     56,716    2.075777    .1325228   1.919904   2.662265
mw_wkp_ot~12 |     56,716    2.077333    .1339505   1.653786   2.684213
mw_wkp_to~13 |     56,716     2.07697    .1331385   1.772226   2.675533
-------------+---------------------------------------------------------
mw_wkp_~9_13 |     56,716    2.076241    .1324992   1.860587   2.671281
mw_wkp_~4_13 |     56,716     2.07723    .1334628   1.769584   2.675372
mw_wkp_~5_13 |     56,716    2.077035    .1329764   1.714748   2.680664
mw_wkp_~0_13 |     56,716    2.075387     .132174   1.715969   2.680937
mw_~_3333_13 |     56,716    2.075621    .1322607   1.743664   2.672683
-------------+---------------------------------------------------------
mw_~e3333_13 |     56,716    2.078468    .1342713   1.839899   2.676799
mw_wkp_go~13 |     56,716    2.075269    .1300104   1.845106   2.642219
mw_wkp_tr~13 |     56,716    2.075762    .1324383   1.933986   2.662298
mw_wkp_ot~13 |     56,716    2.077444    .1338506   1.691967   2.684771
mw_wkp_to~14 |     56,716     2.07697    .1330492   1.787261   2.674315
-------------+---------------------------------------------------------
mw_wkp_~9_14 |     56,716    2.076205    .1324139   1.867806   2.669058
mw_wkp_~4_14 |     56,716    2.077237     .133378   1.781692   2.674515
mw_wkp_~5_14 |     56,716    2.077052     .132879   1.737471   2.679431
mw_wkp_~0_14 |     56,716     2.07541    .1320948    1.75168   2.679024
mw_~_3333_14 |     56,716    2.075587    .1321353   1.762766   2.672637
-------------+---------------------------------------------------------
mw_~e3333_14 |     56,716    2.078434    .1341529   1.835876   2.677142
mw_wkp_go~14 |     56,716    2.075338    .1299223   1.834706    2.64277
mw_wkp_tr~14 |     56,716    2.075765     .132319   1.926277   2.662407
mw_wkp_ot~14 |     56,716    2.077445    .1337786   1.722501   2.683967
mw_wkp_to~15 |     56,716     2.07685    .1330596   1.804057   2.677661
-------------+---------------------------------------------------------
mw_wkp_~9_15 |     56,716    2.076048    .1325014   1.864553   2.677964
mw_wkp_~4_15 |     56,716    2.077138    .1333856   1.803332   2.677102
mw_wkp_~5_15 |     56,716    2.076915    .1328306   1.760512   2.679005
mw_wkp_~0_15 |     56,716    2.075165    .1319588   1.758676   2.681641
mw_~_3333_15 |     56,716    2.075423    .1321223   1.785358   2.673208
-------------+---------------------------------------------------------
mw_~e3333_15 |     56,716    2.078361    .1342018   1.851701   2.679329
mw_wkp_go~15 |     56,716    2.075367    .1300499   1.839877   2.645193
mw_wkp_tr~15 |     56,716    2.075735    .1324193   1.936651   2.662762
mw_wkp_ot~15 |     56,716    2.077269    .1337389     1.7417   2.686969
mw_wkp_to~16 |     56,716    2.076929    .1331319   1.796936   2.677874
-------------+---------------------------------------------------------
mw_wkp_~9_16 |     56,716    2.076078    .1326241   1.863026   2.678297
mw_wkp_~4_16 |     56,716    2.077233    .1334657   1.792837   2.677664
mw_wkp_~5_16 |     56,716    2.077036    .1328567    1.75558   2.678014
mw_wkp_~0_16 |     56,716     2.07519    .1320107   1.760052   2.680584
mw_~_3333_16 |     56,716    2.075478    .1321312   1.780974   2.673457
-------------+---------------------------------------------------------
mw_~e3333_16 |     56,716    2.078427    .1342818   1.833863   2.680042
mw_wkp_go~16 |     56,716     2.07556    .1301809   1.829601    2.64476
mw_wkp_tr~16 |     56,716    2.075757    .1324353   1.943506   2.663773
mw_wkp_ot~16 |     56,716    2.077341    .1338161   1.735083    2.68691
mw_wkp_to~17 |     56,716    2.076979    .1330263   1.803181   2.676347
-------------+---------------------------------------------------------
mw_wkp_~9_17 |     56,716    2.076175    .1323627   1.874778    2.67487
mw_wkp_~4_17 |     56,716    2.077284    .1334119   1.798185   2.676626
mw_wkp_~5_17 |     56,716    2.077033    .1327889   1.760156   2.677277
mw_wkp_~0_17 |     56,716    2.075243    .1317289   1.774734   2.677591
mw_~_3333_17 |     56,716    2.075512    .1320123   1.781541   2.671695
-------------+---------------------------------------------------------
mw_~e3333_17 |     56,716    2.078396    .1341814   1.837396   2.678596
mw_wkp_go~17 |     56,716    2.075567    .1301497   1.828998   2.641855
mw_wkp_tr~17 |     56,716    2.075798    .1323144   1.937671   2.661642
mw_wkp_ot~17 |     56,716    2.077407    .1336878   1.749226   2.685144
mw_wkp_to~18 |     56,716    2.076982    .1330325   1.800375   2.676707
-------------+---------------------------------------------------------
mw_wkp_~9_18 |     56,716    2.076148    .1323662   1.876205   2.676239
mw_wkp_~4_18 |     56,716    2.077296    .1334279   1.797753   2.676779
mw_wkp_~5_18 |     56,716    2.077043    .1327799   1.749979    2.67704
mw_wkp_~0_18 |     56,716    2.075226    .1316486   1.784507   2.676484
mw_~_3333_18 |     56,716    2.075505    .1319899   1.772296   2.672052
-------------+---------------------------------------------------------
mw_~e3333_18 |     56,716    2.078351     .134173   1.830591   2.679114
mw_wkp_go~18 |     56,716    2.075478    .1300413   1.824958   2.641039
mw_wkp_tr~18 |     56,716    2.075809    .1322831    1.93341   2.661368
mw_wkp_ot~18 |     56,716     2.07743    .1337167   1.748498   2.685539
mw_wkp_tot~y |     48,280    2.064496    .1160348   1.800375   2.617626
-------------+---------------------------------------------------------
m~9_timevary |     48,280    2.063783    .1154408   1.876205   2.616814
m~4_timevary |     48,280    2.064737    .1163538   1.797753   2.617357
m~5_timevary |     48,280    2.064612    .1158776   1.749979   2.619372
m~0_timevary |     48,280    2.063021    .1149264   1.784507   2.620184
mw_wkp_ear.. |     48,280     2.06329    .1152046   1.772296   2.610292
-------------+---------------------------------------------------------
mw_wkp_ear.. |     48,280    2.065705    .1169831   1.830591    2.61933
mw_wkp_goo~y |     48,280    2.063169    .1134695   1.824958   2.550193
mw_wkp_tra~y |     48,280    2.063366    .1154081    1.93341   2.589816
mw_wkp_oth~y |     48,280      2.0649    .1166193   1.748498   2.628648
medrentpri~C |     56,716    1.022075    .6342662   .4472472   17.05931
-------------+---------------------------------------------------------
     quarter |     56,716    2.535193    1.115753          1          4
year_quarter |     56,716     223.357    10.65642        200        239
    ln_rents |     56,716   -.0538467    .3387556  -.8046438   2.836696
ln_emp_biz~v |     56,704    9.384538    1.356228   5.659482   13.38876
 ln_emp_info |     56,106    7.172064    1.513023   2.079442   12.38988
-------------+---------------------------------------------------------
  ln_emp_fin |     56,694     8.44444    1.355711   2.944439   12.89542
ln_estcoun~v |     56,716    7.055585    1.169002   1.098612   10.96353
ln_estcoun~o |     56,704    4.453565    1.220389          0   9.531191
ln_estcoun~n |     56,716    6.446967    1.079483   2.197225   10.33748
ln_avgwwag~v |     56,704    6.933836    .3180453   5.420535   9.135509
-------------+---------------------------------------------------------
ln_avgwwag~o |     56,106    7.037167    .3495051   5.365976   9.584453
ln_avgwwag~n |     56,694    7.043474    .3164056   6.061457   9.163982
baseline_s~e |     56,716    .8632132    .3436252          0          1
fullbal_sa~e |     56,716    .4847662    .4997723          0          1




(note: file ../../../drive/derived_large/estimation_samples/county_months.dta n
> ot found)
file ../../../drive/derived_large/estimation_samples/county_months.dta saved
(note: file ../../../drive/derived_large/estimation_samples/county_months.csv n
> ot found)
file ../../../drive/derived_large/estimation_samples/county_months.csv saved

. 
end of do-file


Execute:  StataMP-64 /e do "./make_stacked_sample.do"

  ___  ____  ____  ____  ____ (R)
 /__    /   ____/   /   ____/
___/   /   /___/   /   /___/   15.1   Copyright 1985-2017 StataCorp LLC
  Statistics/Data Analysis            StataCorp
                                      4905 Lakeway Drive
     MP - Parallel Edition            College Station, Texas 77845 USA
                                      800-STATA-PC        http://www.stata.com
                                      979-696-4600        stata@stata.com
                                      979-696-4601 (fax)

Single-user 32-core Stata perpetual license:
       Serial number:  501506205566
         Licensed to:  KU Leuven FEB (CES)
                       KU Leuven

Notes:
      1.  Stata is running in batch mode.
      2.  Unicode is supported; see help unicode_advice.
      3.  More than 2 billion observations are allowed; see help obs_advice.
      4.  Maximum number of variables is set to 5000; see help set_maxvar.


running c:\ado\personal\profile.do ...

. do ./make_stacked_sample.do 

. set more off

. clear all

. adopath + ../../../lib/stata/gslab_misc/ado
  [1]  (BASE)      "C:\Program Files\Stata15\ado\base/"
  [2]  (SITE)      "C:\Program Files\Stata15\ado\site/"
  [3]              "."
  [4]  (PERSONAL)  "c:\ado\personal/"
  [5]  (PLUS)      "c:\ado\plus/"
  [6]  (OLDPLACE)  "c:\ado/"
  [7]              "../../../lib/stata/gslab_misc/ado"

. 
. program main
  1.     local in_est        "../../../drive/derived_large/estimation_samples"
  2.     local in_cbsa_month "../../../drive/derived_large/cbsa_month"
  3.     local outstub       "../../../drive/derived_large/estimation_samples"
  4.     local logfile       "../output/data_file_manifest.log"
  5. 
.     load_zipcode_data, instub(`in_est')
  6. 
.     save_data "../temp/all_zipcodes.dta", ///
>         key(zipcode year_month) log(none) replace
  7. 
.     foreach w in 3 6 9 {
  8.         build_stacked_data, instub(`in_cbsa_month') w(`w')
  9.         save_data "`outstub'/stacked_sample_window`w'.dta", ///
>             key(zipcode event_id year_month) log(`logfile') replace
 10.     }
 11. end

. 
. program load_zipcode_data
  1.     syntax, instub(str)
  2. 
.     use zipcode zipcode_num year_month year statefips cbsa         ///
>         medrentpricepsqft_SFCC ln_rents statutory_mw               ///
>         mw_res mw_wkp_tot_* ln_emp_* ln_estcount_* ln_avgwwage_*   ///
>         using "`instub'/zipcode_months.dta", clear
  3. 
.     drop if missing(medrentpricepsqft_SFCC)
  4.     drop if cbsa == "99999"
  5. 
.     xtset zipcode_num year_month
  6. end

. 
. program build_stacked_data
  1.     syntax, instub(str) w(int)
  2. 
.     use "`instub'/events.dta", clear
  3. 
.     *drop if inrange(time_since_treated, 1, `w')
.     qui levelsof event_id, local(events)
  4. 
.     foreach event of local events {
  5.         quietly {
  6.             preserve
  7.                 keep if event_id == `event'
  8. 
.                 gen event_yy = event_year - 2000
  9.                 qui sum event_yy
 10.                 local event_yy = r(mean)
 11. 
.                 merge 1:m cbsa using "../temp/all_zipcodes.dta", ///
>                     nogen keep(3)
 12. 
.                 if `event_yy' < 17 {
 13.                     rename mw_wkp_tot_`event_yy' mw_wkp_tot_baseyear 
 14.                 }
 15.                 if `event_yy' == 17 {
 16.                     gen mw_wkp_tot_baseyear = mw_wkp_tot_17 
 17.                 }
 18.                 if `event_yy' >= 18 {
 19.                     rename mw_wkp_tot_18 mw_wkp_tot_baseyear 
 20.                 }
 21. 
.                 drop event_year event_yy
 22.                 gen rel_time = year_month - event_year_month
 23.                 egen zipcode_event_id = group(zipcode event_id)
 24.                 
.                 xtset zipcode_event_id year_month
 25. 
.                 foreach var of varlist ln_rents mw_res mw_wkp_tot_17 mw_wkp_t
> ot_baseyear ///
>                                        ln_emp_* ln_estcount_* ln_avgwwage_*  
> {
 26.                     
.                     gen d_`var' = D.`var'
 27.                 }
 28.                 
.                 foreach var of varlist d_mw_res d_mw_wkp_tot_17 d_mw_wkp_tot_
> baseyear {
 29.                     forval i = 1(1)`w' {
 30.                         gen L`i'_`var' = L`i'.`var'
 31.                         gen F`i'_`var' = F`i'.`var'
 32.                     }
 33.                 }
 34.                 
.                 keep if inrange(rel_time, -`w', `w')
 35. 
.                 bysort zipcode: egen nbr_months_around_event = count(year_mon
> th)
 36.                 keep if nbr_months_around_event == 2*`w' + 1
 37. 
.                 keep zipcode zipcode_num zipcode_event_id year_month  ///
>                      cbsa statefips event_id statutory_mw             ///
>                      mw_res mw_wkp_tot_baseyear mw_wkp_tot_17 ln_* d_* L* F*
 38.                 
.                 save_data "../temp/sample_event_`event'.dta", ///
>                     key(zipcode event_id year_month) log(none) replace
 39.             restore
 40.         }
 41.     }
 42. 
.     clear
 43.     foreach event of local events{
 44.         append using "../temp/sample_event_`event'.dta"
 45.     }
 46. end

. 
. 
. main
(0 observations deleted)
(32 observations deleted)
       panel variable:  zipcode_num (unbalanced)
        time variable:  year_month, 2010m2 to 2019m12
                delta:  1 month
(data now sorted by zipcode year_month)
  (0 bytes saved)
===============================================================================
File: ../temp/all_zipcodes.dta
Key: zipcode year_month
===============================================================================
  197946:30(58324):3062723642:69720232

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
     zipcode |          0
  year_month |    197,946    679.8447    29.62245        601        719
 zipcode_num |    197,946    54556.83    29305.85       1545      99705
        year |    197,946    2016.184    2.460672       2010       2019
   statefips |          0
-------------+---------------------------------------------------------
        cbsa |          0
statutory_mw |    197,946    8.490278    1.653792       7.25         16
      mw_res |    197,946    2.122723    .1733482   1.981001   2.772589
mw_wkp_to~09 |    197,517    2.110174    .1734448   1.371012   2.691656
mw_wkp_to~10 |    197,517    2.111329    .1751857   1.416477   2.691589
-------------+---------------------------------------------------------
mw_wkp_to~11 |    197,729    2.111369     .174019   1.495337   2.707758
mw_wkp_to~12 |    197,729    2.114486    .1728335   1.247422   2.716431
mw_wkp_to~13 |    197,729    2.114786    .1725352   1.243621   2.723325
mw_wkp_to~14 |    197,729    2.114721    .1721149   1.198626   2.722655
mw_wkp_to~15 |    197,729     2.11381    .1720415   1.272426     2.6843
-------------+---------------------------------------------------------
mw_wkp_to~16 |    197,729    2.113363    .1720172   1.244324   2.687391
mw_wkp_to~17 |    197,729     2.11436     .171147   1.271492   2.688884
mw_wkp_to~18 |    197,729    2.113711    .1725422   1.610219   2.693405
mw_wkp_tot~y |    158,021    2.092628    .1485844   1.271492   2.656646
medrentpri~C |    197,946    1.303871    1.033206   .1091193   23.96932
-------------+---------------------------------------------------------
    ln_rents |    197,946     .126087    .4678929  -2.215314   3.176775
ln_emp_biz~v |    197,934    11.03479    1.381371   5.659482   13.38876
 ln_emp_info |    196,814    8.891379    1.579856   2.397895   12.38988
  ln_emp_fin |    197,922    10.07296    1.419114   2.944439   12.89542
ln_estcoun~v |    197,946    8.569811    1.253476   1.098612   10.96353
-------------+---------------------------------------------------------
ln_estcoun~o |    197,934    6.003893    1.367511          0   9.531191
ln_estcoun~n |    197,946    7.875843    1.204032   2.197225   10.33748
ln_avgwwag~v |    197,934    7.120379    .3153737   5.420535   8.461046
ln_avgwwag~o |    196,814     7.30131    .3751506   5.891644   9.004791
ln_avgwwag~n |    197,922    7.274136    .3633982   6.061457   9.163982




(note: file ../temp/all_zipcodes.dta not found)
file ../temp/all_zipcodes.dta saved
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
(note: variable event_id was byte, now int to accommodate using data's
       values)
(note: variable zipcode_event_id was byte, now float to accommodate using
       data's values)
(data now sorted by zipcode event_id year_month)
  variable zipcode_event_id was float now int
  (138,040 bytes saved)
===============================================================================
File: ../../../drive/derived_large/estimation_samples/stacked_sample_window3.dt
> a
Key: zipcode event_id year_month
===============================================================================
  69020:52(61205):4290316539:3333305434

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
     zipcode |          0
    event_id |     69,020      437.77    162.1536          1        618
  year_month |     69,020    682.7772     26.9025        609        717
        cbsa |          0
 zipcode_num |     69,020    56787.34    32731.41       1545      99705
-------------+---------------------------------------------------------
   statefips |          0
statutory_mw |     69,020    9.518746    1.958583       7.25         16
      mw_res |     69,020    2.233583    .1951367   1.981001   2.772589
mw_wkp_to~17 |     68,929    2.227803    .1817979   1.637724   2.688676
mw_wkp_tot~r |     68,929    2.228286    .1813159   1.645025   2.693178
-------------+---------------------------------------------------------
    ln_rents |     69,020    .3653062    .5447265  -.8414373   3.132185
ln_emp_biz~v |     69,020    11.39976    1.244901   6.198479    13.3753
 ln_emp_info |     68,955    9.344654    1.523794   3.433987   12.38988
  ln_emp_fin |     69,018    10.40626    1.289106   6.008813   12.89542
ln_estcoun~v |     69,020    8.944191    1.104821   4.521789   10.96353
-------------+---------------------------------------------------------
ln_estcoun~o |     69,020    6.443802    1.328298   2.079442   9.531191
ln_estcoun~n |     69,020    8.205612    1.123911   4.382027   10.33748
ln_avgwwag~v |     69,020    7.229668    .3410148   6.253829   8.461046
ln_avgwwag~o |     68,955    7.465028    .4230969   6.011267   9.004791
ln_avgwwag~n |     69,018    7.408091    .4160513   6.318968   9.163982
-------------+---------------------------------------------------------
zipcode_ev~d |     69,020    42.18955    37.95841          1        168
  d_ln_rents |     68,923    .0028578    .0342863  -.1955121   .1651244
    d_mw_res |     68,923    .0062456    .0231363  -.2903381   .2412502
d_mw_wkp_~17 |     68,833    .0062821     .020528  -.0877542   .2143087
d_mw_wkp_t~r |     68,833    .0062876    .0205421  -.0862174   .2143087
-------------+---------------------------------------------------------
d_ln_emp_b~v |     68,923    .0025875     .016669    -.25245   .3948364
d_ln_emp_i~o |     68,837    .0006735    .0320256  -.7435412   .6737289
d_ln_emp_fin |     68,921    .0016213    .0126698  -.5540133   .2210426
d_ln_estco~v |     68,923    .0035774    .0115992   -.115449   .0946836
d_ln_estco~o |     68,923    .0047016    .0204403  -.2876821   .3254225
-------------+---------------------------------------------------------
d_ln_estco~n |     68,923    .0030612    .0118933   -.482594   .5102034
d_ln_avgww~v |     68,923    .0060308    .0767948  -.9705091   1.036364
d_ln_avgww~o |     68,837    .0002327    .0987848  -1.326556   1.325468
d_ln_avgww~n |     68,921    .0028509    .1391815  -.9973412    .756268
 L1_d_mw_res |     68,673    .0060474    .0227616  -.2903381   .2412502
-------------+---------------------------------------------------------
 F1_d_mw_res |     69,020    .0061165    .0228887  -.2903381   .2412502
 L2_d_mw_res |     68,218    .0061038    .0227674          0   .2412502
 F2_d_mw_res |     69,020    .0061202    .0228928  -.2903381   .2412502
 L3_d_mw_res |     67,482    .0073476    .0247776          0   .2412502
 F3_d_mw_res |     68,261    .0071879    .0246542  -.2903381   .2412502
-------------+---------------------------------------------------------
L1_d_mw_w~17 |     68,584    .0060883    .0203538  -.0877542   .2143087
F1_d_mw_w~17 |     68,929    .0060958    .0203985  -.0877542   .2143087
L2_d_mw_w~17 |     68,130    .0061447    .0204079  -.0002345   .2143087
F2_d_mw_w~17 |     68,929    .0060982    .0203996  -.0877542   .2143087
L3_d_mw_w~17 |     67,397    .0074089    .0218445  -.0002345   .2143087
-------------+---------------------------------------------------------
F3_d_mw_w~17 |     68,170    .0071861    .0215853  -.0878919   .2143087
L1_d_mw_wk~r |     68,584    .0060944    .0203691  -.0862174   .2143087
F1_d_mw_wk~r |     68,929     .006099    .0204089  -.0862174   .2143087
L2_d_mw_wk~r |     68,130    .0061506    .0204236  -.0002344   .2143087
F2_d_mw_wk~r |     68,929    .0061014    .0204101  -.0862174   .2143087
-------------+---------------------------------------------------------
L3_d_mw_wk~r |     67,397    .0074144    .0218593  -.0002344   .2143087
F3_d_mw_wk~r |     68,170     .007189    .0215957  -.0899099   .2143087




(note: file ../../../drive/derived_large/estimation_samples/stacked_sample_wind
> ow3.dta not found)
file ../../../drive/derived_large/estimation_samples/stacked_sample_window3.dta
>  saved
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
(note: variable event_id was byte, now int to accommodate using data's
       values)
(note: variable zipcode_event_id was byte, now float to accommodate using
       data's values)
(data now sorted by zipcode event_id year_month)
  variable zipcode_event_id was float now int
  (224,796 bytes saved)
===============================================================================
File: ../../../drive/derived_large/estimation_samples/stacked_sample_window6.dt
> a
Key: zipcode event_id year_month
===============================================================================
  112398:70(87837):873157574:4062068320

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
     zipcode |          0
    event_id |    112,398    433.9253    155.9198          1        617
  year_month |    112,398    681.3097    25.44074        606        716
        cbsa |          0
 zipcode_num |    112,398    56714.68    32449.96       1545      99705
-------------+---------------------------------------------------------
   statefips |          0
statutory_mw |    112,398    9.368027    1.806734       7.25         16
      mw_res |    112,398    2.220091    .1822799   1.981001   2.772589
mw_wkp_to~17 |    112,242    2.214369    .1712866   1.637724    2.68888
mw_wkp_tot~r |    112,242    2.214885    .1708616    1.64501   2.693379
-------------+---------------------------------------------------------
    ln_rents |    112,398    .3434195    .5359402  -.8414373   3.100092
ln_emp_biz~v |    112,398    11.38165    1.236177   6.198479   13.36667
 ln_emp_info |    112,288    9.316678    1.502347   4.043051   12.38988
  ln_emp_fin |    112,392    10.39577    1.284917   6.008813   12.89351
ln_estcoun~v |    112,398    8.930932    1.097461   4.521789   10.93852
-------------+---------------------------------------------------------
ln_estcoun~o |    112,398    6.414607    1.301853   2.079442   9.488881
ln_estcoun~n |    112,398    8.191226      1.1129   4.382027   10.31685
ln_avgwwag~v |    112,398    7.197045    .3376977   6.253829   8.461046
ln_avgwwag~o |    112,288    7.439743    .4211281   5.891644   9.004791
ln_avgwwag~n |    112,392    7.364987    .4025806   6.318968   9.163982
-------------+---------------------------------------------------------
zipcode_ev~d |    112,398    41.66227    37.78618          1        168
  d_ln_rents |    112,132    .0025859     .033513  -.1955121   .1653653
    d_mw_res |    112,132     .004737    .0203362  -.2903381   .2412502
d_mw_wkp_~17 |    111,978     .004815    .0178232  -.0878919   .2143087
d_mw_wkp_t~r |    111,978    .0048178    .0178355  -.0899099   .2143087
-------------+---------------------------------------------------------
d_ln_emp_b~v |    112,132    .0019814    .0158718  -.2854004   .3948364
d_ln_emp_i~o |    111,995    .0002043     .030834  -.7435412   .6737289
d_ln_emp_fin |    112,124    .0013343    .0118965  -.5540133   .2210426
d_ln_estco~v |    112,132    .0029407    .0111313  -.1546545   .0946836
d_ln_estco~o |    112,132    .0039197    .0187687  -.2876821   .3254225
-------------+---------------------------------------------------------
d_ln_estco~n |    112,132    .0026664    .0108089   -.482594   .5102034
d_ln_avgww~v |    112,132    .0016776     .063057  -.9705091   1.036364
d_ln_avgww~o |    111,995    .0044145     .091618  -1.326556   1.693995
d_ln_avgww~n |    112,124    .0027981    .1182514  -.9973412   1.088082
 L1_d_mw_res |    111,738    .0041206     .019017  -.2903381   .2412502
-------------+---------------------------------------------------------
 F1_d_mw_res |    112,398    .0041819    .0191408  -.2903381   .2412502
 L2_d_mw_res |    111,211    .0041427    .0190674  -.2903381   .2412502
 F2_d_mw_res |    112,398    .0041877    .0191549  -.2903381   .2412502
 L3_d_mw_res |    110,552    .0042667    .0193443  -.2903381   .2412502
 F3_d_mw_res |    112,398    .0042693    .0193295  -.2903381   .2412502
-------------+---------------------------------------------------------
 L4_d_mw_res |    109,794    .0041774    .0191372  -.2903381   .2412502
 F4_d_mw_res |    112,335     .004198    .0191575  -.2903381   .2412502
 L5_d_mw_res |    108,793    .0043404    .0195399          0   .2412502
 F5_d_mw_res |    112,272    .0042156    .0191795  -.2903381   .2412502
 L6_d_mw_res |    107,275     .006259    .0231941          0   .2412502
-------------+---------------------------------------------------------
 F6_d_mw_res |    110,624    .0059855    .0219213  -.2903381   .2412502
L1_d_mw_w~17 |    111,586    .0041786    .0168864  -.0877542   .2143087
F1_d_mw_w~17 |    112,242    .0042189    .0168685  -.0878919   .2143087
L2_d_mw_w~17 |    111,061    .0042008    .0169267  -.0877542   .2143087
F2_d_mw_w~17 |    112,242     .004225      .01688  -.0878919   .2143087
-------------+---------------------------------------------------------
L3_d_mw_w~17 |    110,405    .0043293    .0170811  -.0877542   .2143087
F3_d_mw_w~17 |    112,242    .0043317    .0169794  -.0878919   .2143087
L4_d_mw_w~17 |    109,650     .004244    .0169988  -.0877542   .2143087
F4_d_mw_w~17 |    112,179    .0042267    .0168846  -.0878919   .2143087
L5_d_mw_w~17 |    108,652    .0044098    .0174117  -.0002345   .2143087
-------------+---------------------------------------------------------
F5_d_mw_w~17 |    112,116    .0042492    .0169047  -.0878919   .2143087
L6_d_mw_w~17 |    107,138    .0063171    .0207147  -.0002345   .2143087
F6_d_mw_w~17 |    110,473    .0060155    .0192545  -.0878919   .2143087
L1_d_mw_wk~r |    111,586     .004182    .0168995  -.0862174   .2143087
F1_d_mw_wk~r |    112,242    .0042217    .0168807  -.0899099   .2143087
-------------+---------------------------------------------------------
L2_d_mw_wk~r |    111,061    .0042041    .0169398  -.0862174   .2143087
F2_d_mw_wk~r |    112,242    .0042281    .0168927  -.0899099   .2143087
L3_d_mw_wk~r |    110,405    .0043322     .017094  -.0862174   .2143087
F3_d_mw_wk~r |    112,242    .0043356    .0169928  -.0899099   .2143087
L4_d_mw_wk~r |    109,650    .0042473    .0170128  -.0862174   .2143087
-------------+---------------------------------------------------------
F4_d_mw_wk~r |    112,179    .0042294    .0168957  -.0899099   .2143087
L5_d_mw_wk~r |    108,652    .0044133    .0174269  -.0002684   .2143087
F5_d_mw_wk~r |    112,116    .0042517    .0169158  -.0899099   .2143087
L6_d_mw_wk~r |    107,138    .0063225    .0207369  -.0002684   .2147717
F6_d_mw_wk~r |    110,473    .0060201     .019269  -.0899099   .2143087




(note: file ../../../drive/derived_large/estimation_samples/stacked_sample_wind
> ow6.dta not found)
file ../../../drive/derived_large/estimation_samples/stacked_sample_window6.dta
>  saved
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
(data now sorted by zipcode event_id year_month)
  variable zipcode_event_id was float now int
  (308,522 bytes saved)
===============================================================================
File: ../../../drive/derived_large/estimation_samples/stacked_sample_window9.dt
> a
Key: zipcode event_id year_month
===============================================================================
  154261:88(70284):3691719879:1436007

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
     zipcode |          0
    event_id |    154,261    436.7734    152.9099          3        617
  year_month |    154,261    681.5247    25.45591        603        719
        cbsa |          0
 zipcode_num |    154,261    56162.88     32418.1       1545      99705
-------------+---------------------------------------------------------
   statefips |          0
statutory_mw |    154,261    9.350794    1.811299       7.25         16
      mw_res |    154,261    2.218199     .182298   1.981001   2.772589
mw_wkp_to~17 |    154,071    2.212231    .1715542   1.728077    2.68888
mw_wkp_tot~r |    154,071    2.212755    .1711553   1.731965   2.693386
-------------+---------------------------------------------------------
    ln_rents |    154,261    .3438918    .5389177  -.8414373   3.118553
ln_emp_biz~v |    154,261    11.39339    1.231365   6.198479    13.3753
 ln_emp_info |    154,113    9.324475    1.492504   3.637586   12.38988
  ln_emp_fin |    154,253    10.41103    1.282905   6.008813   12.89542
ln_estcoun~v |    154,261    8.944691    1.092138   4.521789   10.96353
-------------+---------------------------------------------------------
ln_estcoun~o |    154,261    6.424238     1.29335   2.079442   9.531191
ln_estcoun~n |    154,261    8.204059    1.108745   4.356709   10.33748
ln_avgwwag~v |    154,261    7.191257    .3359256   6.253829   8.461046
ln_avgwwag~o |    154,113    7.431943    .4156679   5.891644   9.004791
ln_avgwwag~n |    154,253    7.353719    .3973397   6.318968   9.163982
-------------+---------------------------------------------------------
zipcode_ev~d |    154,261    42.09533    37.97528          1        168
  d_ln_rents |    154,129    .0023417     .033074  -.1955121   .1645665
    d_mw_res |    154,129    .0034335    .0174831  -.2903381   .2412502
d_mw_wkp_~17 |    153,940    .0035018      .01526  -.0878919   .2143087
d_mw_wkp_t~r |    153,940    .0035039     .015271  -.0899099   .2143087
-------------+---------------------------------------------------------
d_ln_emp_b~v |    154,129    .0027115    .0149394  -.2854004   .3948364
d_ln_emp_i~o |    153,951    .0001279     .029767  -.7435412   .5844231
d_ln_emp_fin |    154,119    .0016594    .0110966  -.5540133   .2210426
d_ln_estco~v |    154,129    .0032465    .0105509  -.1546545   .0946836
d_ln_estco~o |    154,129    .0040232    .0176564  -.2876821   .2980447
-------------+---------------------------------------------------------
d_ln_estco~n |    154,129    .0028446    .0101101   -.482594   .5102034
d_ln_avgww~v |    154,129    .0043591    .0667869  -.9705091   1.036364
d_ln_avgww~o |    153,951    .0000109    .0911291   -1.67808   1.693995
d_ln_avgww~n |    154,119   -.0028305    .1242909  -.9973412   1.088082
 L1_d_mw_res |    153,898    .0033878    .0173768  -.2903381   .2412502
-------------+---------------------------------------------------------
 F1_d_mw_res |    154,201    .0033607    .0172991  -.2903381   .2412502
 L2_d_mw_res |    153,424    .0034752    .0176816  -.2903381   .2412502
 F2_d_mw_res |    154,141    .0033687    .0173049  -.2903381   .2412502
 L3_d_mw_res |    152,433    .0048743    .0208024  -.2903381   .2412502
 F3_d_mw_res |    152,553    .0045746    .0194843  -.2903381   .2412502
-------------+---------------------------------------------------------
 L4_d_mw_res |    151,306    .0045117    .0200611  -.2903381   .2412502
 F4_d_mw_res |    150,866    .0042616    .0188428  -.2903381   .2412502
 L5_d_mw_res |    150,074    .0045657    .0201546  -.2903381   .2412502
 F5_d_mw_res |    149,179    .0043114    .0189824  -.2903381   .2412502
 L6_d_mw_res |    148,746    .0046347    .0203002  -.2903381   .2412502
-------------+---------------------------------------------------------
 F6_d_mw_res |    147,430    .0044117     .019212  -.2903381   .2412502
 L7_d_mw_res |    147,309    .0046129    .0202413  -.2903381   .2412502
 F7_d_mw_res |    145,681    .0044186    .0191968  -.2903381   .2412502
 L8_d_mw_res |    145,758    .0046697    .0203101          0   .2412502
 F8_d_mw_res |    143,932    .0044729    .0193075  -.2903381   .2412502
-------------+---------------------------------------------------------
 L9_d_mw_res |    143,974    .0050017    .0209984          0   .2412502
 F9_d_mw_res |    141,615    .0049053    .0202892  -.2903381   .2412502
L1_d_mw_w~17 |    153,710    .0034423    .0152085  -.0878919   .2143087
F1_d_mw_w~17 |    154,011    .0034266    .0151666  -.0878919   .2143087
L2_d_mw_w~17 |    153,237    .0035318    .0154998  -.0878919   .2143087
-------------+---------------------------------------------------------
F2_d_mw_w~17 |    153,951    .0034394    .0151761  -.0878919   .2143087
L3_d_mw_w~17 |    152,248    .0049329    .0184114  -.0878919   .2143087
F3_d_mw_w~17 |    152,367    .0046462    .0170789  -.0878919   .2143087
L4_d_mw_w~17 |    151,124     .004559    .0179172  -.0877542   .2143087
F4_d_mw_w~17 |    150,684    .0043128    .0166229  -.0878919   .2143087
-------------+---------------------------------------------------------
L5_d_mw_w~17 |    149,895    .0046126    .0179986  -.0877542   .2143087
F5_d_mw_w~17 |    149,001    .0043626    .0167163  -.0878919   .2143087
L6_d_mw_w~17 |    148,570    .0046988     .018111  -.0877542   .2143087
F6_d_mw_w~17 |    147,256    .0044626     .016873  -.0878919   .2143087
L7_d_mw_w~17 |    147,136    .0046796     .018133  -.0877542   .2143087
-------------+---------------------------------------------------------
F7_d_mw_w~17 |    145,511    .0044455    .0169029  -.0878919   .2143087
L8_d_mw_w~17 |    145,588    .0047366      .01822  -.0002345   .2143087
F8_d_mw_w~17 |    143,766    .0044987    .0169981  -.0878919   .2143087
L9_d_mw_w~17 |    143,808    .0050759    .0187975  -.0002345   .2143087
F9_d_mw_w~17 |    141,453    .0049345    .0177955  -.0878919   .2143087
-------------+---------------------------------------------------------
L1_d_mw_wk~r |    153,710    .0034438     .015219  -.0899099   .2143087
F1_d_mw_wk~r |    154,011    .0034291    .0151784  -.0899099   .2143087
L2_d_mw_wk~r |    153,237    .0035333    .0155107  -.0899099   .2143087
F2_d_mw_wk~r |    153,951    .0034418    .0151877  -.0899099   .2143087
L3_d_mw_wk~r |    152,248    .0049362    .0184299  -.0899099   .2147717
-------------+---------------------------------------------------------
F3_d_mw_wk~r |    152,367    .0046499    .0170932  -.0899099   .2143087
L4_d_mw_wk~r |    151,124    .0045624    .0179363  -.0862174   .2147717
F4_d_mw_wk~r |    150,684    .0043169    .0166403  -.0899099   .2143087
L5_d_mw_wk~r |    149,895    .0046161    .0180179  -.0862174   .2147717
F5_d_mw_wk~r |    149,001     .004367    .0167337  -.0899099   .2143087
-------------+---------------------------------------------------------
L6_d_mw_wk~r |    148,570    .0047029    .0181312  -.0862174   .2147717
F6_d_mw_wk~r |    147,256    .0044668    .0168895  -.0899099   .2143087
L7_d_mw_wk~r |    147,136     .004684    .0181539  -.0862174   .2147717
F7_d_mw_wk~r |    145,511    .0044488    .0169178  -.0899099   .2143087
L8_d_mw_wk~r |    145,588    .0047409    .0182412  -.0002684   .2147717
-------------+---------------------------------------------------------
F8_d_mw_wk~r |    143,766     .004502    .0170131  -.0899099   .2143087
L9_d_mw_wk~r |    143,808    .0050797    .0188166  -.0002684   .2147717
F9_d_mw_wk~r |    141,453    .0049374    .0178099  -.0899099   .2143087




(note: file ../../../drive/derived_large/estimation_samples/stacked_sample_wind
> ow9.dta not found)
file ../../../drive/derived_large/estimation_samples/stacked_sample_window9.dta
>  saved

. 
end of do-file

 make.py ended: 2022-03-15 08:08:02
