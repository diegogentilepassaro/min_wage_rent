
 make.py started: 2023-04-21 13:11:46 C:\Users\shermo\Documents\GitHub\min_wage_rent\derived\estimation_samples\code 




Execute:  StataMP-64 /e do "./make_main_samples.do"

  ___  ____  ____  ____  ____ (R)
 /__    /   ____/   /   ____/
___/   /   /___/   /   /___/   15.1   Copyright 1985-2017 StataCorp LLC
  Statistics/Data Analysis            StataCorp
                                      4905 Lakeway Drive
     MP - Parallel Edition            College Station, Texas 77845 USA
                                      800-STATA-PC        http://www.stata.com
                                      979-696-4600        stata@stata.com
                                      979-696-4601 (fax)

Single-user 32-core Stata perpetual license:
       Serial number:  501506205566
         Licensed to:  KU Leuven FEB (CES)
                       KU Leuven

Notes:
      1.  Stata is running in batch mode.
      2.  Unicode is supported; see help unicode_advice.
      3.  More than 2 billion observations are allowed; see help obs_advice.
      4.  Maximum number of variables is set to 5000; see help set_maxvar.


running c:\ado\personal\profile.do ...

. do ./make_main_samples.do 

. set more off

. clear all

. version 15

. adopath + ../../../lib/stata/gslab_misc/ado
  [1]  (BASE)      "C:\Program Files\Stata15\ado\base/"
  [2]  (SITE)      "C:\Program Files\Stata15\ado\site/"
  [3]              "."
  [4]  (PERSONAL)  "c:\ado\personal/"
  [5]  (PLUS)      "c:\ado\plus/"
  [6]  (OLDPLACE)  "c:\ado/"
  [7]              "../../../lib/stata/gslab_misc/ado"

. 
. program main
  1.     local in_zip_mth   "../../../drive/derived_large/zipcode_month"
  2.     local in_cty_mth   "../../../drive/derived_large/county_month"
  3.     local in_zipcode   "../../../drive/derived_large/zipcode"
  4.     local outstub      "../../../drive/derived_large/estimation_samples"
  5.     local logfile      "../output/data_file_manifest.log"
  6. 
.     local rent_var          "medrentpricepsqft"
  7.     local rentvar_stubs     "SFCC SF CC Studio 1BR 2BR 3BR 4BR 5BR MFdxtx 
> Mfr5Plus"
  8. 
.     local start_ym         "2010m1"
  9.     local end_ym           "2020m6"
 10.     local fullbal_start_ym "2015m1"
 11.     #delimit ;
delimiter now ;
.     local target_vars  "sh_hhlds_renteroccup_cens2010 
>                         sh_workers_under1250_2014 sh_residents_under1250_2014
> ";
 12.     #delimit cr
delimiter now cr
. 
.     * Zipcode-months
.     prepare_zori_data, instub(`in_zip_mth') target_ym("2015m9")            //
> /
>         start_ym(`start_ym') end_ym(`end_ym')
 13. 
.     save "../temp/zori_data.dta", replace
 14.     
.     create_unbalanced_panel, instub(`in_zip_mth')                           /
> //
>         geo(zipcode) rent_var(`rent_var') stubs(`rentvar_stubs')            /
> //
>         start_ym(`start_ym') end_ym(`end_ym')
 15. 
.     gen_vars, rent_var(`rent_var') stubs(`rentvar_stubs') geo(zipcode)
 16. 
.     foreach stub of local rentvar_stubs {
 17. 
.         gen_date_of_entry, rent_var(`rent_var') stub(`stub')
 18. 
.         flag_samples, instub(`in_zip_mth') geo(zipcode) geo_name(zipcode)    
> ///
>             rent_var(`rent_var') stub(`stub') target_ym(`fullbal_start_ym')
 19.     }
 20.             
.     merge 1:1 zipcode year_month using "../temp/zori_data.dta",              
> ///
>         nogen assert(1 2 3) keep(1 2 3)
 21. 
.     compute_weights, instub(`in_zipcode') target_vars(`target_vars')
 22.     merge 1:1 zipcode year_month using "../temp/weights.dta",             
>    ///
>        nogen assert(2 3) keep(3)
 23. 
.     save_data "`outstub'/zipcode_months.dta", key(zipcode year_month)        
> ///
>         replace log(`logfile')
 24.     export delimited "`outstub'/zipcode_months.csv", replace
 25. 
.     create_monthly_listings_panel, instub(`in_zip_mth')                      
> ///
>         geo(zipcode) start_ym(`start_year_month') end_ym(`end_year_month')
 26.     
.     save_data "`outstub'/zipcode_months_listings.dta", key(zipcode year_month
> ) ///
>         replace log(`logfile')
 27.     
.     * County-months
.     create_unbalanced_panel, instub(`in_cty_mth')                            
> ///
>         geo(county) rent_var(`rent_var')                                     
> ///
>         start_ym(`start_year_month') end_ym(`end_year_month')
 28. 
.     gen_vars, rent_var(`rent_var') geo(county)
 29. 
.     flag_samples, instub(`in_cty_mth') geo(county) geo_name(countyfips)      
> ///
>         rent_var(`rent_var') stub(SFCC) target_ym(`fullbal_start_year_month')
 30. 
.     save_data "`outstub'/county_months.dta", key(countyfips year_month)      
> ///
>         replace log(`logfile')
 31.     export delimited "`outstub'/county_months.csv", replace
 32. end

. 
. program prepare_zori_data
  1.     syntax, instub(str) target_ym(str) start_ym(str) end_ym(str) [w(int 6)
> ]
  2. 
.     use zipcode year_month zori_2023                                     ///
>         using "`instub'/zipcode_month_panel.dta"                         ///
>         if inrange(year_month, `=tm(`start_ym')', `=tm(`end_ym')'), clear
  3.             
.     destring_geographies
  4.     xtset zipcode_num year_month
  5. 
.     keep if !missing(F`w'.zori_2023) & !missing(L`w'.zori_2023)
  6.     
.     preserve
  7.         keep if year_month == `=tm(`target_ym')'
  8.         keep zipcode
  9.         gen fullbal_sample_zori23 = 1
 10. 
.         tempfile fullbal_zori
 11.         save    `fullbal_zori', replace
 12.     restore
 13. 
.     merge m:1 zipcode using `fullbal_zori', nogen assert(1 3) keep(1 3)
 14.     replace fullbal_sample_zori23 = 0 if year_month < `=tm(`target_ym')' &
>  !missing(zori_2023)
 15.     replace fullbal_sample_zori23 = 0 if missing(fullbal_sample_zori23)
 16. 
.     gen_date_of_entry, rent_var(zori_2023) stub(zori2023)
 17. 
.     drop zipcode_num
 18.     gen ln_zori_23 = log(zori_2023)
 19. end

. 
. program create_unbalanced_panel
  1.     syntax, instub(str) geo(str) rent_var(str) [stubs(str)]      ///
>             start_ym(str) end_ym(str) [w(int 6)]
  2.     
.     use "`instub'/`geo'_month_panel.dta" ///
>         if inrange(year_month, `=tm(`start_ym')', `=tm(`end_ym')'), clear
  3. 
.     destring_geographies
  4.     
.     if "`geo'"=="county" {
  5.         keep if !missing(`rent_var'_SFCC)
  6. 
.         xtset county_num year_month
  7.     }
  8.     else {
  9.         xtset zipcode_num year_month
 10. 
.         local j = 0
 11.         foreach stub of local stubs {
 12.             if `j'==0 {
 13.                 local if_statement "if !missing(`rent_var'_`stub')"
 14.             }
 15.             else {
 16.                 local if_statement "`if_statement' | !missing(`rent_var'_`
> stub')"
 17.             }
 18.             
.             forvalues i = 1(1)`w' {
 19.                 local if_statement "`if_statement' | !missing(F`i'.`rent_v
> ar'_`stub') | !missing(L`i'.`rent_var'_`stub')"
 20.             }
 21.             local j = `j' + 1
 22.         }
 23. 
.         keep `if_statement'
 24.     }
 25. 
.     drop_vars
 26. end

. 
. program gen_vars
  1.     syntax, rent_var(str) [stubs(str)] geo(str)
  2. 
.     gen ln_rents = log(`rent_var'_SFCC)
  3. 
.     if "`geo'" == "zipcode"{
  4.         foreach stub of local stubs {
  5.             if "`stub'"!="SFCC" {
  6.                 gen ln_rents_`stub' = log(medrentpricepsqft_`stub')
  7.             }
  8.         }
  9.     }
 10. 
.     foreach ctrl_type in emp estcount avgwwage {
 11.         gen ln_`ctrl_type'_bizserv = log(`ctrl_type'_bizserv)
 12.         gen ln_`ctrl_type'_info    = log(`ctrl_type'_info)
 13.         gen ln_`ctrl_type'_fin     = log(`ctrl_type'_fin)
 14.         drop `ctrl_type'_*
 15.     }
 16. end

. 
. program gen_date_of_entry
  1.     syntax, rent_var(str) stub(str)
  2. 
.     preserve
  3.         if "`rent_var'"=="zori_2023" {
  4.             keep if !missing(zori_2023)
  5.         }
  6.         else {
  7.             keep if !missing(`rent_var'_`stub')
  8.         }
  9.         collapse (min) ym_entry_to_zillow_`stub' = year_month, by(zipcode)
 10. 
.         gen     yr_entry_to_zillow_`stub'  = year(dofm(ym_entry_to_zillow_`st
> ub'))
 11.         gen     qtr_entry_to_zillow_`stub' = quarter(dofm(ym_entry_to_zill
> ow_`stub'))
 12.         replace qtr_entry_to_zillow_`stub' = yq(yr_entry_to_zillow_`stub',
>  qtr_entry_to_zillow_`stub')
 13. 
.         drop ym_entry_to_zillow_`stub'
 14.         save "../temp/ym_entry_to_zillow_`stub'.dta", replace
 15.     restore
 16.     merge m:1 zipcode using "../temp/ym_entry_to_zillow_`stub'.dta", ///
>         nogen assert(1 3)
 17. end

. 
. program flag_samples
  1.     syntax, instub(str) geo(str) geo_name(str) ///
>         rent_var(str) stub(str) target_ym(str)
  2. 
.     preserve
  3.         clear
  4.         use year_month `geo_name' `rent_var'_`stub'    ///
>             using "`instub'/`geo'_month_panel.dta"     ///
>             if !missing(`rent_var'_`stub')
  5.         keep if year_month == `=tm(`target_ym')'
  6.         keep `geo_name'
  7.         gen fullbal_sample_`stub' = 1
  8. 
.         save_data "../temp/fullbal_`geo'.dta", key(`geo_name') ///
>             replace log(none)
  9.     restore
 10.     
.     merge m:1 `geo_name' using "../temp/fullbal_`geo'.dta", ///
>         nogen assert(1 3) keep(1 3)
 11. 
.     replace fullbal_sample_`stub' = 0 if year_month < `=tm(`target_ym')' & !m
> issing(`rent_var'_`stub')
 12.     replace fullbal_sample_`stub' = 0 if missing(fullbal_sample_`stub')
 13.     replace fullbal_sample_`stub' = . if missing(`rent_var'_`stub')
 14. 
.     gen     unbalanced_sample_`stub' = 1
 15.     replace unbalanced_sample_`stub' = . if missing(`rent_var'_`stub')
 16. end

. 
. program compute_weights
  1.     syntax, instub(str) target_vars(str) [thresh(real 0.2) stub(str)]
  2.     
.     if "`stub'"=="" {
  3.         local stub "SFCC"
  4.     }
  5.     
.     preserve
  6.         use zipcode `target_vars' urban_cbsa using "`instub'/zipcode_cross
> .dta", clear
  7. 
.         keep if urban_cbsa
  8. 
.         foreach var of local target_vars {
  9.             qui sum `var'
 10.             local var_mean = r(mean)
 11.             local target_means "`target_means' `var_mean'"
 12.         }
 13.     restore
 14.     
.     preserve
 15.         merge m:1 zipcode using "`instub'/zipcode_cross.dta", ///
>                 assert(2 3) keep(3) keepusing(`target_vars' urban_cbsa)
 16.                 
.         ebalance `target_vars' if unbalanced_sample_`stub', manualtargets(`ta
> rget_means')
 17.         rename _webal weights_unbalanced
 18.         
.         ebalance `target_vars' if fullbal_sample_`stub', manualtargets(`targe
> t_means')
 19.         rename _webal weights_fullbal
 20.         
.         keep zipcode year_month weights_unbalanced weights_fullbal
 21.         save "../temp/weights.dta", replace
 22.     restore
 23. end

. 
. program drop_vars
  1.     foreach var in pctlistings_pricedown_SFCC SalesPrevForeclosed_Share //
> /
>                    zhvi_2BR zhvi_SFCC zhvi_C zhvi_SF Sale_Counts { //  zri_SF
> CCMF zri_MF zori_2023
  2.         cap drop `var'
  3.     }
  4. 
.     cap drop Monthly* NewMonthly*
  5.     cap drop medlistingprice*
  6.     cap drop medDailyli*
  7. end

. 
. program create_monthly_listings_panel
  1.     syntax, instub(str) geo(str) start_ym(str) end_ym(str) [w(int 6)]
  2. 
.     use "`instub'/zipcode_month_panel.dta" ///
>         if inrange(year_month, `=tm(`start_ym')', `=tm(`end_ym')'), clear
  3. 
.     local SFCC_vars Monthlylistings_NSA_SFCC medlistingprice_SFCC medlistingp
> ricepsqft_SFCC pctlistings_pricedown_SFCC
  4.     keep zipcode statefips cbsa place_code countyfips year_month ///
>         `SFCC_vars' mw_res mw_wkp_tot_timevary mw_wkp_*_17
  5.     
.     destring_geographies
  6.     xtset zipcode_num year_month
  7. 
.     local if_statement "if !missing(Monthlylistings_NSA_SFCC)"
  8.     foreach var of local SFCC_vars {
  9.         forvalues i = 1(1)`w' {
 10.             local if_statement "`if_statement' | !missing(F`i'.`var') | !m
> issing(L`i'.`var')"
 11.         }
 12.     }
 13.     keep `if_statement'
 14. 
.     gen ln_monthly_listings = log(Monthlylistings_NSA_SFCC)
 15.     gen ln_prices_psqft     = log(medlistingpricepsqft_SFCC)
 16. 
.     local target_ym = "2013m1"
 17.     foreach var in Monthlylistings_NSA_SFCC medlistingpricepsqft_SFCC {
 18.         preserve
 19.             keep if !missing(`var')
 20.             
.             gcollapse (min) min_year_month = year_month, by(zipcode)
 21.             keep if min_year_month <= `=tm(`target_ym')'
 22.             
.             keep zipcode
 23. 
.             if "`var'"=="Monthlylistings_NSA_SFCC"  local stub "n_listings"
 24.             if "`var'"=="medlistingpricepsqft_SFCC" local stub "price_psqf
> t"
 25.             gen indata_`stub' = 1
 26.             
.             save_data "../temp/`var'.dta", key(zipcode) replace log(none)
 27.         restore
 28. 
.         merge m:1 zipcode using "../temp/`var'.dta", nogen assert(1 3) keep(1
>  3)
 29.         replace indata_`stub' = 0 if missing(indata_`stub')
 30.         replace indata_`stub' = . if missing(`var')
 31.     }
 32.     keep if year_month >= `=tm(`target_ym')'
 33. end

. 
. program destring_geographies
  1. 
.     cap destring statefips,  gen(statefips_num)
  2.     cap destring cbsa,       gen(cbsa_num)
  3.     cap destring place_code, gen(place_code_num)
  4.     cap destring countyfips, gen(county_num)
  5.     cap destring zipcode,    gen(zipcode_num)
  6. end

. 
. 
. main
       panel variable:  zipcode_num (strongly balanced)
        time variable:  year_month, 2010m1 to 2020m6
                delta:  1 month
(3,979,352 observations deleted)
(30,371 observations deleted)
(note: file C:\Users\shermo\AppData\Local\Temp\8\ST_5bf4_000002.tmp not found)
file C:\Users\shermo\AppData\Local\Temp\8\ST_5bf4_000002.tmp saved

    Result                           # of obs.
    -----------------------------------------
    not matched                        12,434
        from master                    12,434  
        from using                          0  

    matched                            18,290  
    -----------------------------------------
(0 real changes made)
(12,434 real changes made)
(88 observations deleted)
(776 real changes made)
(note: file ../temp/ym_entry_to_zillow_zori2023.dta not found)
file ../temp/ym_entry_to_zillow_zori2023.dta saved

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                            30,724  
    -----------------------------------------
(88 missing values generated)
(note: file ../temp/zori_data.dta not found)
file ../temp/zori_data.dta saved
       panel variable:  zipcode_num (strongly balanced)
        time variable:  year_month, 2010m1 to 2020m6
                delta:  1 month
(3,693,894 observations deleted)
(118,204 missing values generated)
(171,589 missing values generated)
(285,574 missing values generated)
(292,691 missing values generated)
(260,777 missing values generated)
(223,404 missing values generated)
(249,043 missing values generated)
(307,812 missing values generated)
(315,645 missing values generated)
(304,233 missing values generated)
(169,359 missing values generated)
(27,810 missing values generated)
(29,504 missing values generated)
(27,820 missing values generated)
(27,792 missing values generated)
(27,810 missing values generated)
(27,792 missing values generated)
(27,810 missing values generated)
(29,504 missing values generated)
(27,820 missing values generated)
(118,204 observations deleted)
(3,316 real changes made)
(note: file ../temp/ym_entry_to_zillow_SFCC.dta not found)
file ../temp/ym_entry_to_zillow_SFCC.dta saved

    Result                           # of obs.
    -----------------------------------------
    not matched                        60,485
        from master                    60,485  
        from using                          0  

    matched                           255,697  
    -----------------------------------------
(196,633 observations deleted)
(data already sorted by zipcode)
  variable fullbal_sample_SFCC was float now byte
  (4,035 bytes saved)
===============================================================================
File: ../temp/fullbal_zipcode.dta
Key: zipcode
===============================================================================
  1345:2(51952):3789710260:1235100634

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
     zipcode |          0
fullbal_sa~C |      1,345           1           0          1          1




(note: file ../temp/fullbal_zipcode.dta not found)
file ../temp/fullbal_zipcode.dta saved

    Result                           # of obs.
    -----------------------------------------
    not matched                       164,998
        from master                   164,998  
        from using                          0  

    matched                           151,184  
    -----------------------------------------
(52,900 real changes made)
(164,998 real changes made)
(118,204 real changes made, 118,204 to missing)
(118,204 real changes made, 118,204 to missing)
(171,589 observations deleted)
(2,607 real changes made)
(note: file ../temp/ym_entry_to_zillow_SF.dta not found)
file ../temp/ym_entry_to_zillow_SF.dta saved

    Result                           # of obs.
    -----------------------------------------
    not matched                       106,483
        from master                   106,483  
        from using                          0  

    matched                           209,699  
    -----------------------------------------
(143,685 observations deleted)
(data already sorted by zipcode)
  variable fullbal_sample_SF was float now byte
  (2,724 bytes saved)
===============================================================================
File: ../temp/fullbal_zipcode.dta
Key: zipcode
===============================================================================
  908:2(46031):55383689:498447236

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
     zipcode |          0
fullbal_sa~F |        908           1           0          1          1




file ../temp/fullbal_zipcode.dta saved

    Result                           # of obs.
    -----------------------------------------
    not matched                       213,125
        from master                   213,125  
        from using                          0  

    matched                           103,057  
    -----------------------------------------
(35,357 real changes made)
(213,125 real changes made)
(171,589 real changes made, 171,589 to missing)
(171,589 real changes made, 171,589 to missing)
(285,574 observations deleted)
(556 real changes made)
(note: file ../temp/ym_entry_to_zillow_CC.dta not found)
file ../temp/ym_entry_to_zillow_CC.dta saved

    Result                           # of obs.
    -----------------------------------------
    not matched                       260,129
        from master                   260,129  
        from using                          0  

    matched                            56,053  
    -----------------------------------------
(30,417 observations deleted)
(data already sorted by zipcode)
  variable fullbal_sample_CC was float now byte
  (573 bytes saved)
===============================================================================
File: ../temp/fullbal_zipcode.dta
Key: zipcode
===============================================================================
  191:2(46054):2700163090:146727615

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
     zipcode |          0
fullbal_sa~C |        191           1           0          1          1




file ../temp/fullbal_zipcode.dta saved

    Result                           # of obs.
    -----------------------------------------
    not matched                       294,041
        from master                   294,041  
        from using                          0  

    matched                            22,141  
    -----------------------------------------
(7,360 real changes made)
(294,041 real changes made)
(285,574 real changes made, 285,574 to missing)
(285,574 real changes made, 285,574 to missing)
(292,691 observations deleted)
(515 real changes made)
(note: file ../temp/ym_entry_to_zillow_Studio.dta not found)
file ../temp/ym_entry_to_zillow_Studio.dta saved

    Result                           # of obs.
    -----------------------------------------
    not matched                       271,687
        from master                   271,687  
        from using                          0  

    matched                            44,495  
    -----------------------------------------
(23,361 observations deleted)
(data already sorted by zipcode)
  variable fullbal_sample_Studio was float now byte
  (390 bytes saved)
===============================================================================
File: ../temp/fullbal_zipcode.dta
Key: zipcode
===============================================================================
  130:2(54606):1302089740:611948642

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
     zipcode |          0
fullbal_sa~o |        130           1           0          1          1




file ../temp/fullbal_zipcode.dta saved

    Result                           # of obs.
    -----------------------------------------
    not matched                       301,772
        from master                   301,772  
        from using                          0  

    matched                            14,410  
    -----------------------------------------
(4,350 real changes made)
(301,772 real changes made)
(292,691 real changes made, 292,691 to missing)
(292,691 real changes made, 292,691 to missing)
(260,777 observations deleted)
(1,521 real changes made)
(note: file ../temp/ym_entry_to_zillow_1BR.dta not found)
file ../temp/ym_entry_to_zillow_1BR.dta saved

    Result                           # of obs.
    -----------------------------------------
    not matched                       188,658
        from master                   188,658  
        from using                          0  

    matched                           127,524  
    -----------------------------------------
(55,197 observations deleted)
(data already sorted by zipcode)
  variable fullbal_sample_1BR was float now byte
  (624 bytes saved)
===============================================================================
File: ../temp/fullbal_zipcode.dta
Key: zipcode
===============================================================================
  208:2(79193):3014941223:1161051191

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
     zipcode |          0
fullbal_sa~R |        208           1           0          1          1




file ../temp/fullbal_zipcode.dta saved

    Result                           # of obs.
    -----------------------------------------
    not matched                       293,211
        from master                   293,211  
        from using                          0  

    matched                            22,971  
    -----------------------------------------
(5,675 real changes made)
(293,211 real changes made)
(260,777 real changes made, 260,777 to missing)
(260,777 real changes made, 260,777 to missing)
(223,404 observations deleted)
(2,390 real changes made)
(note: file ../temp/ym_entry_to_zillow_2BR.dta not found)
file ../temp/ym_entry_to_zillow_2BR.dta saved

    Result                           # of obs.
    -----------------------------------------
    not matched                       130,237
        from master                   130,237  
        from using                          0  

    matched                           185,945  
    -----------------------------------------
(92,410 observations deleted)
(data already sorted by zipcode)
  variable fullbal_sample_2BR was float now byte
  (1,104 bytes saved)
===============================================================================
File: ../temp/fullbal_zipcode.dta
Key: zipcode
===============================================================================
  368:2(78297):3486827325:126225190

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
     zipcode |          0
fullbal_sa~R |        368           1           0          1          1




file ../temp/fullbal_zipcode.dta saved

    Result                           # of obs.
    -----------------------------------------
    not matched                       274,572
        from master                   274,572  
        from using                          0  

    matched                            41,610  
    -----------------------------------------
(11,468 real changes made)
(274,572 real changes made)
(223,404 real changes made, 223,404 to missing)
(223,404 real changes made, 223,404 to missing)
(249,043 observations deleted)
(1,473 real changes made)
(note: file ../temp/ym_entry_to_zillow_3BR.dta not found)
file ../temp/ym_entry_to_zillow_3BR.dta saved

    Result                           # of obs.
    -----------------------------------------
    not matched                       181,566
        from master                   181,566  
        from using                          0  

    matched                           134,616  
    -----------------------------------------
(66,800 observations deleted)
(data already sorted by zipcode)
  variable fullbal_sample_3BR was float now byte
  (1,017 bytes saved)
===============================================================================
File: ../temp/fullbal_zipcode.dta
Key: zipcode
===============================================================================
  339:2(79321):21572539:2242297360

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
     zipcode |          0
fullbal_sa~R |        339           1           0          1          1




file ../temp/fullbal_zipcode.dta saved

    Result                           # of obs.
    -----------------------------------------
    not matched                       277,233
        from master                   277,233  
        from using                          0  

    matched                            38,949  
    -----------------------------------------
(12,459 real changes made)
(277,233 real changes made)
(249,043 real changes made, 249,043 to missing)
(249,043 real changes made, 249,043 to missing)
(307,812 observations deleted)
(201 real changes made)
(note: file ../temp/ym_entry_to_zillow_4BR.dta not found)
file ../temp/ym_entry_to_zillow_4BR.dta saved

    Result                           # of obs.
    -----------------------------------------
    not matched                       295,024
        from master                   295,024  
        from using                          0  

    matched                            21,158  
    -----------------------------------------
(8,333 observations deleted)
(data already sorted by zipcode)
  variable fullbal_sample_4BR was float now byte
  (111 bytes saved)
===============================================================================
File: ../temp/fullbal_zipcode.dta
Key: zipcode
===============================================================================
  37:2(78185):1884022295:1440958700

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
     zipcode |          0
fullbal_sa~R |         37           1           0          1          1




file ../temp/fullbal_zipcode.dta saved

    Result                           # of obs.
    -----------------------------------------
    not matched                       311,995
        from master                   311,995  
        from using                          0  

    matched                             4,187  
    -----------------------------------------
(1,146 real changes made)
(311,995 real changes made)
(307,812 real changes made, 307,812 to missing)
(307,812 real changes made, 307,812 to missing)
(315,645 observations deleted)
(13 real changes made)
(note: file ../temp/ym_entry_to_zillow_5BR.dta not found)
file ../temp/ym_entry_to_zillow_5BR.dta saved

    Result                           # of obs.
    -----------------------------------------
    not matched                       315,147
        from master                   315,147  
        from using                          0  

    matched                             1,035  
    -----------------------------------------
(536 observations deleted)
(data already sorted by zipcode)
  variable fullbal_sample_5BR was float now byte
  (3 bytes saved)
===============================================================================
File: ../temp/fullbal_zipcode.dta
Key: zipcode
===============================================================================
  1:2(79209):3057537564:1287912091

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
     zipcode |          0
fullbal_sa~R |          1           1           .          1          1




file ../temp/fullbal_zipcode.dta saved

    Result                           # of obs.
    -----------------------------------------
    not matched                       316,063
        from master                   316,063  
        from using                          0  

    matched                               119  
    -----------------------------------------
(35 real changes made)
(316,063 real changes made)
(315,645 real changes made, 315,645 to missing)
(315,645 real changes made, 315,645 to missing)
(304,233 observations deleted)
(298 real changes made)
(note: file ../temp/ym_entry_to_zillow_MFdxtx.dta not found)
file ../temp/ym_entry_to_zillow_MFdxtx.dta saved

    Result                           # of obs.
    -----------------------------------------
    not matched                       289,410
        from master                   289,410  
        from using                          0  

    matched                            26,772  
    -----------------------------------------
(11,882 observations deleted)
(data already sorted by zipcode)
  variable fullbal_sample_MFdxtx was float now byte
  (201 bytes saved)
===============================================================================
File: ../temp/fullbal_zipcode.dta
Key: zipcode
===============================================================================
  67:2(84740):4285675990:2567193691

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
     zipcode |          0
fullbal_sa~x |         67           1           0          1          1




file ../temp/fullbal_zipcode.dta saved

    Result                           # of obs.
    -----------------------------------------
    not matched                       309,191
        from master                   309,191  
        from using                          0  

    matched                             6,991  
    -----------------------------------------
(1,124 real changes made)
(309,191 real changes made)
(304,233 real changes made, 304,233 to missing)
(304,233 real changes made, 304,233 to missing)
(169,359 observations deleted)
(3,364 real changes made)
(note: file ../temp/ym_entry_to_zillow_Mfr5Plus.dta not found)
file ../temp/ym_entry_to_zillow_Mfr5Plus.dta saved

    Result                           # of obs.
    -----------------------------------------
    not matched                        83,001
        from master                    83,001  
        from using                          0  

    matched                           233,181  
    -----------------------------------------
(146,048 observations deleted)
(data already sorted by zipcode)
  variable fullbal_sample_Mfr5Plus was float now byte
  (2,325 bytes saved)
===============================================================================
File: ../temp/fullbal_zipcode.dta
Key: zipcode
===============================================================================
  775:2(78917):2306890772:569938489

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
     zipcode |          0
fullbal_sa~s |        775           1           0          1          1




file ../temp/fullbal_zipcode.dta saved

    Result                           # of obs.
    -----------------------------------------
    not matched                       233,723
        from master                   233,723  
        from using                          0  

    matched                            82,459  
    -----------------------------------------
(22,431 real changes made)
(233,723 real changes made)
(169,359 real changes made, 169,359 to missing)
(169,359 real changes made, 169,359 to missing)

    Result                           # of obs.
    -----------------------------------------
    not matched                       338,272
        from master                   311,865  
        from using                     26,407  

    matched                             4,317  
    -----------------------------------------
(20,472 observations deleted)

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                           342,589  (_merge==3)
    -----------------------------------------


Data Setup
Covariate adjustment: sh_hhlds_renteroccup_cens2010 sh_workers_under1250_2014 s
> h_residents_under1250_2014


Optimizing...
Iteration 1: Max Difference = 339330
Iteration 2: Max Difference = 124832.267
Iteration 3: Max Difference = 45922.9602
Iteration 4: Max Difference = 16893.8487
Iteration 5: Max Difference = 6214.63539
Iteration 6: Max Difference = 2285.97239
Iteration 7: Max Difference = 840.698103
Iteration 8: Max Difference = 309.011576
Iteration 9: Max Difference = 113.415494
Iteration 10: Max Difference = 41.4609666
Iteration 11: Max Difference = 14.9937492
Iteration 12: Max Difference = 5.26600128
Iteration 13: Max Difference = 1.71050846
Iteration 14: Max Difference = .455694988
Iteration 15: Max Difference = .080145109
Iteration 16: Max Difference = .006506973
maximum difference smaller than the tolerance level; convergence achieved


No. of units adjusted: 339331 total of weights: 339331


Before: without weighting

             |      mean   variance   skewness 
-------------+---------------------------------
sh_hhld~2010 |     .3526     .02594      .6239 
sh_work~2014 |     .2701    .007643      .9083 
sh_resi~2014 |     .2346    .002424      .3122 


After:  _webal as the weighting variable

             |      mean   variance   skewness 
-------------+---------------------------------
sh_hhld~2010 |      .284     .01835      .8231 
sh_work~2014 |     .2758    .007849      .8564 
sh_resi~2014 |     .2417    .002515      .8615 


Data Setup
Covariate adjustment: sh_hhlds_renteroccup_cens2010 sh_workers_under1250_2014 s
> h_residents_under1250_2014


Optimizing...
Iteration 1: Max Difference = 222645
Iteration 2: Max Difference = 81906.2539
Iteration 3: Max Difference = 30131.3627
Iteration 4: Max Difference = 11084.4446
Iteration 5: Max Difference = 4077.47508
Iteration 6: Max Difference = 1499.75507
Iteration 7: Max Difference = 551.464969
Iteration 8: Max Difference = 202.6088
Iteration 9: Max Difference = 74.2725037
Iteration 10: Max Difference = 27.0621558
Iteration 11: Max Difference = 9.69964871
Iteration 12: Max Difference = 3.32607467
Iteration 13: Max Difference = 1.01549489
Iteration 14: Max Difference = .235602968
Iteration 15: Max Difference = .033248071
Iteration 16: Max Difference = .001534018
maximum difference smaller than the tolerance level; convergence achieved


No. of units adjusted: 222646 total of weights: 222646


Before: without weighting

             |      mean   variance   skewness 
-------------+---------------------------------
sh_hhld~2010 |     .3615     .02837      .5846 
sh_work~2014 |     .2695     .00859      1.127 
sh_resi~2014 |     .2347    .002549      .3248 


After:  _webal as the weighting variable

             |      mean   variance   skewness 
-------------+---------------------------------
sh_hhld~2010 |     .2831     .01953       .869 
sh_work~2014 |     .2759    .009021      1.007 
sh_resi~2014 |     .2418    .002672      .9009 
(note: file ../temp/weights.dta not found)
file ../temp/weights.dta saved

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                           342,589  
    -----------------------------------------
(data already sorted by zipcode year_month)
  variable yr_entry_to_zillow_SFCC was float now int
  variable qtr_entry_to_zillow_SFCC was float now int
  variable unbalanced_sample_SFCC was float now byte
  variable yr_entry_to_zillow_SF was float now int
  variable qtr_entry_to_zillow_SF was float now int
  variable unbalanced_sample_SF was float now byte
  variable yr_entry_to_zillow_CC was float now int
  variable qtr_entry_to_zillow_CC was float now int
  variable unbalanced_sample_CC was float now byte
  variable yr_entry_to_zillow_Studio was float now int
  variable qtr_entry_to_zillow_Studio was float now int
  variable unbalanced_sample_Studio was float now byte
  variable yr_entry_to_zillow_1BR was float now int
  variable qtr_entry_to_zillow_1BR was float now int
  variable unbalanced_sample_1BR was float now byte
  variable yr_entry_to_zillow_2BR was float now int
  variable qtr_entry_to_zillow_2BR was float now int
  variable unbalanced_sample_2BR was float now byte
  variable yr_entry_to_zillow_3BR was float now int
  variable qtr_entry_to_zillow_3BR was float now int
  variable unbalanced_sample_3BR was float now byte
  variable yr_entry_to_zillow_4BR was float now int
  variable qtr_entry_to_zillow_4BR was float now int
  variable unbalanced_sample_4BR was float now byte
  variable yr_entry_to_zillow_5BR was float now int
  variable qtr_entry_to_zillow_5BR was float now int
  variable unbalanced_sample_5BR was float now byte
  variable yr_entry_to_zillow_MFdxtx was float now int
  variable qtr_entry_to_zillow_MFdxtx was float now int
  variable unbalanced_sample_MFdxtx was float now byte
  variable yr_entry_to_zillow_Mfr5Plus was float now int
  variable qtr_entry_to_zillow_Mfr5Plus was float now int
  variable unbalanced_sample_Mfr5Plus was float now byte
  variable fullbal_sample_zori23 was float now byte
  variable yr_entry_to_zillow_zori2023 was float now int
  variable qtr_entry_to_zillow_zori2023 was float now int
  (28,777,476 bytes saved)
===============================================================================
File: ../../../drive/derived_large/estimation_samples/zipcode_months.dta
Key: zipcode year_month
===============================================================================
  342589:227(83391):2194321682:411419206

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
     zipcode |          0
  year_month |    342,589    684.2347    30.43832        600        725
 zipcode_num |    316,182    53592.11    30406.49       1060      99705
        year |    316,182    2016.482    2.626146       2010       2020
       month |    316,182    6.435515     3.45258          1         12
-------------+---------------------------------------------------------
  place_code |          0
place_code~m |    316,182     3345610     2858347     103076    9999999
  countyfips |          0
  county_num |    316,182    24863.73    16602.64       1001      56021
   statefips |          0
-------------+---------------------------------------------------------
statefips_~m |    316,182    24.77247    16.55835          1         56
        cbsa |          0
    cbsa_num |    316,182    30588.32    11033.88      10180      99999
statutory_mw |    316,182    8.734742    1.851914       7.25      16.39
      mw_res |    316,182    2.147799    .1909869   1.981001   2.796671
-------------+---------------------------------------------------------
  binding_mw |    316,182    1.771889    .7333912          1          4
binding_mw~l |    316,182     1.63622    .4810858          1          2
binding_mw~x |    316,182    1.791433    .7643838          1          4
binding_mw~n |    316,182    1.742376    .6885942          1          4
mw_wkp_to~09 |    315,851    2.148589    .1869309   1.981001   2.727809
-------------+---------------------------------------------------------
mw_wkp_~9_09 |    315,803    2.147745    .1856564   1.981001   2.727214
mw_wkp_~4_09 |    315,851    2.148889    .1873836   1.981001    2.73386
mw_wkp_~5_09 |    315,722    2.148709    .1869972   1.981001     2.7338
mw_wkp_~0_09 |    315,851    2.147369    .1853253   1.981001   2.737378
mw_~_3333_09 |    315,803    2.147458    .1855575   1.981001   2.739918
-------------+---------------------------------------------------------
mw_~e3333_09 |    315,803    2.149799    .1883576   1.981001   2.728958
mw_wkp_go~09 |    315,722    2.145451    .1810035   1.981001   2.729854
mw_wkp_tr~09 |    315,851    2.146929    .1844944   1.981001   2.732543
mw_wkp_ot~09 |    315,803    2.149359    .1882132   1.981001   2.733717
mw_wkp_to~10 |    315,851    2.150556    .1868735   1.981001   2.735776
-------------+---------------------------------------------------------
mw_wkp_~9_10 |    315,770    2.149432    .1852797   1.981001   2.736113
mw_wkp_~4_10 |    315,851    2.150862     .187411   1.981001   2.736902
mw_wkp_~5_10 |    315,803    2.150952    .1870145   1.981001    2.74589
mw_wkp_~0_10 |    315,851    2.148361     .185041   1.981001   2.740334
mw_~_3333_10 |    315,803    2.148743    .1854318   1.981001   2.738991
-------------+---------------------------------------------------------
mw_~e3333_10 |    315,851    2.152366    .1884862   1.981001   2.734653
mw_wkp_go~10 |    315,770     2.14589    .1806895   1.981001   2.730598
mw_wkp_tr~10 |    315,803      2.1475    .1843182   1.981001   2.729365
mw_wkp_ot~10 |    315,851    2.151625      .18817   1.981001   2.741572
mw_wkp_to~11 |    316,117    2.150801    .1868025   1.981001   2.740069
-------------+---------------------------------------------------------
mw_wkp_~9_11 |    316,064    2.149685    .1852502   1.981001   2.741104
mw_wkp_~4_11 |    316,064    2.151129    .1873575   1.981001   2.739721
mw_wkp_~5_11 |    316,117    2.151118    .1868842   1.981001   2.752651
mw_wkp_~0_11 |    316,064    2.148573    .1849999   1.981001   2.750775
mw_~_3333_11 |    316,064    2.148934    .1853163   1.981001   2.752652
-------------+---------------------------------------------------------
mw_~e3333_11 |    316,117    2.152652    .1884423   1.981001   2.739409
mw_wkp_go~11 |    316,064    2.146413    .1807363   1.981001   2.718809
mw_wkp_tr~11 |    316,064    2.147693    .1843957   1.981001   2.731594
mw_wkp_ot~11 |    316,117    2.151859    .1880569   1.981001   2.744975
mw_wkp_to~12 |    316,149    2.150921    .1868956   1.981001   2.741586
-------------+---------------------------------------------------------
mw_wkp_~9_12 |    316,064    2.149731    .1856143   1.981001   2.742825
mw_wkp_~4_12 |    316,149    2.151269    .1873535   1.981001   2.741749
mw_wkp_~5_12 |    316,096    2.151121    .1868616   1.981001   2.752057
mw_wkp_~0_12 |    316,064    2.148763    .1852262   1.981001   2.758497
mw_~_3333_12 |    316,149    2.148962    .1852737   1.981001   2.751995
-------------+---------------------------------------------------------
mw_~e3333_12 |    316,096    2.152786    .1885203   1.981001   2.740563
mw_wkp_go~12 |    316,064    2.146545     .180537   1.981001   2.719155
mw_wkp_tr~12 |    316,096    2.148064      .18484   1.981001   2.740716
mw_wkp_ot~12 |    316,117    2.151929    .1881054   1.981001   2.746639
mw_wkp_to~13 |    316,149    2.151006    .1868057   1.981001   2.743052
-------------+---------------------------------------------------------
mw_wkp_~9_13 |    316,064     2.14982    .1855474   1.981001   2.740867
mw_wkp_~4_13 |    316,096    2.151386    .1873013   1.981001   2.745378
mw_wkp_~5_13 |    316,117    2.151136    .1867058   1.981001   2.750396
mw_wkp_~0_13 |    316,064    2.148769    .1850267   1.981001   2.751368
mw_~_3333_13 |    316,149    2.148976    .1850813   1.981001   2.750887
-------------+---------------------------------------------------------
mw_~e3333_13 |    316,064    2.152876    .1884631   1.981001   2.741865
mw_wkp_go~13 |    316,064    2.146295    .1801199   1.981001    2.72548
mw_wkp_tr~13 |    316,096    2.148049     .184742   1.981001   2.742673
mw_wkp_ot~13 |    316,117    2.152065    .1880678   1.981001   2.748258
mw_wkp_to~14 |    316,149     2.15105    .1866894   1.981001   2.737933
-------------+---------------------------------------------------------
mw_wkp_~9_14 |    316,064    2.149794    .1853367   1.981001   2.740678
mw_wkp_~4_14 |    316,149    2.151456    .1872059   1.981001   2.737529
mw_wkp_~5_14 |    316,064     2.15117    .1865889   1.981001   2.739916
mw_wkp_~0_14 |    316,064    2.148825    .1848863   1.981001   2.738352
mw_~_3333_14 |    316,117    2.148937    .1848546   1.981001   2.737348
-------------+---------------------------------------------------------
mw_~e3333_14 |    316,149    2.152886    .1882951   1.981001   2.737968
mw_wkp_go~14 |    316,064    2.146261    .1795918   1.981001    2.72083
mw_wkp_tr~14 |    316,117    2.148069    .1845636   1.981001   2.755506
mw_wkp_ot~14 |    316,149    2.152139    .1880169   1.981001   2.740017
mw_wkp_to~15 |    316,096    2.150906    .1867108    1.98106   2.739597
-------------+---------------------------------------------------------
mw_wkp_~9_15 |    316,064    2.149691    .1856414   1.981001   2.746636
mw_wkp_~4_15 |    316,064    2.151314    .1872027   1.981001   2.738583
mw_wkp_~5_15 |    316,096    2.150951    .1863677   1.981001   2.739502
mw_wkp_~0_15 |    316,064    2.148387    .1845735   1.981001   2.736131
mw_~_3333_15 |    316,096    2.148739    .1847934   1.981001   2.741476
-------------+---------------------------------------------------------
mw_~e3333_15 |    316,064    2.152823    .1883966   1.981001   2.742862
mw_wkp_go~15 |    316,064    2.146267    .1796713   1.981001   2.704249
mw_wkp_tr~15 |    316,096    2.148212    .1848689   1.981001   2.762677
mw_wkp_ot~15 |    316,064    2.151909    .1879654   1.981001   2.742872
mw_wkp_to~16 |    316,117    2.151011    .1868034   1.981001   2.742357
-------------+---------------------------------------------------------
mw_wkp_~9_16 |    316,064    2.149808     .185887   1.981001   2.749535
mw_wkp_~4_16 |    316,117    2.151442    .1872972   1.981001   2.740504
mw_wkp_~5_16 |    316,117    2.150991    .1862668   1.981001   2.738235
mw_wkp_~0_16 |    316,064    2.148483    .1846421   1.981001   2.743286
mw_~_3333_16 |    316,117    2.148758    .1847821   1.981001   2.741445
-------------+---------------------------------------------------------
mw_~e3333_16 |    316,117    2.152895    .1884505   1.981001   2.746145
mw_wkp_go~16 |    316,064    2.146476    .1796928   1.981001   2.706065
mw_wkp_tr~16 |    316,117     2.14826    .1849549   1.981001   2.768771
mw_wkp_ot~16 |    316,117    2.152014    .1880626   1.981001   2.742293
mw_wkp_to~17 |    316,149    2.151023    .1865859   1.981001   2.742209
-------------+---------------------------------------------------------
mw_wkp_~9_17 |    316,064    2.149762    .1854438   1.981001   2.751641
mw_wkp_~4_17 |    316,096    2.151511    .1871696   1.981001   2.739974
mw_wkp_~5_17 |    316,117    2.150953    .1861195   1.981001   2.739459
mw_wkp_~0_17 |    316,064    2.148337     .184163   1.981001   2.735249
mw_~_3333_17 |    316,117    2.148726    .1844826   1.981001   2.737765
-------------+---------------------------------------------------------
mw_~e3333_17 |    316,096    2.152889     .188265   1.981001   2.746305
mw_wkp_go~17 |    316,064    2.146459       .1796   1.981001   2.702537
mw_wkp_tr~17 |    316,117    2.148306    .1847561   1.981001   2.769891
mw_wkp_ot~17 |    316,096    2.152026    .1878246   1.981001   2.741745
mw_wkp_to~18 |    316,096    2.151076    .1866447   1.981001   2.745479
-------------+---------------------------------------------------------
mw_wkp_~9_18 |    316,064    2.149765    .1854747   1.981001    2.75442
mw_wkp_~4_18 |    316,096    2.151594     .187249   1.981001   2.743118
mw_wkp_~5_18 |    316,064    2.150944    .1860978   1.981001   2.740856
mw_wkp_~0_18 |    316,064    2.148328    .1840634   1.981001   2.734849
mw_~_3333_18 |    316,096    2.148706    .1844643   1.981001   2.740692
-------------+---------------------------------------------------------
mw_~e3333_18 |    316,096    2.152891    .1882753   1.981001   2.750211
mw_wkp_go~18 |    316,064    2.146317    .1794265   1.981001   2.706011
mw_wkp_tr~18 |    316,064    2.148356    .1848421   1.981001   2.775009
mw_wkp_ot~18 |    316,096    2.152086    .1878674   1.981001   2.741572
mw_wkp_tot~y |    232,777    2.117914    .1528294   1.981001   2.662255
-------------+---------------------------------------------------------
m~9_timevary |    232,740    2.116897    .1518276   1.981001   2.675424
m~4_timevary |    232,765    2.118281    .1533281   1.981001   2.658298
m~5_timevary |    232,763    2.117891    .1524207   1.981001   2.656047
m~0_timevary |    232,740    2.115722    .1506877   1.981001   2.658144
mw_wkp_ear.. |    232,775    2.116071    .1509723   1.981001   2.656807
-------------+---------------------------------------------------------
mw_wkp_ear.. |    232,765    2.119399    .1542593   1.981001   2.668538
mw_wkp_goo~y |    232,740    2.113839    .1462057   1.981001   2.605971
mw_wkp_tra~y |    232,763    2.115554    .1513185   1.981001   2.705586
mw_wkp_oth~y |    232,765     2.11877    .1539514   1.981001   2.656079
medpctpric~C |    235,669     3.36588    1.686902   .0002276   43.16547
-------------+---------------------------------------------------------
medren~e_1BR |     63,171    1590.748     668.306        350       5195
medren~e_2BR |    100,066    1754.023    878.2352        475      19500
medren~e_3BR |     73,068    1898.008    1467.977        595      40000
medren~e_4BR |      9,984    3120.503    5278.967      812.5      50000
medren~e_5BR |        787    5875.414     7932.29       1250      50000
-------------+---------------------------------------------------------
medre~e_SFCC |    182,870    1770.756    1554.224        500      50000
medrent~e_CC |     32,534    2075.283    939.1566        700       8975
med~e_MFdxtx |     21,042    1960.165     876.004        375       6646
m~e_Mfr5Plus |    151,107    1560.345    701.4284        375      20000
medrent~e_SF |    138,965    1780.671    1935.735        500      50000
-------------+---------------------------------------------------------
med~e_Studio |     26,658      1653.3    1382.588      612.5      50000
medren~t_1BR |     55,405    2.190759    .9192868   .6388889   7.164352
medren~t_2BR |     92,778    1.682624    .8035175   .5015198   12.55461
medren~t_3BR |     67,139    1.233209    .8117302   .5060225       17.5
medren~t_4BR |      8,370     1.49865    2.559936   .5492424   21.85141
-------------+---------------------------------------------------------
medren~t_5BR |        537    7.753782    7.031498   .3727683         22
medre~t_SFCC |    197,978    1.303812    1.033133   .1091193   23.96932
medrent~t_CC |     30,608    2.170225    1.168605   .5835432   12.92755
med~t_MFdxtx |     11,949    2.451649    1.286775   .3627695   6.936796
m~t_Mfr5Plus |    146,823    1.736252    .8487653   .3150482   12.55435
-------------+---------------------------------------------------------
medrent~t_SF |    144,593       1.145    1.002039   .1039069   24.48466
med~t_Studio |     23,491    1.954625    1.574804   .4288971   7.347833
  zri_SFCCMF |    276,440    1653.233    1240.422        596      50811
      zri_MF |     82,435    1622.492    648.2505        542       5136
   zori_2023 |     31,914    1688.551    1387.492   475.4137   36353.23
-------------+---------------------------------------------------------
     quarter |    316,182     2.47578    1.117872          1          4
year_quarter |    316,182     227.404    10.39588        200        241
    ln_rents |    197,978    .1260564    .4678614  -2.215314   3.176775
 ln_rents_SF |    144,593    .0142758    .4144709   -2.26426   3.198047
 ln_rents_CC |     30,608    .6574969    .4686013  -.5386367   2.559361
-------------+---------------------------------------------------------
ln_rents_S~o |     23,491    .3914822    .7207413  -.8465384   1.994406
ln_rents_1BR |     55,405    .7084706    .3803459  -.4480247   1.969118
ln_rents_2BR |     92,778     .429662    .4122928  -.6901123   2.530088
ln_rents_3BR |     67,139    .1044009    .4121419  -.6811742   2.862201
ln_rents_4BR |      8,370    .0209857    .6321349  -.5992154   3.084265
-------------+---------------------------------------------------------
ln_rents_5BR |        537    1.270166    1.432776  -.9867982   3.091043
ln_rents_M~x |     11,949    .7588902     .538354  -1.013988    1.93684
ln_rents_M~s |    146,823    .4564784    .4223449   -1.15503   2.530067
ln_emp_biz~v |    288,372    11.04266    1.372665   5.575949   13.38876
 ln_emp_info |    286,678    8.937194    1.584959   2.397895   12.38988
-------------+---------------------------------------------------------
  ln_emp_fin |    288,362    10.09158    1.399445   2.944439   12.89542
ln_estcoun~v |    288,390    8.559121     1.24228   1.098612   10.96353
ln_estcoun~o |    288,372    6.025026    1.376251          0   9.531191
ln_estcoun~n |    288,390    7.867793    1.198168    1.94591   10.33748
ln_avgwwag~v |    288,372    7.141608    .3161643   5.420535   9.135509
-------------+---------------------------------------------------------
ln_avgwwag~o |    286,678    7.321838      .37776   5.891644   9.584453
ln_avgwwag~n |    288,362    7.296215    .3649157   6.061457   9.163982
yr_entry~FCC |    255,697    2013.589    2.867698       2010       2019
qtr_entr~FCC |    255,697    215.3302    11.43787        200        236
fullbal_~FCC |    197,978     .407621    .4913933          0          1
-------------+---------------------------------------------------------
unbalanc~FCC |    197,978           1           0          1          1
yr_entry_t~F |    209,699    2014.187    2.864669       2010       2019
qtr_entry_~F |    209,699    217.7112      11.495        200        236
fullbal_sa~F |    144,593    .3767817    .4845811          0          1
unbalanced~F |    144,593           1           0          1          1
-------------+---------------------------------------------------------
yr_entry~_CC |     56,053     2014.73    2.903817       2010       2019
qtr_entr~_CC |     56,053    219.9785    11.46636        200        236
fullbal_~_CC |     30,608    .3744119    .4839786          0          1
unbalanc~_CC |     30,608           1           0          1          1
yr_entry_t~o |     44,495    2015.402    2.711566       2010       2019
-------------+---------------------------------------------------------
qtr_entry_~o |     44,495    222.7248    10.80501        202        236
fullbal_sa~o |     23,491    .3320421     .470956          0          1
unbalanced~o |     23,491           1           0          1          1
yr_entry~1BR |    127,524    2016.273    2.117328       2010       2019
qtr_entr~1BR |    127,524    226.2894    8.345123        200        236
-------------+---------------------------------------------------------
fullbal_~1BR |     55,405    .2252504    .4177509          0          1
unbalanc~1BR |     55,405           1           0          1          1
yr_entry~2BR |    185,945    2015.946    2.335779       2010       2019
qtr_entr~2BR |    185,945    224.8901    9.247326        200        236
fullbal_~2BR |     92,778    .2379875    .4258537          0          1
-------------+---------------------------------------------------------
unbalanc~2BR |     92,778           1           0          1          1
yr_entry~3BR |    134,616    2015.479    2.633262       2010       2019
qtr_entr~3BR |    134,616    222.8628    10.47419        200        236
fullbal_~3BR |     67,139    .3029536    .4595387          0          1
unbalanc~3BR |     67,139           1           0          1          1
-------------+---------------------------------------------------------
yr_entry~4BR |     21,158    2016.108    2.197583       2011       2019
qtr_entr~4BR |     21,158    225.3726    8.687938        204        236
fullbal_~4BR |      8,370     .265233    .4414836          0          1
unbalanc~4BR |      8,370           1           0          1          1
yr_entry~5BR |      1,035    2016.124    1.662003       2012       2018
-------------+---------------------------------------------------------
qtr_entr~5BR |      1,035    225.2879    6.836881        208        235
fullbal_~5BR |        537    .1117318      .31533          0          1
unbalanc~5BR |        537           1           0          1          1
yr_entry_t~x |     26,772    2016.014    1.986981       2011       2019
qtr_entry_~x |     26,772     225.448    7.843199        204        236
-------------+---------------------------------------------------------
fullbal_sa~x |     11,949    .3364298    .4725077          0          1
unbalanced~x |     11,949           1           0          1          1
yr_entry_t~s |    233,181    2015.205    2.613492       2010       2019
qtr_entry_~s |    233,181    222.1742    10.23871        200        236
fullbal_sa~s |    146,823    .3167079     .465194          0          1
-------------+---------------------------------------------------------
unbalanced~s |    146,823           1           0          1          1
fullbal_s~23 |     30,724    .5953001    .4908419          0          1
yr_entr~2023 |     30,724    2015.592    .9246844       2015       2019
qtr_ent~2023 |     30,724    224.3825    3.569586        222        239
  ln_zori_23 |     30,636    7.335359    .3991712   6.164185   10.50104
-------------+---------------------------------------------------------
weights_un~d |    339,331           1    .5081259   .0411939   8.490512
weights_fu~l |    222,646           1    .5391006   .0467823   7.189712




(note: file ../../../drive/derived_large/estimation_samples/zipcode_months.dta 
> not found)
file ../../../drive/derived_large/estimation_samples/zipcode_months.dta saved
(note: file ../../../drive/derived_large/estimation_samples/zipcode_months.csv 
> not found)
file ../../../drive/derived_large/estimation_samples/zipcode_months.csv saved
option start_ym() required
r(198);

end of do-file
r(198);


Execute:  StataMP-64 /e do "./make_stacked_sample.do"

  ___  ____  ____  ____  ____ (R)
 /__    /   ____/   /   ____/
___/   /   /___/   /   /___/   15.1   Copyright 1985-2017 StataCorp LLC
  Statistics/Data Analysis            StataCorp
                                      4905 Lakeway Drive
     MP - Parallel Edition            College Station, Texas 77845 USA
                                      800-STATA-PC        http://www.stata.com
                                      979-696-4600        stata@stata.com
                                      979-696-4601 (fax)

Single-user 32-core Stata perpetual license:
       Serial number:  501506205566
         Licensed to:  KU Leuven FEB (CES)
                       KU Leuven

Notes:
      1.  Stata is running in batch mode.
      2.  Unicode is supported; see help unicode_advice.
      3.  More than 2 billion observations are allowed; see help obs_advice.
      4.  Maximum number of variables is set to 5000; see help set_maxvar.


running c:\ado\personal\profile.do ...

. do ./make_stacked_sample.do 

. set more off

. clear all

. adopath + ../../../lib/stata/gslab_misc/ado
  [1]  (BASE)      "C:\Program Files\Stata15\ado\base/"
  [2]  (SITE)      "C:\Program Files\Stata15\ado\site/"
  [3]              "."
  [4]  (PERSONAL)  "c:\ado\personal/"
  [5]  (PLUS)      "c:\ado\plus/"
  [6]  (OLDPLACE)  "c:\ado/"
  [7]              "../../../lib/stata/gslab_misc/ado"

. 
. program main
  1.     local in_est        "../../../drive/derived_large/estimation_samples"
  2.     local in_cbsa_month "../../../drive/derived_large/cbsa_month"
  3.     local outstub       "../../../drive/derived_large/estimation_samples"
  4.     local logfile       "../output/data_file_manifest.log"
  5. 
.     load_zipcode_data, instub(`in_est')
  6. 
.     save_data "../temp/all_zipcodes.dta", ///
>         key(zipcode year_month) log(none) replace
  7. 
.     foreach w in 3 6 9 {
  8.         build_stacked_data, instub(`in_cbsa_month') w(`w')
  9.         save_data "`outstub'/stacked_sample_window`w'.dta", ///
>             key(zipcode event_id year_month) log(`logfile') replace
 10.     }
 11. end

. 
. program load_zipcode_data
  1.     syntax, instub(str)
  2. 
.     use zipcode zipcode_num year_month year statefips cbsa         ///
>         medrentpricepsqft_SFCC ln_rents statutory_mw               ///
>         mw_res mw_wkp_tot_* ln_emp_* ln_estcount_* ln_avgwwage_*   ///
>         using "`instub'/zipcode_months.dta", clear
  3. 
.     drop if missing(medrentpricepsqft_SFCC)
  4.     drop if cbsa == "99999"
  5. 
.     xtset zipcode_num year_month
  6. end

. 
. program build_stacked_data
  1.     syntax, instub(str) w(int)
  2. 
.     use "`instub'/events.dta", clear
  3. 
.     *drop if inrange(time_since_treated, 1, `w')
.     qui levelsof event_id, local(events)
  4. 
.     foreach event of local events {
  5.         quietly {
  6.             preserve
  7.                 keep if event_id == `event'
  8. 
.                 gen event_yy = event_year - 2000
  9.                 qui sum event_yy
 10.                 local event_yy = r(mean)
 11. 
.                 merge 1:m cbsa using "../temp/all_zipcodes.dta", ///
>                     nogen keep(3)
 12. 
.                 if `event_yy' < 17 {
 13.                     rename mw_wkp_tot_`event_yy' mw_wkp_tot_baseyear 
 14.                 }
 15.                 if `event_yy' == 17 {
 16.                     gen mw_wkp_tot_baseyear = mw_wkp_tot_17 
 17.                 }
 18.                 if `event_yy' >= 18 {
 19.                     rename mw_wkp_tot_18 mw_wkp_tot_baseyear 
 20.                 }
 21. 
.                 drop event_year event_yy
 22.                 gen rel_time = year_month - event_year_month
 23.                 egen zipcode_event_id = group(zipcode event_id)
 24.                 
.                 xtset zipcode_event_id year_month
 25. 
.                 foreach var of varlist ln_rents mw_res mw_wkp_tot_17 mw_wkp_t
> ot_baseyear ///
>                                        ln_emp_* ln_estcount_* ln_avgwwage_*  
> {
 26.                     
.                     gen d_`var' = D.`var'
 27.                 }
 28.                 
.                 foreach var of varlist d_mw_res d_mw_wkp_tot_17 d_mw_wkp_tot_
> baseyear {
 29.                     forval i = 1(1)`w' {
 30.                         gen L`i'_`var' = L`i'.`var'
 31.                         gen F`i'_`var' = F`i'.`var'
 32.                     }
 33.                 }
 34.                 
.                 keep if inrange(rel_time, -`w', `w')
 35. 
.                 bysort zipcode: egen nbr_months_around_event = count(year_mon
> th)
 36.                 keep if nbr_months_around_event == 2*`w' + 1
 37. 
.                 keep zipcode zipcode_num zipcode_event_id year_month  ///
>                      cbsa statefips event_id statutory_mw             ///
>                      mw_res mw_wkp_tot_baseyear mw_wkp_tot_17 ln_* d_* L* F*
 38.                 
.                 save_data "../temp/sample_event_`event'.dta", ///
>                     key(zipcode event_id year_month) log(none) replace
 39.             restore
 40.         }
 41.     }
 42. 
.     clear
 43.     foreach event of local events{
 44.         append using "../temp/sample_event_`event'.dta"
 45.     }
 46. end

. 
. 
. main
(144,611 observations deleted)
(32 observations deleted)
       panel variable:  zipcode_num (unbalanced)
        time variable:  year_month, 2010m2 to 2019m12
                delta:  1 month
(data now sorted by zipcode year_month)
  (0 bytes saved)
===============================================================================
File: ../temp/all_zipcodes.dta
Key: zipcode year_month
===============================================================================
  197946:30(58324):1745580978:1136458473

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
     zipcode |          0
  year_month |    197,946    679.8447    29.62245        601        719
 zipcode_num |    197,946    54556.83    29305.85       1545      99705
        year |    197,946    2016.184    2.460672       2010       2019
   statefips |          0
-------------+---------------------------------------------------------
        cbsa |          0
statutory_mw |    197,946    8.490558    1.654148       7.25         16
      mw_res |    197,946     2.12275    .1733841   1.981001   2.772589
mw_wkp_to~09 |    197,734    2.124165    .1706703   1.981001   2.696339
mw_wkp_to~10 |    197,734    2.126199    .1708107   1.981001   2.702675
-------------+---------------------------------------------------------
mw_wkp_to~11 |    197,946    2.126302    .1706916   1.981001   2.723764
mw_wkp_to~12 |    197,946    2.126394    .1707851   1.981001   2.726933
mw_wkp_to~13 |    197,946    2.126508    .1707273   1.981001   2.729451
mw_wkp_to~14 |    197,946    2.126577    .1706718   1.981001   2.729872
mw_wkp_to~15 |    197,946    2.126456    .1707126   1.981066   2.690024
-------------+---------------------------------------------------------
mw_wkp_to~16 |    197,946    2.126547    .1708114   1.981049   2.693834
mw_wkp_to~17 |    197,946    2.126554    .1706072    1.98106   2.694137
mw_wkp_to~18 |    197,946    2.126593     .170651   1.981076   2.699071
mw_wkp_tot~y |    158,166    2.104765    .1469334   1.981001   2.662255
medrentpri~C |    197,946    1.303871    1.033206   .1091193   23.96932
-------------+---------------------------------------------------------
    ln_rents |    197,946     .126087    .4678929  -2.215314   3.176775
ln_emp_biz~v |    197,934    11.03479    1.381371   5.659482   13.38876
 ln_emp_info |    196,814    8.891379    1.579856   2.397895   12.38988
  ln_emp_fin |    197,922    10.07296    1.419114   2.944439   12.89542
ln_estcoun~v |    197,946    8.569811    1.253476   1.098612   10.96353
-------------+---------------------------------------------------------
ln_estcoun~o |    197,934    6.003893    1.367511          0   9.531191
ln_estcoun~n |    197,946    7.875843    1.204032   2.197225   10.33748
ln_avgwwag~v |    197,934    7.120379    .3153737   5.420535   8.461046
ln_avgwwag~o |    196,814     7.30131    .3751506   5.891644   9.004791
ln_avgwwag~n |    197,922    7.274136    .3633982   6.061457   9.163982




(note: file ../temp/all_zipcodes.dta not found)
file ../temp/all_zipcodes.dta saved
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
(note: variable event_id was byte, now int to accommodate using data's
       values)
(note: variable zipcode_event_id was byte, now float to accommodate using
       data's values)
(data now sorted by zipcode event_id year_month)
  variable zipcode_event_id was float now int
  (138,040 bytes saved)
===============================================================================
File: ../../../drive/derived_large/estimation_samples/stacked_sample_window3.dt
> a
Key: zipcode event_id year_month
===============================================================================
  69020:52(61205):960649205:3579631904

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
     zipcode |          0
    event_id |     69,020    440.6356    164.2218          1        623
  year_month |     69,020    682.7772     26.9025        609        717
        cbsa |          0
 zipcode_num |     69,020    56787.34    32731.41       1545      99705
-------------+---------------------------------------------------------
   statefips |          0
statutory_mw |     69,020    9.518754    1.958603       7.25         16
      mw_res |     69,020    2.233583    .1951379   1.981001   2.772589
mw_wkp_to~17 |     69,020    2.240335    .1864249    1.98106   2.693929
mw_wkp_tot~r |     69,020    2.240423    .1864888   1.981001   2.698844
-------------+---------------------------------------------------------
    ln_rents |     69,020    .3653062    .5447265  -.8414373   3.132185
ln_emp_biz~v |     69,020    11.39976    1.244901   6.198479    13.3753
 ln_emp_info |     68,955    9.344654    1.523794   3.433987   12.38988
  ln_emp_fin |     69,018    10.40626    1.289106   6.008813   12.89542
ln_estcoun~v |     69,020    8.944191    1.104821   4.521789   10.96353
-------------+---------------------------------------------------------
ln_estcoun~o |     69,020    6.443802    1.328298   2.079442   9.531191
ln_estcoun~n |     69,020    8.205612    1.123911   4.382027   10.33748
ln_avgwwag~v |     69,020    7.229668    .3410148   6.253829   8.461046
ln_avgwwag~o |     68,955    7.465028    .4230969   6.011267   9.004791
ln_avgwwag~n |     69,018    7.408091    .4160513   6.318968   9.163982
-------------+---------------------------------------------------------
zipcode_ev~d |     69,020    42.18955    37.95841          1        168
  d_ln_rents |     68,923    .0028578    .0342863  -.1955121   .1651244
    d_mw_res |     68,923    .0062456    .0231364  -.2903381   .2412502
d_mw_wkp_~17 |     68,923    .0063242    .0206558  -.0877486   .2146293
d_mw_wkp_t~r |     68,923    .0063276    .0206674  -.0862174   .2146294
-------------+---------------------------------------------------------
d_ln_emp_b~v |     68,923    .0025875     .016669    -.25245   .3948364
d_ln_emp_i~o |     68,837    .0006735    .0320256  -.7435412   .6737289
d_ln_emp_fin |     68,921    .0016213    .0126698  -.5540133   .2210426
d_ln_estco~v |     68,923    .0035774    .0115992   -.115449   .0946836
d_ln_estco~o |     68,923    .0047016    .0204403  -.2876821   .3254225
-------------+---------------------------------------------------------
d_ln_estco~n |     68,923    .0030612    .0118933   -.482594   .5102034
d_ln_avgww~v |     68,923    .0060308    .0767948  -.9705091   1.036364
d_ln_avgww~o |     68,837    .0002327    .0987848  -1.326556   1.325468
d_ln_avgww~n |     68,921    .0028509    .1391815  -.9973412    .756268
 L1_d_mw_res |     68,673    .0060474    .0227616  -.2903381   .2412502
-------------+---------------------------------------------------------
 F1_d_mw_res |     69,020    .0061165    .0228888  -.2903381   .2412502
 L2_d_mw_res |     68,218    .0061038    .0227674          0   .2412502
 F2_d_mw_res |     69,020    .0061202    .0228928  -.2903381   .2412502
 L3_d_mw_res |     67,482    .0073476    .0247776          0   .2412502
 F3_d_mw_res |     68,261    .0071879    .0246542  -.2903381   .2412502
-------------+---------------------------------------------------------
L1_d_mw_w~17 |     68,673    .0061302    .0204827  -.0877486   .2146293
F1_d_mw_w~17 |     69,020    .0061344    .0205205  -.0877486   .2146293
L2_d_mw_w~17 |     68,218     .006187    .0205373  -.0002502   .2146293
F2_d_mw_w~17 |     69,020     .006139    .0205213  -.0877486   .2146293
L3_d_mw_w~17 |     67,482    .0074673    .0220166  -.0002502   .2146293
-------------+---------------------------------------------------------
F3_d_mw_w~17 |     68,261    .0072402    .0217349  -.0878985   .2146293
L1_d_mw_wk~r |     68,673    .0061343    .0204953  -.0862174   .2146294
F1_d_mw_wk~r |     69,020    .0061361    .0205301  -.0862174   .2146294
L2_d_mw_wk~r |     68,218    .0061907    .0205502  -.0002503   .2146294
F2_d_mw_wk~r |     69,020    .0061408    .0205311  -.0862174   .2146294
-------------+---------------------------------------------------------
L3_d_mw_wk~r |     67,482    .0074721    .0220344  -.0002503   .2146294
F3_d_mw_wk~r |     68,261    .0072427    .0217474  -.0899221   .2146294




(note: file ../../../drive/derived_large/estimation_samples/stacked_sample_wind
> ow3.dta not found)
file ../../../drive/derived_large/estimation_samples/stacked_sample_window3.dta
>  saved
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
(note: variable event_id was byte, now int to accommodate using data's
       values)
(note: variable zipcode_event_id was byte, now float to accommodate using
       data's values)
(data now sorted by zipcode event_id year_month)
  variable zipcode_event_id was float now int
  (224,796 bytes saved)
===============================================================================
File: ../../../drive/derived_large/estimation_samples/stacked_sample_window6.dt
> a
Key: zipcode event_id year_month
===============================================================================
  112398:70(87837):11452944:3464550540

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
     zipcode |          0
    event_id |    112,398    436.7174    157.9807          1        622
  year_month |    112,398    681.3097    25.44074        606        716
        cbsa |          0
 zipcode_num |    112,398    56714.68    32449.96       1545      99705
-------------+---------------------------------------------------------
   statefips |          0
statutory_mw |    112,398    9.368033    1.806752       7.25         16
      mw_res |    112,398    2.220092     .182281   1.981001   2.772589
mw_wkp_to~17 |    112,398     2.22633    .1751696   1.981101   2.694133
mw_wkp_tot~r |    112,398    2.226437    .1752297   1.981001   2.699045
-------------+---------------------------------------------------------
    ln_rents |    112,398    .3434195    .5359402  -.8414373   3.100092
ln_emp_biz~v |    112,398    11.38165    1.236177   6.198479   13.36667
 ln_emp_info |    112,288    9.316678    1.502347   4.043051   12.38988
  ln_emp_fin |    112,392    10.39577    1.284917   6.008813   12.89351
ln_estcoun~v |    112,398    8.930932    1.097461   4.521789   10.93852
-------------+---------------------------------------------------------
ln_estcoun~o |    112,398    6.414607    1.301853   2.079442   9.488881
ln_estcoun~n |    112,398    8.191226      1.1129   4.382027   10.31685
ln_avgwwag~v |    112,398    7.197045    .3376977   6.253829   8.461046
ln_avgwwag~o |    112,288    7.439743    .4211281   5.891644   9.004791
ln_avgwwag~n |    112,392    7.364987    .4025806   6.318968   9.163982
-------------+---------------------------------------------------------
zipcode_ev~d |    112,398    41.66227    37.78618          1        168
  d_ln_rents |    112,132    .0025859     .033513  -.1955121   .1653653
    d_mw_res |    112,132     .004737    .0203363  -.2903381   .2412502
d_mw_wkp_~17 |    112,132    .0048532    .0179672  -.0878985   .2146293
d_mw_wkp_t~r |    112,132    .0048561     .017983  -.0899221   .2146294
-------------+---------------------------------------------------------
d_ln_emp_b~v |    112,132    .0019814    .0158718  -.2854004   .3948364
d_ln_emp_i~o |    111,995    .0002043     .030834  -.7435412   .6737289
d_ln_emp_fin |    112,124    .0013343    .0118965  -.5540133   .2210426
d_ln_estco~v |    112,132    .0029407    .0111313  -.1546545   .0946836
d_ln_estco~o |    112,132    .0039197    .0187687  -.2876821   .3254225
-------------+---------------------------------------------------------
d_ln_estco~n |    112,132    .0026664    .0108089   -.482594   .5102034
d_ln_avgww~v |    112,132    .0016776     .063057  -.9705091   1.036364
d_ln_avgww~o |    111,995    .0044145     .091618  -1.326556   1.693995
d_ln_avgww~n |    112,124    .0027981    .1182514  -.9973412   1.088082
 L1_d_mw_res |    111,738    .0041206    .0190171  -.2903381   .2412502
-------------+---------------------------------------------------------
 F1_d_mw_res |    112,398    .0041819    .0191409  -.2903381   .2412502
 L2_d_mw_res |    111,211    .0041427    .0190675  -.2903381   .2412502
 F2_d_mw_res |    112,398    .0041877    .0191549  -.2903381   .2412502
 L3_d_mw_res |    110,552    .0042667    .0193443  -.2903381   .2412502
 F3_d_mw_res |    112,398    .0042693    .0193295  -.2903381   .2412502
-------------+---------------------------------------------------------
 L4_d_mw_res |    109,794    .0041774    .0191373  -.2903381   .2412502
 F4_d_mw_res |    112,335     .004198    .0191576  -.2903381   .2412502
 L5_d_mw_res |    108,793    .0043404      .01954          0   .2412502
 F5_d_mw_res |    112,272    .0042156    .0191796  -.2903381   .2412502
 L6_d_mw_res |    107,275     .006259    .0231941          0   .2412502
-------------+---------------------------------------------------------
 F6_d_mw_res |    110,624    .0059855    .0219214  -.2903381   .2412502
L1_d_mw_w~17 |    111,738    .0042094    .0170127  -.0877486   .2146293
F1_d_mw_w~17 |    112,398    .0042481    .0169811  -.0878985   .2146293
L2_d_mw_w~17 |    111,211    .0042317    .0170533  -.0877486   .2146293
F2_d_mw_w~17 |    112,398    .0042542    .0169927  -.0878985   .2146293
-------------+---------------------------------------------------------
L3_d_mw_w~17 |    110,552    .0043606    .0172075  -.0877486   .2146293
F3_d_mw_w~17 |    112,398    .0043625    .0170946  -.0878985   .2146293
L4_d_mw_w~17 |    109,794    .0042754    .0171264  -.0877486   .2146293
F4_d_mw_w~17 |    112,335    .0042555    .0169955  -.0878985   .2146293
L5_d_mw_w~17 |    108,793    .0044415    .0175377  -.0002502   .2146293
-------------+---------------------------------------------------------
F5_d_mw_w~17 |    112,272    .0042795    .0170155  -.0878985   .2146293
L6_d_mw_w~17 |    107,275    .0063631    .0208658  -.0002502   .2146293
F6_d_mw_w~17 |    110,624    .0060602    .0193837  -.0878985   .2146293
L1_d_mw_wk~r |    111,738    .0042123    .0170272  -.0862174   .2146294
F1_d_mw_wk~r |    112,398    .0042502    .0169928  -.0899221   .2146294
-------------+---------------------------------------------------------
L2_d_mw_wk~r |    111,211    .0042346    .0170679  -.0862174   .2146294
F2_d_mw_wk~r |    112,398    .0042566    .0170047  -.0899221   .2146294
L3_d_mw_wk~r |    110,552     .004363    .0172219  -.0862174   .2146294
F3_d_mw_wk~r |    112,398    .0043654    .0171068  -.0899221   .2146294
L4_d_mw_wk~r |    109,794    .0042782    .0171419  -.0862174   .2146294
-------------+---------------------------------------------------------
F4_d_mw_wk~r |    112,335    .0042576    .0170068  -.0899221   .2146294
L5_d_mw_wk~r |    108,793    .0044446    .0175543  -.0002684   .2146294
F5_d_mw_wk~r |    112,272    .0042813    .0170267  -.0899221   .2146294
L6_d_mw_wk~r |    107,275    .0063666    .0208798  -.0002684   .2147717
F6_d_mw_wk~r |    110,624    .0060635     .019398  -.0899221   .2146294




(note: file ../../../drive/derived_large/estimation_samples/stacked_sample_wind
> ow6.dta not found)
file ../../../drive/derived_large/estimation_samples/stacked_sample_window6.dta
>  saved
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
  . replace zipcode = trim(zipcode)
(data now sorted by zipcode event_id year_month)
  variable zipcode_event_id was float now int
  (308,522 bytes saved)
===============================================================================
File: ../../../drive/derived_large/estimation_samples/stacked_sample_window9.dt
> a
Key: zipcode event_id year_month
===============================================================================
  154261:88(70284):2720929844:3217179160

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
     zipcode |          0
    event_id |    154,261     439.591    154.9705          3        622
  year_month |    154,261    681.5247    25.45591        603        719
        cbsa |          0
 zipcode_num |    154,261    56162.88     32418.1       1545      99705
-------------+---------------------------------------------------------
   statefips |          0
statutory_mw |    154,261      9.3508    1.811316       7.25         16
      mw_res |    154,261    2.218199     .182299   1.981001   2.772589
mw_wkp_to~17 |    154,261    2.224082    .1753502    1.98106   2.694133
mw_wkp_tot~r |    154,261    2.224187    .1754112   1.981001   2.699052
-------------+---------------------------------------------------------
    ln_rents |    154,261    .3438918    .5389177  -.8414373   3.118553
ln_emp_biz~v |    154,261    11.39339    1.231365   6.198479    13.3753
 ln_emp_info |    154,113    9.324475    1.492504   3.637586   12.38988
  ln_emp_fin |    154,253    10.41103    1.282905   6.008813   12.89542
ln_estcoun~v |    154,261    8.944691    1.092138   4.521789   10.96353
-------------+---------------------------------------------------------
ln_estcoun~o |    154,261    6.424238     1.29335   2.079442   9.531191
ln_estcoun~n |    154,261    8.204059    1.108745   4.356709   10.33748
ln_avgwwag~v |    154,261    7.191257    .3359256   6.253829   8.461046
ln_avgwwag~o |    154,113    7.431943    .4156679   5.891644   9.004791
ln_avgwwag~n |    154,253    7.353719    .3973397   6.318968   9.163982
-------------+---------------------------------------------------------
zipcode_ev~d |    154,261    42.09533    37.97528          1        168
  d_ln_rents |    154,129    .0023417     .033074  -.1955121   .1645665
    d_mw_res |    154,129    .0034335    .0174831  -.2903381   .2412502
d_mw_wkp_~17 |    154,129    .0035292    .0153786  -.0878985   .2146293
d_mw_wkp_t~r |    154,129    .0035311     .015392  -.0899221   .2146294
-------------+---------------------------------------------------------
d_ln_emp_b~v |    154,129    .0027115    .0149394  -.2854004   .3948364
d_ln_emp_i~o |    153,951    .0001279     .029767  -.7435412   .5844231
d_ln_emp_fin |    154,119    .0016594    .0110966  -.5540133   .2210426
d_ln_estco~v |    154,129    .0032465    .0105509  -.1546545   .0946836
d_ln_estco~o |    154,129    .0040232    .0176564  -.2876821   .2980447
-------------+---------------------------------------------------------
d_ln_estco~n |    154,129    .0028446    .0101101   -.482594   .5102034
d_ln_avgww~v |    154,129    .0043591    .0667869  -.9705091   1.036364
d_ln_avgww~o |    153,951    .0000109    .0911291   -1.67808   1.693995
d_ln_avgww~n |    154,119   -.0028305    .1242909  -.9973412   1.088082
 L1_d_mw_res |    153,898    .0033878    .0173768  -.2903381   .2412502
-------------+---------------------------------------------------------
 F1_d_mw_res |    154,201    .0033607    .0172992  -.2903381   .2412502
 L2_d_mw_res |    153,424    .0034752    .0176817  -.2903381   .2412502
 F2_d_mw_res |    154,141    .0033687    .0173049  -.2903381   .2412502
 L3_d_mw_res |    152,433    .0048743    .0208024  -.2903381   .2412502
 F3_d_mw_res |    152,553    .0045746    .0194843  -.2903381   .2412502
-------------+---------------------------------------------------------
 L4_d_mw_res |    151,306    .0045117    .0200612  -.2903381   .2412502
 F4_d_mw_res |    150,866    .0042616    .0188428  -.2903381   .2412502
 L5_d_mw_res |    150,074    .0045657    .0201546  -.2903381   .2412502
 F5_d_mw_res |    149,179    .0043114    .0189825  -.2903381   .2412502
 L6_d_mw_res |    148,746    .0046347    .0203003  -.2903381   .2412502
-------------+---------------------------------------------------------
 F6_d_mw_res |    147,430    .0044117     .019212  -.2903381   .2412502
 L7_d_mw_res |    147,309    .0046129    .0202413  -.2903381   .2412502
 F7_d_mw_res |    145,681    .0044186    .0191969  -.2903381   .2412502
 L8_d_mw_res |    145,758    .0046697    .0203101          0   .2412502
 F8_d_mw_res |    143,932    .0044729    .0193076  -.2903381   .2412502
-------------+---------------------------------------------------------
 L9_d_mw_res |    143,974    .0050017    .0209984          0   .2412502
 F9_d_mw_res |    141,615    .0049053    .0202892  -.2903381   .2412502
L1_d_mw_w~17 |    153,898    .0034686     .015325  -.0878985   .2146293
F1_d_mw_w~17 |    154,201    .0034538    .0152856  -.0878985   .2146293
L2_d_mw_w~17 |    153,424    .0035581    .0156146  -.0878985   .2146293
-------------+---------------------------------------------------------
F2_d_mw_w~17 |    154,141    .0034677    .0152951  -.0878985   .2146293
L3_d_mw_w~17 |    152,433    .0049692    .0185447  -.0878985   .2146293
F3_d_mw_w~17 |    152,553    .0046835    .0172064  -.0878985   .2146293
L4_d_mw_w~17 |    151,306    .0045902    .0180379  -.0877486   .2146293
F4_d_mw_w~17 |    150,866    .0043439    .0167261  -.0878985   .2146293
-------------+---------------------------------------------------------
L5_d_mw_w~17 |    150,074    .0046442    .0181199  -.0877486   .2146293
F5_d_mw_w~17 |    149,179    .0043942    .0168202  -.0878985   .2146293
L6_d_mw_w~17 |    148,746     .004732    .0182356  -.0877486   .2146293
F6_d_mw_w~17 |    147,430    .0044947    .0169772  -.0878985   .2146293
L7_d_mw_w~17 |    147,309    .0047132    .0182589  -.0877486   .2146293
-------------+---------------------------------------------------------
F7_d_mw_w~17 |    145,681    .0044765    .0170046  -.0878985   .2146293
L8_d_mw_w~17 |    145,758    .0047706    .0183467  -.0002502   .2146293
F8_d_mw_w~17 |    143,932    .0045302    .0171004  -.0878985   .2146293
L9_d_mw_w~17 |    143,974    .0051153    .0189446  -.0002502   .2146293
F9_d_mw_w~17 |    141,615    .0049711    .0179111  -.0878985   .2146293
-------------+---------------------------------------------------------
L1_d_mw_wk~r |    153,898    .0034702    .0153385  -.0899221   .2146294
F1_d_mw_wk~r |    154,201    .0034563    .0152998  -.0899221   .2146294
L2_d_mw_wk~r |    153,424    .0035598    .0156285  -.0899221   .2146294
F2_d_mw_wk~r |    154,141      .00347    .0153091  -.0899221   .2146294
L3_d_mw_wk~r |    152,433    .0049716    .0185581  -.0899221   .2147717
-------------+---------------------------------------------------------
F3_d_mw_wk~r |    152,553    .0046864    .0172224  -.0899221   .2146294
L4_d_mw_wk~r |    151,306    .0045923    .0180502  -.0862174   .2147717
F4_d_mw_wk~r |    150,866    .0043468    .0167421  -.0899221   .2146294
L5_d_mw_wk~r |    150,074    .0046462    .0181323  -.0862174   .2147717
F5_d_mw_wk~r |    149,179    .0043973    .0168361  -.0899221   .2146294
-------------+---------------------------------------------------------
L6_d_mw_wk~r |    148,746    .0047347     .018249  -.0862174   .2147717
F6_d_mw_wk~r |    147,430    .0044976    .0169922  -.0899221   .2146294
L7_d_mw_wk~r |    147,309    .0047162    .0182729  -.0862174   .2147717
F7_d_mw_wk~r |    145,681    .0044787     .017019  -.0899221   .2146294
L8_d_mw_wk~r |    145,758    .0047735    .0183611  -.0002684   .2147717
-------------+---------------------------------------------------------
F8_d_mw_wk~r |    143,932    .0045325    .0171149  -.0899221   .2146294
L9_d_mw_wk~r |    143,974    .0051182    .0189592  -.0002684   .2147717
F9_d_mw_wk~r |    141,615    .0049733    .0179267  -.0899221   .2146294




(note: file ../../../drive/derived_large/estimation_samples/stacked_sample_wind
> ow9.dta not found)
file ../../../drive/derived_large/estimation_samples/stacked_sample_window9.dta
>  saved

. 
end of do-file

 make.py ended: 2023-04-21 13:38:48
