
  ___  ____  ____  ____  ____ (R)
 /__    /   ____/   /   ____/
___/   /   /___/   /   /___/   15.1   Copyright 1985-2017 StataCorp LLC
  Statistics/Data Analysis            StataCorp
                                      4905 Lakeway Drive
     MP - Parallel Edition            College Station, Texas 77845 USA
                                      800-STATA-PC        http://www.stata.com
                                      979-696-4600        stata@stata.com
                                      979-696-4601 (fax)

Single-user 32-core Stata perpetual license:
       Serial number:  501506205566
         Licensed to:  KU Leuven FEB (CES)
                       KU Leuven

Notes:
      1.  Stata is running in batch mode.
      2.  Unicode is supported; see help unicode_advice.
      3.  More than 2 billion observations are allowed; see help obs_advice.
      4.  Maximum number of variables is set to 5000; see help set_maxvar.


running c:\ado\personal\profile.do ...

. do ./estimates_dynamic.do 

. clear all

. set more off

. adopath + ../../../lib/stata/min_wage/ado
  [1]  (BASE)      "C:\Program Files\Stata15\ado\base/"
  [2]  (SITE)      "C:\Program Files\Stata15\ado\site/"
  [3]              "."
  [4]  (PERSONAL)  "c:\ado\personal/"
  [5]  (PLUS)      "c:\ado\plus/"
  [6]  (OLDPLACE)  "c:\ado/"
  [7]              "../../../lib/stata/min_wage/ado"

. set maxvar 32000 


. 
. program main
  1.     local instub "../../../drive/derived_large/estimation_samples"
  2.     local outstub "../output"
  3. 
.     define_controls
  4.     local controls "`r(economic_controls)'"
  5.     local cluster = "statefips"
  6.     local absorb  = "year_month"
  7. 
.     local mw_wkp_var  "mw_wkp_tot_17"
  8. 
.     use "`instub'/zipcode_months.dta", clear
  9.     xtset zipcode_num `absorb'
 10.     
.         local zillow_cats = "SF CC Studio 1BR 2BR 3BR Mfr5Plus"
 11.         
.     estimate_alt_zillow_cats_dyn, mw_wkp_var(`mw_wkp_var') controls(`controls
> ') ///
>         absorb(`absorb') cluster(`cluster') stubs(`zillow_cats')
 12.     
.     local specifications "`r(specifications)'"
 13. 
.     * Listings
.     use "`instub'/zipcode_months_listings.dta", clear
 14.     xtset zipcode_num `absorb'
 15. 
.     estimate_dist_lag_model if indata_n_listings,                            
>    ///
>         depvar(ln_monthly_listings) dyn_var(`mw_wkp_var') w(6) stat_var(mw_re
> s) ///
>         absorb(`absorb') cluster(`cluster')                                  
>    ///
>         model_name(monthly_listings)
 16.     
.     estimate_dist_lag_model if indata_n_listings,                            
>    ///
>         depvar(ln_monthly_listings) dyn_var(`mw_wkp_var') w(6) stat_var(mw_re
> s) ///
>         absorb(`absorb'##cbsa_num) cluster(`cluster')                        
>    ///
>         model_name(monthly_listings_by_cbsa)
 17.     
.     estimate_dist_lag_model if indata_price_psqft,                          /
> //
>         depvar(ln_prices_psqft) dyn_var(`mw_wkp_var') w(6) stat_var(mw_res) /
> //
>         absorb(`absorb') cluster(`cluster')                                 /
> //
>         model_name(prices_psqft)
 18.         
.     estimate_dist_lag_model if indata_price_psqft,                          /
> //
>         depvar(ln_prices_psqft) dyn_var(`mw_wkp_var') w(6) stat_var(mw_res) /
> //
>         absorb(`absorb'##cbsa_num) cluster(`cluster')                       /
> //
>         model_name(prices_psqft_by_cbsa)
 19.         
.     local specifications "`specifications' monthly_listings monthly_listings_
> by_cbsa"
 20.     local specifications "`specifications' prices_psqft prices_psqft_by_cb
> sa"   
 21. 
.     clear
 22.     foreach ff in `specifications' {        
 23.         append using ../temp/estimates_`ff'.dta
 24.     }
 25. 
.     save             `outstub'/estimates_dynamic.dta, replace
 26.     export delimited `outstub'/estimates_dynamic.csv, replace
 27. end

. 
. program estimate_alt_zillow_cats_dyn, rclass
  1.     syntax, mw_wkp_var(str) controls(str) absorb(str) cluster(str) stubs(s
> tr)
  2. 
.     local specifications ""
  3. 
.     foreach stub of local stubs {
  4.         estimate_dist_lag_model if unbalanced_sample_`stub',              
>                      ///
>             depvar(ln_rents_`stub') dyn_var(`mw_wkp_var') w(6) stat_var(mw_re
> s)                ///
>             controls(`controls') absorb(`absorb'##qtr_entry_to_zillow_`stub')
>  cluster(`cluster')         ///
>             model_name(`stub'_rents_dyn) test_equality
  5.         
.         local specifications "`specifications' `stub'_rents_dyn"
  6.     }
  7. 
.     return local specifications "`specifications'"
  8. end

. 
. 
. main
       panel variable:  zipcode_num (unbalanced)
        time variable:  year_month, 2010m1 to 2019m12
                delta:  1 month
