
 make.py started: 2022-05-12 12:53:47 C:\Users\diegog\Desktop\Diego\min_wage_rent\analysis\estimate_s\code 




Execute:  StataMP-64 /e do "./estimate.do"

  ___  ____  ____  ____  ____ (R)
 /__    /   ____/   /   ____/
___/   /   /___/   /   /___/   15.1   Copyright 1985-2017 StataCorp LLC
  Statistics/Data Analysis            StataCorp
                                      4905 Lakeway Drive
     MP - Parallel Edition            College Station, Texas 77845 USA
                                      800-STATA-PC        http://www.stata.com
                                      979-696-4600        stata@stata.com
                                      979-696-4601 (fax)

Single-user 32-core Stata perpetual license:
       Serial number:  501506205566
         Licensed to:  KU Leuven FEB (CES)
                       KU Leuven

Notes:
      1.  Stata is running in batch mode.
      2.  Unicode is supported; see help unicode_advice.
      3.  More than 2 billion observations are allowed; see help obs_advice.
      4.  Maximum number of variables is set to 5000; see help set_maxvar.


running c:\ado\personal\profile.do ...

. do ./estimate.do 

. clear all

. set more off

. set maxvar 32000


. 
. program main
  1.     local in_zipcode    "../../../drive/derived_large/zipcode"
  2.     local instub_irs       "../../../drive/base_large/irs_soi"
  3.     local instub_safmr     "../../../base/safmr/output"
  4.     
.     clean_irs, instub(`instub_irs')
  5.     save_data "../temp/irs_2014_clean.dta",  log(none)      ///
>         key(zipcode) replace
  6.     
.     clean_safmr, instub(`instub_safmr')
  7.     save_data "../temp/safmr_2014_clean.dta",     log(none)      ///
>         key(zipcode) replace 
  8. 
.     use zipcode countyfips statefips cbsa place_code n_workers_acs2014 med_hh
> ld_inc_acs2014 ///
>             sh_white_cens2010 sh_black_cens2010 sh_male_cens2010 sh_urb_pop_c
> ens2010 ///
>                 sh_rural_pop_cens2010 sh_hhlds_urban_cens2010 sh_hhlds_renter
> occup_cens2010 ///
>                 population_cens2010 n_male_cens2010 n_white_cens2010 n_black_
> cens2010 urb_pop_cens2010 ///
>                 n_hhlds_cens2010 n_hhlds_urban_cens2010 n_hhlds_renteroccup_c
> ens2010 ///
>                 rural_pop_cens2010 population_acs2014 sh_residents_under29_20
> 14 sh_residents_30to54_2014 ///
>                 sh_residents_under1250_2014 sh_residents_1250_3333_2014 sh_re
> sidents_underHS_2014 ///
>                 sh_residents_HS_noColl_2014 sh_residents_manuf_2014 sh_reside
> nts_accomm_food_2014 ///
>                 sh_residents_retail_2014 sh_residents_finance_2014 sh_workers
> _under29_2014 sh_workers_30to54_2014 ///
>                 sh_workers_under1250_2014 sh_workers_1250_3333_2014 sh_worker
> s_underHS_2014 ///
>                 sh_workers_HS_noColl_2014 sh_workers_manuf_2014 sh_workers_ac
> comm_food_2014 ///
>                 sh_workers_retail_2014 sh_workers_finance_2014 using "`in_zip
> code'/zipcode_cross.dta", clear
  9.     merge 1:1 zipcode using "../temp/irs_2014_clean.dta", ///
>         nogen keep(1 3)
 10.     merge 1:1 zipcode using "../temp/safmr_2014_clean.dta", ///
>         nogen keep(1 3)
 11.     gen s = safmr2br/(wage_per_wage_hhld/12)
 12.     
.         foreach var in safmr1br safmr2br safmr3br {
 13.         bysort statefips:  egen state_avg_`var' = mean(`var')
 14.         bysort cbsa:       egen cbsa_avg_`var' = mean(`var')
 15.         bysort countyfips: egen county_avg_`var' = mean(`var')
 16.         bysort place_code: egen place_avg_`var' = mean(`var')
 17.         }
 18.         
.         reg s n_workers_acs2014 med_hhld_inc_acs2014 c.med_hhld_inc_acs2014#c
> .med_hhld_inc_acs2014 ///
>         sh_white_cens2010 c.sh_white_cens2010#c.sh_white_cens2010 sh_black_ce
> ns2010 ///
>                 sh_male_cens2010 sh_urb_pop_cens2010 sh_hhlds_urban_cens2010 
> sh_hhlds_renteroccup_cens2010 ///
>                 population_cens2010 n_male_cens2010 n_white_cens2010 n_black_
> cens2010 urb_pop_cens2010 ///
>                 n_hhlds_cens2010 n_hhlds_urban_cens2010 n_hhlds_renteroccup_c
> ens2010 population_acs2014 ///
>                 agi_per_hhld wage_per_wage_hhld wage_per_hhld c.wage_per_hhld
> #c.wage_per_hhld ///
>                 c.wage_per_hhld#c.wage_per_hhld#c.wage_per_hhld ///
>                 share_wage_hhlds share_bussiness_hhlds share_farmer_hhlds c.s
> hare_farmer_hhlds#c.share_farmer_hhlds ///
>                 sh_residents* sh_workers* state_avg* cbsa_avg*
 19.     predict s_pred, xb
 20.         gen s_imputed = s
 21.         replace s_imputed = s_pred if (missing(s) & !missing(s_pred))
 22. 
.     keep zipcode s s_imputed
 23.     save_data "../output/s_by_zip.dta", key(zipcode) replace
 24. end

. 
. 
. 
. program clean_irs 
  1.     syntax, instub(str)
  2.     
.     use "`instub'/irs_zip.dta", clear
  3. 
.     drop if inlist(zipcode, "0", "00000", "99999")    
  4.     keep if year == 2014
  5.     
.     keep zipcode statefips share_wage_hhlds share_bussiness_hhlds /// 
>          share_farmer_hhlds agi_per_hhld wage_per_wage_hhld       ///
>          wage_per_hhld bussines_rev_per_owner
  6. end

. 
. program clean_safmr 
  1.     syntax, instub(str)
  2.     
.     use "`instub'/safmr_2012_2016_by_zipcode_county_cbsa.dta", clear
  3.     keep zipcode countyfips cbsa year safmr1br safmr2br safmr3br
  4.     keep if year == 2014
  5.     drop year
  6.     collapse (mean) safmr*, by(zipcode)
  7. end

. 
. 
. 
. main
(1,020 observations deleted)
(279,151 observations deleted)
(data already sorted by zipcode)
  (0 bytes saved)
===============================================================================
File: ../temp/irs_2014_clean.dta
Key: zipcode
===============================================================================
  27679:9(21818):2570474605:3696125402

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
     zipcode |          0
   statefips |          0
agi_per_hhld |     27,679    60362.86    46953.68   10026.67    2441296
wage_per_w~d |     27,679    48644.99    26145.38   9513.333   854060.8
wage_per_h~d |     27,679    39706.83    20069.26   7506.667   539549.5
-------------+---------------------------------------------------------
bussines_r~r |     26,380    10904.39    8219.813      -7305     195960
share_wage~s |     27,679    .8196309    .0648014   .2058824          1
share_buss~s |     27,679    .1516093    .0556574          0   .6470588
share_farm~s |     27,679    .0480508    .0754136          0         .7




file ../temp/irs_2014_clean.dta saved
(97,588 observations deleted)
(data already sorted by zipcode)
  (0 bytes saved)
===============================================================================
File: ../temp/safmr_2014_clean.dta
Key: zipcode
===============================================================================
  21808:4(88405):2616875449:1767566053

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
     zipcode |          0
    safmr1br |     21,808    748.5081    260.5008        310       1860
    safmr2br |     21,808    934.0743    314.6265        370       2320
    safmr3br |     21,808    1254.305    425.5054        510       3420




file ../temp/safmr_2014_clean.dta saved

    Result                           # of obs.
    -----------------------------------------
    not matched                         4,170
        from master                     4,170  
        from using                          0  

    matched                            27,656  
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                        13,678
        from master                    13,678  
        from using                          0  

    matched                            18,148  
    -----------------------------------------
(14,888 missing values generated)
(2631 missing values generated)
(8002 missing values generated)
(5056 missing values generated)
(2631 missing values generated)
(8002 missing values generated)
(5056 missing values generated)
(2631 missing values generated)
(8002 missing values generated)
(5056 missing values generated)

      Source |       SS           df       MS      Number of obs   =    16,175
-------------+----------------------------------   F(54, 16120)    =   1007.98
       Model |  68.9069239        54  1.27605415   Prob > F        =    0.0000
    Residual |  20.4070446    16,120  .001265946   R-squared       =    0.7715
-------------+----------------------------------   Adj R-squared   =    0.7707
       Total |  89.3139685    16,174  .005522071   Root MSE        =    .03558

------------------------------------------------------------------------------
           s |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
n_worke~2014 |  -1.85e-07   2.83e-07    -0.65   0.513    -7.41e-07    3.70e-07
med_hhl~2014 |   1.90e-09   4.50e-08     0.04   0.966    -8.64e-08    9.02e-08
             |
          c. |
med_hhl~2014#|
          c. |
med_hhl~2014 |   1.29e-12   3.34e-13     3.84   0.000     6.30e-13    1.94e-12
             |
sh_whit~2010 |  -.1053918   .0108866    -9.68   0.000    -.1267308   -.0840528
             |
          c. |
sh_whit~2010#|
          c. |
sh_whit~2010 |   .0593647   .0067946     8.74   0.000     .0460465    .0726829
             |
sh_blac~2010 |   .0039293   .0057314     0.69   0.493     -.007305    .0151635
sh_male~2010 |   .0791059   .0150711     5.25   0.000     .0495649     .108647
sh_urb_~2010 |  -.0125173   .0139443    -0.90   0.369    -.0398497    .0148151
sh_hhlds_u~0 |   .0143995   .0140685     1.02   0.306    -.0131764    .0419753
sh_hhlds_r~0 |   .0150939   .0041063     3.68   0.000     .0070451    .0231428
populat~2010 |  -1.88e-06   8.63e-07    -2.18   0.030    -3.57e-06   -1.86e-07
n_male_~2010 |  -4.31e-06   1.10e-06    -3.92   0.000    -6.47e-06   -2.16e-06
n_white~2010 |  -1.68e-07   1.72e-07    -0.98   0.326    -5.05e-07    1.68e-07
n_black~2010 |   2.44e-07   1.84e-07     1.33   0.185    -1.17e-07    6.05e-07
urb_pop~2010 |   4.60e-06   5.13e-07     8.98   0.000     3.60e-06    5.61e-06
n_hhlds_ce~0 |   3.91e-06   1.17e-06     3.35   0.001     1.62e-06    6.20e-06
n_hhlds_ur~0 |  -6.63e-06   1.20e-06    -5.53   0.000    -8.98e-06   -4.28e-06
n_hhlds_re~0 |  -3.35e-06   3.82e-07    -8.78   0.000    -4.10e-06   -2.60e-06
populat~2014 |   1.14e-06   3.69e-07     3.08   0.002     4.12e-07    1.86e-06
agi_per_hhld |   1.62e-08   1.56e-08     1.04   0.298    -1.43e-08    4.67e-08
wage_per_w~d |   2.80e-07   1.13e-07     2.47   0.013     5.78e-08    5.02e-07
wage_per_h~d |  -6.11e-06   1.57e-07   -38.98   0.000    -6.42e-06   -5.80e-06
             |
          c. |
wage_per_h~d#|
          c. |
wage_per_h~d |   2.38e-11   5.02e-13    47.49   0.000     2.28e-11    2.48e-11
             |
          c. |
wage_per_h~d#|
          c. |
wage_per_h~d#|
          c. |
wage_per_h~d |  -3.00e-17   8.22e-19   -36.49   0.000    -3.16e-17   -2.84e-17
             |
share_wage~s |    .210438   .0102593    20.51   0.000     .1903286    .2305474
share_buss~s |   .0293408   .0074786     3.92   0.000     .0146819    .0439997
share_farm~s |  -.1814679   .0159925   -11.35   0.000    -.2128149   -.1501208
             |
          c. |
share_farm~s#|
          c. |
share_farm~s |   .5059736   .0592758     8.54   0.000     .3897864    .6221608
             |
sh_re~9_2014 |   .0030237   .0146178     0.21   0.836    -.0256289    .0316763
sh_re~4_2014 |   .0374028   .0115926     3.23   0.001     .0146801    .0601256
sh_re~0_2014 |   .0472293   .0114815     4.11   0.000     .0247244    .0697342
sh_re~3_2014 |  -.0040208   .0097895    -0.41   0.681    -.0232094    .0151678
sh_re~S_2014 |   .0342589   .0165904     2.06   0.039       .00174    .0667779
sh_r~ll_2014 |  -.1110996   .0161971    -6.86   0.000    -.1428477   -.0793515
sh_re~f_2014 |  -.0248334   .0072221    -3.44   0.001    -.0389894   -.0106773
sh_r~il_2014 |    .070289   .0163257     4.31   0.000     .0382889    .1022891
sh_re~e_2014 |   .0984997   .0194005     5.08   0.000     .0604726    .1365268
sh_re~d_2014 |    .076722   .0132772     5.78   0.000     .0506973    .1027468
sh_wo~9_2014 |   .0087976   .0068639     1.28   0.200    -.0046564    .0222515
sh_wo~4_2014 |   .0070698   .0061708     1.15   0.252    -.0050256    .0191652
sh_wo~0_2014 |   .0033416   .0037958     0.88   0.379    -.0040986    .0107817
sh_wo~3_2014 |   .0067387   .0038742     1.74   0.082    -.0008551    .0143325
sh_wo~S_2014 |   .0021646   .0094316     0.23   0.818    -.0163223    .0206515
sh_w~ll_2014 |  -.0004827   .0068419    -0.07   0.944    -.0138936    .0129283
sh_wo~f_2014 |  -.0045495   .0025072    -1.81   0.070    -.0094639    .0003649
sh_w~il_2014 |  -.0091883   .0035151    -2.61   0.009    -.0160782   -.0022983
sh_wo~e_2014 |  -.0142138   .0067291    -2.11   0.035    -.0274036   -.0010241
sh_wo~d_2014 |   .0042222   .0041814     1.01   0.313    -.0039738    .0124182
state_av~1br |   .0000792   .0000241     3.28   0.001     .0000319    .0001265
state_av~2br |  -.0000297    .000028    -1.06   0.290    -.0000847    .0000253
state_av~3br |  -.0000157   .0000114    -1.38   0.169     -.000038    6.65e-06
cbsa_avg~1br |  -.0001017   .0000141    -7.20   0.000    -.0001294    -.000074
cbsa_avg~2br |   .0002181   .0000166    13.15   0.000     .0001856    .0002506
cbsa_avg~3br |   8.13e-06   8.66e-06     0.94   0.348    -8.84e-06    .0000251
       _cons |   .0695522   .0161352     4.31   0.000     .0379253     .101179
------------------------------------------------------------------------------
(7,278 missing values generated)
(14,888 missing values generated)
(8,373 real changes made)
(data now sorted by zipcode)
  (0 bytes saved)
===============================================================================
File: ../output/s_by_zip.dta
Key: zipcode
===============================================================================
  31826:3(74785):4087815137:35570928

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
     zipcode |          0
           s |     16,938    .2265644    .0760504   .0212001   .9964962
   s_imputed |     25,311     .224123    .0650075   .0035378   .9964962




(note: file ../output/s_by_zip.dta not found)
file ../output/s_by_zip.dta saved

. 
end of do-file

 make.py ended: 2022-05-12 12:53:51
