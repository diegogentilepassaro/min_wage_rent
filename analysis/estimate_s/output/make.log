
 make.py started: 2022-05-12 12:59:20 C:\Users\diegog\Desktop\Diego\min_wage_rent\analysis\estimate_s\code 




Execute:  StataMP-64 /e do "./estimate.do"

  ___  ____  ____  ____  ____ (R)
 /__    /   ____/   /   ____/
___/   /   /___/   /   /___/   15.1   Copyright 1985-2017 StataCorp LLC
  Statistics/Data Analysis            StataCorp
                                      4905 Lakeway Drive
     MP - Parallel Edition            College Station, Texas 77845 USA
                                      800-STATA-PC        http://www.stata.com
                                      979-696-4600        stata@stata.com
                                      979-696-4601 (fax)

Single-user 32-core Stata perpetual license:
       Serial number:  501506205566
         Licensed to:  KU Leuven FEB (CES)
                       KU Leuven

Notes:
      1.  Stata is running in batch mode.
      2.  Unicode is supported; see help unicode_advice.
      3.  More than 2 billion observations are allowed; see help obs_advice.
      4.  Maximum number of variables is set to 5000; see help set_maxvar.


running c:\ado\personal\profile.do ...

. do ./estimate.do 

. clear all

. set more off

. set maxvar 32000


. 
. program main
  1.     local in_zipcode    "../../../drive/derived_large/zipcode"
  2.     local instub_irs       "../../../drive/base_large/irs_soi"
  3.     local instub_safmr     "../../../base/safmr/output"
  4.     
.     clean_irs, instub(`instub_irs')
  5.     save_data "../temp/irs_2014_clean.dta",  log(none)      ///
>         key(zipcode) replace
  6.     
.     clean_safmr, instub(`instub_safmr')
  7.     save_data "../temp/safmr_2014_clean.dta",     log(none)      ///
>         key(zipcode) replace 
  8. 
.     use zipcode countyfips statefips cbsa place_code n_workers_acs2014 med_hh
> ld_inc_acs2014 ///
>             sh_white_cens2010 sh_black_cens2010 sh_male_cens2010 sh_urb_pop_c
> ens2010 ///
>                 sh_rural_pop_cens2010 sh_hhlds_urban_cens2010 sh_hhlds_renter
> occup_cens2010 ///
>                 population_cens2010 n_male_cens2010 n_white_cens2010 n_black_
> cens2010 urb_pop_cens2010 ///
>                 n_hhlds_cens2010 n_hhlds_urban_cens2010 n_hhlds_renteroccup_c
> ens2010 ///
>                 rural_pop_cens2010 population_acs2014 sh_residents_under29_20
> 14 sh_residents_30to54_2014 ///
>                 sh_residents_under1250_2014 sh_residents_1250_3333_2014 sh_re
> sidents_underHS_2014 ///
>                 sh_residents_HS_noColl_2014 sh_residents_manuf_2014 sh_reside
> nts_accomm_food_2014 ///
>                 sh_residents_retail_2014 sh_residents_finance_2014 sh_workers
> _under29_2014 sh_workers_30to54_2014 ///
>                 sh_workers_under1250_2014 sh_workers_1250_3333_2014 sh_worker
> s_underHS_2014 ///
>                 sh_workers_HS_noColl_2014 sh_workers_manuf_2014 sh_workers_ac
> comm_food_2014 ///
>                 sh_workers_retail_2014 sh_workers_finance_2014 using "`in_zip
> code'/zipcode_cross.dta", clear
  9.     merge 1:1 zipcode using "../temp/irs_2014_clean.dta", ///
>         nogen keep(1 3)
 10.     merge 1:1 zipcode using "../temp/safmr_2014_clean.dta", ///
>         nogen keep(1 3)
 11.     gen s = safmr2br/(wage_per_wage_hhld/12)
 12.     
.         foreach var in safmr1br safmr2br safmr3br {
 13.         bysort statefips:  egen state_avg_`var' = mean(`var')
 14.         bysort cbsa:       egen cbsa_avg_`var' = mean(`var')
 15.         bysort countyfips: egen county_avg_`var' = mean(`var')
 16.         bysort place_code: egen place_avg_`var' = mean(`var')
 17.         }
 18.         
.         reg s n_workers_acs2014 med_hhld_inc_acs2014 c.med_hhld_inc_acs2014#c
> .med_hhld_inc_acs2014 ///
>         sh_white_cens2010 c.sh_white_cens2010#c.sh_white_cens2010 sh_black_ce
> ns2010 ///
>                 sh_male_cens2010 sh_urb_pop_cens2010 sh_hhlds_urban_cens2010 
> sh_hhlds_renteroccup_cens2010 ///
>                 population_cens2010 n_male_cens2010 n_white_cens2010 n_black_
> cens2010 urb_pop_cens2010 ///
>                 n_hhlds_cens2010 n_hhlds_urban_cens2010 n_hhlds_renteroccup_c
> ens2010 population_acs2014 ///
>                 sh_residents* sh_workers* state_avg* cbsa_avg*
 19.     predict s_pred, xb
 20.         gen s_imputed = s
 21.         replace s_imputed = s_pred if (missing(s) & !missing(s_pred))
 22. 
.     keep zipcode s s_imputed
 23.     save_data "../output/s_by_zip.dta", key(zipcode) replace
 24. end

. 
. 
. 
. program clean_irs 
  1.     syntax, instub(str)
  2.     
.     use "`instub'/irs_zip.dta", clear
  3. 
.     drop if inlist(zipcode, "0", "00000", "99999")    
  4.     keep if year == 2014
  5.     
.     keep zipcode statefips share_wage_hhlds share_bussiness_hhlds /// 
>          share_farmer_hhlds agi_per_hhld wage_per_wage_hhld       ///
>          wage_per_hhld bussines_rev_per_owner
  6. end

. 
. program clean_safmr 
  1.     syntax, instub(str)
  2.     
.     use "`instub'/safmr_2012_2016_by_zipcode_county_cbsa.dta", clear
  3.     keep zipcode countyfips cbsa year safmr1br safmr2br safmr3br
  4.     keep if year == 2014
  5.     drop year
  6.     collapse (mean) safmr*, by(zipcode)
  7. end

. 
. 
. 
. main
(1,020 observations deleted)
(279,151 observations deleted)
(data already sorted by zipcode)
  (0 bytes saved)
===============================================================================
File: ../temp/irs_2014_clean.dta
Key: zipcode
===============================================================================
  27679:9(21818):2570474605:3696125402

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
     zipcode |          0
   statefips |          0
agi_per_hhld |     27,679    60362.86    46953.68   10026.67    2441296
wage_per_w~d |     27,679    48644.99    26145.38   9513.333   854060.8
wage_per_h~d |     27,679    39706.83    20069.26   7506.667   539549.5
-------------+---------------------------------------------------------
bussines_r~r |     26,380    10904.39    8219.813      -7305     195960
share_wage~s |     27,679    .8196309    .0648014   .2058824          1
share_buss~s |     27,679    .1516093    .0556574          0   .6470588
share_farm~s |     27,679    .0480508    .0754136          0         .7




(note: file ../temp/irs_2014_clean.dta not found)
file ../temp/irs_2014_clean.dta saved
(97,588 observations deleted)
(data already sorted by zipcode)
  (0 bytes saved)
===============================================================================
File: ../temp/safmr_2014_clean.dta
Key: zipcode
===============================================================================
  21808:4(88405):2616875449:1767566053

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
     zipcode |          0
    safmr1br |     21,808    748.5081    260.5008        310       1860
    safmr2br |     21,808    934.0743    314.6265        370       2320
    safmr3br |     21,808    1254.305    425.5054        510       3420




(note: file ../temp/safmr_2014_clean.dta not found)
file ../temp/safmr_2014_clean.dta saved

    Result                           # of obs.
    -----------------------------------------
    not matched                         4,170
        from master                     4,170  
        from using                          0  

    matched                            27,656  
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                        13,678
        from master                    13,678  
        from using                          0  

    matched                            18,148  
    -----------------------------------------
(14,888 missing values generated)
(2631 missing values generated)
(8002 missing values generated)
(5056 missing values generated)
(2631 missing values generated)
(8002 missing values generated)
(5056 missing values generated)
(2631 missing values generated)
(8002 missing values generated)
(5056 missing values generated)

      Source |       SS           df       MS      Number of obs   =    16,175
-------------+----------------------------------   F(45, 16129)    =    708.34
       Model |   59.305257        45   1.3178946   Prob > F        =    0.0000
    Residual |  30.0087115    16,129  .001860544   R-squared       =    0.6640
-------------+----------------------------------   Adj R-squared   =    0.6631
       Total |  89.3139685    16,174  .005522071   Root MSE        =    .04313

------------------------------------------------------------------------------
           s |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
n_worke~2014 |   7.46e-07   3.32e-07     2.25   0.025     9.57e-08    1.40e-06
med_hhl~2014 |  -4.70e-08   5.09e-08    -0.92   0.356    -1.47e-07    5.28e-08
             |
          c. |
med_hhl~2014#|
          c. |
med_hhl~2014 |  -4.27e-12   3.44e-13   -12.41   0.000    -4.95e-12   -3.60e-12
             |
sh_whit~2010 |  -.1518759   .0131724   -11.53   0.000    -.1776952   -.1260566
             |
          c. |
sh_whit~2010#|
          c. |
sh_whit~2010 |   .0767872   .0082206     9.34   0.000     .0606739    .0929005
             |
sh_blac~2010 |  -.0063524   .0068858    -0.92   0.356    -.0198494    .0071445
sh_male~2010 |   .0425153    .018085     2.35   0.019     .0070667    .0779638
sh_urb_~2010 |  -.0528697   .0168302    -3.14   0.002    -.0858587   -.0198807
sh_hhlds_u~0 |   .0565099   .0169493     3.33   0.001     .0232874    .0897324
sh_hhlds_r~0 |   .0457535    .004918     9.30   0.000     .0361137    .0553932
populat~2010 |  -3.13e-06   1.04e-06    -3.01   0.003    -5.16e-06   -1.09e-06
n_male_~2010 |  -3.94e-06   1.33e-06    -2.97   0.003    -6.55e-06   -1.34e-06
n_white~2010 |   2.10e-07   2.07e-07     1.01   0.310    -1.96e-07    6.15e-07
n_black~2010 |   8.76e-07   2.21e-07     3.96   0.000     4.42e-07    1.31e-06
urb_pop~2010 |   6.93e-06   6.14e-07    11.27   0.000     5.72e-06    8.13e-06
n_hhlds_ce~0 |   6.60e-06   1.38e-06     4.77   0.000     3.89e-06    9.32e-06
n_hhlds_ur~0 |  -.0000107   1.43e-06    -7.49   0.000    -.0000135   -7.92e-06
n_hhlds_re~0 |  -5.10e-06   4.58e-07   -11.15   0.000    -6.00e-06   -4.21e-06
populat~2014 |   1.65e-07   4.46e-07     0.37   0.712    -7.09e-07    1.04e-06
sh_re~9_2014 |   .1770399   .0166565    10.63   0.000     .1443913    .2096885
sh_re~4_2014 |   .1166398   .0131488     8.87   0.000     .0908667     .142413
sh_re~0_2014 |   .2883079   .0133962    21.52   0.000       .26205    .3145659
sh_re~3_2014 |   .3778243   .0103647    36.45   0.000     .3575084    .3981402
sh_re~S_2014 |   .0608546   .0198375     3.07   0.002     .0219709    .0997383
sh_r~ll_2014 |   .0049812   .0193362     0.26   0.797    -.0329199    .0428823
sh_re~f_2014 |  -.0236448   .0086609    -2.73   0.006     -.040621   -.0066685
sh_r~il_2014 |   .1953091   .0196884     9.92   0.000     .1567176    .2339006
sh_re~e_2014 |   -.105705     .02311    -4.57   0.000    -.1510032   -.0604069
sh_re~d_2014 |   .0540437   .0158484     3.41   0.001      .022979    .0851084
sh_wo~9_2014 |  -.0142327   .0082875    -1.72   0.086     -.030477    .0020116
sh_wo~4_2014 |  -.0160127   .0074477    -2.15   0.032    -.0306111   -.0014143
sh_wo~0_2014 |   .0191907   .0045878     4.18   0.000     .0101981    .0281834
sh_wo~3_2014 |  -.0022641   .0046836    -0.48   0.629    -.0114445    .0069163
sh_wo~S_2014 |   -.014381   .0114177    -1.26   0.208     -.036761     .007999
sh_w~ll_2014 |   .0244963    .008281     2.96   0.003     .0082646     .040728
sh_wo~f_2014 |   .0046791   .0030333     1.54   0.123    -.0012665    .0106246
sh_w~il_2014 |  -.0001465   .0042566    -0.03   0.973      -.00849     .008197
sh_wo~e_2014 |  -.0510542   .0081101    -6.30   0.000    -.0669509   -.0351575
sh_wo~d_2014 |   .0003997     .00504     0.08   0.937    -.0094794    .0102787
state_av~1br |  -.0000286   .0000291    -0.99   0.325    -.0000856    .0000283
state_av~2br |   .0002291   .0000337     6.79   0.000      .000163    .0002952
state_av~3br |  -.0001233   .0000137    -9.03   0.000    -.0001501   -.0000965
cbsa_avg~1br |  -.0000724   .0000171    -4.24   0.000    -.0001059   -.0000389
cbsa_avg~2br |   .0001545   .0000201     7.70   0.000     .0001151    .0001938
cbsa_avg~3br |   .0000339   .0000105     3.24   0.001     .0000134    .0000545
       _cons |  -.2238829   .0169699   -13.19   0.000    -.2571457     -.19062
------------------------------------------------------------------------------
(4,571 missing values generated)
(14,888 missing values generated)
(11,080 real changes made)
(data now sorted by zipcode)
  (0 bytes saved)
===============================================================================
File: ../output/s_by_zip.dta
Key: zipcode
===============================================================================
  31826:3(74785):3730295618:3999891129

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
     zipcode |          0
           s |     16,938    .2265644    .0760504   .0212001   .9964962
   s_imputed |     28,018    .2243037    .0643383  -.1310248   .9964962




(note: file ../output/s_by_zip.dta not found)
file ../output/s_by_zip.dta saved

. 
end of do-file

 make.py ended: 2022-05-12 12:59:38
