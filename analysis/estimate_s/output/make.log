
 make.py started: 2022-05-17 14:35:10 C:\Users\shermo\Documents\GitHub\min_wage_rent\analysis\estimate_s\code 




Execute:  StataMP-64 /e do "./estimate.do"

  ___  ____  ____  ____  ____ (R)
 /__    /   ____/   /   ____/
___/   /   /___/   /   /___/   15.1   Copyright 1985-2017 StataCorp LLC
  Statistics/Data Analysis            StataCorp
                                      4905 Lakeway Drive
     MP - Parallel Edition            College Station, Texas 77845 USA
                                      800-STATA-PC        http://www.stata.com
                                      979-696-4600        stata@stata.com
                                      979-696-4601 (fax)

Single-user 32-core Stata perpetual license:
       Serial number:  501506205566
         Licensed to:  KU Leuven FEB (CES)
                       KU Leuven

Notes:
      1.  Stata is running in batch mode.
      2.  Unicode is supported; see help unicode_advice.
      3.  More than 2 billion observations are allowed; see help obs_advice.
      4.  Maximum number of variables is set to 5000; see help set_maxvar.


running c:\ado\personal\profile.do ...

. do ./estimate.do 

. clear all

. set more off

. set maxvar 32000


. 
. program main
  1.     local in_zipcode    "../../../drive/derived_large/zipcode"
  2.     local instub_irs       "../../../drive/base_large/irs_soi"
  3.     local instub_safmr     "../../../base/safmr/output"
  4.     
.     clean_irs, instub(`instub_irs')
  5.     save_data "../temp/irs_2014_clean.dta",  log(none)      ///
>         key(zipcode) replace
  6.     
.     clean_safmr, instub(`instub_safmr')
  7.     save_data "../temp/safmr_2014_clean.dta",     log(none)      ///
>         key(zipcode) replace 
  8. 
.     use zipcode countyfips statefips cbsa place_code n_workers_acs2014 med_hh
> ld_inc_acs2014 ///
>         sh_white_cens2010 sh_black_cens2010 sh_male_cens2010 sh_urb_pop_cens2
> 010 ///
>         sh_rural_pop_cens2010 sh_hhlds_urban_cens2010 sh_hhlds_renteroccup_ce
> ns2010 ///
>         population_cens2010 n_male_cens2010 n_white_cens2010 n_black_cens2010
>  urb_pop_cens2010 ///
>         n_hhlds_cens2010 n_hhlds_urban_cens2010 n_hhlds_renteroccup_cens2010 
> ///
>         rural_pop_cens2010 population_acs2014 sh_residents_under29_2014 sh_re
> sidents_30to54_2014 ///
>         sh_residents_under1250_2014 sh_residents_1250_3333_2014 sh_residents_
> underHS_2014 ///
>         sh_residents_HS_noColl_2014 sh_residents_manuf_2014 sh_residents_acco
> mm_food_2014 ///
>         sh_residents_retail_2014 sh_residents_finance_2014 sh_workers_under29
> _2014 sh_workers_30to54_2014 ///
>         sh_workers_under1250_2014 sh_workers_1250_3333_2014 sh_workers_underH
> S_2014 ///
>         sh_workers_HS_noColl_2014 sh_workers_manuf_2014 sh_workers_accomm_foo
> d_2014 ///
>         sh_workers_retail_2014 sh_workers_finance_2014 using "`in_zipcode'/zi
> pcode_cross.dta", clear
  9.     merge 1:1 zipcode using "../temp/irs_2014_clean.dta", ///
>         nogen keep(1 3)
 10.     merge 1:1 zipcode using "../temp/safmr_2014_clean.dta", ///
>         nogen keep(1 3)
 11.     gen s = safmr2br/(wage_per_wage_hhld/12)
 12.         
.         egen geo_group = group(statefips cbsa countyfips place_code)
 13.     
.     impute_var, var(safmr2br)
 14.     impute_var, var(wage_per_wage_hhld)
 15.     impute_var, var(s)
 16.         
.     keep zipcode s safmr2br wage_per_wage_hhld *imputed
 17.     save_data "../output/s_by_zip.dta", key(zipcode) replace
 18. end

. 
. program clean_irs 
  1.     syntax, instub(str)
  2.     
.     use "`instub'/irs_zip.dta", clear
  3. 
.     drop if inlist(zipcode, "0", "00000", "99999")    
  4.     keep if year == 2014
  5.     
.     keep zipcode statefips share_wage_hhlds share_bussiness_hhlds /// 
>          share_farmer_hhlds agi_per_hhld wage_per_wage_hhld       ///
>          wage_per_hhld bussines_rev_per_owner
  6. end

. 
. program clean_safmr 
  1.     syntax, instub(str)
  2.     
.     use "`instub'/safmr_2012_2016_by_zipcode_county_cbsa.dta", clear
  3.     keep zipcode countyfips cbsa year safmr1br safmr2br safmr3br
  4.     keep if year == 2014
  5.     drop year
  6.     collapse (mean) safmr*, by(zipcode)
  7. end

. 
. program impute_var
  1.     syntax, var(str)
  2.     reghdfe `var' n_workers_acs2014 med_hhld_inc_acs2014 c.med_hhld_inc_ac
> s2014#c.med_hhld_inc_acs2014 ///
>         sh_white_cens2010 c.sh_white_cens2010#c.sh_white_cens2010 sh_black_ce
> ns2010 ///
>         sh_male_cens2010 sh_urb_pop_cens2010 sh_hhlds_urban_cens2010 sh_hhlds
> _renteroccup_cens2010 ///
>         population_cens2010 n_male_cens2010 n_white_cens2010 n_black_cens2010
>  urb_pop_cens2010 ///
>         n_hhlds_cens2010 n_hhlds_urban_cens2010 n_hhlds_renteroccup_cens2010 
> population_acs2014 ///
>         sh_residents* sh_workers*, absorb(geo_group)
  3.     predict `var'_pred, xb
  4.     gen `var'_imputed = `var'
  5.     replace `var'_imputed = `var'_pred if (missing(`var') & !missing(`var'
> _pred))
  6. end

. 
. 
. 
. main
(1,020 observations deleted)
(279,151 observations deleted)
(data already sorted by zipcode)
  (0 bytes saved)
===============================================================================
File: ../temp/irs_2014_clean.dta
Key: zipcode
===============================================================================
  27679:9(21818):2570474605:3696125402

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
     zipcode |          0
   statefips |          0
agi_per_hhld |     27,679    60362.86    46953.68   10026.67    2441296
wage_per_w~d |     27,679    48644.99    26145.38   9513.333   854060.8
wage_per_h~d |     27,679    39706.83    20069.26   7506.667   539549.5
-------------+---------------------------------------------------------
bussines_r~r |     26,380    10904.39    8219.813      -7305     195960
share_wage~s |     27,679    .8196309    .0648014   .2058824          1
share_buss~s |     27,679    .1516093    .0556574          0   .6470588
share_farm~s |     27,679    .0480508    .0754136          0         .7




(note: file ../temp/irs_2014_clean.dta not found)
file ../temp/irs_2014_clean.dta saved
(97,588 observations deleted)
(data already sorted by zipcode)
  (0 bytes saved)
===============================================================================
File: ../temp/safmr_2014_clean.dta
Key: zipcode
===============================================================================
  21808:4(88405):2616875449:1767566053

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
     zipcode |          0
    safmr1br |     21,808    748.5081    260.5008        310       1860
    safmr2br |     21,808    934.0743    314.6265        370       2320
    safmr3br |     21,808    1254.305    425.5054        510       3420




(note: file ../temp/safmr_2014_clean.dta not found)
file ../temp/safmr_2014_clean.dta saved

    Result                           # of obs.
    -----------------------------------------
    not matched                         4,170
        from master                     4,170  
        from using                          0  

    matched                            27,656  
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                        13,678
        from master                    13,678  
        from using                          0  

    matched                            18,148  
    -----------------------------------------
(14,888 missing values generated)
(dropped 5879 singleton observations)
(MWFE estimator converged in 1 iterations)

HDFE Linear regression                            Number of obs   =     11,249
Absorbing 1 HDFE group                            F(  39,   9119) =      72.55
                                                  Prob > F        =     0.0000
                                                  R-squared       =     0.8564
                                                  Adj R-squared   =     0.8229
                                                  Within R-sq.    =     0.2368
                                                  Root MSE        =   126.3426

------------------------------------------------------------------------------
    safmr2br |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
n_worke~2014 |   .0105898   .0015156     6.99   0.000      .007619    .0135607
med_hhl~2014 |   .0004029   .0002096     1.92   0.055    -8.04e-06    .0008138
             |
          c. |
med_hhl~2014#|
          c. |
med_hhl~2014 |   1.01e-08   1.58e-09     6.40   0.000     7.02e-09    1.32e-08
             |
sh_whit~2010 |   255.9916   63.45866     4.03   0.000     131.5984    380.3848
             |
          c. |
sh_whit~2010#|
          c. |
sh_whit~2010 |  -185.0975   40.40944    -4.58   0.000    -264.3091    -105.886
             |
sh_blac~2010 |   51.39348   34.84224     1.48   0.140    -16.90512    119.6921
sh_male~2010 |   67.67066   52.09435     1.30   0.194    -34.44594    169.7873
sh_urb_~2010 |   144.3004   55.04203     2.62   0.009     36.40569    252.1951
sh_hhlds_u~0 |  -128.3074   55.23342    -2.32   0.020    -236.5773   -20.03753
sh_hhlds_r~0 |  -77.91561   17.88554    -4.36   0.000    -112.9753   -42.85594
populat~2010 |   -.001023   .0042581    -0.24   0.810    -.0093698    .0073237
n_male_~2010 |  -.0078916   .0050553    -1.56   0.119    -.0178012     .002018
n_white~2010 |  -.0029568   .0009692    -3.05   0.002    -.0048567   -.0010569
n_black~2010 |  -.0001665   .0009679    -0.17   0.863    -.0020638    .0017307
urb_pop~2010 |   .0034686   .0028599     1.21   0.225    -.0021375    .0090747
n_hhlds_ce~0 |   .0017291   .0064612     0.27   0.789    -.0109363    .0143945
n_hhlds_ur~0 |    .001654   .0067125     0.25   0.805    -.0115041    .0148121
n_hhlds_re~0 |   -.016649   .0019655    -8.47   0.000    -.0205018   -.0127963
populat~2014 |  -.0009888   .0016552    -0.60   0.550    -.0042334    .0022559
sh_re~9_2014 |   20.29081   65.13627     0.31   0.755    -107.3909    147.9725
sh_re~4_2014 |   144.7295   52.74624     2.74   0.006      41.3351     248.124
sh_re~0_2014 |  -171.6204   57.93066    -2.96   0.003    -285.1775   -58.06336
sh_re~3_2014 |  -460.7251    43.9163   -10.49   0.000    -546.8108   -374.6393
sh_re~S_2014 |  -308.4621   82.20753    -3.75   0.000    -469.6073   -147.3169
sh_r~ll_2014 |  -376.9747   77.13717    -4.89   0.000    -528.1808   -225.7685
sh_re~f_2014 |   15.95893   64.99934     0.25   0.806    -111.4543    143.3722
sh_r~il_2014 |  -88.17593   70.34511    -1.25   0.210    -226.0681    49.71625
sh_re~e_2014 |   292.9477   128.8176     2.27   0.023     40.43632    545.4592
sh_re~d_2014 |  -73.53198   87.44663    -0.84   0.400     -244.947    97.88301
sh_wo~9_2014 |   40.94976   26.25165     1.56   0.119    -10.50936    92.40888
sh_wo~4_2014 |   21.93369   23.29156     0.94   0.346    -23.72299    67.59037
sh_wo~0_2014 |  -49.90216   15.85104    -3.15   0.002    -80.97375   -18.83057
sh_wo~3_2014 |  -21.21666   16.26992    -1.30   0.192    -53.10936    10.67603
sh_wo~S_2014 |   19.22082   36.37984     0.53   0.597    -52.09182    90.53345
sh_w~ll_2014 |  -15.94815   25.37061    -0.63   0.530    -65.68024    33.78394
sh_wo~f_2014 |  -19.29674    11.0318    -1.75   0.080    -40.92154    2.328059
sh_w~il_2014 |    6.81996   14.57321     0.47   0.640     -21.7468    35.38672
sh_wo~e_2014 |  -57.85198    28.0234    -2.06   0.039    -112.7841   -2.919827
sh_wo~d_2014 |   32.19236   16.52759     1.95   0.051    -.2054315    64.59015
       _cons |   1029.095   66.52294    15.47   0.000     898.6953    1159.495
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
   geo_group |      2091           0        2091     |
-----------------------------------------------------+
(2,104 missing values generated)
(13,678 missing values generated)
(12,594 real changes made)
(dropped 9040 singleton observations)
(MWFE estimator converged in 1 iterations)

HDFE Linear regression                            Number of obs   =     17,635
Absorbing 1 HDFE group                            F(  39,  14318) =     434.27
                                                  Prob > F        =     0.0000
                                                  R-squared       =     0.8007
                                                  Adj R-squared   =     0.7545
                                                  Within R-sq.    =     0.5419
                                                  Root MSE        = 12548.7560

------------------------------------------------------------------------------
wage_per_w~d |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
n_worke~2014 |  -1.859887   .1465025   -12.70   0.000    -2.147051   -1.572723
med_hhl~2014 |  -.2743049   .0184769   -14.85   0.000    -.3105221   -.2380877
             |
          c. |
med_hhl~2014#|
          c. |
med_hhl~2014 |   5.88e-06   1.46e-07    40.36   0.000     5.59e-06    6.16e-06
             |
sh_whit~2010 |   12727.14   5289.897     2.41   0.016     2358.252    23096.02
             |
          c. |
sh_whit~2010#|
          c. |
sh_whit~2010 |  -2831.319   3481.867    -0.81   0.416    -9656.231    3993.592
             |
sh_blac~2010 |  -1893.603   2803.325    -0.68   0.499    -7388.482    3601.277
sh_male~2010 |  -1666.262   5115.348    -0.33   0.745    -11693.01    8360.484
sh_urb_~2010 |   10463.86   4995.997     2.09   0.036      671.062    20256.67
sh_hhlds_u~0 |  -7179.187   5075.942    -1.41   0.157    -17128.69    2770.319
sh_hhlds_r~0 |  -11965.38   1822.135    -6.57   0.000       -15537   -8393.759
populat~2010 |   .3397612   .3605137     0.94   0.346    -.3668924    1.046415
n_male_~2010 |   .0125743   .4921707     0.03   0.980    -.9521441    .9772928
n_white~2010 |   .1835725   .0928704     1.98   0.048     .0015344    .3656106
n_black~2010 |    .048423   .0924329     0.52   0.600    -.1327574    .2296035
urb_pop~2010 |   -.477969   .1916518    -2.49   0.013    -.8536313   -.1023066
n_hhlds_ce~0 |  -.3341095   .3900198    -0.86   0.392    -1.098599    .4303799
n_hhlds_ur~0 |   .3844812   .4287539     0.90   0.370    -.4559322    1.224894
n_hhlds_re~0 |    .541596    .196701     2.75   0.006     .1560366    .9271554
populat~2014 |   .5279759   .1614492     3.27   0.001     .2115145    .8444372
sh_re~9_2014 |  -66588.29   5722.894   -11.64   0.000     -77805.9   -55370.67
sh_re~4_2014 |  -46178.15   4485.254   -10.30   0.000    -54969.82   -37386.47
sh_re~0_2014 |  -83004.96     4904.4   -16.92   0.000    -92618.22   -73391.71
sh_re~3_2014 |  -112222.9   3657.372   -30.68   0.000    -119391.8     -105054
sh_re~S_2014 |  -44064.57   7903.807    -5.58   0.000    -59557.06   -28572.08
sh_r~ll_2014 |  -40821.37   5786.032    -7.06   0.000    -52162.74      -29480
sh_re~f_2014 |  -12915.05   4567.157    -2.83   0.005    -21867.27   -3962.826
sh_r~il_2014 |  -44365.67   6017.206    -7.37   0.000    -56160.18   -32571.17
sh_re~e_2014 |   170997.7   11133.06    15.36   0.000     149175.5      192820
sh_re~d_2014 |   25790.17   6900.428     3.74   0.000     12264.43     39315.9
sh_wo~9_2014 |   448.9794   1960.943     0.23   0.819    -3394.723    4292.682
sh_wo~4_2014 |    1962.38   1664.665     1.18   0.238    -1300.579    5225.338
sh_wo~0_2014 |  -7636.398   1159.085    -6.59   0.000    -9908.355   -5364.441
sh_wo~3_2014 |  -3510.753   1155.772    -3.04   0.002    -5776.216   -1245.289
sh_wo~S_2014 |  -1679.858   2767.595    -0.61   0.544    -7104.703    3744.986
sh_w~ll_2014 |  -5827.591   1837.962    -3.17   0.002    -9430.236   -2224.946
sh_wo~f_2014 |  -1341.748   784.3307    -1.71   0.087    -2879.138    195.6418
sh_w~il_2014 |  -1383.333   1078.431    -1.28   0.200    -3497.197    730.5313
sh_wo~e_2014 |   18785.32   2306.787     8.14   0.000     14263.72    23306.92
sh_wo~d_2014 |     2479.5   1298.431     1.91   0.056     -65.5932    5024.594
       _cons |   161370.1   5631.938    28.65   0.000     150330.8    172409.4
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
   geo_group |      3278           0        3278     |
-----------------------------------------------------+
(2,104 missing values generated)
(4,170 missing values generated)
(3,047 real changes made)
(dropped 5432 singleton observations)
(MWFE estimator converged in 1 iterations)

HDFE Linear regression                            Number of obs   =     10,743
Absorbing 1 HDFE group                            F(  39,   8678) =     273.41
                                                  Prob > F        =     0.0000
                                                  R-squared       =     0.7788
                                                  Adj R-squared   =     0.7262
                                                  Within R-sq.    =     0.5513
                                                  Root MSE        =     0.0394

------------------------------------------------------------------------------
           s |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
n_worke~2014 |   1.78e-06   4.88e-07     3.65   0.000     8.26e-07    2.74e-06
med_hhl~2014 |  -1.97e-07   7.30e-08    -2.69   0.007    -3.40e-07   -5.35e-08
             |
          c. |
med_hhl~2014#|
          c. |
med_hhl~2014 |  -9.59e-13   5.25e-13    -1.83   0.068    -1.99e-12    6.98e-14
             |
sh_whit~2010 |  -.1147451    .021586    -5.32   0.000    -.1570587   -.0724315
             |
          c. |
sh_whit~2010#|
          c. |
sh_whit~2010 |   .0728398    .013292     5.48   0.000     .0467844    .0988953
             |
sh_blac~2010 |    .018977   .0120116     1.58   0.114    -.0045687    .0425226
sh_male~2010 |  -.0522237   .0220694    -2.37   0.018    -.0954849   -.0089625
sh_urb_~2010 |  -.0223385   .0218339    -1.02   0.306    -.0651381    .0204611
sh_hhlds_u~0 |   .0212184   .0219691     0.97   0.334    -.0218462    .0642831
sh_hhlds_r~0 |   .0416055   .0067413     6.17   0.000      .028391    .0548201
populat~2010 |  -5.96e-07   1.39e-06    -0.43   0.668    -3.32e-06    2.13e-06
n_male_~2010 |  -4.73e-06   1.70e-06    -2.79   0.005    -8.06e-06   -1.40e-06
n_white~2010 |  -6.93e-07   3.18e-07    -2.18   0.029    -1.32e-06   -6.94e-08
n_black~2010 |  -2.50e-07   3.15e-07    -0.79   0.427    -8.67e-07    3.67e-07
urb_pop~2010 |   5.41e-06   9.31e-07     5.81   0.000     3.59e-06    7.24e-06
n_hhlds_ce~0 |   4.97e-06   2.11e-06     2.36   0.018     8.37e-07    9.10e-06
n_hhlds_ur~0 |  -8.75e-06   2.19e-06    -4.00   0.000     -.000013   -4.46e-06
n_hhlds_re~0 |  -3.04e-06   6.55e-07    -4.64   0.000    -4.33e-06   -1.76e-06
populat~2014 |  -6.56e-07   5.34e-07    -1.23   0.219    -1.70e-06    3.91e-07
sh_re~9_2014 |   .2751034   .0256032    10.74   0.000      .224915    .3252918
sh_re~4_2014 |   .2233194   .0200498    11.14   0.000     .1840171    .2626218
sh_re~0_2014 |   .3694804   .0228858    16.14   0.000     .3246187    .4143421
sh_re~3_2014 |   .3944245   .0170035    23.20   0.000     .3610936    .4277554
sh_re~S_2014 |   .1656517   .0367359     4.51   0.000     .0936406    .2376628
sh_r~ll_2014 |  -.0096624   .0304281    -0.32   0.751    -.0693087    .0499838
sh_re~f_2014 |   .1004064   .0227453     4.41   0.000     .0558202    .1449926
sh_r~il_2014 |   .1896166    .029301     6.47   0.000     .1321796    .2470536
sh_re~e_2014 |  -.1617434   .0471537    -3.43   0.001    -.2541758    -.069311
sh_re~d_2014 |  -.0470325   .0345205    -1.36   0.173     -.114701    .0206359
sh_wo~9_2014 |    .011821   .0100716     1.17   0.241    -.0079218    .0315638
sh_wo~4_2014 |  -.0028291   .0090755    -0.31   0.755    -.0206193     .014961
sh_wo~0_2014 |   .0036977   .0056391     0.66   0.512    -.0073563    .0147517
sh_wo~3_2014 |  -.0062423   .0058524    -1.07   0.286    -.0177144    .0052297
sh_wo~S_2014 |   .0275764   .0143528     1.92   0.055    -.0005585    .0557113
sh_w~ll_2014 |   .0313317   .0096886     3.23   0.001     .0123398    .0503237
sh_wo~f_2014 |  -.0025808   .0036965    -0.70   0.485    -.0098268    .0046652
sh_w~il_2014 |   .0037179   .0051669     0.72   0.472    -.0064106    .0138463
sh_wo~e_2014 |  -.0419521   .0097267    -4.31   0.000    -.0610188   -.0228853
sh_wo~d_2014 |   -.004843   .0062911    -0.77   0.441    -.0171751    .0074891
       _cons |  -.1620267   .0247593    -6.54   0.000    -.2105609   -.1134925
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
   geo_group |      2026           0        2026     |
-----------------------------------------------------+
(2,104 missing values generated)
(14,888 missing values generated)
(13,547 real changes made)
(data already sorted by zipcode)
  (0 bytes saved)
===============================================================================
File: ../output/s_by_zip.dta
Key: zipcode
===============================================================================
  31826:7(65065):844968921:1800761228

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
     zipcode |          0
wage_per_~ld |     27,656    48638.16    26109.82   9513.333   854060.8
    safmr2br |     18,148     929.432    317.9598        560       2320
           s |     16,938    .2265644    .0760504   .0212001   .9964962
safmr2br_i~d |     30,742    895.1738    250.1635   327.2114       2320
-------------+---------------------------------------------------------
wage_per_~ed |     30,703    48445.23    25427.14  -43471.46   854060.8
   s_imputed |     30,485    .2375054    .0648821  -.2170245   .9964962




(note: file ../output/s_by_zip.dta not found)
file ../output/s_by_zip.dta saved

. 
end of do-file

 make.py ended: 2022-05-17 14:35:21
