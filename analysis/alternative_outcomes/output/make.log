
 make.py started: 2022-05-19 12:23:00 C:\Users\Usuario\Documents\GitHub\min_wage_rent\analysis\alternative_outcomes\code 




Execute:  StataMP-64 /e do "./alt_outcomes.do"

  ___  ____  ____  ____  ____ (R)
 /__    /   ____/   /   ____/
___/   /   /___/   /   /___/   16.0   Copyright 1985-2019 StataCorp LLC
  Statistics/Data Analysis            StataCorp
                                      Downloadly.ir     
     MP - Parallel Edition            College Station, Texas 77845 USA
                                      800-STATA-PC        http://www.stata.com
                                      979-696-4600        stata@stata.com
                                      979-696-4601 (fax)

Single-user 2-core Stata network license expires 20 Aug 2022:
       Serial number:  501609213901
         Licensed to:  DOWNLOADLY.IR 085227746673
                       WwW.DownLoadLy.iR 085227746673

Notes:
      1.  Stata is running in batch mode.
      2.  Unicode is supported; see help unicode_advice.
      3.  More than 2 billion observations are allowed; see help obs_advice.
      4.  Maximum number of variables is set to 5000; see help set_maxvar.

. do ./alt_outcomes.do 

. clear all

. set more off

. adopath + ../../../lib/stata/min_wage/ado
  [1]  (BASE)      "C:\Program Files\Stata\Stata16\ado\base/"
  [2]  (SITE)      "C:\Program Files\Stata\Stata16\ado\site/"
  [3]              "."
  [4]  (PERSONAL)  "C:\Users\Usuario\ado\personal/"
  [5]  (PLUS)      "C:\Users\Usuario\ado\plus/"
  [6]  (OLDPLACE)  "c:\ado/"
  [7]              "../../../lib/stata/min_wage/ado"

. set maxvar 32000 


. 
. program main
  1. 
.         local instub "../../../drive/derived_large/zipcode_year"
  2.         local outstub "../output"
  3. 
.         use "`instub'/zipcode_year.dta"
  4.         
.     define_controls
  5.     local controls "`r(economic_controls)'"
  6.         
.     destring cbsa, generate(cbsa_num)
  7. 
.     xtset zipcode_num year
  8. 
.     local depvars sh_residents_accomm_food sh_workers_accomm_food sh_resident
> s_underHS sh_workers_underHS
  9.  
.         foreach depvar of local depvars {
 10.         
.         estimate_twfe_model if cbsa != "99999", yvar(`depvar') xvars(mw_wkp_t
> ot_15_avg mw_res_avg) ///
>             controls(`controls') absorb(zipcode_num cbsa_num##year) ///
>             cluster(cbsa_num) model_name(`depvar') outfolder("../temp")
 11.         }
 12.         
.     use "../temp/estimates_sh_residents_accomm_food.dta", clear
 13.     gen p_equality = .
 14.     foreach ff in sh_workers_accomm_food sh_residents_underHS sh_workers_u
> nderHS {
 15.         append using ../temp/estimates_`ff'.dta
 16.     }
 17.     save             "`outstub'/estimates_static.dta", replace
 18.     export delimited "`outstub'/estimates_static.csv", replace
 19.         
. end

. 
. main
cbsa: all characters numeric; cbsa_num generated as long
       panel variable:  zipcode_num (strongly balanced)
        time variable:  year, 2010 to 2019
                delta:  1 unit
(dropped 142 singleton observations)
(MWFE estimator converged in 11 iterations)

HDFE Linear regression                            Number of obs   =    199,053
Absorbing 2 HDFE groups                           F(  11,    924) =       0.58
Statistics robust to heteroskedasticity           Prob > F        =     0.8484
                                                  R-squared       =     0.7549
                                                  Adj R-squared   =     0.7097
                                                  Within R-sq.    =     0.0001
Number of clusters (cbsa_num) =        925        Root MSE        =     0.0202

                             (Std. Err. adjusted for 925 clusters in cbsa_num)
------------------------------------------------------------------------------
             |               Robust
sh_residen~d |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
mw_~t_15_avg |  -.0004765   .0166458    -0.03   0.977    -.0331445    .0321915
  mw_res_avg |   .0043694   .0126677     0.34   0.730    -.0204915    .0292302
ln_emp_biz~v |  -.0004881   .0007562    -0.65   0.519    -.0019722    .0009961
 ln_emp_info |   -.000537   .0005276    -1.02   0.309    -.0015725    .0004984
  ln_emp_fin |   -.000706   .0011914    -0.59   0.554    -.0030441    .0016321
ln_estcou~rv |    .002837   .0022608     1.25   0.210    -.0015998    .0072739
ln_estcoun~o |  -.0000808   .0008516    -0.09   0.924    -.0017521    .0015904
ln_estcoun~n |   -.001165   .0022669    -0.51   0.607    -.0056139     .003284
ln_avgwwa~rv |  -.0008335   .0009993    -0.83   0.404    -.0027947    .0011277
ln_avgwwag~o |   .0003045   .0006835     0.45   0.656    -.0010369    .0016459
ln_avgwwag~n |  -.0004179   .0013517    -0.31   0.757    -.0030707    .0022349
------------------------------------------------------------------------------

Absorbed degrees of freedom:
---------------------------------------------------------+
     Absorbed FE | Categories  - Redundant  = Num. Coefs |
-----------------+---------------------------------------|
     zipcode_num |     22771       22771           0    *|
   cbsa_num#year |      8191        8191           0    *|
---------------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation
(note: file ../temp/estimates.dta not found)
file ../temp/estimates.dta saved

Generated variables:
              storage   display    value
variable name   type    format     label      variable label
-------------------------------------------------------------------------------
__by            byte    %9.0g      __by       subgraph ID
__plot          byte    %9.0g      __plot     plot ID
__at            byte    %9.0g                 plot position (category axis)
__mlbl          str1    %9s                   marker label
__mlpos         byte    %9.0g                 marker label position
__b             float   %9.0g                 coefficient
__V             float   %9.0g                 variance
__se            float   %9.0g                 standard error
__t             float   %9.0g                 t or z statistic
__df            int     %9.0g                 degrees of freedom
__pval          float   %9.0g                 p-value
__ll1           float   %9.0g                 CI1: lower limit
__ul1           float   %9.0g                 CI1: upper limit
(318,259 missing values generated)
(1 real change made)
(318,258 observations deleted)
(note: file ../temp/estimates_sh_residents_accomm_food.dta not found)
file ../temp/estimates_sh_residents_accomm_food.dta saved
(note: file ../temp/estimates_sh_residents_accomm_food.csv not found)
file ../temp/estimates_sh_residents_accomm_food.csv saved
(dropped 205 singleton observations)
(MWFE estimator converged in 11 iterations)

HDFE Linear regression                            Number of obs   =    196,285
Absorbing 2 HDFE groups                           F(  11,    924) =       1.01
Statistics robust to heteroskedasticity           Prob > F        =     0.4337
                                                  R-squared       =     0.7634
                                                  Adj R-squared   =     0.7193
                                                  Within R-sq.    =     0.0001
Number of clusters (cbsa_num) =        925        Root MSE        =     0.0586

                             (Std. Err. adjusted for 925 clusters in cbsa_num)
------------------------------------------------------------------------------
             |               Robust
sh_workers~d |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
mw_~t_15_avg |   .0152286   .0367511     0.41   0.679    -.0568966    .0873539
  mw_res_avg |  -.0059697   .0267053    -0.22   0.823    -.0583798    .0464405
ln_emp_biz~v |   -.004924   .0027983    -1.76   0.079    -.0104158    .0005677
 ln_emp_info |  -.0018849   .0014304    -1.32   0.188    -.0046923    .0009224
  ln_emp_fin |  -.0032071   .0031213    -1.03   0.304    -.0093328    .0029185
ln_estcou~rv |  -.0018768   .0056672    -0.33   0.741    -.0129989    .0092452
ln_estcoun~o |   .0018818   .0023367     0.81   0.421    -.0027041    .0064676
ln_estcoun~n |   .0041979   .0061996     0.68   0.498    -.0079689    .0163648
ln_avgwwa~rv |  -.0021166   .0036117    -0.59   0.558    -.0092047    .0049716
ln_avgwwag~o |  -.0005611   .0021792    -0.26   0.797    -.0048377    .0037156
ln_avgwwag~n |  -.0026453   .0037084    -0.71   0.476     -.009923    .0046325
------------------------------------------------------------------------------

Absorbed degrees of freedom:
---------------------------------------------------------+
     Absorbed FE | Categories  - Redundant  = Num. Coefs |
-----------------+---------------------------------------|
     zipcode_num |     22594       22594           0    *|
   cbsa_num#year |      8213        8213           0    *|
---------------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation
file ../temp/estimates.dta saved

Generated variables:
              storage   display    value
variable name   type    format     label      variable label
-------------------------------------------------------------------------------
__by            byte    %9.0g      __by       subgraph ID
__plot          byte    %9.0g      __plot     plot ID
__at            byte    %9.0g                 plot position (category axis)
__mlbl          str1    %9s                   marker label
__mlpos         byte    %9.0g                 marker label position
__b             float   %9.0g                 coefficient
__V             float   %9.0g                 variance
__se            float   %9.0g                 standard error
__t             float   %9.0g                 t or z statistic
__df            int     %9.0g                 degrees of freedom
__pval          float   %9.0g                 p-value
__ll1           float   %9.0g                 CI1: lower limit
__ul1           float   %9.0g                 CI1: upper limit
(318,259 missing values generated)
(1 real change made)
(318,258 observations deleted)
(note: file ../temp/estimates_sh_workers_accomm_food.dta not found)
file ../temp/estimates_sh_workers_accomm_food.dta saved
(note: file ../temp/estimates_sh_workers_accomm_food.csv not found)
file ../temp/estimates_sh_workers_accomm_food.csv saved
(dropped 142 singleton observations)
(MWFE estimator converged in 11 iterations)

HDFE Linear regression                            Number of obs   =    199,053
Absorbing 2 HDFE groups                           F(  11,    924) =       1.08
Statistics robust to heteroskedasticity           Prob > F        =     0.3746
                                                  R-squared       =     0.7876
                                                  Adj R-squared   =     0.7484
                                                  Within R-sq.    =     0.0001
Number of clusters (cbsa_num) =        925        Root MSE        =     0.0198

                             (Std. Err. adjusted for 925 clusters in cbsa_num)
------------------------------------------------------------------------------
             |               Robust
sh_residen~S |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
mw_~t_15_avg |  -.0098221   .0258796    -0.38   0.704    -.0606118    .0409676
  mw_res_avg |   .0047889   .0185226     0.26   0.796    -.0315624    .0411401
ln_emp_biz~v |   .0010374   .0006744     1.54   0.124    -.0002862    .0023609
 ln_emp_info |  -.0003297   .0004018    -0.82   0.412    -.0011183     .000459
  ln_emp_fin |   .0012937    .000955     1.35   0.176    -.0005805     .003168
ln_estcou~rv |  -.0006268   .0019881    -0.32   0.753    -.0045285    .0032748
ln_estcoun~o |  -.0006686    .000795    -0.84   0.401    -.0022287    .0008916
ln_estcoun~n |   .0022898   .0017105     1.34   0.181    -.0010671    .0056467
ln_avgwwa~rv |  -.0011553   .0009334    -1.24   0.216    -.0029872    .0006766
ln_avgwwag~o |  -.0003259   .0005611    -0.58   0.561    -.0014272    .0007753
ln_avgwwag~n |  -.0004304   .0012772    -0.34   0.736     -.002937    .0020763
------------------------------------------------------------------------------

Absorbed degrees of freedom:
---------------------------------------------------------+
     Absorbed FE | Categories  - Redundant  = Num. Coefs |
-----------------+---------------------------------------|
     zipcode_num |     22771       22771           0    *|
   cbsa_num#year |      8191        8191           0    *|
---------------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation
file ../temp/estimates.dta saved

Generated variables:
              storage   display    value
variable name   type    format     label      variable label
-------------------------------------------------------------------------------
__by            byte    %9.0g      __by       subgraph ID
__plot          byte    %9.0g      __plot     plot ID
__at            byte    %9.0g                 plot position (category axis)
__mlbl          str1    %9s                   marker label
__mlpos         byte    %9.0g                 marker label position
__b             float   %9.0g                 coefficient
__V             float   %9.0g                 variance
__se            float   %9.0g                 standard error
__t             float   %9.0g                 t or z statistic
__df            int     %9.0g                 degrees of freedom
__pval          float   %9.0g                 p-value
__ll1           float   %9.0g                 CI1: lower limit
__ul1           float   %9.0g                 CI1: upper limit
(318,259 missing values generated)
(1 real change made)
(318,258 observations deleted)
(note: file ../temp/estimates_sh_residents_underHS.dta not found)
file ../temp/estimates_sh_residents_underHS.dta saved
(note: file ../temp/estimates_sh_residents_underHS.csv not found)
file ../temp/estimates_sh_residents_underHS.csv saved
(dropped 205 singleton observations)
(MWFE estimator converged in 11 iterations)

HDFE Linear regression                            Number of obs   =    196,285
Absorbing 2 HDFE groups                           F(  11,    924) =       1.33
Statistics robust to heteroskedasticity           Prob > F        =     0.2011
                                                  R-squared       =     0.6094
                                                  Adj R-squared   =     0.5366
                                                  Within R-sq.    =     0.0001
Number of clusters (cbsa_num) =        925        Root MSE        =     0.0380

                             (Std. Err. adjusted for 925 clusters in cbsa_num)
------------------------------------------------------------------------------
             |               Robust
sh_workers~S |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
mw_~t_15_avg |  -.0106899   .0190593    -0.56   0.575    -.0480944    .0267146
  mw_res_avg |    .006613   .0131887     0.50   0.616    -.0192704    .0324963
ln_emp_biz~v |  -.0013783   .0012435    -1.11   0.268    -.0038188    .0010621
 ln_emp_info |   -.000749   .0009371    -0.80   0.424    -.0025881    .0010901
  ln_emp_fin |   .0017485   .0018821     0.93   0.353    -.0019452    .0054421
ln_estcou~rv |  -.0051753   .0041502    -1.25   0.213    -.0133202    .0029697
ln_estcoun~o |   .0001915   .0014915     0.13   0.898    -.0027357    .0031187
ln_estcoun~n |   .0078375   .0045089     1.74   0.083    -.0010115    .0166864
ln_avgwwa~rv |   .0032334   .0019614     1.65   0.100    -.0006159    .0070827
ln_avgwwag~o |  -.0021709   .0015141    -1.43   0.152    -.0051424    .0008006
ln_avgwwag~n |   .0000437   .0028505     0.02   0.988    -.0055505    .0056378
------------------------------------------------------------------------------

Absorbed degrees of freedom:
---------------------------------------------------------+
     Absorbed FE | Categories  - Redundant  = Num. Coefs |
-----------------+---------------------------------------|
     zipcode_num |     22594       22594           0    *|
   cbsa_num#year |      8213        8213           0    *|
---------------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation
file ../temp/estimates.dta saved

Generated variables:
              storage   display    value
variable name   type    format     label      variable label
-------------------------------------------------------------------------------
__by            byte    %9.0g      __by       subgraph ID
__plot          byte    %9.0g      __plot     plot ID
__at            byte    %9.0g                 plot position (category axis)
__mlbl          str1    %9s                   marker label
__mlpos         byte    %9.0g                 marker label position
__b             float   %9.0g                 coefficient
__V             float   %9.0g                 variance
__se            float   %9.0g                 standard error
__t             float   %9.0g                 t or z statistic
__df            int     %9.0g                 degrees of freedom
__pval          float   %9.0g                 p-value
__ll1           float   %9.0g                 CI1: lower limit
__ul1           float   %9.0g                 CI1: upper limit
(318,259 missing values generated)
(1 real change made)
(318,258 observations deleted)
(note: file ../temp/estimates_sh_workers_underHS.dta not found)
file ../temp/estimates_sh_workers_underHS.dta saved
(note: file ../temp/estimates_sh_workers_underHS.csv not found)
file ../temp/estimates_sh_workers_underHS.csv saved
(2 missing values generated)
(note: file ../output/estimates_static.dta not found)
file ../output/estimates_static.dta saved
(note: file ../output/estimates_static.csv not found)
file ../output/estimates_static.csv saved

. 
end of do-file


Execute:  R CMD BATCH --no-save "./table.R" table.Rout

R version 4.1.2 (2021-11-01) -- "Bird Hippie"
Copyright (C) 2021 The R Foundation for Statistical Computing
Platform: x86_64-w64-mingw32/x64 (64-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

  Natural language support but running in an English locale

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> remove(list = ls())
> 
> library(data.table)
> 
> main <- function() {
+   instub <- "../output"
+   outstub <- "../output/"
+   
+   est <- fread(file.path(instub, "estimates_static.csv"))
+   est <- est[var != "cumsum_from0"]
+   
+   models <- c("sh_residents_accomm_food", "sh_workers_accomm_food", 
+               "sh_residents_underHS", "sh_workers_underHS")
+   
+   txt <- c("<tab:share_migration>")
+   
+   txt <- c(txt,
+            get_estimates(est, models, 'mw_wkp_tot_15_avg', 'b'), 
+            get_estimates(est, models, 'mw_wkp_tot_15_avg', 'se'))
+   
+   txt <- c(txt,
+            get_estimates(est, models, 'mw_res_avg', 'b'), 
+            get_estimates(est, models, 'mw_res_avg', 'se'))
+   
+   txt <- c(txt, 
+            get_estimates(est, models, 'mw_res_avg', 'r2'), 
+            get_estimates(est, models, 'mw_res_avg', 'N'))
+   
+   fileConn <- file(file.path(outstub, "share_migration.txt"))
+   writeLines(txt, fileConn)
+   close(fileConn)
+ }
> 
> get_estimates <- function(data, models, variable, value) {
+   txt <- paste(lapply(models, \(x) data[model == x & var == variable, get(value)]), collapse = "\t")
+   return(txt)
+ }
> 
> main()
> 
> proc.time()
   user  system elapsed 
   0.39    0.15    0.75 

 make.py ended: 2022-05-19 12:25:47
