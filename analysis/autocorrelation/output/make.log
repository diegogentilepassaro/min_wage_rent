
 make.py started: 2022-05-03 14:54:17 C:\Users\diegog\Desktop\Diego\min_wage_rent\analysis\autocorrelation\code 




Execute:  StataMP-64 /e do "./autocorrelation.do"

  ___  ____  ____  ____  ____ (R)
 /__    /   ____/   /   ____/
___/   /   /___/   /   /___/   15.1   Copyright 1985-2017 StataCorp LLC
  Statistics/Data Analysis            StataCorp
                                      4905 Lakeway Drive
     MP - Parallel Edition            College Station, Texas 77845 USA
                                      800-STATA-PC        http://www.stata.com
                                      979-696-4600        stata@stata.com
                                      979-696-4601 (fax)

Single-user 32-core Stata perpetual license:
       Serial number:  501506205566
         Licensed to:  KU Leuven FEB (CES)
                       KU Leuven

Notes:
      1.  Stata is running in batch mode.
      2.  Unicode is supported; see help unicode_advice.
      3.  More than 2 billion observations are allowed; see help obs_advice.
      4.  Maximum number of variables is set to 5000; see help set_maxvar.


running c:\ado\personal\profile.do ...

. do ./autocorrelation.do 

. clear all

. set more off

. version 15

. adopath + ../../../lib/stata/min_wage/ado
  [1]  (BASE)      "C:\Program Files\Stata15\ado\base/"
  [2]  (SITE)      "C:\Program Files\Stata15\ado\site/"
  [3]              "."
  [4]  (PERSONAL)  "c:\ado\personal/"
  [5]  (PLUS)      "c:\ado\plus/"
  [6]  (OLDPLACE)  "c:\ado/"
  [7]              "../../../lib/stata/min_wage/ado"

. set maxvar 32000 


. 
. program main
  1.     local instub "../../../drive/derived_large/estimation_samples"
  2.     local outstub "../output"
  3. 
.     define_controls
  4.     local controls "`r(economic_controls)'"
  5. 
.     use "`instub'/zipcode_months" if fullbal_sample_SFCC, clear
  6.     xtset zipcode_num year_month
  7. 
.     * LEVELS
.     estimate_stacked_model, depvar(ln_rents)  ///
>         mw_var1(mw_res) mw_var2(mw_wkp_tot_17) controls(`controls') ///
>         absorb(year_month zipcode) cluster(statefips) ///
>         model_name(levels_model)
  8. 
.     * FD
.     reghdfe D.ln_rents D.mw_res D.mw_wkp_tot_17 D.`controls',   ///
>             absorb(year_month)  vce(cluster statefips) ///
>             nocons residuals(fd_res)
  9. 
.     reg fd_res L.fd_res, cluster(statefips)
 10.     test (L.fd_res = -0.5) 
 11.     local p_val_auto = "`r(p)'"
 12. 
.     estimate_dist_lag_model, depvar(ln_rents) ///
>         dyn_var(mw_wkp_tot_17) w(0) stat_var(mw_res) ///
>         controls(`controls') absorb(year_month) cluster(statefips) ///
>         model_name(baseline_model) outfolder("../temp")
 13.         
.     use ../temp/estimates_levels_model.dta, clear
 14.     append using ../temp/estimates_baseline_model.dta
 15. 
.     gen     p_val = ""
 16.     replace p_val = "`p_val_auto'" if model == "baseline_model"
 17.         
.     export delimited `outstub'/estimates_autocorrelation.csv, replace
 18. end

. 
. main
       panel variable:  zipcode_num (unbalanced)
        time variable:  year_month, 2010m1 to 2019m12, but with gaps
                delta:  1 month
(MWFE estimator converged in 4 iterations)

HDFE Linear regression                            Number of obs   =     91,635
Absorbing 2 HDFE groups                           F(  11,     38) =       3.04
Statistics robust to heteroskedasticity           Prob > F        =     0.0053
                                                  R-squared       =     0.9914
                                                  Adj R-squared   =     0.9913
                                                  Within R-sq.    =     0.0447
Number of clusters (statefips) =         39       Root MSE        =     0.0429

                             (Std. Err. adjusted for 39 clusters in statefips)
------------------------------------------------------------------------------
             |               Robust
    ln_rents |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      mw_res |  -.0128869   .2104415    -0.06   0.951    -.4389035    .4131296
mw_wkp_to~17 |   .0205955   .2261288     0.09   0.928    -.4371782    .4783693
ln_emp_biz~v |   .0960711   .0346759     2.77   0.009     .0258735    .1662687
 ln_emp_info |   .0122051    .016378     0.75   0.461    -.0209505    .0453607
  ln_emp_fin |   .1245454   .0516257     2.41   0.021     .0200346    .2290561
ln_estcoun~v |   -.026815   .1044081    -0.26   0.799    -.2381781    .1845481
ln_estcoun~o |     .01259   .0268947     0.47   0.642    -.0418555    .0670356
ln_estcoun~n |    .078239   .1353009     0.58   0.567    -.1956634    .3521414
ln_avgwwag~v |   .0033754   .0136807     0.25   0.806    -.0243197    .0310706
ln_avgwwag~o |   .0284014   .0075845     3.74   0.001     .0130475    .0437554
ln_avgwwag~n |  -.0032122   .0073926    -0.43   0.666    -.0181778    .0117534
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
  year_month |        71           0          71     |
     zipcode |      1296        1296           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation

 ( 1)  mw_res - mw_wkp_tot_17 = 0

       F(  1,    38) =    0.01
            Prob > F =    0.9379
(note: file ../temp/estimates.dta not found)
file ../temp/estimates.dta saved
file ../temp/estimates.dta saved

 ( 1)  mw_res + mw_wkp_tot_17 = 0

------------------------------------------------------------------------------
    ln_rents |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .0077086   .0929261     0.08   0.934    -.1804105    .1958277
------------------------------------------------------------------------------
number of observations will be reset to 1
Press any key to continue, or Break to abort
number of observations (_N) was 0, now 1
(note: file ../temp/estimates_cumsum_from0.dta not found)
file ../temp/estimates_cumsum_from0.dta saved
(182,426 observations deleted)
(0 observations deleted)
(1 missing value generated)
variable var was str6 now str13
(1 real change made)
(2 real changes made)
(note: variable at was byte, now float to accommodate using data's values)
(note: file ../temp/estimates_levels_model.dta not found)
file ../temp/estimates_levels_model.dta saved
(note: file ../temp/estimates_levels_model.csv not found)
file ../temp/estimates_levels_model.csv saved
(MWFE estimator converged in 1 iterations)

HDFE Linear regression                            Number of obs   =     90,345
Absorbing 1 HDFE group                            F(  11,     38) =      18.38
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.0249
                                                  Adj R-squared   =     0.0241
                                                  Within R-sq.    =     0.0009
Number of clusters (statefips) =         39       Root MSE        =     0.0284

                             (Std. Err. adjusted for 39 clusters in statefips)
------------------------------------------------------------------------------
             |               Robust
  D.ln_rents |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      mw_res |
         D1. |  -.0182507   .0154002    -1.19   0.243    -.0494268    .0129253
             |
mw_wkp_to~17 |
         D1. |   .0611791   .0251869     2.43   0.020     .0101909    .1121674
             |
ln_emp_biz~v |
         D1. |   .0157468   .0072925     2.16   0.037     .0009838    .0305098
             |
 ln_emp_info |  -.0000127   .0003622    -0.04   0.972    -.0007459    .0007204
  ln_emp_fin |   .0001512   .0003157     0.48   0.635     -.000488    .0007903
ln_estcoun~v |  -.0001716   .0005743    -0.30   0.767    -.0013342    .0009909
ln_estcoun~o |    .000734   .0004778     1.54   0.133    -.0002332    .0017012
ln_estcoun~n |  -.0003044    .000758    -0.40   0.690     -.001839    .0012302
ln_avgwwag~v |  -.0007613   .0008444    -0.90   0.373    -.0024708    .0009481
ln_avgwwag~o |   .0003408   .0005778     0.59   0.559    -.0008289    .0015106
ln_avgwwag~n |  -.0020687   .0007257    -2.85   0.007    -.0035377   -.0005997
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
  year_month |        70           0          70     |
-----------------------------------------------------+

Linear regression                               Number of obs     =     88,965
                                                F(1, 38)          =    1829.62
                                                Prob > F          =     0.0000
                                                R-squared         =     0.0705
                                                Root MSE          =      .0275

                             (Std. Err. adjusted for 39 clusters in statefips)
------------------------------------------------------------------------------
             |               Robust
      fd_res |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      fd_res |
         L1. |  -.2666933   .0062349   -42.77   0.000    -.2793153   -.2540713
             |
       _cons |   5.78e-06   .0001899     0.03   0.976    -.0003787    .0003903
------------------------------------------------------------------------------

 ( 1)  L.fd_res = -.5

       F(  1,    38) = 1400.20
            Prob > F =    0.0000
(MWFE estimator converged in 1 iterations)

HDFE Linear regression                            Number of obs   =     90,255
Absorbing 1 HDFE group                            F(  11,     38) =       2.78
Statistics robust to heteroskedasticity           Prob > F        =     0.0094
                                                  R-squared       =     0.0245
                                                  Adj R-squared   =     0.0236
                                                  Within R-sq.    =     0.0004
Number of clusters (statefips) =         39       Root MSE        =     0.0284

                             (Std. Err. adjusted for 39 clusters in statefips)
------------------------------------------------------------------------------
             |               Robust
  D.ln_rents |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
mw_wkp_to~17 |
         D1. |    .058092   .0261967     2.22   0.033     .0050595    .1111245
             |
      mw_res |
         D1. |  -.0158203   .0163931    -0.97   0.341    -.0490063    .0173657
             |
ln_emp_biz~v |
         D1. |    .015572   .0074222     2.10   0.043     .0005465    .0305975
             |
 ln_emp_info |
         D1. |   .0029589   .0045104     0.66   0.516    -.0061719    .0120898
             |
  ln_emp_fin |
         D1. |   .0090024   .0077151     1.17   0.251     -.006616    .0246209
             |
ln_estcoun~v |
         D1. |   .0094999   .0182118     0.52   0.605    -.0273679    .0463677
             |
ln_estcoun~o |
         D1. |   .0007299   .0070651     0.10   0.918    -.0135726    .0150324
             |
ln_estcoun~n |
         D1. |  -.0059173   .0173725    -0.34   0.735    -.0410861    .0292515
             |
ln_avgwwag~v |
         D1. |   .0022411   .0037473     0.60   0.553    -.0053449    .0098271
             |
ln_avgwwag~o |
         D1. |   .0007732   .0014806     0.52   0.605    -.0022242    .0037706
             |
ln_avgwwag~n |
         D1. |   -.002065   .0014013    -1.47   0.149    -.0049018    .0007719
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
  year_month |        70           0          70     |
-----------------------------------------------------+
file ../temp/estimates.dta saved
(182,426 observations deleted)
(0 observations deleted)
(1 missing value generated)
(1 real change made)
(2 real changes made)
(1 real change made)
(note: file ../temp/estimates_baseline_model.dta not found)
file ../temp/estimates_baseline_model.dta saved

 ( 1)  D.mw_wkp_tot_17 + D.mw_res = 0

------------------------------------------------------------------------------
  D.ln_rents |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .0422717   .0154788     2.73   0.010     .0109366    .0736068
------------------------------------------------------------------------------
number of observations will be reset to 1
Press any key to continue, or Break to abort
number of observations (_N) was 0, now 1
(note: file ../temp/estimates_baseline_model_sumsum_from0.dta not found)
file ../temp/estimates_baseline_model_sumsum_from0.dta saved
(note: variable at was byte, now float to accommodate using data's values)
file ../temp/estimates_baseline_model.dta saved
(note: file ../temp/estimates_baseline_model.csv not found)
file ../temp/estimates_baseline_model.csv saved
(note: variable model was str12, now str14 to accommodate using data's
       values)
(6 missing values generated)
variable p_val was str1 now str17
(3 real changes made)
(note: file ../output/estimates_autocorrelation.csv not found)
file ../output/estimates_autocorrelation.csv saved

. 
end of do-file


Execute:  R CMD BATCH --no-save "./table.R" table.Rout

R version 4.1.1 (2021-08-10) -- "Kick Things"
Copyright (C) 2021 The R Foundation for Statistical Computing
Platform: x86_64-w64-mingw32/x64 (64-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

  Natural language support but running in an English locale

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> remove(list = ls())
> 
> library(data.table)
> 
> main <- function() {
+   instub <- "../output"
+   outstub <- "../output/"
+   
+   est <- fread(file.path(instub, "estimates_autocorrelation.csv"))
+   est_var <- est[var != "cumsum_from0"]
+   
+   txt <- c("<tab:autocorrelation>")
+   
+   txt <- c(txt, 
+            paste(est_var[model == "levels_model" & var == "mw_res"]$b, 
+                  est_var[model == "baseline_model" & var == "mw_res"]$b, sep = "\t"), 
+            paste(est_var[model == "levels_model" & var == "mw_res"]$se, 
+                  est_var[model == "baseline_model" & var == "mw_res"]$se, sep = "\t"))
+   
+   txt <- c(txt, 
+            paste(est_var[model == "levels_model" & var == "mw_wkp_tot_17"]$b, 
+                  est_var[model == "baseline_model" & var == "mw_wkp_tot_17"]$b, sep = "\t"), 
+            paste(est_var[model == "levels_model" & var == "mw_wkp_tot_17"]$se,
+                  est_var[model == "baseline_model" & var == "mw_wkp_tot_17"]$se, sep = "\t"))
+   
+   #txt <- c(txt, paste(format(round(est_var[model == "baseline_model" & var == "mw_res"]$p_val),nsmall=3)))
+   # The value is so small that gets printed as 0.00000
+   # Will write value as <0.0001 manually
+ 
+   txt <- c(txt, paste(est_var[model == "levels_model" & var == "mw_res"]$r2,
+                       est_var[model == "baseline_model" & var == "mw_res"]$r2, sep = "\t"))
+   txt <- c(txt, paste(est_var[model == "levels_model" & var == "mw_res"]$N,
+                       est_var[model == "baseline_model" & var == "mw_res"]$N, sep = "\t"))
+   
+   fileConn <- file(file.path(outstub, "autocorrelation.txt"))
+   writeLines(txt, fileConn)
+   close(fileConn)
+ }
> 
> main()
> 
> proc.time()
   user  system elapsed 
   0.53    0.23    0.70 

 make.py ended: 2022-05-03 14:54:35
