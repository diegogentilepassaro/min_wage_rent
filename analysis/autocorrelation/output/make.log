
 make.py started: 2022-07-20 19:34:02 C:\Users\shermo\Documents\GitHub\min_wage_rent\analysis\autocorrelation\code 




Execute:  StataMP-64 /e do "./autocorrelation.do"

  ___  ____  ____  ____  ____ (R)
 /__    /   ____/   /   ____/
___/   /   /___/   /   /___/   15.1   Copyright 1985-2017 StataCorp LLC
  Statistics/Data Analysis            StataCorp
                                      4905 Lakeway Drive
     MP - Parallel Edition            College Station, Texas 77845 USA
                                      800-STATA-PC        http://www.stata.com
                                      979-696-4600        stata@stata.com
                                      979-696-4601 (fax)

Single-user 32-core Stata perpetual license:
       Serial number:  501506205566
         Licensed to:  KU Leuven FEB (CES)
                       KU Leuven

Notes:
      1.  Stata is running in batch mode.
      2.  Unicode is supported; see help unicode_advice.
      3.  More than 2 billion observations are allowed; see help obs_advice.
      4.  Maximum number of variables is set to 5000; see help set_maxvar.


running c:\ado\personal\profile.do ...

. do ./autocorrelation.do 

. clear all

. set more off

. version 15

. adopath + ../../../lib/stata/min_wage/ado
  [1]  (BASE)      "C:\Program Files\Stata15\ado\base/"
  [2]  (SITE)      "C:\Program Files\Stata15\ado\site/"
  [3]              "."
  [4]  (PERSONAL)  "c:\ado\personal/"
  [5]  (PLUS)      "c:\ado\plus/"
  [6]  (OLDPLACE)  "c:\ado/"
  [7]              "../../../lib/stata/min_wage/ado"

. set maxvar 32000 


. 
. program main
  1.     local instub "../../../drive/derived_large/estimation_samples"
  2.     local outstub "../output"
  3. 
.     define_controls
  4.     local controls "`r(economic_controls)'"
  5. 
.     use "`instub'/zipcode_months" if fullbal_sample_SFCC == 1, clear
  6.     xtset zipcode_num year_month
  7. 
.     * LEVELS
.     estimate_stacked_model, depvar(ln_rents)  ///
>         mw_var1(mw_res) mw_var2(mw_wkp_tot_17) controls(`controls') ///
>         absorb(year_month zipcode) cluster(statefips) ///
>         model_name(levels_model)
  8. 
.     * FD
.     reghdfe D.ln_rents D.mw_res D.mw_wkp_tot_17 D.`controls',   ///
>             absorb(year_month)  vce(cluster statefips) ///
>             nocons residuals(fd_res)
  9. 
.     reg fd_res L.fd_res, cluster(statefips)
 10.     test (L.fd_res = -0.5) 
 11.     local p_val_auto = "`r(p)'"
 12. 
.     estimate_dist_lag_model, depvar(ln_rents) ///
>         dyn_var(mw_wkp_tot_17) w(0) stat_var(mw_res) ///
>         controls(`controls') absorb(year_month) cluster(statefips) ///
>         model_name(baseline_model) outfolder("../temp")
 13.         
.     use ../temp/estimates_levels_model.dta, clear
 14.     append using ../temp/estimates_baseline_model.dta
 15. 
.     gen     p_val = ""
 16.     replace p_val = "`p_val_auto'" if model == "baseline_model"
 17.         
.     export delimited `outstub'/estimates_autocorrelation.csv, replace
 18. end

. 
. main
       panel variable:  zipcode_num (strongly balanced)
        time variable:  year_month, 2015m1 to 2019m12
                delta:  1 month
(MWFE estimator converged in 4 iterations)

HDFE Linear regression                            Number of obs   =     80,340
Absorbing 2 HDFE groups                           F(  11,     40) =       2.09
Statistics robust to heteroskedasticity           Prob > F        =     0.0440
                                                  R-squared       =     0.9924
                                                  Adj R-squared   =     0.9923
                                                  Within R-sq.    =     0.0351
Number of clusters (statefips) =         41       Root MSE        =     0.0414

                             (Std. Err. adjusted for 41 clusters in statefips)
------------------------------------------------------------------------------
             |               Robust
    ln_rents |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      mw_res |  -.0431893   .1751479    -0.25   0.806    -.3971764    .3107978
mw_wkp_to~17 |   .0376245   .2032963     0.19   0.854    -.3732528    .4485017
ln_emp_biz~v |   .0872158     .03467     2.52   0.016     .0171452    .1572864
 ln_emp_info |   .0062575   .0163867     0.38   0.705    -.0268613    .0393762
  ln_emp_fin |   .0883665      .0454     1.95   0.059    -.0033904    .1801234
ln_estcoun~v |  -.0018457   .1122111    -0.02   0.987    -.2286329    .2249414
ln_estcoun~o |   .0243179   .0290706     0.84   0.408    -.0344359    .0830718
ln_estcoun~n |   .0763862   .1407219     0.54   0.590    -.2080234    .3607958
ln_avgwwag~v |  -.0009709   .0118074    -0.08   0.935    -.0248345    .0228927
ln_avgwwag~o |   .0250524   .0073413     3.41   0.001      .010215    .0398897
ln_avgwwag~n |  -.0055763   .0056643    -0.98   0.331    -.0170243    .0058718
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
  year_month |        60           0          60     |
     zipcode |      1345        1345           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation
(note: file ../temp/estimates.dta not found)
file ../temp/estimates.dta saved
file ../temp/estimates.dta saved

 ( 1)  mw_res + mw_wkp_tot_17 = 0

------------------------------------------------------------------------------
    ln_rents |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |  -.0055648   .1004117    -0.06   0.956    -.2085044    .1973748
------------------------------------------------------------------------------
number of observations will be reset to 1
Press any key to continue, or Break to abort
number of observations (_N) was 0, now 1
(note: file ../temp/estimates_cumsum_from0.dta not found)
file ../temp/estimates_cumsum_from0.dta saved
(80,698 observations deleted)
(0 observations deleted)
(1 missing value generated)
variable var was str6 now str13
(1 real change made)
(2 real changes made)
(note: variable at was byte, now float to accommodate using data's values)
(note: file ../temp/estimates_levels_model.dta not found)
file ../temp/estimates_levels_model.dta saved
(note: file ../temp/estimates_levels_model.csv not found)
file ../temp/estimates_levels_model.csv saved
(MWFE estimator converged in 1 iterations)

HDFE Linear regression                            Number of obs   =     78,995
Absorbing 1 HDFE group                            F(  11,     40) =      13.09
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.0221
                                                  Adj R-squared   =     0.0213
                                                  Within R-sq.    =     0.0010
Number of clusters (statefips) =         41       Root MSE        =     0.0296

                             (Std. Err. adjusted for 41 clusters in statefips)
------------------------------------------------------------------------------
             |               Robust
  D.ln_rents |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      mw_res |
         D1. |  -.0226191   .0193561    -1.17   0.249    -.0617393    .0165011
             |
mw_wkp_to~17 |
         D1. |   .0723966   .0283239     2.56   0.014     .0151519    .1296412
             |
ln_emp_biz~v |
         D1. |   .0186871   .0087865     2.13   0.040     .0009289    .0364453
             |
 ln_emp_info |   .0000577    .000359     0.16   0.873    -.0006679    .0007833
  ln_emp_fin |   .0004064   .0003158     1.29   0.205    -.0002318    .0010446
ln_estcoun~v |   .0000608   .0005505     0.11   0.913    -.0010518    .0011733
ln_estcoun~o |   .0007461   .0005257     1.42   0.164    -.0003165    .0018086
ln_estcoun~n |  -.0009056   .0008274    -1.09   0.280    -.0025779    .0007667
ln_avgwwag~v |  -.0008248   .0008731    -0.94   0.351    -.0025894    .0009399
ln_avgwwag~o |   .0000454   .0006638     0.07   0.946    -.0012962     .001387
ln_avgwwag~n |  -.0022907   .0007382    -3.10   0.004    -.0037826   -.0007987
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
  year_month |        59           0          59     |
-----------------------------------------------------+

Linear regression                               Number of obs     =     77,567
                                                F(1, 40)          =    2431.62
                                                Prob > F          =     0.0000
                                                R-squared         =     0.0745
                                                Root MSE          =     .02854

                             (Std. Err. adjusted for 41 clusters in statefips)
------------------------------------------------------------------------------
             |               Robust
      fd_res |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      fd_res |
         L1. |  -.2732932   .0055422   -49.31   0.000    -.2844944    -.262092
             |
       _cons |   1.89e-06   .0002079     0.01   0.993    -.0004183    .0004221
------------------------------------------------------------------------------

 ( 1)  L.fd_res = -.5

       F(  1,    40) = 1673.27
            Prob > F =    0.0000
(MWFE estimator converged in 1 iterations)

HDFE Linear regression                            Number of obs   =     78,912
Absorbing 1 HDFE group                            F(  11,     40) =       3.68
Statistics robust to heteroskedasticity           Prob > F        =     0.0012
                                                  R-squared       =     0.0216
                                                  Adj R-squared   =     0.0207
                                                  Within R-sq.    =     0.0005
Number of clusters (statefips) =         41       Root MSE        =     0.0296

                             (Std. Err. adjusted for 41 clusters in statefips)
------------------------------------------------------------------------------
             |               Robust
  D.ln_rents |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
mw_wkp_to~17 |
         D1. |   .0687172   .0298119     2.31   0.026      .008465    .1289694
             |
      mw_res |
         D1. |  -.0199171   .0195096    -1.02   0.313    -.0593474    .0195131
             |
ln_emp_biz~v |
         D1. |   .0183028    .008743     2.09   0.043     .0006325    .0359731
             |
 ln_emp_info |
         D1. |   .0023708    .004417     0.54   0.594    -.0065563     .011298
             |
  ln_emp_fin |
         D1. |   .0113835   .0078043     1.46   0.152    -.0043896    .0271566
             |
ln_estcoun~v |
         D1. |   .0126444   .0176372     0.72   0.478    -.0230018    .0482905
             |
ln_estcoun~o |
         D1. |   .0035645    .008817     0.40   0.688    -.0142554    .0213844
             |
ln_estcoun~n |
         D1. |  -.0125562   .0194456    -0.65   0.522    -.0518572    .0267449
             |
ln_avgwwag~v |
         D1. |   .0024521   .0041577     0.59   0.559     -.005951    .0108551
             |
ln_avgwwag~o |
         D1. |   -.000489   .0016398    -0.30   0.767     -.003803    .0028251
             |
ln_avgwwag~n |
         D1. |  -.0021355   .0015493    -1.38   0.176    -.0052667    .0009958
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
  year_month |        59           0          59     |
-----------------------------------------------------+
file ../temp/estimates.dta saved
(80,698 observations deleted)
(0 observations deleted)
(1 missing value generated)
(1 real change made)
(2 real changes made)
(1 real change made)
(note: file ../temp/estimates_baseline_model.dta not found)
file ../temp/estimates_baseline_model.dta saved

 ( 1)  D.mw_wkp_tot_17 + D.mw_res = 0

------------------------------------------------------------------------------
  D.ln_rents |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .0488001    .016213     3.01   0.005     .0160324    .0815677
------------------------------------------------------------------------------
number of observations will be reset to 1
Press any key to continue, or Break to abort
number of observations (_N) was 0, now 1
(note: file ../temp/estimates_baseline_model_sumsum_from0.dta not found)
file ../temp/estimates_baseline_model_sumsum_from0.dta saved
(note: variable at was byte, now float to accommodate using data's values)
file ../temp/estimates_baseline_model.dta saved
(note: file ../temp/estimates_baseline_model.csv not found)
file ../temp/estimates_baseline_model.csv saved
(note: variable model was str12, now str14 to accommodate using data's
       values)
(6 missing values generated)
variable p_val was str1 now str17
(3 real changes made)
(note: file ../output/estimates_autocorrelation.csv not found)
file ../output/estimates_autocorrelation.csv saved

. 
end of do-file


Execute:  R CMD BATCH --no-save "./table.R" table.Rout

R version 4.1.1 (2021-08-10) -- "Kick Things"
Copyright (C) 2021 The R Foundation for Statistical Computing
Platform: x86_64-w64-mingw32/x64 (64-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

  Natural language support but running in an English locale

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> remove(list = ls())
> 
> library(data.table)
> 
> main <- function() {
+   instub <- "../output"
+   outstub <- "../output/"
+   
+   est <- fread(file.path(instub, "estimates_autocorrelation.csv"))
+   est_var <- est[var != "cumsum_from0"]
+   
+   txt <- c("<tab:autocorrelation>")
+   
+   txt <- c(txt, 
+            paste(est_var[model == "levels_model" & var == "mw_res"]$b, 
+                  est_var[model == "baseline_model" & var == "mw_res"]$b, sep = "\t"), 
+            paste(est_var[model == "levels_model" & var == "mw_res"]$se, 
+                  est_var[model == "baseline_model" & var == "mw_res"]$se, sep = "\t"))
+   
+   txt <- c(txt, 
+            paste(est_var[model == "levels_model" & var == "mw_wkp_tot_17"]$b, 
+                  est_var[model == "baseline_model" & var == "mw_wkp_tot_17"]$b, sep = "\t"), 
+            paste(est_var[model == "levels_model" & var == "mw_wkp_tot_17"]$se,
+                  est_var[model == "baseline_model" & var == "mw_wkp_tot_17"]$se, sep = "\t"))
+   
+   #txt <- c(txt, paste(format(round(est_var[model == "baseline_model" & var == "mw_res"]$p_val),nsmall=3)))
+   # The value is so small that gets printed as 0.00000
+   # Will write value as <0.0001 manually
+ 
+   txt <- c(txt, paste(est_var[model == "levels_model" & var == "mw_res"]$r2,
+                       est_var[model == "baseline_model" & var == "mw_res"]$r2, sep = "\t"))
+   txt <- c(txt, paste(est_var[model == "levels_model" & var == "mw_res"]$N,
+                       est_var[model == "baseline_model" & var == "mw_res"]$N, sep = "\t"))
+   
+   fileConn <- file(file.path(outstub, "autocorrelation.txt"))
+   writeLines(txt, fileConn)
+   close(fileConn)
+ }
> 
> main()
> 
> proc.time()
   user  system elapsed 
   0.48    0.21    0.67 

 make.py ended: 2022-07-20 19:34:17
