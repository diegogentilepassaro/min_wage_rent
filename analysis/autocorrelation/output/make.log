
 make.py started: 2022-04-13 19:01:36 C:\Users\Usuario\Documents\GitHub\min_wage_rent\analysis\autocorrelation\code 




Execute:  StataMP-64 /e do "./autocorrelation.do"

  ___  ____  ____  ____  ____ (R)
 /__    /   ____/   /   ____/
___/   /   /___/   /   /___/   16.0   Copyright 1985-2019 StataCorp LLC
  Statistics/Data Analysis            StataCorp
                                      Downloadly.ir     
     MP - Parallel Edition            College Station, Texas 77845 USA
                                      800-STATA-PC        http://www.stata.com
                                      979-696-4600        stata@stata.com
                                      979-696-4601 (fax)

Single-user 2-core Stata network license expires 20 Aug 2022:
       Serial number:  501609213901
         Licensed to:  DOWNLOADLY.IR 085227746673
                       WwW.DownLoadLy.iR 085227746673

Notes:
      1.  Stata is running in batch mode.
      2.  Unicode is supported; see help unicode_advice.
      3.  More than 2 billion observations are allowed; see help obs_advice.
      4.  Maximum number of variables is set to 5000; see help set_maxvar.

. do ./autocorrelation.do 

. clear all

. set more off

. version 15

. adopath + ../../../lib/stata/min_wage/ado
  [1]  (BASE)      "C:\Program Files\Stata\Stata16\ado\base/"
  [2]  (SITE)      "C:\Program Files\Stata\Stata16\ado\site/"
  [3]              "."
  [4]  (PERSONAL)  "C:\Users\Usuario\ado\personal/"
  [5]  (PLUS)      "C:\Users\Usuario\ado\plus/"
  [6]  (OLDPLACE)  "c:\ado/"
  [7]              "../../../lib/stata/min_wage/ado"

. set maxvar 32000 


. 
. program main
  1.     local instub "../../../drive/derived_large/estimation_samples"
  2.     local outstub "../output"
  3. 
.     define_controls
  4.     local controls "`r(economic_controls)'"
  5. 
.     use "`instub'/zipcode_months", clear
  6.     keep if baseline_sample_SFCC
  7. 
.     xtset zipcode_num year_month
  8. 
.     * LEVELS
.     estimate_stacked_model, depvar(ln_rents)  ///
>         mw_var1(mw_res) mw_var2(mw_wkp_tot_17) controls(`controls') ///
>         absorb(year_month zipcode) cluster(statefips) ///
>         model_name(levels_model)
  9. 
.     * FD
.     reghdfe D.ln_rents D.mw_res D.mw_wkp_tot_17 D.`controls',   ///
>             absorb(year_month)  vce(cluster statefips) ///
>             nocons residuals(fd_res)
 10. 
.     reg fd_res L.fd_res, cluster(statefips)
 11.     test (L.fd_res = -0.5) 
 12.     local p_val_auto = "`r(p)'"
 13. 
.     estimate_dist_lag_model, depvar(ln_rents) ///
>         dyn_var(mw_wkp_tot_17) w(0) stat_var(mw_res) ///
>         controls(`controls') absorb(year_month) cluster(statefips) ///
>         model_name(baseline_model) outfolder("../temp")
 14.         
.     use ../temp/estimates_levels_model.dta, clear
 15.     append using ../temp/estimates_baseline_model.dta
 16. 
.     gen     p_val = ""
 17.     replace p_val = "`p_val_auto'" if model == "baseline_model"
 18.         
.     export delimited `outstub'/estimates_autocorrelation.csv, replace
 19. end

. 
. main
(64,378 observations deleted)
       panel variable:  zipcode_num (unbalanced)
        time variable:  year_month, 2010m1 to 2019m12
                delta:  1 month
(MWFE estimator converged in 6 iterations)

HDFE Linear regression                            Number of obs   =    132,897
Absorbing 2 HDFE groups                           F(  11,     40) =       8.10
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.9889
                                                  Adj R-squared   =     0.9888
                                                  Within R-sq.    =     0.0663
Number of clusters (statefips) =         41       Root MSE        =     0.0488

                             (Std. Err. adjusted for 41 clusters in statefips)
------------------------------------------------------------------------------
             |               Robust
    ln_rents |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      mw_res |   .0740257   .2220796     0.33   0.741    -.3748139    .5228653
mw_wkp_to~17 |  -.0524169   .2225562    -0.24   0.815    -.5022197    .3973859
ln_emp_biz~v |   .1134373   .0279584     4.06   0.000     .0569313    .1699432
 ln_emp_info |   .0173788   .0093401     1.86   0.070    -.0014982    .0362559
  ln_emp_fin |   .0917709   .0341676     2.69   0.010     .0227156    .1608261
ln_estcoun~v |  -.0255332   .0929894    -0.27   0.785    -.2134718    .1624053
ln_estcoun~o |  -.0041389   .0252117    -0.16   0.870    -.0550936    .0468158
ln_estcoun~n |   .1426613    .107855     1.32   0.193    -.0753217    .3606443
ln_avgwwag~v |   .0111398   .0143263     0.78   0.441    -.0178147    .0400942
ln_avgwwag~o |   .0299248   .0097703     3.06   0.004     .0101784    .0496713
ln_avgwwag~n |   .0025143    .008913     0.28   0.779    -.0154994    .0205281
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
  year_month |       119           0         119     |
     zipcode |      1345        1345           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation

 ( 1)  mw_res - mw_wkp_tot_17 = 0

       F(  1,    40) =    0.08
            Prob > F =    0.7746
(note: file ../temp/estimates.dta not found)
file ../temp/estimates.dta saved
file ../temp/estimates.dta saved

 ( 1)  mw_res + mw_wkp_tot_17 = 0

------------------------------------------------------------------------------
    ln_rents |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .0216088   .0734544     0.29   0.770    -.1268479    .1700656
------------------------------------------------------------------------------
number of observations will be reset to 1
Press any key to continue, or Break to abort
number of observations (_N) was 0, now 1
(note: file ../temp/estimates_cumsum_from0.dta not found)
file ../temp/estimates_cumsum_from0.dta saved
(224,010 observations deleted)
(0 observations deleted)
(1 missing value generated)
variable var was str6 now str13
(1 real change made)
(2 real changes made)
(note: variable at was byte, now float to accommodate using data's values)
(note: file ../temp/estimates_levels_model.dta not found)
file ../temp/estimates_levels_model.dta saved
(note: file ../temp/estimates_levels_model.csv not found)
file ../temp/estimates_levels_model.csv saved
(MWFE estimator converged in 1 iterations)

HDFE Linear regression                            Number of obs   =    131,564
Absorbing 1 HDFE group                            F(  11,     40) =      12.59
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.0211
                                                  Adj R-squared   =     0.0202
                                                  Within R-sq.    =     0.0004
Number of clusters (statefips) =         41       Root MSE        =     0.0290

                             (Std. Err. adjusted for 41 clusters in statefips)
------------------------------------------------------------------------------
             |               Robust
  D.ln_rents |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      mw_res |
         D1. |  -.0208064   .0167845    -1.24   0.222    -.0547291    .0131163
             |
mw_wkp_to~17 |
         D1. |   .0530176   .0275717     1.92   0.062    -.0027069    .1087421
             |
ln_emp_biz~v |
         D1. |   .0106298   .0053318     1.99   0.053    -.0001462    .0214058
             |
 ln_emp_info |   .0000433   .0002675     0.16   0.872    -.0004973    .0005839
  ln_emp_fin |  -.0000531   .0002709    -0.20   0.845    -.0006006    .0004943
ln_estcoun~v |  -.0001879   .0005684    -0.33   0.743    -.0013367    .0009608
ln_estcoun~o |   .0004675   .0004143     1.13   0.266    -.0003699    .0013048
ln_estcoun~n |  -2.61e-06   .0007352    -0.00   0.997    -.0014885    .0014833
ln_avgwwag~v |  -.0006143   .0007058    -0.87   0.389    -.0020407    .0008121
ln_avgwwag~o |   .0006946   .0005672     1.22   0.228    -.0004517    .0018409
ln_avgwwag~n |  -.0012127    .000575    -2.11   0.041    -.0023747   -.0000506
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
  year_month |       118           0         118     |
-----------------------------------------------------+

Linear regression                               Number of obs     =    130,050
                                                F(1, 40)          =    1639.44
                                                Prob > F          =     0.0000
                                                R-squared         =     0.0553
                                                Root MSE          =     .02808

                             (Std. Err. adjusted for 41 clusters in statefips)
------------------------------------------------------------------------------
             |               Robust
      fd_res |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      fd_res |
         L1. |  -.2338444   .0057754   -40.49   0.000    -.2455168    -.222172
             |
       _cons |  -.0000116   .0001487    -0.08   0.938    -.0003121    .0002888
------------------------------------------------------------------------------

 ( 1)  L.fd_res = -.5

       F(  1,    40) = 2123.80
            Prob > F =    0.0000
(MWFE estimator converged in 1 iterations)

HDFE Linear regression                            Number of obs   =    131,383
Absorbing 1 HDFE group                            F(  11,     40) =       3.47
Statistics robust to heteroskedasticity           Prob > F        =     0.0018
                                                  R-squared       =     0.0209
                                                  Adj R-squared   =     0.0200
                                                  Within R-sq.    =     0.0002
Number of clusters (statefips) =         41       Root MSE        =     0.0290

                             (Std. Err. adjusted for 41 clusters in statefips)
------------------------------------------------------------------------------
             |               Robust
  D.ln_rents |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
mw_wkp_to~17 |
         D1. |   .0546001    .028096     1.94   0.059    -.0021839    .1113842
             |
      mw_res |
         D1. |  -.0207457   .0170608    -1.22   0.231     -.055227    .0137355
             |
ln_emp_biz~v |
         D1. |   .0110104   .0052785     2.09   0.043      .000342    .0216787
             |
 ln_emp_info |
         D1. |   .0012427   .0037993     0.33   0.745    -.0064359    .0089213
             |
  ln_emp_fin |
         D1. |   .0094857    .005991     1.58   0.121    -.0026225    .0215939
             |
ln_estcoun~v |
         D1. |   .0016258    .014737     0.11   0.913    -.0281589    .0314104
             |
ln_estcoun~o |
         D1. |   .0009174   .0052537     0.17   0.862    -.0097008    .0115355
             |
ln_estcoun~n |
         D1. |    .004174   .0073634     0.57   0.574     -.010708    .0190559
             |
ln_avgwwag~v |
         D1. |   .0028799   .0029809     0.97   0.340    -.0031448    .0089045
             |
ln_avgwwag~o |
         D1. |  -1.60e-06   .0016923    -0.00   0.999    -.0034219    .0034187
             |
ln_avgwwag~n |
         D1. |  -.0020228   .0011021    -1.84   0.074    -.0042502    .0002045
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
  year_month |       118           0         118     |
-----------------------------------------------------+
file ../temp/estimates.dta saved
(224,010 observations deleted)
(0 observations deleted)
(1 missing value generated)
(1 real change made)
(2 real changes made)
(1 real change made)
(note: file ../temp/estimates_baseline_model.dta not found)
file ../temp/estimates_baseline_model.dta saved

 ( 1)  D.mw_wkp_tot_17 + D.mw_res = 0

------------------------------------------------------------------------------
  D.ln_rents |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .0338544   .0152914     2.21   0.033     .0029493    .0647595
------------------------------------------------------------------------------
number of observations will be reset to 1
Press any key to continue, or Break to abort
number of observations (_N) was 0, now 1
(note: file ../temp/estimates_baseline_model_sumsum_from0.dta not found)
file ../temp/estimates_baseline_model_sumsum_from0.dta saved
(note: variable at was byte, now float to accommodate using data's values)
file ../temp/estimates_baseline_model.dta saved
(note: file ../temp/estimates_baseline_model.csv not found)
file ../temp/estimates_baseline_model.csv saved
(note: variable model was str12, now str14 to accommodate using data's
       values)
(6 missing values generated)
variable p_val was str1 now str17
(3 real changes made)
(note: file ../output/estimates_autocorrelation.csv not found)
file ../output/estimates_autocorrelation.csv saved

. 
end of do-file


Execute:  R CMD BATCH --no-save "./table.R" table.Rout

R version 4.1.2 (2021-11-01) -- "Bird Hippie"
Copyright (C) 2021 The R Foundation for Statistical Computing
Platform: x86_64-w64-mingw32/x64 (64-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

  Natural language support but running in an English locale

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> remove(list = ls())
> 
> library(data.table)
> 
> main <- function() {
+   instub <- "../output"
+   outstub <- "../output/"
+   
+   est <- fread(file.path(instub, "estimates_autocorrelation.csv"))
+   est_var <- est[var != "cumsum_from0"]
+   
+   txt <- c("<tab:autocorrelation>")
+   
+   txt <- c(txt, 
+            paste(est_var[model == "levels_model" & var == "mw_res"]$b, 
+                  est_var[model == "baseline_model" & var == "mw_res"]$b, sep = "\t"), 
+            paste(est_var[model == "levels_model" & var == "mw_res"]$se, 
+                  est_var[model == "baseline_model" & var == "mw_res"]$se, sep = "\t"))
+   
+   txt <- c(txt, 
+            paste(est_var[model == "levels_model" & var == "mw_wkp_tot_17"]$b, 
+                  est_var[model == "baseline_model" & var == "mw_wkp_tot_17"]$b, sep = "\t"), 
+            paste(est_var[model == "levels_model" & var == "mw_wkp_tot_17"]$se,
+                  est_var[model == "baseline_model" & var == "mw_wkp_tot_17"]$se, sep = "\t"))
+   
+   #txt <- c(txt, paste(format(round(est_var[model == "baseline_model" & var == "mw_res"]$p_val),nsmall=3)))
+   # The value is so small that gets printed as 0.00000
+   # Will write value as <0.0001 manually
+ 
+   txt <- c(txt, paste(est_var[model == "levels_model" & var == "mw_res"]$r2,
+                       est_var[model == "baseline_model" & var == "mw_res"]$r2, sep = "\t"))
+   txt <- c(txt, paste(est_var[model == "levels_model" & var == "mw_res"]$N,
+                       est_var[model == "baseline_model" & var == "mw_res"]$N, sep = "\t"))
+   
+   fileConn <- file(file.path(outstub, "autocorrelation.txt"))
+   writeLines(txt, fileConn)
+   close(fileConn)
+ }
> 
> main()
> 
> proc.time()
   user  system elapsed 
   0.31    0.10    0.37 

 make.py ended: 2022-04-13 19:01:52
