
 make.py started: 2022-05-05 12:34:40 C:\Users\diegog\Desktop\Diego\min_wage_rent\analysis\autocorrelation\code 




Execute:  StataMP-64 /e do "./autocorrelation.do"

  ___  ____  ____  ____  ____ (R)
 /__    /   ____/   /   ____/
___/   /   /___/   /   /___/   15.1   Copyright 1985-2017 StataCorp LLC
  Statistics/Data Analysis            StataCorp
                                      4905 Lakeway Drive
     MP - Parallel Edition            College Station, Texas 77845 USA
                                      800-STATA-PC        http://www.stata.com
                                      979-696-4600        stata@stata.com
                                      979-696-4601 (fax)

Single-user 32-core Stata perpetual license:
       Serial number:  501506205566
         Licensed to:  KU Leuven FEB (CES)
                       KU Leuven

Notes:
      1.  Stata is running in batch mode.
      2.  Unicode is supported; see help unicode_advice.
      3.  More than 2 billion observations are allowed; see help obs_advice.
      4.  Maximum number of variables is set to 5000; see help set_maxvar.


running c:\ado\personal\profile.do ...

. do ./autocorrelation.do 

. clear all

. set more off

. version 15

. adopath + ../../../lib/stata/min_wage/ado
  [1]  (BASE)      "C:\Program Files\Stata15\ado\base/"
  [2]  (SITE)      "C:\Program Files\Stata15\ado\site/"
  [3]              "."
  [4]  (PERSONAL)  "c:\ado\personal/"
  [5]  (PLUS)      "c:\ado\plus/"
  [6]  (OLDPLACE)  "c:\ado/"
  [7]              "../../../lib/stata/min_wage/ado"

. set maxvar 32000 


. 
. program main
  1.     local instub "../../../drive/derived_large/estimation_samples"
  2.     local outstub "../output"
  3. 
.     define_controls
  4.     local controls "`r(economic_controls)'"
  5. 
.     use "`instub'/zipcode_months" if fullbal_sample_SFCC == 1, clear
  6.     xtset zipcode_num year_month
  7. 
.     * LEVELS
.     estimate_stacked_model, depvar(ln_rents)  ///
>         mw_var1(mw_res) mw_var2(mw_wkp_tot_17) controls(`controls') ///
>         absorb(year_month zipcode) cluster(statefips) ///
>         model_name(levels_model)
  8.                 
.     * FD
.     reghdfe D.ln_rents D.mw_res D.mw_wkp_tot_17 D.`controls',   ///
>             absorb(year_month)  vce(cluster statefips) ///
>             nocons residuals(fd_res)
  9. 
.     reg fd_res L.fd_res, cluster(statefips)
 10.     test (L.fd_res = -0.5) 
 11.     local p_val_auto = "`r(p)'"
 12. 
.     estimate_dist_lag_model, depvar(ln_rents) ///
>         dyn_var(mw_wkp_tot_17) w(0) stat_var(mw_res) ///
>         controls(`controls') absorb(year_month) cluster(statefips) ///
>         model_name(baseline_model) outfolder("../temp")
 13.         
.     use ../temp/estimates_levels_model.dta, clear
 14.     append using ../temp/estimates_baseline_model.dta
 15. 
.     gen     p_val = ""
 16.     replace p_val = "`p_val_auto'" if model == "baseline_model"
 17.         
.     export delimited `outstub'/estimates_autocorrelation.csv, replace
 18. end

. 
. main
       panel variable:  zipcode_num (strongly balanced)
        time variable:  year_month, 2015m2 to 2019m12
                delta:  1 month
(MWFE estimator converged in 4 iterations)

HDFE Linear regression                            Number of obs   =     78,995
Absorbing 2 HDFE groups                           F(  11,     40) =       2.35
Statistics robust to heteroskedasticity           Prob > F        =     0.0242
                                                  R-squared       =     0.9925
                                                  Adj R-squared   =     0.9924
                                                  Within R-sq.    =     0.0344
Number of clusters (statefips) =         41       Root MSE        =     0.0411

                             (Std. Err. adjusted for 41 clusters in statefips)
------------------------------------------------------------------------------
             |               Robust
    ln_rents |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      mw_res |  -.0447721   .1735107    -0.26   0.798    -.3954503     .305906
mw_wkp_to~17 |   .0386327   .2022023     0.19   0.849    -.3700334    .4472988
ln_emp_biz~v |      .0862   .0346896     2.48   0.017     .0160897    .1563104
 ln_emp_info |   .0054143   .0161766     0.33   0.740    -.0272798    .0381084
  ln_emp_fin |   .0865312   .0446915     1.94   0.060    -.0037937    .1768561
ln_estcoun~v |   .0023147    .111941     0.02   0.984    -.2239265    .2285558
ln_estcoun~o |   .0249192   .0289168     0.86   0.394    -.0335238    .0833622
ln_estcoun~n |   .0732714   .1406351     0.52   0.605    -.2109627    .3575055
ln_avgwwag~v |  -.0018108   .0116761    -0.16   0.878     -.025409    .0217875
ln_avgwwag~o |   .0249941   .0071835     3.48   0.001     .0104757    .0395124
ln_avgwwag~n |   -.007598   .0052492    -1.45   0.156    -.0182071     .003011
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
  year_month |        59           0          59     |
     zipcode |      1345        1345           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation
(note: file ../temp/estimates.dta not found)
file ../temp/estimates.dta saved
file ../temp/estimates.dta saved

 ( 1)  mw_res + mw_wkp_tot_17 = 0

------------------------------------------------------------------------------
    ln_rents |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |  -.0061394   .1001367    -0.06   0.951    -.2085232    .1962443
------------------------------------------------------------------------------
number of observations will be reset to 1
Press any key to continue, or Break to abort
number of observations (_N) was 0, now 1
(note: file ../temp/estimates_cumsum_from0.dta not found)
file ../temp/estimates_cumsum_from0.dta saved
(79,353 observations deleted)
(0 observations deleted)
(1 missing value generated)
variable var was str6 now str13
(1 real change made)
(2 real changes made)
(note: variable at was byte, now float to accommodate using data's values)
(note: file ../temp/estimates_levels_model.dta not found)
file ../temp/estimates_levels_model.dta saved
(note: file ../temp/estimates_levels_model.csv not found)
file ../temp/estimates_levels_model.csv saved
(MWFE estimator converged in 1 iterations)

HDFE Linear regression                            Number of obs   =     77,650
Absorbing 1 HDFE group                            F(  11,     40) =      15.19
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.0222
                                                  Adj R-squared   =     0.0213
                                                  Within R-sq.    =     0.0010
Number of clusters (statefips) =         41       Root MSE        =     0.0297

                             (Std. Err. adjusted for 41 clusters in statefips)
------------------------------------------------------------------------------
             |               Robust
  D.ln_rents |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      mw_res |
         D1. |  -.0231384   .0199746    -1.16   0.254    -.0635086    .0172319
             |
mw_wkp_to~17 |
         D1. |   .0722468   .0290688     2.49   0.017     .0134966     .130997
             |
ln_emp_biz~v |
         D1. |    .018909    .008627     2.19   0.034     .0014732    .0363448
             |
 ln_emp_info |   .0000881   .0003716     0.24   0.814    -.0006629    .0008391
  ln_emp_fin |    .000363   .0002955     1.23   0.227    -.0002343    .0009602
ln_estcoun~v |  -.0000238   .0005355    -0.04   0.965    -.0011061    .0010585
ln_estcoun~o |   .0007276   .0005333     1.36   0.180    -.0003503    .0018055
ln_estcoun~n |  -.0007904   .0008199    -0.96   0.341    -.0024474    .0008666
ln_avgwwag~v |  -.0008556   .0008535    -1.00   0.322    -.0025805    .0008693
ln_avgwwag~o |    .000049   .0006635     0.07   0.941    -.0012921    .0013901
ln_avgwwag~n |  -.0023338   .0007183    -3.25   0.002    -.0037857    -.000882
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
  year_month |        58           0          58     |
-----------------------------------------------------+

Linear regression                               Number of obs     =     76,222
                                                F(1, 40)          =    2320.02
                                                Prob > F          =     0.0000
                                                R-squared         =     0.0752
                                                Root MSE          =     .02855

                             (Std. Err. adjusted for 41 clusters in statefips)
------------------------------------------------------------------------------
             |               Robust
      fd_res |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      fd_res |
         L1. |  -.2741135   .0056909   -48.17   0.000    -.2856153   -.2626116
             |
       _cons |   1.94e-06   .0002165     0.01   0.993    -.0004356    .0004395
------------------------------------------------------------------------------

 ( 1)  L.fd_res = -.5

       F(  1,    40) = 1575.48
            Prob > F =    0.0000
(MWFE estimator converged in 1 iterations)

HDFE Linear regression                            Number of obs   =     77,567
Absorbing 1 HDFE group                            F(  11,     40) =       3.64
Statistics robust to heteroskedasticity           Prob > F        =     0.0013
                                                  R-squared       =     0.0216
                                                  Adj R-squared   =     0.0208
                                                  Within R-sq.    =     0.0005
Number of clusters (statefips) =         41       Root MSE        =     0.0297

                             (Std. Err. adjusted for 41 clusters in statefips)
------------------------------------------------------------------------------
             |               Robust
  D.ln_rents |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
mw_wkp_to~17 |
         D1. |   .0682528   .0306608     2.23   0.032     .0062849    .1302206
             |
      mw_res |
         D1. |  -.0201556   .0200408    -1.01   0.321    -.0606595    .0203484
             |
ln_emp_biz~v |
         D1. |   .0185599   .0085991     2.16   0.037     .0011805    .0359393
             |
 ln_emp_info |
         D1. |   .0022322    .004402     0.51   0.615    -.0066647    .0111291
             |
  ln_emp_fin |
         D1. |   .0112185   .0077973     1.44   0.158    -.0045404    .0269773
             |
ln_estcoun~v |
         D1. |   .0125664   .0176318     0.71   0.480    -.0230687    .0482015
             |
ln_estcoun~o |
         D1. |   .0036026   .0088281     0.41   0.685    -.0142397    .0214448
             |
ln_estcoun~n |
         D1. |  -.0124931   .0194276    -0.64   0.524    -.0517577    .0267714
             |
ln_avgwwag~v |
         D1. |   .0024476   .0041605     0.59   0.560    -.0059612    .0108563
             |
ln_avgwwag~o |
         D1. |  -.0004892   .0016403    -0.30   0.767    -.0038044     .002826
             |
ln_avgwwag~n |
         D1. |  -.0021324   .0015485    -1.38   0.176    -.0052621    .0009973
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
  year_month |        58           0          58     |
-----------------------------------------------------+
file ../temp/estimates.dta saved
(79,353 observations deleted)
(0 observations deleted)
(1 missing value generated)
(1 real change made)
(2 real changes made)
(1 real change made)
(note: file ../temp/estimates_baseline_model.dta not found)
file ../temp/estimates_baseline_model.dta saved

 ( 1)  D.mw_wkp_tot_17 + D.mw_res = 0

------------------------------------------------------------------------------
  D.ln_rents |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .0480972   .0165846     2.90   0.006     .0145784    .0816159
------------------------------------------------------------------------------
number of observations will be reset to 1
Press any key to continue, or Break to abort
number of observations (_N) was 0, now 1
(note: file ../temp/estimates_baseline_model_sumsum_from0.dta not found)
file ../temp/estimates_baseline_model_sumsum_from0.dta saved
(note: variable at was byte, now float to accommodate using data's values)
file ../temp/estimates_baseline_model.dta saved
(note: file ../temp/estimates_baseline_model.csv not found)
file ../temp/estimates_baseline_model.csv saved
(note: variable model was str12, now str14 to accommodate using data's
       values)
(6 missing values generated)
variable p_val was str1 now str17
(3 real changes made)
(note: file ../output/estimates_autocorrelation.csv not found)
file ../output/estimates_autocorrelation.csv saved

. 
end of do-file


Execute:  R CMD BATCH --no-save "./table.R" table.Rout

R version 4.1.1 (2021-08-10) -- "Kick Things"
Copyright (C) 2021 The R Foundation for Statistical Computing
Platform: x86_64-w64-mingw32/x64 (64-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

  Natural language support but running in an English locale

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> remove(list = ls())
> 
> library(data.table)
> 
> main <- function() {
+   instub <- "../output"
+   outstub <- "../output/"
+   
+   est <- fread(file.path(instub, "estimates_autocorrelation.csv"))
+   est_var <- est[var != "cumsum_from0"]
+   
+   txt <- c("<tab:autocorrelation>")
+   
+   txt <- c(txt, 
+            paste(est_var[model == "levels_model" & var == "mw_res"]$b, 
+                  est_var[model == "baseline_model" & var == "mw_res"]$b, sep = "\t"), 
+            paste(est_var[model == "levels_model" & var == "mw_res"]$se, 
+                  est_var[model == "baseline_model" & var == "mw_res"]$se, sep = "\t"))
+   
+   txt <- c(txt, 
+            paste(est_var[model == "levels_model" & var == "mw_wkp_tot_17"]$b, 
+                  est_var[model == "baseline_model" & var == "mw_wkp_tot_17"]$b, sep = "\t"), 
+            paste(est_var[model == "levels_model" & var == "mw_wkp_tot_17"]$se,
+                  est_var[model == "baseline_model" & var == "mw_wkp_tot_17"]$se, sep = "\t"))
+   
+   #txt <- c(txt, paste(format(round(est_var[model == "baseline_model" & var == "mw_res"]$p_val),nsmall=3)))
+   # The value is so small that gets printed as 0.00000
+   # Will write value as <0.0001 manually
+ 
+   txt <- c(txt, paste(est_var[model == "levels_model" & var == "mw_res"]$r2,
+                       est_var[model == "baseline_model" & var == "mw_res"]$r2, sep = "\t"))
+   txt <- c(txt, paste(est_var[model == "levels_model" & var == "mw_res"]$N,
+                       est_var[model == "baseline_model" & var == "mw_res"]$N, sep = "\t"))
+   
+   fileConn <- file(file.path(outstub, "autocorrelation.txt"))
+   writeLines(txt, fileConn)
+   close(fileConn)
+ }
> 
> main()
> 
> proc.time()
   user  system elapsed 
   0.31    0.17    0.45 

 make.py ended: 2022-05-05 12:34:53
