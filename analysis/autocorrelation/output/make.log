
 make.py started: 2022-03-22 08:19:28 C:\Users\shermo\Documents\GitHub\min_wage_rent\analysis\autocorrelation\code 




Execute:  StataMP-64 /e do "./autocorrelation.do"

  ___  ____  ____  ____  ____ (R)
 /__    /   ____/   /   ____/
___/   /   /___/   /   /___/   15.1   Copyright 1985-2017 StataCorp LLC
  Statistics/Data Analysis            StataCorp
                                      4905 Lakeway Drive
     MP - Parallel Edition            College Station, Texas 77845 USA
                                      800-STATA-PC        http://www.stata.com
                                      979-696-4600        stata@stata.com
                                      979-696-4601 (fax)

Single-user 32-core Stata perpetual license:
       Serial number:  501506205566
         Licensed to:  KU Leuven FEB (CES)
                       KU Leuven

Notes:
      1.  Stata is running in batch mode.
      2.  Unicode is supported; see help unicode_advice.
      3.  More than 2 billion observations are allowed; see help obs_advice.
      4.  Maximum number of variables is set to 5000; see help set_maxvar.


running c:\ado\personal\profile.do ...

. do ./autocorrelation.do 

. clear all

. set more off

. version 15

. adopath + ../../../lib/stata/min_wage/ado
  [1]  (BASE)      "C:\Program Files\Stata15\ado\base/"
  [2]  (SITE)      "C:\Program Files\Stata15\ado\site/"
  [3]              "."
  [4]  (PERSONAL)  "c:\ado\personal/"
  [5]  (PLUS)      "c:\ado\plus/"
  [6]  (OLDPLACE)  "c:\ado/"
  [7]              "../../../lib/stata/min_wage/ado"

. set maxvar 32000 


. 
. program main
  1.     local instub "../../../drive/derived_large/estimation_samples"
  2.     local outstub "../output"
  3. 
.     define_controls
  4.     local controls "`r(economic_controls)'"
  5. 
.     use "`instub'/zipcode_months", clear
  6.     keep if baseline_sample
  7. 
.     xtset zipcode_num year_month
  8. 
.     * LEVELS
.     estimate_stacked_model, depvar(ln_rents)  ///
>         mw_var1(mw_res) mw_var2(mw_wkp_tot_17) controls(`controls') ///
>         absorb(year_month zipcode) cluster(statefips) ///
>         model_name(levels_model)
  9. 
.     * FD
.     reghdfe D.ln_rents D.mw_res D.mw_wkp_tot_17 D.`controls',   ///
>             absorb(year_month)  vce(cluster statefips) ///
>             nocons residuals(fd_res)
 10. 
.     reg fd_res L.fd_res, cluster(statefips)
 11.     test (L.fd_res = -0.5) 
 12.     local p_val_auto = "`r(p)'"
 13. 
.     estimate_dist_lag_model, depvar(ln_rents) ///
>         dyn_var(mw_wkp_tot_17) w(0) stat_var(mw_res) ///
>         controls(`controls') absorb(year_month) cluster(statefips) ///
>         model_name(baseline_model) outfolder("../temp")
 14.         
.     use ../temp/estimates_levels_model.dta, clear
 15.     append using ../temp/estimates_baseline_model.dta
 16. 
.     gen     p_val = ""
 17.     replace p_val = "`p_val_auto'" if model == "baseline_model"
 18.         
.     export delimited `outstub'/estimates_autocorrelation.csv, replace
 19. end

. 
. main
(64,378 observations deleted)
       panel variable:  zipcode_num (unbalanced)
        time variable:  year_month, 2010m2 to 2019m12
                delta:  1 month
(MWFE estimator converged in 6 iterations)

HDFE Linear regression                            Number of obs   =    132,897
Absorbing 2 HDFE groups                           F(  11,     40) =       8.12
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.9889
                                                  Adj R-squared   =     0.9888
                                                  Within R-sq.    =     0.0664
Number of clusters (statefips) =         41       Root MSE        =     0.0488

                             (Std. Err. adjusted for 41 clusters in statefips)
------------------------------------------------------------------------------
             |               Robust
    ln_rents |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      mw_res |   .0861543   .2143887     0.40   0.690    -.3471415      .51945
mw_wkp_to~17 |  -.0659515   .2159311    -0.31   0.762    -.5023645    .3704614
ln_emp_biz~v |   .1134094   .0281105     4.03   0.000      .056596    .1702227
 ln_emp_info |   .0173697   .0093643     1.85   0.071    -.0015562    .0362957
  ln_emp_fin |   .0916375   .0342593     2.67   0.011     .0223969    .1608782
ln_estcoun~v |  -.0260366   .0930813    -0.28   0.781    -.2141609    .1620877
ln_estcoun~o |  -.0039797   .0252806    -0.16   0.876    -.0550738    .0471143
ln_estcoun~n |   .1429718   .1082229     1.32   0.194    -.0757549    .3616985
ln_avgwwag~v |   .0108961   .0143207     0.76   0.451    -.0180471    .0398394
ln_avgwwag~o |   .0299657   .0098113     3.05   0.004     .0101362    .0497951
ln_avgwwag~n |   .0025676   .0088999     0.29   0.774    -.0154198     .020555
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
  year_month |       119           0         119     |
     zipcode |      1345        1345           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation

 ( 1)  mw_res - mw_wkp_tot_17 = 0

       F(  1,    40) =    0.13
            Prob > F =    0.7216
(note: file ../temp/estimates.dta not found)
file ../temp/estimates.dta saved
file ../temp/estimates.dta saved

 ( 1)  mw_res + mw_wkp_tot_17 = 0

------------------------------------------------------------------------------
    ln_rents |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .0202027   .0738053     0.27   0.786    -.1289633    .1693687
------------------------------------------------------------------------------
number of observations will be reset to 1
Press any key to continue, or Break to abort
number of observations (_N) was 0, now 1
(note: file ../temp/estimates_cumsum_from0.dta not found)
file ../temp/estimates_cumsum_from0.dta saved
(133,598 observations deleted)
(0 observations deleted)
(1 missing value generated)
variable var was str6 now str13
(1 real change made)
(2 real changes made)
(note: variable at was byte, now float to accommodate using data's values)
(note: file ../temp/estimates_levels_model.dta not found)
file ../temp/estimates_levels_model.dta saved
(note: file ../temp/estimates_levels_model.csv not found)
file ../temp/estimates_levels_model.csv saved
(MWFE estimator converged in 1 iterations)

HDFE Linear regression                            Number of obs   =    131,564
Absorbing 1 HDFE group                            F(  11,     40) =      12.63
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.0211
                                                  Adj R-squared   =     0.0202
                                                  Within R-sq.    =     0.0004
Number of clusters (statefips) =         41       Root MSE        =     0.0290

                             (Std. Err. adjusted for 41 clusters in statefips)
------------------------------------------------------------------------------
             |               Robust
  D.ln_rents |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      mw_res |
         D1. |  -.0207103   .0165736    -1.25   0.219    -.0542067    .0127861
             |
mw_wkp_to~17 |
         D1. |   .0532514    .027734     1.92   0.062    -.0028011    .1093039
             |
ln_emp_biz~v |
         D1. |   .0106312   .0053311     1.99   0.053    -.0001433    .0214057
             |
 ln_emp_info |   .0000436   .0002674     0.16   0.871    -.0004969    .0005841
  ln_emp_fin |  -.0000537   .0002707    -0.20   0.844    -.0006008    .0004935
ln_estcoun~v |   -.000188   .0005684    -0.33   0.743    -.0013367    .0009607
ln_estcoun~o |   .0004693   .0004138     1.13   0.264    -.0003671    .0013056
ln_estcoun~n |  -3.83e-06   .0007352    -0.01   0.996    -.0014898    .0014821
ln_avgwwag~v |  -.0006145   .0007056    -0.87   0.389    -.0020405    .0008115
ln_avgwwag~o |    .000694   .0005671     1.22   0.228    -.0004523    .0018402
ln_avgwwag~n |  -.0012132   .0005751    -2.11   0.041    -.0023755   -.0000508
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
  year_month |       118           0         118     |
-----------------------------------------------------+

Linear regression                               Number of obs     =    130,050
                                                F(1, 40)          =    1639.73
                                                Prob > F          =     0.0000
                                                R-squared         =     0.0553
                                                Root MSE          =     .02808

                             (Std. Err. adjusted for 41 clusters in statefips)
------------------------------------------------------------------------------
             |               Robust
      fd_res |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      fd_res |
         L1. |  -.2338452   .0057749   -40.49   0.000    -.2455167   -.2221738
             |
       _cons |  -.0000116   .0001486    -0.08   0.938     -.000312    .0002887
------------------------------------------------------------------------------

 ( 1)  L.fd_res = -.5

       F(  1,    40) = 2124.14
            Prob > F =    0.0000
(MWFE estimator converged in 1 iterations)

HDFE Linear regression                            Number of obs   =    131,383
Absorbing 1 HDFE group                            F(  11,     40) =       3.44
Statistics robust to heteroskedasticity           Prob > F        =     0.0020
                                                  R-squared       =     0.0209
                                                  Adj R-squared   =     0.0200
                                                  Within R-sq.    =     0.0002
Number of clusters (statefips) =         41       Root MSE        =     0.0290

                             (Std. Err. adjusted for 41 clusters in statefips)
------------------------------------------------------------------------------
             |               Robust
  D.ln_rents |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
mw_wkp_to~17 |
         D1. |   .0545151    .028321     1.92   0.061    -.0027238    .1117541
             |
      mw_res |
         D1. |  -.0203622   .0168962    -1.21   0.235    -.0545106    .0137862
             |
ln_emp_biz~v |
         D1. |   .0110112   .0052775     2.09   0.043      .000345    .0216774
             |
 ln_emp_info |
         D1. |   .0012441   .0037988     0.33   0.745    -.0064335    .0089217
             |
  ln_emp_fin |
         D1. |    .009493   .0059892     1.59   0.121    -.0026116    .0215976
             |
ln_estcoun~v |
         D1. |    .001629   .0147401     0.11   0.913    -.0281618    .0314199
             |
ln_estcoun~o |
         D1. |   .0009153   .0052525     0.17   0.863    -.0097004     .011531
             |
ln_estcoun~n |
         D1. |    .004182   .0073674     0.57   0.573    -.0107082    .0190722
             |
ln_avgwwag~v |
         D1. |   .0028771   .0029822     0.96   0.340    -.0031501    .0089043
             |
ln_avgwwag~o |
         D1. |  -4.35e-06   .0016923    -0.00   0.998    -.0034247     .003416
             |
ln_avgwwag~n |
         D1. |  -.0020208   .0011016    -1.83   0.074    -.0042472    .0002056
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
  year_month |       118           0         118     |
-----------------------------------------------------+
file ../temp/estimates.dta saved
(133,598 observations deleted)
(0 observations deleted)
(1 missing value generated)
(1 real change made)
(2 real changes made)
(1 real change made)
(note: file ../temp/estimates_baseline_model.dta not found)
file ../temp/estimates_baseline_model.dta saved

 ( 1)  D.mw_wkp_tot_17 + D.mw_res = 0

------------------------------------------------------------------------------
  D.ln_rents |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .0341529    .015483     2.21   0.033     .0028606    .0654452
------------------------------------------------------------------------------
number of observations will be reset to 1
Press any key to continue, or Break to abort
number of observations (_N) was 0, now 1
(note: file ../temp/estimates_baseline_model_sumsum_from0.dta not found)
file ../temp/estimates_baseline_model_sumsum_from0.dta saved
(note: variable at was byte, now float to accommodate using data's values)
file ../temp/estimates_baseline_model.dta saved
(note: file ../temp/estimates_baseline_model.csv not found)
file ../temp/estimates_baseline_model.csv saved
(note: variable model was str12, now str14 to accommodate using data's
       values)
(6 missing values generated)
variable p_val was str1 now str17
(3 real changes made)
(note: file ../output/estimates_autocorrelation.csv not found)
file ../output/estimates_autocorrelation.csv saved

. 
end of do-file


Execute:  R CMD BATCH --no-save "./table.R" table.Rout

R version 4.1.1 (2021-08-10) -- "Kick Things"
Copyright (C) 2021 The R Foundation for Statistical Computing
Platform: x86_64-w64-mingw32/x64 (64-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

  Natural language support but running in an English locale

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> remove(list = ls())
> 
> library(data.table)
> 
> main <- function() {
+   instub <- "../output"
+   outstub <- "../output/"
+   
+   est <- fread(file.path(instub, "estimates_autocorrelation.csv"))
+   est_var <- est[var != "cumsum_from0"]
+   
+   txt <- c("<tab:autocorrelation>")
+   
+   txt <- c(txt, 
+            paste(est_var[model == "levels_model" & var == "mw_res"]$b, 
+                  est_var[model == "baseline_model" & var == "mw_res"]$b, sep = "\t"), 
+            paste(est_var[model == "levels_model" & var == "mw_res"]$se, 
+                  est_var[model == "baseline_model" & var == "mw_res"]$se, sep = "\t"))
+   
+   txt <- c(txt, 
+            paste(est_var[model == "levels_model" & var == "mw_wkp_tot_17"]$b, 
+                  est_var[model == "baseline_model" & var == "mw_wkp_tot_17"]$b, sep = "\t"), 
+            paste(est_var[model == "levels_model" & var == "mw_wkp_tot_17"]$se,
+                  est_var[model == "baseline_model" & var == "mw_wkp_tot_17"]$se, sep = "\t"))
+   
+   #txt <- c(txt, paste(format(round(est_var[model == "baseline_model" & var == "mw_res"]$p_val),nsmall=3)))
+   # The value is so small that gets printed as 0.00000
+   # Will write value as <0.0001 manually
+ 
+   txt <- c(txt, paste(est_var[model == "levels_model" & var == "mw_res"]$N, 
+                       est_var[model == "baseline_model" & var == "mw_res"]$N, sep = "\t"))
+   
+   fileConn <- file(file.path(outstub, "autocorrelation.txt"))
+   writeLines(txt, fileConn)
+   close(fileConn)
+ }
> 
> main()
> 
> proc.time()
   user  system elapsed 
   0.53    0.18    0.71 

 make.py ended: 2022-03-22 08:19:47
