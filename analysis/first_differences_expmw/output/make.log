
 make.py started: 2020-12-07 13:05:53 C:\Users\shermo\Documents\GitHub\min_wage_rent\analysis\first_differences_expmw\code 




Execute:  StataMP-64 /e do "./preclean.do"

  ___  ____  ____  ____  ____ (R)
 /__    /   ____/   /   ____/
___/   /   /___/   /   /___/   15.1   Copyright 1985-2017 StataCorp LLC
  Statistics/Data Analysis            StataCorp
                                      4905 Lakeway Drive
     MP - Parallel Edition            College Station, Texas 77845 USA
                                      800-STATA-PC        http://www.stata.com
                                      979-696-4600        stata@stata.com
                                      979-696-4601 (fax)

Single-user 32-core Stata perpetual license:
       Serial number:  501506205566
         Licensed to:  KU Leuven FEB (CES)
                       KU Leuven

Notes:
      1.  Stata is running in batch mode.
      2.  Unicode is supported; see help unicode_advice.
      3.  More than 2 billion observations are allowed; see help obs_advice.
      4.  Maximum number of variables is set to 5000; see help set_maxvar.

. do ./preclean.do 

. clear all

. set more off

. adopath + ../../../lib/stata/gslab_misc/ado
  [1]  (BASE)      "C:\Program Files\Stata15\ado\base/"
  [2]  (SITE)      "C:\Program Files\Stata15\ado\site/"
  [3]              "."
  [4]  (PERSONAL)  "c:\ado\personal/"
  [5]  (PLUS)      "c:\ado\plus/"
  [6]  (OLDPLACE)  "c:\ado/"
  [7]              "../../../lib/stata/gslab_misc/ado"

. set maxvar 32000 


. 
. program main
  1.         local instub "../../../drive/derived_large/output"
  2.         local outstub "../temp"
  3.         local logfile "../output/data_file_manifest.log"
  4. 
.         use "`instub'/baseline_rent_panel.dta", clear 
  5.         keep zipcode place_code msa countyfips statefips                  
>                                               ///
>                 year_month calendar_month trend trend_sq trend_cu            
>                                            ///
>                 dactual_mw actual_mw medrentpricepsqft_*                     
>                                    ///
>                 med_hhinc20105 renthouse_share2010 white_share2010 black_shar
> e2010                      ///
>                 college_share20105 work_county_share20105 unemp_share20105 te
> en_share2010   ///
>                 sh_treated* exp_mw*  ///
>                 estcount_* avgwwage_* emp_* u1* ///
>                 walall_29y_lowinc_ssh halall_29y_lowinc_ssh walall_29y_lowinc
> _zsh halall_29y_lowinc_zsh 
  6. 
.         local het_vars "walall_29y_lowinc_ssh halall_29y_lowinc_ssh walall_29
> y_lowinc_zsh halall_29y_lowinc_zsh" 
  7. 
.         create_vars,    log_vars(actual_mw medrentpricepsqft_sfcc exp_mw* emp
> _* estcount_* avgwwage_* u1*)      ///
>                                         heterogeneity_vars(`het_vars')
  8.         
.         xtset zipcode year_month
  9.         simplify_varnames
 10.         gen d_ln_mw = D.ln_mw
 11. 
.         save_data "`outstub'/fd_rent_panel.dta", key(zipcode year_month) repl
> ace log(`logfile')
 12. end

. 
. program create_vars
  1.         syntax, log_vars(str) heterogeneity_vars(str)
  2. 
.         local log_vars_expanded "" 
  3.         foreach v in `log_vars' {
  4.                 unab this_var: `v'
  5.                 local log_vars_expanded `"`log_vars_expanded' `this_var'"'
  6.         }
  7.         cap unab bpsvars: u1*
  8.         foreach var in `bpsvars' {
  9.                 cap replace `var' = 1 + `var'
 10.         }
 11.         foreach var in `log_vars_expanded' {
 12.                 gen ln_`var' = ln(`var')
 13.         }
 14. 
.         gen nonwhite_share2010 = 1 - white_share2010
 15.         
.         gen trend_times2 = 2*trend
 16. 
.         foreach var in `heterogeneity_vars' {
 17. 
.                 gquantiles `var'_nat_qtl = `var', xtile nq(4)
 18. 
.                 gquantiles `var'_st_qtl  = `var', xtile nq(4) by(statefips)
 19.         }
 20. 
.         foreach var in  exp_mw_totjob exp_mw_job_young exp_mw_job_lowinc ln_e
> xp_mw_totjob {
 21.                 g D`var' = D.`var'
 22.                 order D`var', after(`var')
 23.         }
 24.         g treat_dir = (dactual_mw>0)
 25.         bys zipcode (year_month): gegen ziptreated_dir = max(treat_dir)
 26. 
.         g treat_ind = (dactual_mw==0 & Dexp_mw_totjob!=0)
 27.         bys zipcode (year_month): gegen ziptreated_ind = max(treat_ind)
 28.         replace ziptreated_ind = 0 if ziptreated_dir==1
 29. end

. 
. program simplify_varnames
  1.         
.         cap rename ln_actual_mw                  ln_mw 
  2.         cap rename ln_exp_mw_totjob              ln_expmw       
  3.         cap rename Dln_exp_mw_totjob             d_ln_expmw
  4.         cap rename ln_medrentpricepsqft_sfcc     ln_med_rent_psqft_sfcc
  5.         cap rename ln_medrentpricepsqft_2br      ln_med_rent_psqft_2br
  6.         cap rename ln_medrentpricepsqft_mfr5plus ln_med_rent_psqft_mfr5plu
> s
  7. 
. end

. 
. main
(43,225 missing values generated)
(4,266 missing values generated)
(5,523 missing values generated)
(4,266 missing values generated)
(4,266 missing values generated)
(4,302 missing values generated)
(4,995 missing values generated)
(4,266 missing values generated)
(7,515 missing values generated)
(5,544 missing values generated)
(7,224 missing values generated)
(7,704 missing values generated)
(4,266 missing values generated)
(4,266 missing values generated)
(4,266 missing values generated)
(4,266 missing values generated)
(4,266 missing values generated)
(4,266 missing values generated)
(4,266 missing values generated)
(4,266 missing values generated)
(4,266 missing values generated)
(4,266 missing values generated)
(4,791 missing values generated)
(4,473 missing values generated)
(4,266 missing values generated)
(4,266 missing values generated)
(5,523 missing values generated)
(4,266 missing values generated)
(4,266 missing values generated)
(4,302 missing values generated)
(4,995 missing values generated)
(4,266 missing values generated)
(7,515 missing values generated)
(5,544 missing values generated)
(7,224 missing values generated)
(7,704 missing values generated)
(4,266 missing values generated)
(20,637 missing values generated)
(20,637 missing values generated)
(20,791 missing values generated)
(20,422 missing values generated)
(20,422 missing values generated)
(20,632 missing values generated)
(1,305 missing values generated)
(1,305 missing values generated)
(1,305 missing values generated)
(1,305 missing values generated)
performance warning: -by- prefix may be slower than -by()-
performance warning: -by- prefix may be slower than -by()-
(99,480 real changes made)
       panel variable:  zipcode (strongly balanced)
        time variable:  year_month, 2010m1 to 2019m12
                delta:  1 month
(1,305 missing values generated)
(data already sorted by zipcode year_month)
  variable trend_times2 was float now int
  variable treat_dir was float now byte
  variable ziptreated_dir was float now byte
  variable treat_ind was float now byte
  variable ziptreated_ind was float now byte
  (2,192,400 bytes saved)
============================================================================
File: ../temp/fd_rent_panel.dta
Key: zipcode year_month
============================================================================
  156600:141(59484):3017670085:3531971674

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
     zipcode |    156,600    51920.57    29185.78       2113      99577
  year_month |    156,600       659.5    34.63992        600        719
  place_code |    129,840    40657.65    22564.03        410      87240
  countyfips |    156,240    24077.04    16484.28       1003      56021
   statefips |    156,600    23.97854    16.42626          1         56
-------------+---------------------------------------------------------
   actual_mw |    156,600     8.07779    1.207718       7.25         16
  dactual_mw |    156,600    .0152048    .1121804          0       2.21
calendar_m~h |    156,600         6.5    3.452064          1         12
         msa |    156,600    436.1801    240.1675         12        860
       trend |    156,600       225.5    34.63992        166        285
-------------+---------------------------------------------------------
    trend_sq |    156,600    52050.17    15659.42      27556      81225
    trend_cu |    156,600    1.23e+07     5408203    4574296   2.31e+07
medrentpri~c |    113,375    1.188344    .7824813   .4180214   6.731387
medrentpri~r |     24,789     1.84165    .9184999   .5015197   6.499599
medrentpri~s |     37,588    1.842276    1.001968   .5106889    6.48415
-------------+---------------------------------------------------------
white_s~2010 |    156,600    .5392018    .2225559   .0037838   .9401773
black_s~2010 |    156,600     .165993    .2003044    .003148   .9753076
teen_sh~2010 |    156,600    .1391686    .0481773   .0154552   .6235335
renthou~2010 |    156,600    .3834818     .176359   .0644567   .9662035
work_c~20105 |    156,600    .7557563    .2036341   .1421741    .995271
-------------+---------------------------------------------------------
colleg~20105 |    156,600    .4447718    .1662964   .0856991   .9082218
unemp_~20105 |    156,600    .0918395    .0398028   .0211286   .3417086
med_hh~20105 |    156,600    66919.72    24575.33   20527.66   191553.2
estcount_b~v |    152,334    9999.109    9479.666         60      56758
avgwwage_b~v |    152,334    1252.943     434.753        226       4727
-------------+---------------------------------------------------------
 emp_bizserv |    152,334    134280.4    143863.4        329     640795
estcount_c~t |    152,334    3240.845    2964.949         35      17066
avgwwage_c~t |    152,334    1101.682    300.2516          0       2610
   emp_const |    152,334    33961.34    34828.34          0     173791
estcount_e~e |    152,334    8227.076     21233.7         48     245237
-------------+---------------------------------------------------------
avgwwage_e~e |    152,334    941.4742    149.2963        415       1975
   emp_eduhe |    152,334    115818.9    123147.9        481     832830
estcount_f~v |    152,334    114.6276    78.41071          3        456
avgwwage_f~v |    152,334    1433.107    237.0973        654       2724
  emp_fedgov |    152,334    13996.36    16476.49         42     215436
-------------+---------------------------------------------------------
estcount_fin |    152,334    5103.827    5200.065         31      30405
avgwwage_fin |    152,334    1561.778    965.2728          0       9557
     emp_fin |    152,334    59554.22    75796.09          0     397839
estcount_i~o |    152,334    920.5367    1381.953          4      13271
avgwwage_i~o |    152,334    1505.066    619.8231          0       7380
-------------+---------------------------------------------------------
    emp_info |    152,334     21041.8    35131.53          0     238776
estcount_l~s |    152,334     4278.02    4708.982         27      39458
avgwwage_l~s |    152,334    446.7155    134.2174        203       1131
    emp_leis |    152,334    93083.36    93941.89        279     551950
estcount_l~v |    152,334    307.0999    500.6009          1       4213
-------------+---------------------------------------------------------
avgwwage_l~v |    152,334     961.066    234.2175          0       2042
  emp_locgov |    152,334    72440.11     83733.3          0     463616
estcount_m~u |    152,334    1585.705    1954.571         10      13469
avgwwage_m~u |    152,334    1272.821    396.7011          0       4970
    emp_manu |    152,334    47066.83    62216.94          0     376653
-------------+---------------------------------------------------------
estcount_n~s |    151,809    211.8503    322.4773          1       1859
avgwwage_n~s |    151,809     1133.13    862.1372          0       8606
  emp_natres |    151,809    5209.702    14255.94          0      97846
estcount_s~v |    152,127    140.9174    411.2392          1       5969
avgwwage_s~v |    152,127    1014.599    299.7829          0       2572
-------------+---------------------------------------------------------
   emp_stgov |    152,127    15702.68     16274.8          0     114555
estcount_t~p |    152,334    9407.097    9423.344         84      59615
avgwwage_t~p |    152,334    861.6176    200.9456        356       3193
  emp_transp |    152,334    143870.8    144966.3        629     872187
    u1_bldgs |    136,332    274.6464    358.5711      -1621       2688
-------------+---------------------------------------------------------
    u1_units |    136,332    274.6464    358.5711      -1621       2688
    u1_value |    136,332    6.74e+07    8.85e+07  -1.35e+08   6.43e+08
 u1rep_bldgs |    136,332    262.2207    357.1151       -477       3759
 u1rep_units |    136,332    262.2207    357.1151       -477       3759
 u1rep_value |    136,332    6.48e+07    8.80e+07  -1.32e+08   8.74e+08
-------------+---------------------------------------------------------
walall_2~zsh |    156,240    .1083971     .038474    .016846   .2689381
walall_2~ssh |    156,240    .0047145    .0069488   .0001284   .0780198
halall_2~zsh |    156,480    .0884494    .0230536   .0226725   .2311187
halall_2~ssh |    156,480    .0047388    .0068154   .0000821   .1035602
sh_treated~b |    156,600    .0339043    .1747498          0          1
-------------+---------------------------------------------------------
sh_treated~g |    156,600    .0338492    .1747645          0          1
sh_treated~c |    156,600     .033833    .1752691          0          1
exp_mw_tot~b |    156,600    8.056843    1.203166   6.290004    14.9773
Dexp_mw_to~b |    155,295    .0155288    .1045222  -.9757763       1.95
exp_mw_job~g |    156,600    8.056479    1.198454   6.191732   15.06725
-------------+---------------------------------------------------------
Dexp_mw_jo~g |    155,295    .0154548    .1044156  -1.192155       1.95
exp_mw_job~c |    156,600    8.060082    1.198426    5.81432   15.01755
Dexp_mw_jo~c |    155,295    .0154317    .1049299  -1.071968       1.95
       ln_mw |    156,600    2.079602    .1327775   1.981001   2.772589
ln_med_ren~c |    113,375    .0472541    .4493362  -.8722228   1.906781
-------------+---------------------------------------------------------
    ln_expmw |    156,600    2.076924    .1336937   1.838962   2.706536
  d_ln_expmw |    155,295    .0016898    .0111907  -.1092541    .216913
ln_exp_mw_~g |    156,600    2.076951    .1331873   1.823215   2.712524
ln_exp_mw_~c |    156,600    2.077413     .133066   1.760324   2.709219
ln_emp_biz~v |    152,334     11.1079    1.386833   5.796058   13.37047
-------------+---------------------------------------------------------
ln_emp_const |    151,077    9.898243    1.163929    5.31812   12.06561
ln_emp_eduhe |    152,334    11.04979    1.265752   6.175867   13.63258
ln_emp_fed~v |    152,334    8.916783    1.366298    3.73767   12.28042
  ln_emp_fin |    152,298     10.1951    1.453844   4.454347    12.8938
 ln_emp_info |    151,605    9.006354    1.549054   2.397895   12.38328
-------------+---------------------------------------------------------
 ln_emp_leis |    152,334    10.86029    1.201423   5.631212   13.22121
ln_emp_loc~v |    149,085    10.64621    1.126278   7.035269   13.04681
 ln_emp_manu |    151,056    10.03149    1.300125   4.543295   12.83908
ln_emp_nat~s |    149,376    6.965424    1.822514   .6931472   11.49115
ln_emp_stgov |    148,896    9.034368    1.379967   3.433987   11.64881
-------------+---------------------------------------------------------
ln_emp_tra~p |    152,334    11.32724     1.17516   6.444131   13.67876
ln_estcou~rv |    152,334    8.631197    1.247367   4.094345   10.94655
ln_estcoun~t |    152,334    7.635146     1.03843   3.555348   9.744843
ln_estcoun~e |    152,334    8.181607    1.281123   3.871201   12.40998
ln_estc~dgov |    152,334    4.473625    .8084444   1.098612   6.122493
-------------+---------------------------------------------------------
ln_estcoun~n |    152,334    7.954898    1.209698   3.433987   10.32236
ln_estcoun~o |    152,334    6.071164    1.338014   1.386294   9.493337
ln_estcou~is |    152,334    7.826022    1.132301   3.295837   10.58299
ln_estc~cgov |    152,334    5.011076    1.182188          0    8.34593
ln_estcoun~u |    152,334    6.723795    1.232672   2.302585   9.508146
-------------+---------------------------------------------------------
ln_estcou~es |    151,809    4.487069    1.396346          0   7.527794
ln_estc~tgov |    152,127    4.153889    1.108505          0   8.694335
ln_estcoun~p |    152,334    8.611839    1.149419   4.430817   10.99566
ln_avgwwa~rv |    152,334    7.078706    .3263035   5.420535   8.461046
ln_avgwwag~t |    151,077    6.982886    .2416808   6.122493   7.867105
-------------+---------------------------------------------------------
ln_avgwwag~e |    152,334    6.835008    .1581563   6.028278   7.588324
ln_avgw~dgov |    152,334    7.254022    .1652383   6.483108   7.909857
ln_avgwwag~n |    152,298    7.248893    .4144532   6.180017    9.16503
ln_avgwwag~o |    151,605    7.255309    .3551167   5.888878   8.906528
ln_avgwwa~is |    152,334    6.062217    .2759297   5.313206   7.030858
-------------+---------------------------------------------------------
ln_avgw~cgov |    149,085    6.872029    .1862849    6.05444   7.621685
ln_avgwwag~u |    151,056    7.120257    .2655766   6.139884   8.511175
ln_avgwwa~es |    149,376    6.864454    .5646283   5.384495   9.060215
ln_avgw~tgov |    148,896    6.912519    .2494281   6.001415   7.852439
ln_avgwwag~p |    152,334     6.73349    .2227761   5.874931   8.068716
-------------+---------------------------------------------------------
 ln_u1_bldgs |    135,963    4.775056    1.589248          0   7.896553
 ln_u1_units |    135,963    4.775056    1.589248          0   7.896553
 ln_u1_value |    135,809    16.64258    3.649391          0   20.28197
ln_u1rep_b~s |    136,178    4.599205    1.755203          0   8.231908
ln_u1rep_u~s |    136,178    4.599205    1.755203          0   8.231908
-------------+---------------------------------------------------------
ln_u1rep_v~e |    135,968    16.17866    4.454632          0   20.58904
nonwhit~2010 |    156,600    .4607982    .2225559   .0598227   .9962162
trend_times2 |    156,600         451    69.27985        332        570
walall_29y.. |    156,240    2.499232    1.118037          1          4
w~ssh_st_qtl |    156,240    2.469278    1.120361          1          4
-------------+---------------------------------------------------------
halall_29y.. |    156,480         2.5    1.118038          1          4
h~ssh_st_qtl |    156,480    2.468558    1.120337          1          4
walall_29y.. |    156,240    2.499232    1.118037          1          4
w~zsh_st_qtl |    156,240    2.469278    1.120361          1          4
halall_29y.. |    156,480         2.5    1.118038          1          4
-------------+---------------------------------------------------------
h~zsh_st_qtl |    156,480    2.468558    1.120337          1          4
   treat_dir |    156,600     .033857    .1808615          0          1
ziptreated~r |    156,600    .6413793    .4795971          0          1
   treat_ind |    156,600     .032516    .1773665          0          1
ziptreated~d |    156,600    .3586207    .4795971          0          1
-------------+---------------------------------------------------------
     d_ln_mw |    155,295    .0016445    .0119584   -.290338   .2412503




(note: file ../temp/fd_rent_panel.dta not found)
file ../temp/fd_rent_panel.dta saved

. 
end of do-file


Execute:  StataMP-64 /e do "./estimates.do"

  ___  ____  ____  ____  ____ (R)
 /__    /   ____/   /   ____/
___/   /   /___/   /   /___/   15.1   Copyright 1985-2017 StataCorp LLC
  Statistics/Data Analysis            StataCorp
                                      4905 Lakeway Drive
     MP - Parallel Edition            College Station, Texas 77845 USA
                                      800-STATA-PC        http://www.stata.com
                                      979-696-4600        stata@stata.com
                                      979-696-4601 (fax)

Single-user 32-core Stata perpetual license:
       Serial number:  501506205566
         Licensed to:  KU Leuven FEB (CES)
                       KU Leuven

Notes:
      1.  Stata is running in batch mode.
      2.  Unicode is supported; see help unicode_advice.
      3.  More than 2 billion observations are allowed; see help obs_advice.
      4.  Maximum number of variables is set to 5000; see help set_maxvar.

. do ./estimates.do 

. clear all

. set more off

. adopath + ../../../lib/stata/gslab_misc/ado
  [1]  (BASE)      "C:\Program Files\Stata15\ado\base/"
  [2]  (SITE)      "C:\Program Files\Stata15\ado\site/"
  [3]              "."
  [4]  (PERSONAL)  "c:\ado\personal/"
  [5]  (PLUS)      "c:\ado\plus/"
  [6]  (OLDPLACE)  "c:\ado/"
  [7]              "../../../lib/stata/gslab_misc/ado"

. adopath + ../../../lib/stata/min_wage/ado
  [1]  (BASE)      "C:\Program Files\Stata15\ado\base/"
  [2]  (SITE)      "C:\Program Files\Stata15\ado\site/"
  [3]              "."
  [4]  (PERSONAL)  "c:\ado\personal/"
  [5]  (PLUS)      "c:\ado\plus/"
  [6]  (OLDPLACE)  "c:\ado/"
  [7]              "../../../lib/stata/gslab_misc/ado"
  [8]              "../../../lib/stata/min_wage/ado"

. set maxvar 32000


. 
. program main
  1.         local instub "../temp"
  2.         local outstub "../output"
  3. 
.         use "`instub'/fd_rent_panel.dta", clear
  4. 
.         make_results_labels, w(5)
  5.         local estlabels_dyn "`r(estlabels_dyn)'"
  6.         local estlabels_static "`r(estlabels_static)'"
  7. 
.         run_models, depvar(ln_med_rent_psqft_sfcc) absorb(year_month) ///
>                 cluster(statefips)
  8.         esttab using "`outstub'/static_dynamic_comptable_test.tex", replac
> e compress se substitute(\_ _) ///
>                 keep(D.ln_mw D.ln_expmw) b(%9.4f) se(%9.4f) coeflabels(D.ln_m
> w "Statutory MW" D.ln_expmw "Experienced MW") ///
>                 stats(space r2 N, fmt(%s1 %9.3f %9.0gc) ///
>                 labels("\vspace{-2mm}" "R-squared" "Observations")) ///
>                 nomtitles ///
>                 star(* 0.10 ** 0.05 *** 0.01) nonote
  9. 
. 
.         /* static_dynamic_comp, depvar(ln_med_rent_psqft_sfcc) absorb(year_mo
> nth) ///
>                 cluster(statefips)
>         esttab using "`outstub'/static_dynamic_comptable.tex", replace compre
> ss se substitute(\_ _) ///
>         rename(D.ln_expmw D.ln_mw) keep(D.ln_mw) b(%9.4f) se(%9.4f) coeflabel
> s(D.ln_mw "Static Effect") ///
>         stats(space cumsum_b cumsum_V space p_value_F ctrl_wage ctrl_emp ctrl
> _estab r2 N,  ///
>         fmt(%s1 %s7 %s7 %s1 %9.3f %s3 %s3 %s3 %9.3f %9.0gc) ///
>         labels("\vspace{-1mm}" "Cumulative effect" " " "\hline" "P-value no p
> retrends" ///
>                 "Wage controls" "Employment controls" "Establishment-count co
> ntrols"  ///
>                         "R-squared" "Observations")) ///
>         mtitles("Baseline" "Experienced MW")  ///
>         star(* 0.10 ** 0.05 *** 0.01) nonote */
. 
. 
. 
. end 

. 
. program other_stuff
  1.         syntax, depvar(str) absorb(str) cluster(str) [w(int 5) t_plot(real
>  1.645)]
  2. 
.         eststo clear 
  3.         define_controls
  4. 
.         local emp_ctrls "`r(emp_ctrls)'"
  5.         local estcount_ctrls "`r(estcount_ctrls)'"
  6.         local avgwwage_ctrls "`r(avgwwage_ctrls)'"
  7. 
.         local controls `"`emp_ctrls' `estcount_ctrls' `avgwwage_ctrls'"'
  8. 
.         local lincomest_coeffs "D1.ln_mw + LD.ln_mw"
  9.         local pretrend_test "(F1D.ln_mw = 0)"
 10.         local lincomest_coeffs_exp "D1.ln_expmw + LD.ln_expmw"
 11.         local pretrend_test_exp "(F1D.ln_expmw = 0)"
 12.         forvalues i = 2(1)`w'{
 13.                 local lincomest_coeffs "`lincomest_coeffs' + L`i'D.ln_mw"
 14.             local pretrend_test " `pretrend_test' (F`i'D.ln_mw = 0)"
 15.                 local lincomest_coeffs_exp "`lincomest_coeffs_exp' + L`i'D
> .ln_expmw"
 16.             local pretrend_test_exp " `pretrend_test_exp' (F`i'D.ln_expmw 
> = 0)"
 17. 
.         }
 18. 
.         *baseline 
. 
.         eststo: qui reghdfe D.`depvar' D.ln_mw D.(`controls'), ///
>                 absorb(`absorb') vce(cluster `cluster') nocons
 19.         comment_table_treatindicator, treat_dir("No") treat_ind("No")
 20.         estadd local space ""
 21.         estadd local cumsum_b "`cumsum_b'"
 22.         estadd local cumsum_V "`cumsum_V'" 
 23. 
.         *experienced 
.         qui reghdfe D.`depvar' L(0/`w').D.ln_expmw D.(`controls'), absorb(`ab
> sorb') vce(cluster `cluster') nocons       
 24. 
.         add_cumsum, coefficients(`lincomest_coeffs_exp') i(1)
 25. 
.         local cumsum_b "`r(cumsum_b)'"
 26.         local cumsum_V "`r(cumsum_V)'"
 27. 
.         /* reghdfe D.`depvar' c.Dln_exp_mw_totjob##i.ziptreated_ind D.(`contr
> ols'), ///
>                 absorb(`absorb') vce(cluster `cluster') nocons */
. 
.         eststo: qui reghdfe D.`depvar' D.ln_expmw D.(`controls'), ///
>                 absorb(`absorb') vce(cluster `cluster') nocons
 28.         comment_table_treatindicator, treat_dir("No") treat_ind("No")
 29.         estadd local space ""
 30.         estadd local cumsum_b "`cumsum_b'"
 31.         estadd local cumsum_V "`cumsum_V'"
 32. 
.         *experienced with direct treated indicator
.         qui reghdfe D.`depvar' L(0/`w').D.ln_expmw L(0/`w').i.treat_dir D.(`c
> ontrols'), absorb(`absorb') vce(cluster `cluster') nocons  
 33. 
.         add_cumsum, coefficients(`lincomest_coeffs_exp') i(1)
 34. 
.         local cumsum_b "`r(cumsum_b)'"
 35.         local cumsum_V "`r(cumsum_V)'"
 36. 
.         /* reghdfe D.`depvar' c.Dln_exp_mw_totjob##i.ziptreated_ind D.(`contr
> ols'), ///
>                 absorb(`absorb') vce(cluster `cluster') nocons */
. 
.         eststo: qui reghdfe D.`depvar' D.ln_expmw i.treat_dir D.(`controls'),
>  ///
>                 absorb(`absorb') vce(cluster `cluster') nocons
 37.         comment_table_treatindicator, treat_dir("Yes") treat_ind("No")
 38.         estadd local space ""
 39.         estadd local cumsum_b "`cumsum_b'"
 40.         estadd local cumsum_V "`cumsum_V'"      
 41. 
.         *experienced with indirect treated indicator
.         qui reghdfe D.`depvar' L(0/`w').D.ln_expmw L(0/`w').i.treat_ind D.(`c
> ontrols'), absorb(`absorb') vce(cluster `cluster') nocons  
 42. 
.         add_cumsum, coefficients(`lincomest_coeffs_exp') i(1)
 43. 
.         local cumsum_b "`r(cumsum_b)'"
 44.         local cumsum_V "`r(cumsum_V)'"
 45. 
.         /* reghdfe D.`depvar' c.Dln_exp_mw_totjob##i.ziptreated_ind D.(`contr
> ols'), ///
>                 absorb(`absorb') vce(cluster `cluster') nocons */
. 
.         eststo: qui reghdfe D.`depvar' D.ln_expmw i.treat_ind D.(`controls'),
>  ///
>                 absorb(`absorb') vce(cluster `cluster') nocons
 46.         comment_table_treatindicator, treat_dir("No") treat_ind("Yes")
 47.         estadd local space ""
 48.         estadd local cumsum_b "`cumsum_b'"
 49.         estadd local cumsum_V "`cumsum_V'"      
 50. 
. end 

. 
. program run_models 
  1.         syntax, depvar(str) absorb(str) cluster(str) [w(int 5)]
  2. 
.         eststo clear 
  3.         define_controls
  4. 
.         local emp_ctrls "`r(emp_ctrls)'"
  5.         local estcount_ctrls "`r(estcount_ctrls)'"
  6.         local avgwwage_ctrls "`r(avgwwage_ctrls)'"
  7. 
.         local controls `"`emp_ctrls' `estcount_ctrls' `avgwwage_ctrls'"'
  8. 
.         local lincomest_coeffs "D1.ln_mw + LD.ln_mw"
  9.         local pretrend_test "(F1D.ln_mw = 0)"
 10.         local lincomest_coeffs_exp "D1.ln_expmw + LD.ln_expmw"
 11.         local pretrend_test_exp "(F1D.ln_expmw = 0)"
 12.         forvalues i = 2(1)`w'{
 13.                 local lincomest_coeffs "`lincomest_coeffs' + L`i'D.ln_mw"
 14.             local pretrend_test " `pretrend_test' (F`i'D.ln_mw = 0)"
 15.                 local lincomest_coeffs_exp "`lincomest_coeffs_exp' + L`i'D
> .ln_expmw"
 16.             local pretrend_test_exp " `pretrend_test_exp' (F`i'D.ln_expmw 
> = 0)"
 17. 
.         }
 18. 
.         /* reghdfe D.`depvar' L(0/`w').D.ln_mw D.(`controls'), ///
>                 absorb(`absorb') vce(cluster `cluster') nocons  
>         compute_cumsum, coefficients(`lincomest_coeffs')
> 
>         local cumsum_b "`r(cumsum_b)'"
>         local cumsum_V "`r(cumsum_V)'"
> 
>         ivreghdfe D.`depvar' L(0/`w').D.ln_mw (L.D.`depvar' = L2.D.`depvar') 
> D.(`controls'), ///
>                 absorb(`absorb') cluster(`cluster') nocons
>         compute_longrun, depvar(`depvar')
> 
>         local longrun_b "`r(longrun_b)'"
>         local longrun_V "`r(longrun_V)'" */
. 
.         *baseline
. 
.         eststo: qui reghdfe D.`depvar' D.ln_mw D.(`controls'), ///
>                 absorb(`absorb') vce(cluster `cluster') nocons
 19.         comment_table_control, emp("Yes") estab("Yes") wage("Yes") housing
> ("No")
 20.         
.         /* estadd local space ""
>         estadd local cumsum_b "`cumsum_b'"
>         estadd local cumsum_V "`cumsum_V'"
>         estadd local longrun_b "`longrun_b'"
>         estadd local longrun_V "`longrun_V'" */
. 
.         *experienced
. 
.         eststo: qui reghdfe D.`depvar' D.ln_expmw D.(`controls'), ///
>                 absorb(`absorb') vce(cluster `cluster') nocons
 21.         comment_table_control, emp("Yes") estab("Yes") wage("Yes") housing
> ("No")
 22. 
.         estadd local space ""
 23. 
.         /* reghdfe D.`depvar' c.Dln_exp_mw_totjob##i.ziptreated_ind D.(`contr
> ols'), ///
>                 absorb(`absorb') vce(cluster `cluster') nocons */
. 
. 
.         *both 
.         eststo: qui reghdfe D.`depvar' D.ln_mw D.ln_expmw D.(`controls'), ///
>                 absorb(`absorb') vce(cluster `cluster') nocons
 24.         comment_table_control, emp("Yes") estab("Yes") wage("Yes") housing
> ("No")
 25. 
.         estadd local space ""
 26. end 

. 
. 
. program compute_cumsum, rclass
  1.         syntax, coefficients(str)
  2.         lincomest `coefficients'
  3.         mat b = e(b)
  4.         mat V = e(V)
  5.         local b_digits = round(b[1,1], 0.0001)
  6.         local se_digits = round(V[1,1]^.5, 0.0001)
  7.         if abs(b[1,1]/(V[1,1]^.5)) > 2.576 {
  8.                 local star = "\sym{***}"
  9.         }
 10.         else if abs(b[1,1]/(V[1,1]^.5)) > 1.96 {
 11.                 local star = "\sym{**}"
 12.         }
 13.         else if abs(b[1,1]/(V[1,1]^.5)) > 1.645 {
 14.                 local star = "\sym{*}"
 15.         }
 16.         else {
 17.                 local star = ""
 18.         }
 19. 
.         local cumsum_b = "0`b_digits'`star'"
 20.         local cumsum_V = "(0`se_digits')"
 21. 
.         return local cumsum_b `cumsum_b'
 22.         return local cumsum_V `cumsum_V'
 23. end

. 
. program compute_longrun, rclass
  1.         syntax, depvar(str)
  2.         
.         nlcom (_b[D1.ln_mw] + _b[LD.ln_mw])/(1 - _b[LD.`depvar'])
  3.         mat b = r(b)
  4.         mat V = r(V)
  5.         local b_digits = round(b[1,1], 0.0001)
  6.         local se_digits = round(V[1,1]^.5, 0.0001)
  7.         if abs(b[1,1]/(V[1,1]^.5)) > 2.576 {
  8.                 local star = "\sym{***}"
  9.         }
 10.         else if abs(b[1,1]/(V[1,1]^.5)) > 1.96 {
 11.                 local star = "\sym{**}"
 12.         }
 13.         else if abs(b[1,1]/(V[1,1]^.5)) > 1.645 {
 14.                 local star = "\sym{*}"
 15.         }
 16.         else {
 17.                 local star = ""
 18.         }
 19. 
.         local longrun_b = "0`b_digits'`star'"
 20.         local longrun_V = "(0`se_digits')"
 21. 
.         return local longrun_b `longrun_b'
 22.         return local longrun_V `longrun_V'
 23. end

. 
. program comment_table_control
  1.         syntax, emp(str) estab(str) wage(str) housing(str)
  2. 
.         estadd local ctrl_emp   "`emp'"
  3.         estadd local ctrl_estab "`estab'"
  4.         estadd local ctrl_wage  "`wage'"
  5.         estadd local ctrl_building "`housing'"
  6. end

. 
. *program comment_table_treatindicator
. *       syntax, treat_dir(str) treat_ind(str)
. *
. *       estadd local trdir   "`treat_dir'"
. *       estadd local trind "`treat_ind'"
. *end
. 
. main 
(est1 stored)

added macro:
           e(ctrl_emp) : "Yes"

added macro:
         e(ctrl_estab) : "Yes"

added macro:
          e(ctrl_wage) : "Yes"

added macro:
      e(ctrl_building) : "No"
(est2 stored)

added macro:
           e(ctrl_emp) : "Yes"

added macro:
         e(ctrl_estab) : "Yes"

added macro:
          e(ctrl_wage) : "Yes"

added macro:
      e(ctrl_building) : "No"

added macro:
              e(space) : ""
(est3 stored)

added macro:
           e(ctrl_emp) : "Yes"

added macro:
         e(ctrl_estab) : "Yes"

added macro:
          e(ctrl_wage) : "Yes"

added macro:
      e(ctrl_building) : "No"

added macro:
              e(space) : ""
(note: file ../output/static_dynamic_comptable_test.tex not found)
(output written to ../output/static_dynamic_comptable_test.tex)

. 
end of do-file


Execute:  StataMP-64 /e do "./figures.do"

  ___  ____  ____  ____  ____ (R)
 /__    /   ____/   /   ____/
___/   /   /___/   /   /___/   15.1   Copyright 1985-2017 StataCorp LLC
  Statistics/Data Analysis            StataCorp
                                      4905 Lakeway Drive
     MP - Parallel Edition            College Station, Texas 77845 USA
                                      800-STATA-PC        http://www.stata.com
                                      979-696-4600        stata@stata.com
                                      979-696-4601 (fax)

Single-user 32-core Stata perpetual license:
       Serial number:  501506205566
         Licensed to:  KU Leuven FEB (CES)
                       KU Leuven

Notes:
      1.  Stata is running in batch mode.
      2.  Unicode is supported; see help unicode_advice.
      3.  More than 2 billion observations are allowed; see help obs_advice.
      4.  Maximum number of variables is set to 5000; see help set_maxvar.

. do ./figures.do 

. clear all

. set more off

. adopath + ../../../lib/stata/gslab_misc/ado
  [1]  (BASE)      "C:\Program Files\Stata15\ado\base/"
  [2]  (SITE)      "C:\Program Files\Stata15\ado\site/"
  [3]              "."
  [4]  (PERSONAL)  "c:\ado\personal/"
  [5]  (PLUS)      "c:\ado\plus/"
  [6]  (OLDPLACE)  "c:\ado/"
  [7]              "../../../lib/stata/gslab_misc/ado"

. adopath + ../../../lib/stata/min_wage/ado
  [1]  (BASE)      "C:\Program Files\Stata15\ado\base/"
  [2]  (SITE)      "C:\Program Files\Stata15\ado\site/"
  [3]              "."
  [4]  (PERSONAL)  "c:\ado\personal/"
  [5]  (PLUS)      "c:\ado\plus/"
  [6]  (OLDPLACE)  "c:\ado/"
  [7]              "../../../lib/stata/gslab_misc/ado"
  [8]              "../../../lib/stata/min_wage/ado"

. set maxvar 32000 


. 
. program main
  1.         local instub "../temp"
  2.         local outstub "../output"
  3. 
.         use "`instub'/fd_rent_panel.dta", clear
  4. 
. 
.         build_coeff_plot_comp, depvar(ln_med_rent_psqft_sfcc) absorb(year_mon
> th) ///
>                 cluster(statefips)
  5. 
.         foreach var in walall_29y_lowinc_zsh halall_29y_lowinc_zsh walall_29y
> _lowinc_ssh halall_29y_lowinc_ssh {
  6.                 plot_vardist, hetvar(`var') outstub(`outstub')
  7.                 plot_static_heterogeneity, depvar(ln_med_rent_psqft_sfcc) 
> absorb(year_month zipcode) ///
>                                 het_var(`var'_st_qtl) cluster(statefips) outs
> tub(`outstub')             
  8.         }       
  9.         
. 
. end 

. 
. program build_coeff_plot_comp
  1.         syntax, depvar(str) absorb(str) cluster(str) [w(int 5) t_plot(real
>  1.645) offset(real 0.09)]
  2. 
.         define_controls estcount avgwwage
  3.         local emp_ctrls "`r(emp_ctrls)'"
  4.         local estcount_ctrls "`r(estcount_ctrls)'"
  5.         local avgwwage_ctrls "`r(avgwwage_ctrls)'"
  6. 
.         local controls `"`emp_ctrls' `estcount_ctrls' `avgwwage_ctrls'"'
  7. 
.         *cumulative base
.         preserve 
  8.         qui reghdfe D.`depvar' L(-`w'/`w').D.ln_mw D.(`controls'), absorb(
> `absorb') vce(cluster `cluster') nocons
  9.         local w_halfspan = `w' + 1
 10.         matrix CUMBASE = J(`w_halfspan', 5, .)
 11.         matrix colname CUMBASE = "at" "cumsum_base_b" "cumsum_base_se" "cu
> msum_base_lb" "cumsum_base_ub"
 12.         local firstcoeff = "D1.ln_mw"
 13.         local cumcoeff = `"`firstcoeff'"'
 14.         matrix  CUMBASE[1, 1] = 0
 15.         lincomest `firstcoeff'
 16.         mat b = e(b)
 17.         mat V = e(V)
 18.         matrix CUMBASE[1,2] = b[1,1]
 19.         matrix CUMBASE[1,3] = V[1,1]^.5
 20.         matrix CUMBASE[1,4] = b[1, 1] - `t_plot'*V[1, 1]^.5
 21.         matrix CUMBASE[1,5] = b[1, 1] + `t_plot'*V[1, 1]^.5
 22.         forval i = 1/`w' {
 23.                 qui reghdfe D.`depvar' L(-`w'/`w').D.ln_mw D.(`controls'),
>  absorb(`absorb') vce(cluster `cluster') nocons
 24.                 local at = `i' + 1
 25.                 local cumcoeff = `"`cumcoeff' + L`i'D.ln_mw"'
 26.                 lincomest `cumcoeff'
 27.                 mat b = e(b)
 28.                 mat V = e(V)
 29.                 matrix CUMBASE[`at',1] = `i'
 30.                 matrix CUMBASE[`at',2] = b[1,1]
 31.                 matrix CUMBASE[`at',3] = V[1,1]^.5
 32.                 matrix CUMBASE[`at',4] = b[1, 1] - `t_plot'*V[1, 1]^.5
 33.                 matrix CUMBASE[`at',5] = b[1, 1] + `t_plot'*V[1, 1]^.5
 34.         }
 35.         svmat double CUMBASE, name(col) 
 36.         keep at cumsum_*
 37.         drop if missing(at)
 38.         replace at = at + `w' + 1
 39.         save "../temp/cumsum_base.dta", replace 
 40.         restore
 41. 
.         *regular base
.         qui reghdfe D.`depvar' L(-`w'/`w').D.ln_mw D.(`controls'), absorb(`ab
> sorb') vce(cluster `cluster') nocons
 42.         preserve
 43.                 coefplot, vertical base gen
 44.                 keep __at __b __se
 45.                 rename (__at __b __se) (at b_full se_full)
 46.                 
.                 local winspan = 2*`w' + 1
 47.                 keep if _n<=`winspan'
 48.                 keep if !missing(at)
 49. 
.                 gen b_full_lb = b_full - `t_plot'*se_full
 50.                 gen b_full_ub = b_full + `t_plot'*se_full
 51. 
.                 save "../temp/plot_coeffs_base.dta", replace
 52.         restore
 53. 
.         *cumsum experienced MW
.         preserve 
 54.         qui reghdfe D.`depvar' L(-`w'/`w').D.ln_expmw D.(`controls'), abso
> rb(`absorb') vce(cluster `cluster') nocons
 55.         local w_halfspan = `w' + 1
 56.         matrix CUMBASE = J(`w_halfspan', 5, .)
 57.         matrix colname CUMBASE = "at" "cumsum_exp_b" "cumsum_exp_se" "cums
> um_exp_lb" "cumsum_exp_ub"
 58.         local firstcoeff = "D1.ln_expmw"
 59.         local cumcoeff = `"`firstcoeff'"'
 60.         matrix  CUMBASE[1, 1] = 0
 61.         lincomest `firstcoeff'
 62.         mat b = e(b)
 63.         mat V = e(V)
 64.         matrix CUMBASE[1,2] = b[1,1]
 65.         matrix CUMBASE[1,3] = V[1,1]^.5
 66.         matrix CUMBASE[1,4] = b[1, 1] - `t_plot'*V[1, 1]^.5
 67.         matrix CUMBASE[1,5] = b[1, 1] + `t_plot'*V[1, 1]^.5
 68.         forval i = 1/`w' {
 69.                 qui reghdfe D.`depvar' L(-`w'/`w').D.ln_expmw D.(`controls
> '), absorb(`absorb') vce(cluster `cluster') nocons
 70.                 local at = `i' + 1
 71.                 local cumcoeff = `"`cumcoeff' + L`i'D.ln_expmw"'
 72.                 lincomest `cumcoeff'
 73.                 mat b = e(b)
 74.                 mat V = e(V)
 75.                 matrix CUMBASE[`at',1] = `i'
 76.                 matrix CUMBASE[`at',2] = b[1,1]
 77.                 matrix CUMBASE[`at',3] = V[1,1]^.5
 78.                 matrix CUMBASE[`at',4] = b[1, 1] - `t_plot'*V[1, 1]^.5
 79.                 matrix CUMBASE[`at',5] = b[1, 1] + `t_plot'*V[1, 1]^.5
 80.         }
 81.         svmat double CUMBASE, name(col) 
 82.         keep at cumsum_*
 83.         drop if missing(at)
 84.         replace at = at + `w' + 1
 85.         save "../temp/cumsum_expmw.dta", replace 
 86.         restore
 87. 
. 
.         qui reghdfe D.`depvar' L(-`w'/`w').D.ln_expmw D.(`controls'), ///
>         absorb(`absorb') vce(cluster `cluster') nocons
 88. 
.                                 
.         preserve
 89.                 coefplot, vertical base gen
 90.                 keep __at __b __se
 91.                 rename (__at __b __se) (at b_exp se_exp)
 92.                 tset at
 93. 
.                 local winspan = 2*`w' + 1
 94.                 keep if _n<=`winspan'
 95.                 keep if !missing(at)
 96. 
.                 gen b_exp_lb = b_exp - `t_plot'*se_exp
 97.                 gen b_exp_ub = b_exp + `t_plot'*se_exp
 98.                         
.                 //gen cumsum_b_exp = b_exp[1]
.                 //replace cumsum_b_exp = cumsum_b_exp[_n-1] + b_exp[_n] if _n
>  > 1
.                 merge 1:1 at using "../temp/plot_coeffs_base.dta", nogen asse
> rt(1 2 3)
 99.                 merge 1:1 at using "../temp/cumsum_base.dta", nogen assert
> (1 2 3)
100.                 merge 1:1 at using "../temp/cumsum_expmw.dta", nogen asser
> t(1 2 3)
101. 
.                 sort at
102.                 foreach var in cumsum_base_b cumsum_base_lb cumsum_base_ub
>  cumsum_exp_b cumsum_exp_lb cumsum_exp_ub {
103.                         replace `var' = 0 if at == `w'
104.                 }
105.                 // To prevent lines from overlapping perfectly
.                 gen at_full = at - `offset'
106.                 gen at_base = at + `offset'
107. 
.                 // Figure
.                 make_plot_xlabels, w(`w')
108.                 local xlab "`r(xlab)'"
109. 
.                 twoway (scatter b_full at_base, mcol(maroon)) (rcap b_full_lb
>  b_full_ub at_base, lcol(maroon) lw(thin)) ///
>                            (scatter b_exp at_full, mcol(navy)) (rcap b_exp_lb
>  b_exp_ub at_full, col(navy) lw(thin)) ///
>                            (line cumsum_base_b at_base, col(maroon)) (line cu
> msum_base_lb at_base, col(maroon) lw(thin) lp(dash)) (line cumsum_base_ub at_
> base, col(maroon) lw(thin) lp(dash)) ///
>                            (line cumsum_exp_b at_full, col(navy)) (line cumsu
> m_exp_lb at_full, col(navy) lw(thin) lp(dash)) (line cumsum_exp_ub at_full, c
> ol(navy) lw(thin) lp(dash)), ///
>                            yline(0, lcol(black)) ///
>                            xlabel(`xlab', labsize(small)) xtitle("") ///
>                            ylabel(-0.06(0.02).16, grid labsize(small)) ytitle
> ("Coefficient") ///
>                            legend(order(1 "Baseline dynamic model" 3 "Experie
> nced MW dynamic model" 5 "Cumulative baseline" 8 "Cumulative Experienced MW")
>  size(vsmall)) ///
>                            graphregion(color(white)) bgcolor(white)
110.                 graph export "../output/fd_model_comparison_expmw.png", re
> place
111.                 graph export "../output/fd_model_comparison_expmw.eps", re
> place
112. 
.         restore 
113. end

. 
. program plot_static_heterogeneity
  1.         syntax, depvar(str) absorb(str) cluster(str) het_var(str) outstub(
> str) [qtles(int 4)]
  2. 
.         define_controls estcount avgwwage
  3.         local emp_ctrls "`r(emp_ctrls)'"
  4.         local estcount_ctrls "`r(estcount_ctrls)'"
  5.         local avgwwage_ctrls "`r(avgwwage_ctrls)'"
  6. 
.         local controls `"`emp_ctrls' `estcount_ctrls' `avgwwage_ctrls'"'
  7. 
.         eststo clear
  8.         reghdfe D.`depvar' c.d_ln_mw#i.`het_var' D.(`controls'), ///
>                 absorb(`absorb') ///
>                 vce(cluster `cluster') nocons
  9. 
.         coefplot, keep(*#c.d_ln_mw) base graphregion(color(white)) bgcolor(wh
> ite) level(90) ///
>                 ylabel(1 "First quartile" 2 "Second quartile" 3 "Third quarti
> le" 4 "Fourth quartile") ///
>                 ytitle(" ") xtitle("Estimated rent elasticity to the MW")    
>    ///
>                 xline(0, lcol(black)) mcolor(navy) xlabel(-.04(0.02).1) ciopt
> s(recast(rcap) lc(navy) lw(vthin))
 10.         graph export `outstub'/fd_static_heter_`het_var'.png, replace 
 11.         graph export `outstub'/fd_static_heter_`het_var'.eps, replace 
 12. end

. 
. program plot_vardist 
  1.         syntax, hetvar(str) outstub(str)
  2. 
.         preserve 
  3.         replace `hetvar' = `hetvar'*100
  4.         twoway(hist `hetvar', color(navy%80) lcolor(white) lw(vthin)), ///
>         ylabel(, labsize(small)) xlabel(, labsize(small)) xtitle("Share (%)",
>  size(small)) ///
>         graphregion(color(white)) bgcolor(white) 
  5.         graph export `outstub'/`hetvar'_dist.eps, replace 
  6.         restore 
  7. 
. end 

. 
. program make_plot_xlabels, rclass 
  1.         syntax, w(int)
  2. 
.         local xlab ""
  3.         forval lead = 1/`w' {
  4.                 local leadlab = `lead' - `w' - 1
  5.                 local xlab `"`xlab' `lead' "`leadlab'""'
  6.         }
  7.         local zero = `w' + 1
  8.         local xlab `"`xlab' `zero' "0""'
  9.         forval lag = 1/`w' {
 10.                 local coeflag = `zero' + `lag'
 11.                 local xlab `"`xlab' `coeflag' "`lag'""'
 12.         }
 13. 
.         return local xlab `xlab'
 14. end

. 
. 
. 
. main 
Confidence interval for formula:
D1.ln_mw

------------------------------------------------------------------------------
D.           |
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .0259413   .0124122     2.09   0.043     .0008553    .0510273
------------------------------------------------------------------------------
Confidence interval for formula:
D1.ln_mw+L1D.ln_mw

------------------------------------------------------------------------------
D.           |
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .0404985    .015996     2.53   0.015     .0081694    .0728277
------------------------------------------------------------------------------
Confidence interval for formula:
D1.ln_mw+L1D.ln_mw+L2D.ln_mw

------------------------------------------------------------------------------
D.           |
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .0341097   .0268803     1.27   0.212    -.0202174    .0884368
------------------------------------------------------------------------------
Confidence interval for formula:
D1.ln_mw+L1D.ln_mw+L2D.ln_mw+L3D.ln_mw

------------------------------------------------------------------------------
D.           |
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .0380598   .0317415     1.20   0.238    -.0260923    .1022118
------------------------------------------------------------------------------
Confidence interval for formula:
D1.ln_mw+L1D.ln_mw+L2D.ln_mw+L3D.ln_mw+L4D.ln_mw

------------------------------------------------------------------------------
D.           |
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .0476856   .0345821     1.38   0.176    -.0222073    .1175786
------------------------------------------------------------------------------
Confidence interval for formula:
D1.ln_mw+L1D.ln_mw+L2D.ln_mw+L3D.ln_mw+L4D.ln_mw+L5D.ln_mw

------------------------------------------------------------------------------
D.           |
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .0575442   .0341687     1.68   0.100    -.0115134    .1266017
------------------------------------------------------------------------------
(156,594 observations deleted)
(6 real changes made)
(note: file ../temp/cumsum_base.dta not found)
file ../temp/cumsum_base.dta saved

Generated variables:
              storage   display    value
variable name   type    format     label      variable label
-------------------------------------------------------------------------------
__by            byte    %9.0g      __by       subgraph ID
__plot          byte    %9.0g      __plot     plot ID
__at            byte    %9.0g                 plot position (category axis)
__mlbl          str1    %9s                   marker label
__mlpos         byte    %9.0g                 marker label position
__b             float   %9.0g                 coefficient
__V             float   %9.0g                 variance
__se            float   %9.0g                 standard error
__t             float   %9.0g                 t or z statistic
__df            byte    %9.0g                 degrees of freedom
__pval          float   %9.0g                 p-value
__ll1           float   %9.0g                 CI1: lower limit
__ul1           float   %9.0g                 CI1: upper limit
(156,589 observations deleted)
(0 observations deleted)
(note: file ../temp/plot_coeffs_base.dta not found)
file ../temp/plot_coeffs_base.dta saved
Confidence interval for formula:
D1.ln_expmw

------------------------------------------------------------------------------
D.           |
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .0309195   .0131405     2.35   0.024     .0043615    .0574775
------------------------------------------------------------------------------
Confidence interval for formula:
D1.ln_expmw+L1D.ln_expmw

------------------------------------------------------------------------------
D.           |
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .0483266   .0167481     2.89   0.006     .0144774    .0821758
------------------------------------------------------------------------------
Confidence interval for formula:
D1.ln_expmw+L1D.ln_expmw+L2D.ln_expmw

------------------------------------------------------------------------------
D.           |
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .0418763   .0283956     1.47   0.148    -.0155133    .0992658
------------------------------------------------------------------------------
Confidence interval for formula:
D1.ln_expmw+L1D.ln_expmw+L2D.ln_expmw+L3D.ln_expmw

------------------------------------------------------------------------------
D.           |
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .0464045   .0329454     1.41   0.167    -.0201808    .1129897
------------------------------------------------------------------------------
Confidence interval for formula:
D1.ln_expmw+L1D.ln_expmw+L2D.ln_expmw+L3D.ln_expmw+L4D.ln_expmw

------------------------------------------------------------------------------
D.           |
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .0538644   .0365435     1.47   0.148    -.0199927    .1277214
------------------------------------------------------------------------------
Confidence interval for formula:
D1.ln_expmw+L1D.ln_expmw+L2D.ln_expmw+L3D.ln_expmw+L4D.ln_expmw+L5D.ln_expmw

------------------------------------------------------------------------------
D.           |
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |    .062806   .0368292     1.71   0.096    -.0116286    .1372406
------------------------------------------------------------------------------
(156,594 observations deleted)
(6 real changes made)
(note: file ../temp/cumsum_expmw.dta not found)
file ../temp/cumsum_expmw.dta saved

Generated variables:
              storage   display    value
variable name   type    format     label      variable label
-------------------------------------------------------------------------------
__by            byte    %9.0g      __by       subgraph ID
__plot          byte    %9.0g      __plot     plot ID
__at            byte    %9.0g                 plot position (category axis)
__mlbl          str1    %9s                   marker label
__mlpos         byte    %9.0g                 marker label position
__b             float   %9.0g                 coefficient
__V             float   %9.0g                 variance
__se            float   %9.0g                 standard error
__t             float   %9.0g                 t or z statistic
__df            byte    %9.0g                 degrees of freedom
__pval          float   %9.0g                 p-value
__ll1           float   %9.0g                 CI1: lower limit
__ul1           float   %9.0g                 CI1: upper limit
        time variable:  at, 1 to 20
                delta:  1 unit
(156,589 observations deleted)
(0 observations deleted)

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                11  
    -----------------------------------------
(note: variable at was byte, now double to accommodate using data's values)

    Result                           # of obs.
    -----------------------------------------
    not matched                             5
        from master                         5  
        from using                          0  

    matched                                 6  
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             5
        from master                         5  
        from using                          0  

    matched                                 6  
    -----------------------------------------
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(note: file ../output/fd_model_comparison_expmw.png not found)
(file ../output/fd_model_comparison_expmw.png written in PNG format)
(note: file ../output/fd_model_comparison_expmw.eps not found)
(file ../output/fd_model_comparison_expmw.eps written in EPS format)
(156,240 real changes made)
(note: file ../output/walall_29y_lowinc_zsh_dist.eps not found)
(file ../output/walall_29y_lowinc_zsh_dist.eps written in EPS format)
(MWFE estimator converged in 5 iterations)

HDFE Linear regression                            Number of obs   =    107,601
Absorbing 2 HDFE groups                           F(  13,     38) =       3.61
Statistics robust to heteroskedasticity           Prob > F        =     0.0010
                                                  R-squared       =     0.0241
                                                  Adj R-squared   =     0.0125
                                                  Within R-sq.    =     0.0002
Number of clusters (statefips) =         39       Root MSE        =     0.0281

                             (Std. Err. adjusted for 39 clusters in statefips)
------------------------------------------------------------------------------
D.           |               Robust
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
w~zsh_st_qtl#|
   c.d_ln_mw |
          1  |   .0352255   .0166451     2.12   0.041     .0015292    .0689218
          2  |   .0079264   .0238864     0.33   0.742    -.0404291    .0562818
          3  |    .038592    .018646     2.07   0.045     .0008451    .0763389
          4  |   .0107571   .0141247     0.76   0.451    -.0178368     .039351
             |
ln_emp_biz~v |
         D1. |   .0029971   .0045334     0.66   0.513    -.0061802    .0121745
             |
 ln_emp_info |
         D1. |   .0009574   .0044094     0.22   0.829    -.0079691    .0098838
             |
  ln_emp_fin |
         D1. |   .0109494   .0060057     1.82   0.076    -.0012086    .0231073
             |
ln_estcou~rv |
         D1. |   .0141187   .0139054     1.02   0.316    -.0140312    .0422686
             |
ln_estcoun~o |
         D1. |   .0035809   .0053489     0.67   0.507    -.0072474    .0144091
             |
ln_estcoun~n |
         D1. |  -.0045304   .0087083    -0.52   0.606    -.0221595    .0130987
             |
ln_avgwwa~rv |
         D1. |   .0026518   .0025013     1.06   0.296    -.0024117    .0077153
             |
ln_avgwwag~o |
         D1. |   .0011084    .001804     0.61   0.543    -.0025437    .0047605
             |
ln_avgwwag~n |
         D1. |  -.0019686   .0012892    -1.53   0.135    -.0045785    .0006414
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
  year_month |       115           0         115     |
     zipcode |      1137        1137           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation
(note: file ../output/fd_static_heter_walall_29y_lowinc_zsh_st_qtl.png not foun
> d)
(file ../output/fd_static_heter_walall_29y_lowinc_zsh_st_qtl.png written in PNG
>  format)
(note: file ../output/fd_static_heter_walall_29y_lowinc_zsh_st_qtl.eps not foun
> d)
(file ../output/fd_static_heter_walall_29y_lowinc_zsh_st_qtl.eps written in EPS
>  format)
(156,480 real changes made)
(note: file ../output/halall_29y_lowinc_zsh_dist.eps not found)
(file ../output/halall_29y_lowinc_zsh_dist.eps written in EPS format)
(MWFE estimator converged in 5 iterations)

HDFE Linear regression                            Number of obs   =    107,740
Absorbing 2 HDFE groups                           F(  13,     39) =       3.26
Statistics robust to heteroskedasticity           Prob > F        =     0.0021
                                                  R-squared       =     0.0242
                                                  Adj R-squared   =     0.0126
                                                  Within R-sq.    =     0.0002
Number of clusters (statefips) =         40       Root MSE        =     0.0281

                             (Std. Err. adjusted for 40 clusters in statefips)
------------------------------------------------------------------------------
D.           |               Robust
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
h~zsh_st_qtl#|
   c.d_ln_mw |
          1  |    .020705   .0129184     1.60   0.117     -.005425     .046835
          2  |    .005103   .0169355     0.30   0.765    -.0291523    .0393583
          3  |   .0503981   .0175719     2.87   0.007     .0148555    .0859407
          4  |   .0244138   .0207589     1.18   0.247    -.0175751    .0664026
             |
ln_emp_biz~v |
         D1. |   .0031384   .0045255     0.69   0.492    -.0060152     .012292
             |
 ln_emp_info |
         D1. |   .0009878    .004409     0.22   0.824    -.0079303    .0099058
             |
  ln_emp_fin |
         D1. |    .011221   .0059669     1.88   0.068    -.0008482    .0232901
             |
ln_estcou~rv |
         D1. |   .0138328   .0138737     1.00   0.325    -.0142294     .041895
             |
ln_estcoun~o |
         D1. |   .0036034   .0053192     0.68   0.502    -.0071557    .0143625
             |
ln_estcoun~n |
         D1. |   -.004179   .0087468    -0.48   0.635     -.021871    .0135131
             |
ln_avgwwa~rv |
         D1. |   .0026527   .0024747     1.07   0.290    -.0023527    .0076582
             |
ln_avgwwag~o |
         D1. |   .0010772   .0017968     0.60   0.552    -.0025572    .0047115
             |
ln_avgwwag~n |
         D1. |  -.0019331   .0012813    -1.51   0.139    -.0045248    .0006585
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
  year_month |       115           0         115     |
     zipcode |      1139        1139           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation
(note: file ../output/fd_static_heter_halall_29y_lowinc_zsh_st_qtl.png not foun
> d)
(file ../output/fd_static_heter_halall_29y_lowinc_zsh_st_qtl.png written in PNG
>  format)
(note: file ../output/fd_static_heter_halall_29y_lowinc_zsh_st_qtl.eps not foun
> d)
(file ../output/fd_static_heter_halall_29y_lowinc_zsh_st_qtl.eps written in EPS
>  format)
(156,240 real changes made)
(note: file ../output/walall_29y_lowinc_ssh_dist.eps not found)
(file ../output/walall_29y_lowinc_ssh_dist.eps written in EPS format)
(MWFE estimator converged in 5 iterations)

HDFE Linear regression                            Number of obs   =    107,601
Absorbing 2 HDFE groups                           F(  13,     38) =       3.48
Statistics robust to heteroskedasticity           Prob > F        =     0.0013
                                                  R-squared       =     0.0241
                                                  Adj R-squared   =     0.0125
                                                  Within R-sq.    =     0.0002
Number of clusters (statefips) =         39       Root MSE        =     0.0281

                             (Std. Err. adjusted for 39 clusters in statefips)
------------------------------------------------------------------------------
D.           |               Robust
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
w~ssh_st_qtl#|
   c.d_ln_mw |
          1  |   .0214231   .0131272     1.63   0.111    -.0051516    .0479979
          2  |   .0340557   .0194309     1.75   0.088    -.0052801    .0733914
          3  |   .0196489   .0186332     1.05   0.298    -.0180721    .0573698
          4  |   .0248099   .0330415     0.75   0.457    -.0420791    .0916988
             |
ln_emp_biz~v |
         D1. |   .0030218   .0045159     0.67   0.507    -.0061201    .0121637
             |
 ln_emp_info |
         D1. |   .0009709   .0044111     0.22   0.827    -.0079588    .0099007
             |
  ln_emp_fin |
         D1. |   .0109334   .0060003     1.82   0.076    -.0012136    .0230803
             |
ln_estcou~rv |
         D1. |   .0141374   .0138693     1.02   0.314    -.0139397    .0422144
             |
ln_estcoun~o |
         D1. |   .0037132   .0053399     0.70   0.491     -.007097    .0145233
             |
ln_estcoun~n |
         D1. |  -.0044866   .0087336    -0.51   0.610    -.0221669    .0131936
             |
ln_avgwwa~rv |
         D1. |   .0026665   .0024942     1.07   0.292    -.0023827    .0077157
             |
ln_avgwwag~o |
         D1. |   .0010957   .0017989     0.61   0.546     -.002546    .0047374
             |
ln_avgwwag~n |
         D1. |  -.0019519   .0012666    -1.54   0.132     -.004516    .0006122
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
  year_month |       115           0         115     |
     zipcode |      1137        1137           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation
(note: file ../output/fd_static_heter_walall_29y_lowinc_ssh_st_qtl.png not foun
> d)
(file ../output/fd_static_heter_walall_29y_lowinc_ssh_st_qtl.png written in PNG
>  format)
(note: file ../output/fd_static_heter_walall_29y_lowinc_ssh_st_qtl.eps not foun
> d)
(file ../output/fd_static_heter_walall_29y_lowinc_ssh_st_qtl.eps written in EPS
>  format)
(156,480 real changes made)
(note: file ../output/halall_29y_lowinc_ssh_dist.eps not found)
(file ../output/halall_29y_lowinc_ssh_dist.eps written in EPS format)
(MWFE estimator converged in 5 iterations)

HDFE Linear regression                            Number of obs   =    107,740
Absorbing 2 HDFE groups                           F(  13,     39) =       4.82
Statistics robust to heteroskedasticity           Prob > F        =     0.0001
                                                  R-squared       =     0.0242
                                                  Adj R-squared   =     0.0126
                                                  Within R-sq.    =     0.0003
Number of clusters (statefips) =         40       Root MSE        =     0.0281

                             (Std. Err. adjusted for 40 clusters in statefips)
------------------------------------------------------------------------------
D.           |               Robust
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
h~ssh_st_qtl#|
   c.d_ln_mw |
          1  |   -.003122   .0097598    -0.32   0.751     -.022863     .016619
          2  |    .030414   .0128158     2.37   0.023     .0044917    .0563363
          3  |   .0498625   .0200196     2.49   0.017     .0093691     .090356
          4  |   .0267992   .0197335     1.36   0.182    -.0131155     .066714
             |
ln_emp_biz~v |
         D1. |   .0031423   .0045241     0.69   0.491    -.0060087    .0122932
             |
 ln_emp_info |
         D1. |   .0010135   .0043946     0.23   0.819    -.0078754    .0099024
             |
  ln_emp_fin |
         D1. |    .011316   .0059433     1.90   0.064    -.0007055    .0233374
             |
ln_estcou~rv |
         D1. |   .0140057   .0138741     1.01   0.319    -.0140573    .0420688
             |
ln_estcoun~o |
         D1. |   .0036845   .0053213     0.69   0.493    -.0070788    .0144478
             |
ln_estcoun~n |
         D1. |  -.0042574   .0086625    -0.49   0.626    -.0217789    .0132641
             |
ln_avgwwa~rv |
         D1. |    .002646   .0024901     1.06   0.294    -.0023906    .0076826
             |
ln_avgwwag~o |
         D1. |   .0010637   .0017942     0.59   0.557    -.0025654    .0046928
             |
ln_avgwwag~n |
         D1. |  -.0019499   .0012826    -1.52   0.137    -.0045442    .0006445
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
  year_month |       115           0         115     |
     zipcode |      1139        1139           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation
(note: file ../output/fd_static_heter_halall_29y_lowinc_ssh_st_qtl.png not foun
> d)
(file ../output/fd_static_heter_halall_29y_lowinc_ssh_st_qtl.png written in PNG
>  format)
(note: file ../output/fd_static_heter_halall_29y_lowinc_ssh_st_qtl.eps not foun
> d)
(file ../output/fd_static_heter_halall_29y_lowinc_ssh_st_qtl.eps written in EPS
>  format)

. 
end of do-file

 make.py ended: 2020-12-07 13:06:53
