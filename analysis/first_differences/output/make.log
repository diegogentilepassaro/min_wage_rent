
 make.py started: 2020-11-11 12:09:49 C:\Users\shermo\Documents\GitHub\min_wage_rent\analysis\first_differences\code 




Execute:  StataMP-64 /e do "./preclean.do"

  ___  ____  ____  ____  ____ (R)
 /__    /   ____/   /   ____/
___/   /   /___/   /   /___/   15.1   Copyright 1985-2017 StataCorp LLC
  Statistics/Data Analysis            StataCorp
                                      4905 Lakeway Drive
     MP - Parallel Edition            College Station, Texas 77845 USA
                                      800-STATA-PC        http://www.stata.com
                                      979-696-4600        stata@stata.com
                                      979-696-4601 (fax)

Single-user 32-core Stata perpetual license:
       Serial number:  501506205566
         Licensed to:  KU Leuven FEB (CES)
                       KU Leuven

Notes:
      1.  Stata is running in batch mode.
      2.  Unicode is supported; see help unicode_advice.
      3.  More than 2 billion observations are allowed; see help obs_advice.
      4.  Maximum number of variables is set to 5000; see help set_maxvar.

. do ./preclean.do 

. clear all

. set more off

. adopath + ../../../lib/stata/gslab_misc/ado
  [1]  (BASE)      "C:\Program Files\Stata15\ado\base/"
  [2]  (SITE)      "C:\Program Files\Stata15\ado\site/"
  [3]              "."
  [4]  (PERSONAL)  "c:\ado\personal/"
  [5]  (PLUS)      "c:\ado\plus/"
  [6]  (OLDPLACE)  "c:\ado/"
  [7]              "../../../lib/stata/gslab_misc/ado"

. set maxvar 32000 


. 
. program main
  1.         local instub "../../../drive/derived_large/output"
  2.         local outstub "../temp"
  3.         local logfile "../output/data_file_manifest.log"
  4. 
.         use "`instub'/baseline_rent_panel.dta", clear 
  5.         keep zipcode place_code msa countyfips statefips                  
>                                               ///
>                 year_month calendar_month trend trend_sq trend_cu            
>                                            ///
>                 dactual_mw actual_mw medrentpricepsqft_*                     
>                                    ///
>                 med_hhinc20105 renthouse_share2010 white_share2010 black_shar
> e2010                      ///
>                 college_share20105 work_county_share20105 unemp_share20105 te
> en_share2010   ///
>                 estcount_* avgwwage_* emp_* u1*
  6. 
.         
. 
.         local het_vars "med_hhinc20105 renthouse_share2010 college_share20105
>  black_share2010"
  7.         local het_vars "`het_vars' unemp_share20105 teen_share2010" 
  8. 
.         create_vars,    log_vars(actual_mw medrentpricepsqft_sfcc emp_* estco
> unt_* avgwwage_* u1*)      ///
>                                         heterogeneity_vars(`het_vars')
  9.         
.         simplify_varnames
 10. 
.         xtset zipcode year_month
 11.         gen d_ln_mw = D.ln_mw
 12. 
.         save_data "`outstub'/fd_rent_panel.dta", key(zipcode year_month) repl
> ace log(`logfile')
 13. end

. 
. program create_vars
  1.         syntax, log_vars(str) heterogeneity_vars(str)
  2. 
.         local log_vars_expanded "" 
  3.         foreach v in `log_vars' {
  4.                 unab this_var: `v'
  5.                 local log_vars_expanded `"`log_vars_expanded' `this_var'"'
  6.         }
  7.         unab bpsvars: u1*
  8.         foreach var in `bpsvars' {
  9.                 replace `var' = 1 + `var'
 10.         }
 11.         foreach var in `log_vars_expanded' {
 12.                 gen ln_`var' = ln(`var')
 13.         }
 14. 
.         gen nonwhite_share2010 = 1 - white_share2010
 15.         
.         gen trend_times2 = 2*trend
 16. 
.         foreach var in `heterogeneity_vars' {
 17. 
.                 gquantiles `var'_nat_qtl = `var', xtile nq(4)
 18. 
.                 gquantiles `var'_st_qtl  = `var', xtile nq(4) by(statefips)
 19.         }
 20. end

. 
. program simplify_varnames
  1.         
.         cap rename ln_actual_mw                  ln_mw 
  2.         cap rename ln_medrentpricepsqft_sfcc     ln_med_rent_psqft_sfcc
  3.         cap rename ln_medrentpricepsqft_2br      ln_med_rent_psqft_2br
  4.         cap rename ln_medrentpricepsqft_mfr5plus ln_med_rent_psqft_mfr5plu
> s
  5. 
. end

. 
. main
(136,332 real changes made)
(136,332 real changes made)
(136,332 real changes made)
(136,332 real changes made)
(136,332 real changes made)
(136,332 real changes made)
(43,225 missing values generated)
(4,266 missing values generated)
(5,523 missing values generated)
(4,266 missing values generated)
(4,266 missing values generated)
(4,290 missing values generated)
(4,995 missing values generated)
(4,266 missing values generated)
(5,544 missing values generated)
(7,224 missing values generated)
(4,266 missing values generated)
(7,704 missing values generated)
(4,266 missing values generated)
(4,266 missing values generated)
(4,266 missing values generated)
(4,266 missing values generated)
(4,266 missing values generated)
(4,266 missing values generated)
(4,266 missing values generated)
(4,266 missing values generated)
(4,266 missing values generated)
(4,791 missing values generated)
(4,266 missing values generated)
(4,473 missing values generated)
(4,266 missing values generated)
(4,266 missing values generated)
(5,523 missing values generated)
(4,266 missing values generated)
(4,266 missing values generated)
(4,290 missing values generated)
(4,995 missing values generated)
(4,266 missing values generated)
(5,544 missing values generated)
(7,224 missing values generated)
(4,266 missing values generated)
(7,704 missing values generated)
(4,266 missing values generated)
(20,637 missing values generated)
(20,637 missing values generated)
(20,791 missing values generated)
(20,422 missing values generated)
(20,422 missing values generated)
(20,632 missing values generated)
       panel variable:  zipcode (strongly balanced)
        time variable:  year_month, 2010m1 to 2019m12
                delta:  1 month
(1,305 missing values generated)
(data already sorted by zipcode year_month)
  variable trend_times2 was float now int
  (313,200 bytes saved)
============================================================================
File: ../temp/fd_rent_panel.dta
Key: zipcode year_month
============================================================================
  156600:124(94432):3049545342:1847357038

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
     zipcode |    156,600    51920.57    29185.78       2113      99577
  year_month |    156,600       659.5    34.63992        600        719
  place_code |    129,840    40657.65    22564.03        410      87240
  countyfips |    156,240    24077.04    16484.28       1003      56021
   statefips |    156,600    23.97854    16.42626          1         56
-------------+---------------------------------------------------------
   actual_mw |    156,600    8.077733    1.207496       7.25         16
  dactual_mw |    156,600    .0151952    .1121177          0       2.21
calendar_m~h |    156,600         6.5    3.452064          1         12
         msa |    156,600    436.1801    240.1675         12        860
       trend |    156,600       225.5    34.63992        166        285
-------------+---------------------------------------------------------
    trend_sq |    156,600    52050.17    15659.42      27556      81225
    trend_cu |    156,600    1.23e+07     5408203    4574296   2.31e+07
medrentpri~c |    113,375    1.188344    .7824813   .4180214   6.731387
medrentpri~r |     24,789     1.84165    .9184999   .5015197   6.499599
medrentpri~s |     37,588    1.842276    1.001968   .5106889    6.48415
-------------+---------------------------------------------------------
white_s~2010 |    156,600    .5392018    .2225559   .0037838   .9401773
black_s~2010 |    156,600     .165993    .2003044    .003148   .9753076
teen_sh~2010 |    156,600    .1391686    .0481773   .0154552   .6235335
renthou~2010 |    156,600    .3834818     .176359   .0644567   .9662035
work_c~20105 |    156,600    .7557563    .2036341   .1421741    .995271
-------------+---------------------------------------------------------
colleg~20105 |    156,600    .4447718    .1662964   .0856991   .9082218
unemp_~20105 |    156,600    .0918395    .0398028   .0211286   .3417086
med_hh~20105 |    156,600    66919.72    24575.33   20527.66   191553.2
estcount_b~v |    152,334    9999.109    9479.666         60      56758
avgwwage_b~v |    152,334    1252.943     434.753        226       4727
-------------+---------------------------------------------------------
 emp_bizserv |    152,334    134280.4    143863.4        329     640795
estcount_c~t |    152,334    3240.845    2964.949         35      17066
avgwwage_c~t |    152,334    1101.682    300.2516          0       2610
   emp_const |    152,334    33961.34    34828.34          0     173791
estcount_e~e |    152,334    8227.076     21233.7         48     245237
-------------+---------------------------------------------------------
avgwwage_e~e |    152,334    941.4742    149.2963        415       1975
   emp_eduhe |    152,334    115818.9    123147.9        481     832830
estcount_f~v |    152,334    114.6276    78.41071          3        456
avgwwage_f~v |    152,334    1433.107    237.0973        654       2724
  emp_fedgov |    152,334    13996.36    16476.49         42     215436
-------------+---------------------------------------------------------
estcount_g~r |    152,334     5037.67    4954.852         69      30396
avgwwage_g~r |    152,334    1224.161    338.4987          0       4214
  emp_goodpr |    152,334    86328.69    101026.1          0     500610
estcount_i~o |    152,334    920.5367    1381.953          4      13271
avgwwage_i~o |    152,334    1505.066    619.8231          0       7380
-------------+---------------------------------------------------------
    emp_info |    152,334     21041.8    35131.53          0     238776
estcount_l~s |    152,334     4278.02    4708.982         27      39458
avgwwage_l~s |    152,334    446.7155    134.2174        203       1131
    emp_leis |    152,334    93083.36    93941.89        279     551950
estcount_m~u |    152,334    1585.705    1954.571         10      13469
-------------+---------------------------------------------------------
avgwwage_m~u |    152,334    1272.821    396.7011          0       4970
    emp_manu |    152,334    47066.83    62216.94          0     376653
estcount_n~s |    151,809    211.8503    322.4773          1       1859
avgwwage_n~s |    151,809     1133.13    862.1372          0       8606
  emp_natres |    151,809    5209.702    14255.94          0      97846
-------------+---------------------------------------------------------
estcount_s~r |    152,334    44916.45    55846.62        321     474767
avgwwage_s~r |    152,334    1000.926    364.5354        375       3356
  emp_servpr |    152,334    595498.8    612701.9       2751    3449324
estcount_s~v |    152,127    140.9174    411.2392          1       5969
avgwwage_s~v |    152,127    1014.599    299.7829          0       2572
-------------+---------------------------------------------------------
   emp_stgov |    152,127    15702.68     16274.8          0     114555
estcount_t~p |    152,334    9407.097    9423.344         84      59615
avgwwage_t~p |    152,334    861.6176    200.9456        356       3193
  emp_transp |    152,334    143870.8    144966.3        629     872187
    u1_bldgs |    136,332    274.6464    358.5711      -1621       2688
-------------+---------------------------------------------------------
    u1_units |    136,332    274.6464    358.5711      -1621       2688
    u1_value |    136,332    6.74e+07    8.85e+07  -1.35e+08   6.43e+08
 u1rep_bldgs |    136,332    262.2207    357.1151       -477       3759
 u1rep_units |    136,332    262.2207    357.1151       -477       3759
 u1rep_value |    136,332    6.48e+07    8.80e+07  -1.32e+08   8.74e+08
-------------+---------------------------------------------------------
       ln_mw |    156,600    2.079598    .1327617   1.981001   2.772589
ln_med_ren~c |    113,375    .0472541    .4493362  -.8722228   1.906781
ln_emp_biz~v |    152,334     11.1079    1.386833   5.796058   13.37047
ln_emp_const |    151,077    9.898243    1.163929    5.31812   12.06561
ln_emp_eduhe |    152,334    11.04979    1.265752   6.175867   13.63258
-------------+---------------------------------------------------------
ln_emp_fed~v |    152,334    8.916783    1.366298    3.73767   12.28042
ln_emp_goo~r |    152,310    10.75741    1.182619   6.135565   13.12358
 ln_emp_info |    151,605    9.006354    1.549054   2.397895   12.38328
 ln_emp_leis |    152,334    10.86029    1.201423   5.631212   13.22121
 ln_emp_manu |    151,056    10.03149    1.300125   4.543295   12.83908
-------------+---------------------------------------------------------
ln_emp_nat~s |    149,376    6.965424    1.822514   .6931472   11.49115
ln_emp_ser~r |    152,334    12.69877    1.249105    7.91972   15.05369
ln_emp_stgov |    148,896    9.034368    1.379967   3.433987   11.64881
ln_emp_tra~p |    152,334    11.32724     1.17516   6.444131   13.67876
ln_estcou~rv |    152,334    8.631197    1.247367   4.094345   10.94655
-------------+---------------------------------------------------------
ln_estcoun~t |    152,334    7.635146     1.03843   3.555348   9.744843
ln_estcoun~e |    152,334    8.181607    1.281123   3.871201   12.40998
ln_estc~dgov |    152,334    4.473625    .8084444   1.098612   6.122493
ln_estco~dpr |    152,334    8.042536    1.067666   4.234107   10.32207
ln_estcoun~o |    152,334    6.071164    1.338014   1.386294   9.493337
-------------+---------------------------------------------------------
ln_estcou~is |    152,334    7.826022    1.132301   3.295837   10.58299
ln_estcoun~u |    152,334    6.723795    1.232672   2.302585   9.508146
ln_estcou~es |    151,809    4.487069    1.396346          0   7.527794
ln_estco~vpr |    152,334    10.11088    1.210574   5.771441   13.07058
ln_estc~tgov |    152,127    4.153889    1.108505          0   8.694335
-------------+---------------------------------------------------------
ln_estcoun~p |    152,334    8.611839    1.149419   4.430817   10.99566
ln_avgwwa~rv |    152,334    7.078706    .3263035   5.420535   8.461046
ln_avgwwag~t |    151,077    6.982886    .2416808   6.122493   7.867105
ln_avgwwag~e |    152,334    6.835008    .1581563   6.028278   7.588324
ln_avgw~dgov |    152,334    7.254022    .1652383   6.483108   7.909857
-------------+---------------------------------------------------------
ln_avgww~dpr |    152,310    7.075715    .2589833   6.154858   8.346168
ln_avgwwag~o |    151,605    7.255309    .3551167   5.888878   8.906528
ln_avgwwa~is |    152,334    6.062217    .2759297   5.313206   7.030858
ln_avgwwag~u |    151,056    7.120257    .2655766   6.139884   8.511175
ln_avgwwa~es |    149,376    6.864454    .5646283   5.384495   9.060215
-------------+---------------------------------------------------------
ln_avgww~vpr |    152,334    6.858215    .3026207   5.926926   8.118505
ln_avgw~tgov |    148,896    6.912519    .2494281   6.001415   7.852439
ln_avgwwag~p |    152,334     6.73349    .2227761   5.874931   8.068716
 ln_u1_bldgs |    135,963    4.775056    1.589248          0   7.896553
 ln_u1_units |    135,963    4.775056    1.589248          0   7.896553
-------------+---------------------------------------------------------
 ln_u1_value |    135,809    16.64258    3.649391          0   20.28197
ln_u1rep_b~s |    136,178    4.599205    1.755203          0   8.231908
ln_u1rep_u~s |    136,178    4.599205    1.755203          0   8.231908
ln_u1rep_v~e |    135,968    16.17866    4.454632          0   20.58904
nonwhit~2010 |    156,600    .4607982    .2225559   .0598227   .9962162
-------------+---------------------------------------------------------
trend_times2 |    156,600         451    69.27985        332        570
med_h~at_qtl |    156,600    2.498851     1.11838          1          4
med_h~st_qtl |    156,600    2.467433    1.120644          1          4
renth~at_qtl |    156,600    2.498851     1.11838          1          4
renth~st_qtl |    156,600    2.467433    1.120644          1          4
-------------+---------------------------------------------------------
colle~at_qtl |    156,600    2.498851     1.11838          1          4
colle~st_qtl |    156,600    2.467433    1.120644          1          4
black~at_qtl |    156,600    2.498851     1.11838          1          4
black~st_qtl |    156,600    2.467433    1.120644          1          4
unemp~at_qtl |    156,600    2.498851     1.11838          1          4
-------------+---------------------------------------------------------
unemp~st_qtl |    156,600    2.467433    1.120644          1          4
teen_~at_qtl |    156,600    2.498851     1.11838          1          4
teen_~st_qtl |    156,600    2.467433    1.120644          1          4
     d_ln_mw |    155,295    .0016437    .0119548   -.290338   .2412503




(note: file ../temp/fd_rent_panel.dta not found)
file ../temp/fd_rent_panel.dta saved

. 
end of do-file


Execute:  StataMP-64 /e do "./estimate_base.do"

  ___  ____  ____  ____  ____ (R)
 /__    /   ____/   /   ____/
___/   /   /___/   /   /___/   15.1   Copyright 1985-2017 StataCorp LLC
  Statistics/Data Analysis            StataCorp
                                      4905 Lakeway Drive
     MP - Parallel Edition            College Station, Texas 77845 USA
                                      800-STATA-PC        http://www.stata.com
                                      979-696-4600        stata@stata.com
                                      979-696-4601 (fax)

Single-user 32-core Stata perpetual license:
       Serial number:  501506205566
         Licensed to:  KU Leuven FEB (CES)
                       KU Leuven

Notes:
      1.  Stata is running in batch mode.
      2.  Unicode is supported; see help unicode_advice.
      3.  More than 2 billion observations are allowed; see help obs_advice.
      4.  Maximum number of variables is set to 5000; see help set_maxvar.

. do ./estimate_base.do 

. clear all

. set more off

. adopath + ../../../lib/stata/gslab_misc/ado
  [1]  (BASE)      "C:\Program Files\Stata15\ado\base/"
  [2]  (SITE)      "C:\Program Files\Stata15\ado\site/"
  [3]              "."
  [4]  (PERSONAL)  "c:\ado\personal/"
  [5]  (PLUS)      "c:\ado\plus/"
  [6]  (OLDPLACE)  "c:\ado/"
  [7]              "../../../lib/stata/gslab_misc/ado"

. adopath + ../../../lib/stata/min_wage/ado
  [1]  (BASE)      "C:\Program Files\Stata15\ado\base/"
  [2]  (SITE)      "C:\Program Files\Stata15\ado\site/"
  [3]              "."
  [4]  (PERSONAL)  "c:\ado\personal/"
  [5]  (PLUS)      "c:\ado\plus/"
  [6]  (OLDPLACE)  "c:\ado/"
  [7]              "../../../lib/stata/gslab_misc/ado"
  [8]              "../../../lib/stata/min_wage/ado"

. set maxvar 32000 


. 
. program main
  1.         local instub "../temp"
  2.         local outstub "../output"
  3. 
.         use "`instub'/fd_rent_panel.dta", clear
  4. 
.         make_results_labels, w(5)
  5.         local estlabels_dyn "`r(estlabels_dyn)'"
  6.         local estlabels_static "`r(estlabels_static)'"
  7. 
.         * Static Model
.         run_static_model, depvar(ln_med_rent_psqft_sfcc) absorb(year_month) c
> luster(statefips)
  8.         esttab * using "`outstub'/fd_table.tex", keep(D.ln_mw) compress se
>  replace substitute(\_ _) ///
>                 b(%9.3f) se(%9.3f) coeflabels(`estlabels_static') ///
>                 stats(ctrl_wage ctrl_emp ctrl_estab r2 N, fmt(%s3 %s3 %s3 %9.
> 3f %9.0gc) ///
>                 labels("Wage controls" "Employment controls" "Establishment-c
> ount controls" ///
>                         "R-squared" "Observations")) star(* 0.10 ** 0.05 *** 
> 0.01) ///
>                 nonote nomtitles
  9. 
.         run_static_model_trend, depvar(ln_med_rent_psqft_sfcc) absorb(year_mo
> nth) cluster(statefips)
 10.         esttab * using "`outstub'/fd_table_trend.tex", keep(D.ln_mw) compr
> ess se replace substitute(\_ _)       ///
>                 b(%9.3f) se(%9.3f) coeflabels(`estlabels_static') ///
>                 stats(zs_trend zs_trend_sq r2 N, fmt(%s3 %s3 %9.3f %9.0gc) //
> /
>                 labels("Zipcode-specifc linear trend" "Zipcode-specific quadr
> atic trend" ///
>                         "R-squared" "Observations")) star(* 0.10 ** 0.05 *** 
> 0.01) nonote nomtitles 
 11. 
.         * Dynamic Model
.         run_dynamic_model, depvar(ln_med_rent_psqft_sfcc) absorb(year_month) 
> ///
>                 cluster(statefips)
 12.         esttab reg_1 reg_2 reg_3 reg_4 reg_5 using "`outstub'/fd_dynamic_t
> able.tex", ///
>                 keep(*.ln_mw) compress se replace substitute(\_ _) ///
>                 b(%9.4f) se(%9.4f) coeflabels(`estlabels_dyn') ///
>                 stats(k cumsum_b cumsum_V k p_value_F ctrl_wage ctrl_emp ctrl
> _estab r2 N, ///
>                         fmt(%s1 %s7 %s7 %s1 %9.3f %s3 %s3 %s3 %9.3f %9.0gc) /
> //
>                 labels("\vspace{-2mm}" "Cumulative effect" " " "\midrule" "P-
> value no pretrends" ///
>                         "Wage controls" "Employment controls" "Establishment-
> count controls"  ///
>                         "R-squared" "Observations")) ///
>                 star(* 0.10 ** 0.05 *** 0.01) nonote nomtitles
 13. end

. 
. program run_static_model
  1.         syntax, depvar(str) absorb(str) cluster(str)
  2. 
.         eststo clear
  3. 
.         define_controls estcount avgwwage
  4.         local emp_ctrls "`r(emp_ctrls)'"
  5.         local estcount_ctrls "`r(estcount_ctrls)'"
  6.         local avgwwage_ctrls "`r(avgwwage_ctrls)'"
  7. 
.         eststo: reghdfe D.`depvar' D.ln_mw,     absorb(`absorb') vce(cluster 
> `cluster') nocons
  8.         comment_table_control, emp("No") estab("No") wage("No") housing("N
> o")
  9. 
.         scalar static_effect = _b[D.ln_mw]
 10.         scalar static_effect_se = _se[D.ln_mw]
 11. 
.         eststo: reghdfe D.`depvar' D.ln_mw D.(`avgwwage_ctrls'), absorb(`abso
> rb' zipcode) vce(cluster `cluster') nocons
 12.         comment_table_control, emp("No") estab("No") wage("Yes") housing("
> No")
 13. 
.         eststo: reghdfe D.`depvar' D.ln_mw D.(`emp_ctrls'), absorb(`absorb') 
> vce(cluster `cluster') nocons
 14.         comment_table_control, emp("Yes") estab("No") wage("No") housing("
> No")
 15. 
.         eststo: reghdfe D.`depvar' D.ln_mw D.(`estcount_ctrls'), absorb(`abso
> rb') vce(cluster `cluster') nocons
 16.         comment_table_control, emp("No") estab("Yes") wage("No") housing("
> No")
 17. 
.         eststo: reghdfe D.`depvar' D.ln_mw D.(`avgwwage_ctrls') D.(`emp_ctrls
> ') D.(`estcount_ctrls'), ///
>                 absorb(`absorb') vce(cluster `cluster') nocons
 18.         comment_table_control, emp("Yes") estab("Yes") wage("Yes") housing
> ("No")
 19. end 

. 
. program run_static_model_trend
  1.         syntax, depvar(str) absorb(str) cluster(str)
  2. 
.         eststo clear
  3.         eststo: reghdfe D.`depvar' D.ln_mw, ///
>                 vce(cluster `cluster') nocons absorb(`absorb') 
  4.         comment_table, trend_lin("No") trend_sq("No")
  5. 
.         eststo: reghdfe D.`depvar' D.ln_mw,     ///
>                 vce(cluster `cluster') nocons absorb(`absorb' i.zipcode) 
  6.         comment_table, trend_lin("Yes") trend_sq("No")
  7. 
.         eststo: reghdfe D.`depvar' D.ln_mw, ///
>                 vce(cluster `cluster') nocons absorb(`absorb' i.zipcode c.tre
> nd_times2#i.zipcode) 
  8.         comment_table, trend_lin("Yes") trend_sq("Yes")
  9. end

. 
. program run_dynamic_model
  1.         syntax, depvar(str) absorb(str) cluster(str) [w(int 5) t_plot(real
>  1.645) offset(real 0.09)]
  2. 
.         eststo clear
  3.         define_controls estcount avgwwage
  4.         local emp_ctrls "`r(emp_ctrls)'"
  5.         local estcount_ctrls "`r(estcount_ctrls)'"
  6.         local avgwwage_ctrls "`r(avgwwage_ctrls)'"
  7. 
.         local lincomest_coeffs "D1.ln_mw + LD.ln_mw"
  8.         local pretrend_test "(F1D.ln_mw = 0)"
  9.         forvalues i = 2(1)`w'{
 10.                 local lincomest_coeffs "`lincomest_coeffs' + L`i'D.ln_mw"
 11.             local pretrend_test " `pretrend_test' (F`i'D.ln_mw = 0)"
 12.         }
 13. 
.         eststo clear
 14.         eststo reg_1: reghdfe D.`depvar' L(-`w'/`w').D.ln_mw, absorb(`abso
> rb') vce(cluster `cluster') nocons
 15.         comment_table_control, emp("No") estab("No") wage("No") housing("N
> o")
 16.         
.         test `pretrend_test'
 17.         estadd scalar p_value_F = r(p)
 18.         estadd local k ""
 19. 
.         add_cumsum, coefficients(`lincomest_coeffs') i(1)
 20. 
.         eststo reg_2: reghdfe D.`depvar' L(-`w'/`w').D.ln_mw D.(`avgwwage_ctr
> ls') `if', ///
>                 absorb(`absorb') vce(cluster `cluster') nocons
 21.         comment_table_control, emp("No") estab("No") wage("Yes") housing("
> No")
 22. 
.         test `pretrend_test'
 23.         estadd scalar p_value_F = r(p)
 24.         estadd local k ""
 25. 
.         add_cumsum, coefficients(`lincomest_coeffs') i(2)
 26. 
.         eststo reg_3: reghdfe D.`depvar' L(-`w'/`w').D.ln_mw D.(`emp_ctrls') 
> `if', ///
>                 absorb(`absorb') vce(cluster `cluster') nocons
 27.         comment_table_control, emp("Yes") estab("No") wage("No") housing("
> No")
 28. 
.         test `pretrend_test'
 29.         estadd scalar p_value_F = r(p)
 30.         estadd local k ""
 31. 
.         add_cumsum, coefficients(`lincomest_coeffs') i(3)
 32. 
.         eststo reg_4: reghdfe D.`depvar' L(-`w'/`w').D.ln_mw `if' D.(`estcoun
> t_ctrls'), ///
>                 absorb(`absorb') vce(cluster `cluster') nocons
 33.         comment_table_control, emp("No") estab("Yes") wage("No") housing("
> No")
 34. 
.         test `pretrend_test'
 35.         estadd scalar p_value_F = r(p)
 36.         estadd local k ""
 37. 
.         add_cumsum, coefficients(`lincomest_coeffs') i(4)
 38. 
.         eststo reg_5: reghdfe D.`depvar' L(-`w'/`w').D.ln_mw ///
>                 D.(`avgwwage_ctrls') D.(`emp_ctrls') D.(`estcount_ctrls') `if
> ', ///
>                 absorb(`absorb') vce(cluster `cluster') nocons
 39.         comment_table_control, emp("Yes") estab("Yes") wage("Yes") housing
> ("No")
 40. 
.         test `pretrend_test'
 41.         estadd scalar p_value_F = r(p)
 42.         estadd local k ""
 43. 
.         add_cumsum, coefficients(`lincomest_coeffs') i(5)
 44. end

. 
. program define_controls, rclass
  1.         
.         foreach ctrl_type in emp estcount avgwwage {
  2.                 local var_list "ln_`ctrl_type'_bizserv ln_`ctrl_type'_info
>  ln_`ctrl_type'_manu"
  3.                 return local `ctrl_type'_ctrls `var_list'
  4.         }
  5. 
.         local housing_cont   "ln_u1rep_units ln_u1rep_value"
  6.         return local housing_cont "`housing_cont'"
  7. end

. 
. program comment_table_control
  1.         syntax, emp(str) estab(str) wage(str) housing(str)
  2. 
.         estadd local ctrl_emp   "`emp'"
  3.         estadd local ctrl_estab "`estab'"
  4.         estadd local ctrl_wage  "`wage'"
  5.         estadd local ctrl_building "`housing'"
  6. end

. 
. program add_cumsum
  1.         syntax, coefficients(str) i(int)
  2.         lincomest `coefficients'
  3.         mat b = e(b)
  4.         mat V = e(V)
  5.         local b_digits = round(b[1,1], 0.001)
  6.         local se_digits = round(V[1,1]^.5, 0.001)
  7.         if abs(b[1,1]/(V[1,1]^.5)) > 1.96 {
  8.                 local star = "\sym{**}"
  9.         }
 10.         else if abs(b[1,1]/(V[1,1]^.5)) > 1.65 {
 11.                 local star = "\sym{*}"
 12.         }
 13.         else {
 14.                 local star = ""
 15.         }
 16. 
.         estadd local cumsum_b = "0`b_digits'`star'": reg_`i'
 17.         estadd local cumsum_V = "(0`se_digits')":  reg_`i'
 18.         *estadd scalar cumsum_V = V[1,1]^.5: reg_`i'
. end

. 
. program comment_table
  1.         syntax, trend_lin(str) trend_sq(str)
  2. 
.         estadd local zs_trend           "`trend_lin'"
  3.         estadd local zs_trend_sq        "`trend_sq'"
  4. end

. 
. program make_results_labels, rclass
  1.         syntax, w(int)
  2.         
.         local estlabels `"D.ln_mw "$\Delta \ln \underline{w}_{i,t}$""'
  3.         local estlabels `"FD.ln_mw "$\Delta \ln \underline{w}_{i,t-1}$" `e
> stlabels' LD.ln_mw "$\ln \underline{w}_{i,t+1}$""'
  4.         forvalues i = 2(1)`w'{
  5.                 local estlabels `"F`i'D.ln_mw "$\Delta \ln \underline{w}_{
> i,t-`i'}$" `estlabels' L`i'D.ln_mw "$\Delta \ln \underline{w}_{i,t+`i'}$""'
  6.         }
  7. 
.         return local estlabels_dyn "`estlabels'"        
  8. 
.         local estlabels_static `"D.ln_mw "$\Delta \ln \underline{w}_{it}$""'
  9.         return local estlabels_static "`estlabels_static'"
 10. end 

. 
. 
. main
(MWFE estimator converged in 1 iterations)

HDFE Linear regression                            Number of obs   =    112,232
Absorbing 1 HDFE group                            F(   1,     40) =       4.07
Statistics robust to heteroskedasticity           Prob > F        =     0.0504
                                                  R-squared       =     0.0218
                                                  Adj R-squared   =     0.0208
                                                  Within R-sq.    =     0.0001
Number of clusters (statefips) =         41       Root MSE        =     0.0279

                             (Std. Err. adjusted for 41 clusters in statefips)
------------------------------------------------------------------------------
D.           |               Robust
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
       ln_mw |
         D1. |   .0259256   .0128533     2.02   0.050    -.0000519    .0519031
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
  year_month |       118           0         118     |
-----------------------------------------------------+
(est1 stored)

added macro:
           e(ctrl_emp) : "No"

added macro:
         e(ctrl_estab) : "No"

added macro:
          e(ctrl_wage) : "No"

added macro:
      e(ctrl_building) : "No"
(MWFE estimator converged in 5 iterations)

HDFE Linear regression                            Number of obs   =    106,699
Absorbing 2 HDFE groups                           F(   4,     40) =       1.20
Statistics robust to heteroskedasticity           Prob > F        =     0.3270
                                                  R-squared       =     0.0242
                                                  Adj R-squared   =     0.0126
                                                  Within R-sq.    =     0.0001
Number of clusters (statefips) =         41       Root MSE        =     0.0281

                             (Std. Err. adjusted for 41 clusters in statefips)
------------------------------------------------------------------------------
D.           |               Robust
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
       ln_mw |
         D1. |   .0232686   .0115439     2.02   0.051    -.0000626    .0465997
             |
ln_avgwwa~rv |
         D1. |   .0017288   .0023967     0.72   0.475    -.0031151    .0065726
             |
ln_avgwwag~o |
         D1. |   .0009816   .0016594     0.59   0.558    -.0023722    .0043353
             |
ln_avgwwag~u |
         D1. |  -.0006785   .0018067    -0.38   0.709    -.0043299    .0029729
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
  year_month |       115           0         115     |
     zipcode |      1140        1140           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation
(est2 stored)

added macro:
           e(ctrl_emp) : "No"

added macro:
         e(ctrl_estab) : "No"

added macro:
          e(ctrl_wage) : "Yes"

added macro:
      e(ctrl_building) : "No"
(MWFE estimator converged in 1 iterations)

HDFE Linear regression                            Number of obs   =    106,699
Absorbing 1 HDFE group                            F(   4,     40) =       2.89
Statistics robust to heteroskedasticity           Prob > F        =     0.0341
                                                  R-squared       =     0.0222
                                                  Adj R-squared   =     0.0211
                                                  Within R-sq.    =     0.0001
Number of clusters (statefips) =         41       Root MSE        =     0.0280

                             (Std. Err. adjusted for 41 clusters in statefips)
------------------------------------------------------------------------------
D.           |               Robust
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
       ln_mw |
         D1. |   .0238435   .0124295     1.92   0.062    -.0012775    .0489645
             |
ln_emp_biz~v |
         D1. |   .0044238   .0043486     1.02   0.315    -.0043652    .0132127
             |
 ln_emp_info |
         D1. |   .0016334   .0044457     0.37   0.715    -.0073516    .0106184
             |
 ln_emp_manu |
         D1. |   .0072075   .0049224     1.46   0.151    -.0027411    .0171562
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
  year_month |       115           0         115     |
-----------------------------------------------------+
(est3 stored)

added macro:
           e(ctrl_emp) : "Yes"

added macro:
         e(ctrl_estab) : "No"

added macro:
          e(ctrl_wage) : "No"

added macro:
      e(ctrl_building) : "No"
(MWFE estimator converged in 1 iterations)

HDFE Linear regression                            Number of obs   =    108,511
Absorbing 1 HDFE group                            F(   4,     40) =       1.81
Statistics robust to heteroskedasticity           Prob > F        =     0.1452
                                                  R-squared       =     0.0222
                                                  Adj R-squared   =     0.0211
                                                  Within R-sq.    =     0.0002
Number of clusters (statefips) =         41       Root MSE        =     0.0280

                             (Std. Err. adjusted for 41 clusters in statefips)
------------------------------------------------------------------------------
D.           |               Robust
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
       ln_mw |
         D1. |   .0266259     .01268     2.10   0.042     .0009987    .0522531
             |
ln_estcou~rv |
         D1. |   .0159201    .014705     1.08   0.285    -.0137999    .0456401
             |
ln_estcoun~o |
         D1. |   .0042121   .0057373     0.73   0.467    -.0073834    .0158076
             |
ln_estcoun~u |
         D1. |   .0025673   .0124049     0.21   0.837    -.0225039    .0276385
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
  year_month |       115           0         115     |
-----------------------------------------------------+
(est4 stored)

added macro:
           e(ctrl_emp) : "No"

added macro:
         e(ctrl_estab) : "Yes"

added macro:
          e(ctrl_wage) : "No"

added macro:
      e(ctrl_building) : "No"
(MWFE estimator converged in 1 iterations)

HDFE Linear regression                            Number of obs   =    106,699
Absorbing 1 HDFE group                            F(  10,     40) =       2.05
Statistics robust to heteroskedasticity           Prob > F        =     0.0532
                                                  R-squared       =     0.0223
                                                  Adj R-squared   =     0.0211
                                                  Within R-sq.    =     0.0002
Number of clusters (statefips) =         41       Root MSE        =     0.0280

                             (Std. Err. adjusted for 41 clusters in statefips)
------------------------------------------------------------------------------
D.           |               Robust
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
       ln_mw |
         D1. |   .0243385   .0126244     1.93   0.061    -.0011764    .0498533
             |
ln_avgwwa~rv |
         D1. |   .0017572   .0024118     0.73   0.471    -.0031173    .0066317
             |
ln_avgwwag~o |
         D1. |   .0011037   .0016115     0.68   0.497    -.0021534    .0043607
             |
ln_avgwwag~u |
         D1. |  -.0007928   .0017913    -0.44   0.660     -.004413    .0028275
             |
ln_emp_biz~v |
         D1. |   .0036138   .0045069     0.80   0.427     -.005495    .0127225
             |
 ln_emp_info |
         D1. |   .0015205    .004375     0.35   0.730    -.0073216    .0103627
             |
 ln_emp_manu |
         D1. |   .0070394   .0045579     1.54   0.130    -.0021725    .0162513
             |
ln_estcou~rv |
         D1. |    .016137   .0143628     1.12   0.268    -.0128912    .0451652
             |
ln_estcoun~o |
         D1. |   .0037754   .0056319     0.67   0.506    -.0076071    .0151579
             |
ln_estcoun~u |
         D1. |   .0037586   .0121101     0.31   0.758    -.0207169    .0282341
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
  year_month |       115           0         115     |
-----------------------------------------------------+
(est5 stored)

added macro:
           e(ctrl_emp) : "Yes"

added macro:
         e(ctrl_estab) : "Yes"

added macro:
          e(ctrl_wage) : "Yes"

added macro:
      e(ctrl_building) : "No"
(note: file ../output/fd_table.tex not found)
(output written to ../output/fd_table.tex)
(MWFE estimator converged in 1 iterations)

HDFE Linear regression                            Number of obs   =    112,232
Absorbing 1 HDFE group                            F(   1,     40) =       4.07
Statistics robust to heteroskedasticity           Prob > F        =     0.0504
                                                  R-squared       =     0.0218
                                                  Adj R-squared   =     0.0208
                                                  Within R-sq.    =     0.0001
Number of clusters (statefips) =         41       Root MSE        =     0.0279

                             (Std. Err. adjusted for 41 clusters in statefips)
------------------------------------------------------------------------------
D.           |               Robust
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
       ln_mw |
         D1. |   .0259256   .0128533     2.02   0.050    -.0000519    .0519031
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
  year_month |       118           0         118     |
-----------------------------------------------------+
(est1 stored)

added macro:
           e(zs_trend) : "No"

added macro:
        e(zs_trend_sq) : "No"
(MWFE estimator converged in 5 iterations)

HDFE Linear regression                            Number of obs   =    112,232
Absorbing 2 HDFE groups                           F(   1,     40) =       4.49
Statistics robust to heteroskedasticity           Prob > F        =     0.0404
                                                  R-squared       =     0.0236
                                                  Adj R-squared   =     0.0125
                                                  Within R-sq.    =     0.0001
Number of clusters (statefips) =         41       Root MSE        =     0.0281

                             (Std. Err. adjusted for 41 clusters in statefips)
------------------------------------------------------------------------------
D.           |               Robust
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
       ln_mw |
         D1. |   .0255844   .0120774     2.12   0.040     .0011749    .0499938
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
  year_month |       118           0         118     |
     zipcode |      1143        1143           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation
(est2 stored)

added macro:
           e(zs_trend) : "Yes"

added macro:
        e(zs_trend_sq) : "No"
(MWFE estimator converged in 29 iterations)

HDFE Linear regression                            Number of obs   =    112,232
Absorbing 3 HDFE groups                           F(   1,     40) =       4.68
Statistics robust to heteroskedasticity           Prob > F        =     0.0365
                                                  R-squared       =     0.0264
                                                  Adj R-squared   =     0.0051
                                                  Within R-sq.    =     0.0001
Number of clusters (statefips) =         41       Root MSE        =     0.0282

                             (Std. Err. adjusted for 41 clusters in statefips)
------------------------------------------------------------------------------
D.           |               Robust
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
       ln_mw |
         D1. |   .0253648   .0117209     2.16   0.036     .0016759    .0490537
------------------------------------------------------------------------------

Absorbed degrees of freedom:
----------------------------------------------------------------+
            Absorbed FE | Categories  - Redundant  = Num. Coefs |
------------------------+---------------------------------------|
             year_month |       118           0         118     |
                zipcode |      1143        1143           0    *|
 zipcode#c.trend_times2 |      1143           0        1143    ?|
----------------------------------------------------------------+
? = number of redundant parameters may be higher
* = FE nested within cluster; treated as redundant for DoF computation
(est3 stored)

added macro:
           e(zs_trend) : "Yes"

added macro:
        e(zs_trend_sq) : "Yes"
(note: file ../output/fd_table_trend.tex not found)
(output written to ../output/fd_table_trend.tex)
(MWFE estimator converged in 1 iterations)

HDFE Linear regression                            Number of obs   =    106,446
Absorbing 1 HDFE group                            F(  11,     40) =       5.24
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.0222
                                                  Adj R-squared   =     0.0211
                                                  Within R-sq.    =     0.0002
Number of clusters (statefips) =         41       Root MSE        =     0.0280

                             (Std. Err. adjusted for 41 clusters in statefips)
------------------------------------------------------------------------------
D.           |               Robust
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
       ln_mw |
        F5D. |  -.0145811   .0091019    -1.60   0.117    -.0329768    .0038145
        F4D. |  -.0023173   .0116215    -0.20   0.843    -.0258053    .0211707
        F3D. |   .0013676   .0093121     0.15   0.884    -.0174528     .020188
        F2D. |   .0060834   .0115399     0.53   0.601    -.0172396    .0294063
         FD. |  -.0002799    .012286    -0.02   0.982    -.0251108    .0245511
         D1. |   .0269594   .0126674     2.13   0.040     .0013576    .0525611
         LD. |   .0135887   .0071476     1.90   0.065    -.0008571    .0280345
        L2D. |  -.0070198   .0133432    -0.53   0.602    -.0339874    .0199478
        L3D. |   .0036445    .008078     0.45   0.654    -.0126817    .0199707
        L4D. |   .0108004   .0069303     1.56   0.127    -.0032063    .0248071
        L5D. |   .0086176   .0068622     1.26   0.216    -.0052515    .0224867
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
  year_month |       109           0         109     |
-----------------------------------------------------+

added macro:
           e(ctrl_emp) : "No"

added macro:
         e(ctrl_estab) : "No"

added macro:
          e(ctrl_wage) : "No"

added macro:
      e(ctrl_building) : "No"

 ( 1)  FD.ln_mw = 0
 ( 2)  F2D.ln_mw = 0
 ( 3)  F3D.ln_mw = 0
 ( 4)  F4D.ln_mw = 0
 ( 5)  F5D.ln_mw = 0

       F(  5,    40) =    0.77
            Prob > F =    0.5787

added scalar:
          e(p_value_F) =  .57874804

added macro:
                  e(k) : ""
Confidence interval for formula:
D1.ln_mw+LD.ln_mw+L2D.ln_mw+L3D.ln_mw+L4D.ln_mw+L5D.ln_mw

------------------------------------------------------------------------------
D.           |
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .0565908   .0346648     1.63   0.110    -.0134693    .1266508
------------------------------------------------------------------------------
(MWFE estimator converged in 1 iterations)

HDFE Linear regression                            Number of obs   =    104,360
Absorbing 1 HDFE group                            F(  14,     40) =       5.05
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.0223
                                                  Adj R-squared   =     0.0212
                                                  Within R-sq.    =     0.0002
Number of clusters (statefips) =         41       Root MSE        =     0.0280

                             (Std. Err. adjusted for 41 clusters in statefips)
------------------------------------------------------------------------------
D.           |               Robust
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
       ln_mw |
        F5D. |  -.0122848   .0078685    -1.56   0.126    -.0281875     .003618
        F4D. |   .0006883   .0099823     0.07   0.945    -.0194867    .0208633
        F3D. |   .0005659   .0096595     0.06   0.954    -.0189568    .0200885
        F2D. |   .0053731   .0119433     0.45   0.655    -.0187653    .0295115
         FD. |   -.002135    .012511    -0.17   0.865    -.0274207    .0231507
         D1. |   .0242641   .0124208     1.95   0.058    -.0008392    .0493674
         LD. |   .0127678   .0071936     1.77   0.084     -.001771    .0273066
        L2D. |  -.0060796   .0135541    -0.45   0.656    -.0334734    .0213143
        L3D. |   .0039779   .0078387     0.51   0.615    -.0118646    .0198204
        L4D. |   .0110026   .0065847     1.67   0.103    -.0023055    .0243107
        L5D. |   .0095162   .0065985     1.44   0.157    -.0038199    .0228523
             |
ln_avgwwa~rv |
         D1. |   .0016105   .0024319     0.66   0.512    -.0033045    .0065255
             |
ln_avgwwag~o |
         D1. |   .0010798   .0016575     0.65   0.518    -.0022702    .0044298
             |
ln_avgwwag~u |
         D1. |  -.0006913   .0018277    -0.38   0.707    -.0043853    .0030027
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
  year_month |       109           0         109     |
-----------------------------------------------------+

added macro:
           e(ctrl_emp) : "No"

added macro:
         e(ctrl_estab) : "No"

added macro:
          e(ctrl_wage) : "Yes"

added macro:
      e(ctrl_building) : "No"

 ( 1)  FD.ln_mw = 0
 ( 2)  F2D.ln_mw = 0
 ( 3)  F3D.ln_mw = 0
 ( 4)  F4D.ln_mw = 0
 ( 5)  F5D.ln_mw = 0

       F(  5,    40) =    0.58
            Prob > F =    0.7138

added scalar:
          e(p_value_F) =  .71381825

added macro:
                  e(k) : ""
Confidence interval for formula:
D1.ln_mw+LD.ln_mw+L2D.ln_mw+L3D.ln_mw+L4D.ln_mw+L5D.ln_mw

------------------------------------------------------------------------------
D.           |
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .0554491     .03447     1.61   0.116    -.0142174    .1251155
------------------------------------------------------------------------------
(MWFE estimator converged in 1 iterations)

HDFE Linear regression                            Number of obs   =    104,360
Absorbing 1 HDFE group                            F(  14,     40) =       5.27
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.0223
                                                  Adj R-squared   =     0.0212
                                                  Within R-sq.    =     0.0002
Number of clusters (statefips) =         41       Root MSE        =     0.0280

                             (Std. Err. adjusted for 41 clusters in statefips)
------------------------------------------------------------------------------
D.           |               Robust
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
       ln_mw |
        F5D. |  -.0122814   .0078729    -1.56   0.127    -.0281931    .0036303
        F4D. |   .0008054   .0099487     0.08   0.936    -.0193018    .0209125
        F3D. |   .0004982   .0096725     0.05   0.959    -.0190507    .0200471
        F2D. |   .0054708   .0118511     0.46   0.647    -.0184812    .0294227
         FD. |  -.0023112   .0125998    -0.18   0.855    -.0277764    .0231539
         D1. |   .0240152   .0124899     1.92   0.062    -.0012279    .0492582
         LD. |   .0130225   .0071899     1.81   0.078    -.0015089    .0275539
        L2D. |  -.0059622   .0135606    -0.44   0.663    -.0333692    .0214448
        L3D. |   .0043557    .007689     0.57   0.574    -.0111843    .0198956
        L4D. |   .0110387   .0065554     1.68   0.100    -.0022103    .0242878
        L5D. |   .0096951   .0065587     1.48   0.147    -.0035605    .0229507
             |
ln_emp_biz~v |
         D1. |   .0049956   .0042594     1.17   0.248    -.0036131    .0136042
             |
 ln_emp_info |
         D1. |   .0018291    .004371     0.42   0.678     -.007005    .0106632
             |
 ln_emp_manu |
         D1. |   .0075698   .0050703     1.49   0.143    -.0026777    .0178172
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
  year_month |       109           0         109     |
-----------------------------------------------------+

added macro:
           e(ctrl_emp) : "Yes"

added macro:
         e(ctrl_estab) : "No"

added macro:
          e(ctrl_wage) : "No"

added macro:
      e(ctrl_building) : "No"

 ( 1)  FD.ln_mw = 0
 ( 2)  F2D.ln_mw = 0
 ( 3)  F3D.ln_mw = 0
 ( 4)  F4D.ln_mw = 0
 ( 5)  F5D.ln_mw = 0

       F(  5,    40) =    0.58
            Prob > F =    0.7161

added scalar:
          e(p_value_F) =  .71607511

added macro:
                  e(k) : ""
Confidence interval for formula:
D1.ln_mw+LD.ln_mw+L2D.ln_mw+L3D.ln_mw+L4D.ln_mw+L5D.ln_mw

------------------------------------------------------------------------------
D.           |
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |    .056165   .0343391     1.64   0.110     -.013237    .1255669
------------------------------------------------------------------------------
(MWFE estimator converged in 1 iterations)

HDFE Linear regression                            Number of obs   =    106,160
Absorbing 1 HDFE group                            F(  14,     40) =       4.85
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.0223
                                                  Adj R-squared   =     0.0211
                                                  Within R-sq.    =     0.0003
Number of clusters (statefips) =         41       Root MSE        =     0.0280

                             (Std. Err. adjusted for 41 clusters in statefips)
------------------------------------------------------------------------------
D.           |               Robust
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
       ln_mw |
        F5D. |  -.0143433   .0090425    -1.59   0.121    -.0326188    .0039322
        F4D. |  -.0021253   .0115783    -0.18   0.855    -.0255258    .0212753
        F3D. |   .0006826   .0092121     0.07   0.941    -.0179356    .0193009
        F2D. |   .0060257   .0115098     0.52   0.603    -.0172364    .0292877
         FD. |  -.0000542   .0122029    -0.00   0.996    -.0247172    .0246088
         D1. |   .0267861   .0127241     2.11   0.042     .0010697    .0525024
         LD. |   .0135581   .0071916     1.89   0.067    -.0009767     .028093
        L2D. |  -.0068158   .0133094    -0.51   0.611    -.0337151    .0200835
        L3D. |   .0032213    .007891     0.41   0.685     -.012727    .0191696
        L4D. |    .010769   .0068372     1.58   0.123    -.0030495    .0245875
        L5D. |   .0088242   .0067201     1.31   0.197    -.0047576    .0224061
             |
ln_estcou~rv |
         D1. |   .0153538   .0148478     1.03   0.307    -.0146547    .0453623
             |
ln_estcoun~o |
         D1. |   .0040949   .0057607     0.71   0.481    -.0075479    .0157377
             |
ln_estcoun~u |
         D1. |   .0028747   .0123455     0.23   0.817    -.0220766     .027826
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
  year_month |       109           0         109     |
-----------------------------------------------------+

added macro:
           e(ctrl_emp) : "No"

added macro:
         e(ctrl_estab) : "Yes"

added macro:
          e(ctrl_wage) : "No"

added macro:
      e(ctrl_building) : "No"

 ( 1)  FD.ln_mw = 0
 ( 2)  F2D.ln_mw = 0
 ( 3)  F3D.ln_mw = 0
 ( 4)  F4D.ln_mw = 0
 ( 5)  F5D.ln_mw = 0

       F(  5,    40) =    0.73
            Prob > F =    0.6084

added scalar:
          e(p_value_F) =  .60837224

added macro:
                  e(k) : ""
Confidence interval for formula:
D1.ln_mw+LD.ln_mw+L2D.ln_mw+L3D.ln_mw+L4D.ln_mw+L5D.ln_mw

------------------------------------------------------------------------------
D.           |
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .0563428   .0343176     1.64   0.108    -.0130156    .1257012
------------------------------------------------------------------------------
(MWFE estimator converged in 1 iterations)

HDFE Linear regression                            Number of obs   =    104,360
Absorbing 1 HDFE group                            F(  20,     40) =       8.07
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.0224
                                                  Adj R-squared   =     0.0212
                                                  Within R-sq.    =     0.0003
Number of clusters (statefips) =         41       Root MSE        =     0.0280

                             (Std. Err. adjusted for 41 clusters in statefips)
------------------------------------------------------------------------------
D.           |               Robust
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
       ln_mw |
        F5D. |  -.0121885   .0078732    -1.55   0.129    -.0281009    .0037238
        F4D. |   .0008067   .0099403     0.08   0.936    -.0192834    .0208968
        F3D. |  -.0000717   .0095264    -0.01   0.994    -.0193252    .0191818
        F2D. |   .0056496   .0118967     0.47   0.637    -.0183944    .0296937
         FD. |  -.0022859   .0125924    -0.18   0.857    -.0277362    .0231643
         D1. |   .0244731   .0126776     1.93   0.061    -.0011493    .0500955
         LD. |   .0127134   .0072065     1.76   0.085    -.0018515    .0272783
        L2D. |  -.0059761   .0135605    -0.44   0.662    -.0333828    .0214306
        L3D. |   .0033979   .0076718     0.44   0.660    -.0121074    .0189032
        L4D. |   .0112781   .0064898     1.74   0.090    -.0018383    .0243945
        L5D. |   .0096681    .006551     1.48   0.148    -.0035719    .0229081
             |
ln_avgwwa~rv |
         D1. |   .0016383   .0024607     0.67   0.509    -.0033351    .0066116
             |
ln_avgwwag~o |
         D1. |   .0011458   .0016166     0.71   0.483    -.0021214     .004413
             |
ln_avgwwag~u |
         D1. |  -.0008275   .0018009    -0.46   0.648    -.0044672    .0028123
             |
ln_emp_biz~v |
         D1. |   .0042007   .0044061     0.95   0.346    -.0047042    .0131057
             |
 ln_emp_info |
         D1. |   .0017311   .0042867     0.40   0.688    -.0069326    .0103948
             |
 ln_emp_manu |
         D1. |   .0073803   .0046637     1.58   0.121    -.0020455     .016806
             |
ln_estcou~rv |
         D1. |   .0155637   .0143904     1.08   0.286    -.0135204    .0446478
             |
ln_estcoun~o |
         D1. |     .00363   .0056371     0.64   0.523    -.0077629    .0150229
             |
ln_estcoun~u |
         D1. |   .0040292    .012035     0.33   0.740    -.0202945     .028353
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
  year_month |       109           0         109     |
-----------------------------------------------------+

added macro:
           e(ctrl_emp) : "Yes"

added macro:
         e(ctrl_estab) : "Yes"

added macro:
          e(ctrl_wage) : "Yes"

added macro:
      e(ctrl_building) : "No"

 ( 1)  FD.ln_mw = 0
 ( 2)  F2D.ln_mw = 0
 ( 3)  F3D.ln_mw = 0
 ( 4)  F4D.ln_mw = 0
 ( 5)  F5D.ln_mw = 0

       F(  5,    40) =    0.56
            Prob > F =    0.7272

added scalar:
          e(p_value_F) =  .72724842

added macro:
                  e(k) : ""
Confidence interval for formula:
D1.ln_mw+LD.ln_mw+L2D.ln_mw+L3D.ln_mw+L4D.ln_mw+L5D.ln_mw

------------------------------------------------------------------------------
D.           |
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .0555546   .0341506     1.63   0.112    -.0134664    .1245755
------------------------------------------------------------------------------
(note: file ../output/fd_dynamic_table.tex not found)
(output written to ../output/fd_dynamic_table.tex)

. 
end of do-file


Execute:  StataMP-64 /e do "./figures_base.do"

  ___  ____  ____  ____  ____ (R)
 /__    /   ____/   /   ____/
___/   /   /___/   /   /___/   15.1   Copyright 1985-2017 StataCorp LLC
  Statistics/Data Analysis            StataCorp
                                      4905 Lakeway Drive
     MP - Parallel Edition            College Station, Texas 77845 USA
                                      800-STATA-PC        http://www.stata.com
                                      979-696-4600        stata@stata.com
                                      979-696-4601 (fax)

Single-user 32-core Stata perpetual license:
       Serial number:  501506205566
         Licensed to:  KU Leuven FEB (CES)
                       KU Leuven

Notes:
      1.  Stata is running in batch mode.
      2.  Unicode is supported; see help unicode_advice.
      3.  More than 2 billion observations are allowed; see help obs_advice.
      4.  Maximum number of variables is set to 5000; see help set_maxvar.

. do ./figures_base.do 

. clear all

. set more off

. adopath + ../../../lib/stata/gslab_misc/ado
  [1]  (BASE)      "C:\Program Files\Stata15\ado\base/"
  [2]  (SITE)      "C:\Program Files\Stata15\ado\site/"
  [3]              "."
  [4]  (PERSONAL)  "c:\ado\personal/"
  [5]  (PLUS)      "c:\ado\plus/"
  [6]  (OLDPLACE)  "c:\ado/"
  [7]              "../../../lib/stata/gslab_misc/ado"

. adopath + ../../../lib/stata/min_wage/ado
  [1]  (BASE)      "C:\Program Files\Stata15\ado\base/"
  [2]  (SITE)      "C:\Program Files\Stata15\ado\site/"
  [3]              "."
  [4]  (PERSONAL)  "c:\ado\personal/"
  [5]  (PLUS)      "c:\ado\plus/"
  [6]  (OLDPLACE)  "c:\ado/"
  [7]              "../../../lib/stata/gslab_misc/ado"
  [8]              "../../../lib/stata/min_wage/ado"

. set maxvar 32000 


. 
. program main
  1.         local instub "../temp"
  2.         local outstub "../output"
  3. 
.         use "`instub'/fd_rent_panel.dta", clear
  4. 
.         build_coeff_plot, depvar(ln_med_rent_psqft_sfcc) absorb(year_month) /
> //
>                 cluster(statefips)
  5.         graph export "`outstub'/fd_models.png", replace
  6.         graph export "`outstub'/fd_models.eps", replace
  7. 
.         use "`instub'/fd_rent_panel.dta", clear
  8. 
.         build_coeff_plot_controls, depvar(ln_med_rent_psqft_sfcc) absorb(year
> _month) ///
>                 cluster(statefips)
  9.         graph export "../output/fd_models_control.png", replace
 10.         graph export "../output/fd_models_control.eps", replace
 11. end

. 
. program build_coeff_plot
  1.         syntax, depvar(str) absorb(str) cluster(str) [w(int 5) t_plot(real
>  1.645) offset(real 0.09)]
  2. 
.         eststo clear
  3.         reghdfe D.`depvar' D.ln_mw,     absorb(`absorb') vce(cluster `clus
> ter') nocons
  4. 
.         scalar static_effect = _b[D.ln_mw]
  5.         scalar static_effect_se = _se[D.ln_mw]
  6. 
.         define_controls estcount avgwwage
  7.         local emp_ctrls "`r(emp_ctrls)'"
  8.         local estcount_ctrls "`r(estcount_ctrls)'"
  9.         local avgwwage_ctrls "`r(avgwwage_ctrls)'"
 10. 
.         qui reghdfe D.`depvar' L(-`w'/`w').D.ln_mw, absorb(`absorb') vce(clus
> ter `cluster') nocons
 11.         
.         preserve
 12.                 coefplot, vertical base gen
 13.                 keep __at __b __se
 14.                 rename (__at __b __se) (at b_full se_full)
 15.                 
.                 keep if !missing(at)
 16. 
.                 gen b_full_lb = b_full - `t_plot'*se_full
 17.                 gen b_full_ub = b_full + `t_plot'*se_full
 18. 
.                 gen static_path = . 
 19.                 replace static_path = scalar(static_effect) if at > `w'
 20. 
.                 save "../temp/plot_coeffs.dta", replace
 21.         restore
 22. 
.         qui reghdfe D.`depvar' L(0/`w').D.ln_mw, absorb(`absorb') vce(cluster
>  `cluster') nocons
 23.         
.         coefplot, vertical base gen
 24.         keep __at __b __se
 25.         rename (__at __b __se) (at b_lags se_lags)
 26.         tset at
 27. 
.         keep if !missing(at)
 28. 
.         gen b_lags_lb = b_lags - 1.645*se_lags
 29.         gen b_lags_ub = b_lags + 1.645*se_lags
 30. 
.         gen cumsum_b_lags = b_lags[1]
 31.         replace cumsum_b_lags = cumsum_b_lags[_n-1] + b_lags[_n] if _n > 1
 32. 
.         replace at = at + `w'
 33.                 
.         merge 1:1 at using "../temp/plot_coeffs.dta", nogen
 34.         sort at
 35. 
.         gen at_full = at - `offset'                  // To prevent lines from
>  overlapping perfectly
 36.         gen at_lags = at + `offset'
 37.         replace at_full = at if _n <= `w'
 38.         replace at_lags = at if _n <= `w'
 39.         replace cumsum_b_lags = . if at < `w' - 1
 40. 
.         // Figure
.         make_plot_xlabels, w(`w')
 41. 
.         twoway  (scatter b_full at_full, mcol(navy)) ///
>                                 (rcap b_full_lb b_full_ub at_full, col(navy) 
> lw(vthin)) ///
>                         (scatter b_lags at_lags, mcol(maroon)) ///
>                                 (rcap b_lags_lb b_lags_ub at_lags, col(maroon
> ) lw(vthin)) ///
>                         (line static_path at, lcol(gs4) lpat(dash)) ///
>                         (line cumsum_b_lags at, lcol(maroon) lpat(dash)), ///
>                 yline(0, lcol(black)) ///
>                 xlabel(`r(xlab)', labsize(small)) xtitle("Leads and lags of d
> ifference in log MW") ///
>                 ylabel(-0.06(0.02).08, grid labsize(small)) ytitle("Coefficie
> nt") ///
>                 legend(order(1 "Full dynamic model" 3 "Distributed lags model
> " ///
>                         5 "Effects path static model" 6 "Effects path distrib
> uted lags model") size(small)) ///
>                 graphregion(color(white)) bgcolor(white)
 42. end

. 
. program build_coeff_plot_controls
  1.         syntax, depvar(str) absorb(str) cluster(str) [w(int 5) t_plot(real
>  1.645) offset(real 0.17)]
  2. 
.         eststo clear
  3. 
.         define_controls estcount avgwwage
  4.         local emp_ctrls "`r(emp_ctrls)'"
  5.         local estab_ctrls "`r(estcount_ctrls)'"
  6.         local wage_ctrls "`r(avgwwage_ctrls)'"
  7. 
.         reghdfe D.`depvar' L(-`w'/`w').D.ln_mw, absorb(`absorb') vce(cluster 
> `cluster') nocons
  8.         store_dynamic_coeffs, model(base) w(`w') t_plot(`t_plot')
  9. 
.         foreach name in emp estab wage {
 10.                 reghdfe D.`depvar' L(-`w'/`w').D.ln_mw D.(``name'_ctrls'),
>  absorb(`absorb') vce(cluster `cluster') nocons
 11.                 store_dynamic_coeffs, model(`name') w(`w') t_plot(`t_plot'
> )
 12.         }
 13.                         
.         reghdfe D.`depvar' L(-`w'/`w').D.ln_mw D.(`emp_ctrls') D.(`estab_ctrl
> s') D.(`wage_ctrls'), ///
>                 absorb(`absorb') vce(cluster `cluster') nocons
 14. 
.         coefplot, vertical base gen
 15.         local winspan = 2*`w' + 1
 16.         keep if _n <= `winspan'
 17.         keep __at __b __se
 18.         rename (__at __b __se) (at b_all se_all)
 19.         keep if !missing(at)
 20. 
.         gen b_all_lb = b_all - `t_plot'*se_all
 21.         gen b_all_ub = b_all + `t_plot'*se_all
 22. 
.         merge 1:1 at using "../temp/plot_coeffs_base.dta", nogen
 23.         merge 1:1 at using "../temp/plot_coeffs_emp.dta", nogen
 24.         merge 1:1 at using "../temp/plot_coeffs_estab.dta", nogen
 25.         merge 1:1 at using "../temp/plot_coeffs_wage.dta", nogen
 26. 
.         sort at
 27.         g at_emp   = at - 2*`offset'
 28.         g at_estab = at - `offset'
 29.         g at_wage  = at + `offset'
 30.         g at_all = at + 2*`offset'
 31. 
.         make_plot_xlabels, w(`w')
 32. 
.         twoway (scatter b_base at, mcol(navy))          (rcap b_base_lb b_bas
> e_ub at, lc(navy) lw(vthin)) ///
>                    (scatter b_emp at_emp, mc(maroon))       (rcap b_emp_lb b_
> emp_ub at_emp, lc(maroon) lw(vthin)) ///
>                    (scatter b_estab at_estab, mc(lavender)) (rcap b_estab_lb 
> b_estab_ub at_est, lc(lavender) lw(vthin)) ///
>                    (scatter b_wage at_wage, mc(dkorange))   (rcap b_wage_lb b
> _wage_ub at_wage, lc(dkorange) lw(vthin)) ///
>                    (scatter b_all at_all, mc(gs10))         (rcap b_all_lb b_
> all_ub at_all, lc(gs10) lw(vthin)), /// 
>                 yline(0, lcol(black)) ///
>                 graphregion(color(white)) bgcolor(white) ///
>                 xlabel(`r(xlab)', labsize(vsmall)) xtitle("Leads and lags of 
> difference in log MW") ///
>                 ytitle("Dynamic coefficients") ylabel(-0.06(0.02).06, grid)  
>    ///
>                 legend(order(1 "Baseline" 3 "Employment" ///
>                         5 "Establishment" 7 "Wage" 9 "Building") size(small) 
> rows(1))
 33. end

. 
. program define_controls, rclass
  1.         foreach ctrl_type in emp estcount avgwwage {
  2.                 local var_list "ln_`ctrl_type'_bizserv ln_`ctrl_type'_info
>  ln_`ctrl_type'_manu"
  3.                 return local `ctrl_type'_ctrls `var_list'
  4.         }
  5. 
.         local housing_cont   "ln_u1rep_units ln_u1rep_value"
  6.         return local housing_cont "`housing_cont'"
  7. end

. 
. program store_dynamic_coeffs
  1.         syntax, model(str) w(int) t_plot(real)
  2.         preserve
  3.                 coefplot, vertical base gen
  4.                 local wspan = 2*`w' + 1
  5.                 keep if _n <= `wspan'
  6.                 keep __at __b __se
  7.                 rename (__at __b __se) (at b_`model' se_`model')
  8.         
.                 keep if !missing(at)
  9. 
.                 gen b_`model'_lb = b_`model' - `t_plot'*se_`model'
 10.                 gen b_`model'_ub = b_`model' + `t_plot'*se_`model'
 11.         
.                 save "../temp/plot_coeffs_`model'.dta", replace
 12.         restore
 13. end 

. 
. program make_plot_xlabels, rclass 
  1.         syntax, w(int)
  2. 
.         local xlab ""
  3.         forval lead = 1/`w' {
  4.                 local leadlab = `lead' - `w' - 1
  5.                 local xlab `"`xlab' `lead' "`leadlab'""'
  6.         }
  7.         local zero = `w' + 1
  8.         local xlab `"`xlab' `zero' "0""'
  9.         forval lag = 1/`w' {
 10.                 local coeflag = `zero' + `lag'
 11.                 local xlab `"`xlab' `coeflag' "`lag'""'
 12.         }
 13. 
.         return local xlab `xlab'
 14. end

. 
. main
(MWFE estimator converged in 1 iterations)

HDFE Linear regression                            Number of obs   =    112,232
Absorbing 1 HDFE group                            F(   1,     40) =       4.07
Statistics robust to heteroskedasticity           Prob > F        =     0.0504
                                                  R-squared       =     0.0218
                                                  Adj R-squared   =     0.0208
                                                  Within R-sq.    =     0.0001
Number of clusters (statefips) =         41       Root MSE        =     0.0279

                             (Std. Err. adjusted for 41 clusters in statefips)
------------------------------------------------------------------------------
D.           |               Robust
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
       ln_mw |
         D1. |   .0259256   .0128533     2.02   0.050    -.0000519    .0519031
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
  year_month |       118           0         118     |
-----------------------------------------------------+

Generated variables:
              storage   display    value
variable name   type    format     label      variable label
-------------------------------------------------------------------------------
__by            byte    %9.0g      __by       subgraph ID
__plot          byte    %9.0g      __plot     plot ID
__at            byte    %9.0g                 plot position (category axis)
__mlbl          str1    %9s                   marker label
__mlpos         byte    %9.0g                 marker label position
__b             float   %9.0g                 coefficient
__V             float   %9.0g                 variance
__se            float   %9.0g                 standard error
__t             float   %9.0g                 t or z statistic
__df            byte    %9.0g                 degrees of freedom
__pval          float   %9.0g                 p-value
__ll1           float   %9.0g                 CI1: lower limit
__ul1           float   %9.0g                 CI1: upper limit
(156,589 observations deleted)
(11 missing values generated)
(6 real changes made)
(note: file ../temp/plot_coeffs.dta not found)
file ../temp/plot_coeffs.dta saved

Generated variables:
              storage   display    value
variable name   type    format     label      variable label
-------------------------------------------------------------------------------
__by            byte    %9.0g      __by       subgraph ID
__plot          byte    %9.0g      __plot     plot ID
__at            byte    %9.0g                 plot position (category axis)
__mlbl          str1    %9s                   marker label
__mlpos         byte    %9.0g                 marker label position
__b             float   %9.0g                 coefficient
__V             float   %9.0g                 variance
__se            float   %9.0g                 standard error
__t             float   %9.0g                 t or z statistic
__df            byte    %9.0g                 degrees of freedom
__pval          float   %9.0g                 p-value
__ll1           float   %9.0g                 CI1: lower limit
__ul1           float   %9.0g                 CI1: upper limit
        time variable:  at, 1 to 6
                delta:  1 unit
(156,594 observations deleted)
(5 real changes made)
(6 real changes made)

    Result                           # of obs.
    -----------------------------------------
    not matched                             5
        from master                         0  
        from using                          5  

    matched                                 6  
    -----------------------------------------
(5 real changes made)
(5 real changes made)
(0 real changes made)
(note: file ../output/fd_models.png not found)
(file ../output/fd_models.png written in PNG format)
(note: file ../output/fd_models.eps not found)
(file ../output/fd_models.eps written in EPS format)
(MWFE estimator converged in 1 iterations)

HDFE Linear regression                            Number of obs   =    106,446
Absorbing 1 HDFE group                            F(  11,     40) =       5.24
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.0222
                                                  Adj R-squared   =     0.0211
                                                  Within R-sq.    =     0.0002
Number of clusters (statefips) =         41       Root MSE        =     0.0280

                             (Std. Err. adjusted for 41 clusters in statefips)
------------------------------------------------------------------------------
D.           |               Robust
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
       ln_mw |
        F5D. |  -.0145811   .0091019    -1.60   0.117    -.0329768    .0038145
        F4D. |  -.0023173   .0116215    -0.20   0.843    -.0258053    .0211707
        F3D. |   .0013676   .0093121     0.15   0.884    -.0174528     .020188
        F2D. |   .0060834   .0115399     0.53   0.601    -.0172396    .0294063
         FD. |  -.0002799    .012286    -0.02   0.982    -.0251108    .0245511
         D1. |   .0269594   .0126674     2.13   0.040     .0013576    .0525611
         LD. |   .0135887   .0071476     1.90   0.065    -.0008571    .0280345
        L2D. |  -.0070198   .0133432    -0.53   0.602    -.0339874    .0199478
        L3D. |   .0036445    .008078     0.45   0.654    -.0126817    .0199707
        L4D. |   .0108004   .0069303     1.56   0.127    -.0032063    .0248071
        L5D. |   .0086176   .0068622     1.26   0.216    -.0052515    .0224867
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
  year_month |       109           0         109     |
-----------------------------------------------------+

Generated variables:
              storage   display    value
variable name   type    format     label      variable label
-------------------------------------------------------------------------------
__by            byte    %9.0g      __by       subgraph ID
__plot          byte    %9.0g      __plot     plot ID
__at            byte    %9.0g                 plot position (category axis)
__mlbl          str1    %9s                   marker label
__mlpos         byte    %9.0g                 marker label position
__b             float   %9.0g                 coefficient
__V             float   %9.0g                 variance
__se            float   %9.0g                 standard error
__t             float   %9.0g                 t or z statistic
__df            byte    %9.0g                 degrees of freedom
__pval          float   %9.0g                 p-value
__ll1           float   %9.0g                 CI1: lower limit
__ul1           float   %9.0g                 CI1: upper limit
(156,589 observations deleted)
(0 observations deleted)
(note: file ../temp/plot_coeffs_base.dta not found)
file ../temp/plot_coeffs_base.dta saved
(MWFE estimator converged in 1 iterations)

HDFE Linear regression                            Number of obs   =    104,360
Absorbing 1 HDFE group                            F(  14,     40) =       5.27
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.0223
                                                  Adj R-squared   =     0.0212
                                                  Within R-sq.    =     0.0002
Number of clusters (statefips) =         41       Root MSE        =     0.0280

                             (Std. Err. adjusted for 41 clusters in statefips)
------------------------------------------------------------------------------
D.           |               Robust
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
       ln_mw |
        F5D. |  -.0122814   .0078729    -1.56   0.127    -.0281931    .0036303
        F4D. |   .0008054   .0099487     0.08   0.936    -.0193018    .0209125
        F3D. |   .0004982   .0096725     0.05   0.959    -.0190507    .0200471
        F2D. |   .0054708   .0118511     0.46   0.647    -.0184812    .0294227
         FD. |  -.0023112   .0125998    -0.18   0.855    -.0277764    .0231539
         D1. |   .0240152   .0124899     1.92   0.062    -.0012279    .0492582
         LD. |   .0130225   .0071899     1.81   0.078    -.0015089    .0275539
        L2D. |  -.0059622   .0135606    -0.44   0.663    -.0333692    .0214448
        L3D. |   .0043557    .007689     0.57   0.574    -.0111843    .0198956
        L4D. |   .0110387   .0065554     1.68   0.100    -.0022103    .0242878
        L5D. |   .0096951   .0065587     1.48   0.147    -.0035605    .0229507
             |
ln_emp_biz~v |
         D1. |   .0049956   .0042594     1.17   0.248    -.0036131    .0136042
             |
 ln_emp_info |
         D1. |   .0018291    .004371     0.42   0.678     -.007005    .0106632
             |
 ln_emp_manu |
         D1. |   .0075698   .0050703     1.49   0.143    -.0026777    .0178172
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
  year_month |       109           0         109     |
-----------------------------------------------------+

Generated variables:
              storage   display    value
variable name   type    format     label      variable label
-------------------------------------------------------------------------------
__by            byte    %9.0g      __by       subgraph ID
__plot          byte    %9.0g      __plot     plot ID
__at            byte    %9.0g                 plot position (category axis)
__mlbl          str1    %9s                   marker label
__mlpos         byte    %9.0g                 marker label position
__b             float   %9.0g                 coefficient
__V             float   %9.0g                 variance
__se            float   %9.0g                 standard error
__t             float   %9.0g                 t or z statistic
__df            byte    %9.0g                 degrees of freedom
__pval          float   %9.0g                 p-value
__ll1           float   %9.0g                 CI1: lower limit
__ul1           float   %9.0g                 CI1: upper limit
(156,589 observations deleted)
(0 observations deleted)
(note: file ../temp/plot_coeffs_emp.dta not found)
file ../temp/plot_coeffs_emp.dta saved
(MWFE estimator converged in 1 iterations)

HDFE Linear regression                            Number of obs   =    106,160
Absorbing 1 HDFE group                            F(  14,     40) =       4.85
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.0223
                                                  Adj R-squared   =     0.0211
                                                  Within R-sq.    =     0.0003
Number of clusters (statefips) =         41       Root MSE        =     0.0280

                             (Std. Err. adjusted for 41 clusters in statefips)
------------------------------------------------------------------------------
D.           |               Robust
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
       ln_mw |
        F5D. |  -.0143433   .0090425    -1.59   0.121    -.0326188    .0039322
        F4D. |  -.0021253   .0115783    -0.18   0.855    -.0255258    .0212753
        F3D. |   .0006826   .0092121     0.07   0.941    -.0179356    .0193009
        F2D. |   .0060257   .0115098     0.52   0.603    -.0172364    .0292877
         FD. |  -.0000542   .0122029    -0.00   0.996    -.0247172    .0246088
         D1. |   .0267861   .0127241     2.11   0.042     .0010697    .0525024
         LD. |   .0135581   .0071916     1.89   0.067    -.0009767     .028093
        L2D. |  -.0068158   .0133094    -0.51   0.611    -.0337151    .0200835
        L3D. |   .0032213    .007891     0.41   0.685     -.012727    .0191696
        L4D. |    .010769   .0068372     1.58   0.123    -.0030495    .0245875
        L5D. |   .0088242   .0067201     1.31   0.197    -.0047576    .0224061
             |
ln_estcou~rv |
         D1. |   .0153538   .0148478     1.03   0.307    -.0146547    .0453623
             |
ln_estcoun~o |
         D1. |   .0040949   .0057607     0.71   0.481    -.0075479    .0157377
             |
ln_estcoun~u |
         D1. |   .0028747   .0123455     0.23   0.817    -.0220766     .027826
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
  year_month |       109           0         109     |
-----------------------------------------------------+

Generated variables:
              storage   display    value
variable name   type    format     label      variable label
-------------------------------------------------------------------------------
__by            byte    %9.0g      __by       subgraph ID
__plot          byte    %9.0g      __plot     plot ID
__at            byte    %9.0g                 plot position (category axis)
__mlbl          str1    %9s                   marker label
__mlpos         byte    %9.0g                 marker label position
__b             float   %9.0g                 coefficient
__V             float   %9.0g                 variance
__se            float   %9.0g                 standard error
__t             float   %9.0g                 t or z statistic
__df            byte    %9.0g                 degrees of freedom
__pval          float   %9.0g                 p-value
__ll1           float   %9.0g                 CI1: lower limit
__ul1           float   %9.0g                 CI1: upper limit
(156,589 observations deleted)
(0 observations deleted)
(note: file ../temp/plot_coeffs_estab.dta not found)
file ../temp/plot_coeffs_estab.dta saved
(MWFE estimator converged in 1 iterations)

HDFE Linear regression                            Number of obs   =    104,360
Absorbing 1 HDFE group                            F(  14,     40) =       5.05
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.0223
                                                  Adj R-squared   =     0.0212
                                                  Within R-sq.    =     0.0002
Number of clusters (statefips) =         41       Root MSE        =     0.0280

                             (Std. Err. adjusted for 41 clusters in statefips)
------------------------------------------------------------------------------
D.           |               Robust
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
       ln_mw |
        F5D. |  -.0122848   .0078685    -1.56   0.126    -.0281875     .003618
        F4D. |   .0006883   .0099823     0.07   0.945    -.0194867    .0208633
        F3D. |   .0005659   .0096595     0.06   0.954    -.0189568    .0200885
        F2D. |   .0053731   .0119433     0.45   0.655    -.0187653    .0295115
         FD. |   -.002135    .012511    -0.17   0.865    -.0274207    .0231507
         D1. |   .0242641   .0124208     1.95   0.058    -.0008392    .0493674
         LD. |   .0127678   .0071936     1.77   0.084     -.001771    .0273066
        L2D. |  -.0060796   .0135541    -0.45   0.656    -.0334734    .0213143
        L3D. |   .0039779   .0078387     0.51   0.615    -.0118646    .0198204
        L4D. |   .0110026   .0065847     1.67   0.103    -.0023055    .0243107
        L5D. |   .0095162   .0065985     1.44   0.157    -.0038199    .0228523
             |
ln_avgwwa~rv |
         D1. |   .0016105   .0024319     0.66   0.512    -.0033045    .0065255
             |
ln_avgwwag~o |
         D1. |   .0010798   .0016575     0.65   0.518    -.0022702    .0044298
             |
ln_avgwwag~u |
         D1. |  -.0006913   .0018277    -0.38   0.707    -.0043853    .0030027
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
  year_month |       109           0         109     |
-----------------------------------------------------+

Generated variables:
              storage   display    value
variable name   type    format     label      variable label
-------------------------------------------------------------------------------
__by            byte    %9.0g      __by       subgraph ID
__plot          byte    %9.0g      __plot     plot ID
__at            byte    %9.0g                 plot position (category axis)
__mlbl          str1    %9s                   marker label
__mlpos         byte    %9.0g                 marker label position
__b             float   %9.0g                 coefficient
__V             float   %9.0g                 variance
__se            float   %9.0g                 standard error
__t             float   %9.0g                 t or z statistic
__df            byte    %9.0g                 degrees of freedom
__pval          float   %9.0g                 p-value
__ll1           float   %9.0g                 CI1: lower limit
__ul1           float   %9.0g                 CI1: upper limit
(156,589 observations deleted)
(0 observations deleted)
(note: file ../temp/plot_coeffs_wage.dta not found)
file ../temp/plot_coeffs_wage.dta saved
(MWFE estimator converged in 1 iterations)

HDFE Linear regression                            Number of obs   =    104,360
Absorbing 1 HDFE group                            F(  20,     40) =       8.07
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.0224
                                                  Adj R-squared   =     0.0212
                                                  Within R-sq.    =     0.0003
Number of clusters (statefips) =         41       Root MSE        =     0.0280

                             (Std. Err. adjusted for 41 clusters in statefips)
------------------------------------------------------------------------------
D.           |               Robust
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
       ln_mw |
        F5D. |  -.0121885   .0078732    -1.55   0.129    -.0281009    .0037238
        F4D. |   .0008067   .0099403     0.08   0.936    -.0192834    .0208968
        F3D. |  -.0000717   .0095264    -0.01   0.994    -.0193252    .0191818
        F2D. |   .0056496   .0118967     0.47   0.637    -.0183944    .0296937
         FD. |  -.0022859   .0125924    -0.18   0.857    -.0277362    .0231643
         D1. |   .0244731   .0126776     1.93   0.061    -.0011493    .0500955
         LD. |   .0127134   .0072065     1.76   0.085    -.0018515    .0272783
        L2D. |  -.0059761   .0135605    -0.44   0.662    -.0333828    .0214306
        L3D. |   .0033979   .0076718     0.44   0.660    -.0121074    .0189032
        L4D. |   .0112781   .0064898     1.74   0.090    -.0018383    .0243945
        L5D. |   .0096681    .006551     1.48   0.148    -.0035719    .0229081
             |
ln_emp_biz~v |
         D1. |   .0042007   .0044061     0.95   0.346    -.0047042    .0131057
             |
 ln_emp_info |
         D1. |   .0017311   .0042867     0.40   0.688    -.0069326    .0103948
             |
 ln_emp_manu |
         D1. |   .0073803   .0046637     1.58   0.121    -.0020455     .016806
             |
ln_estcou~rv |
         D1. |   .0155637   .0143904     1.08   0.286    -.0135204    .0446478
             |
ln_estcoun~o |
         D1. |     .00363   .0056371     0.64   0.523    -.0077629    .0150229
             |
ln_estcoun~u |
         D1. |   .0040292    .012035     0.33   0.740    -.0202945     .028353
             |
ln_avgwwa~rv |
         D1. |   .0016383   .0024607     0.67   0.509    -.0033351    .0066116
             |
ln_avgwwag~o |
         D1. |   .0011458   .0016166     0.71   0.483    -.0021214     .004413
             |
ln_avgwwag~u |
         D1. |  -.0008275   .0018009    -0.46   0.648    -.0044672    .0028123
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
  year_month |       109           0         109     |
-----------------------------------------------------+

Generated variables:
              storage   display    value
variable name   type    format     label      variable label
-------------------------------------------------------------------------------
__by            byte    %9.0g      __by       subgraph ID
__plot          byte    %9.0g      __plot     plot ID
__at            byte    %9.0g                 plot position (category axis)
__mlbl          str1    %9s                   marker label
__mlpos         byte    %9.0g                 marker label position
__b             float   %9.0g                 coefficient
__V             float   %9.0g                 variance
__se            float   %9.0g                 standard error
__t             float   %9.0g                 t or z statistic
__df            byte    %9.0g                 degrees of freedom
__pval          float   %9.0g                 p-value
__ll1           float   %9.0g                 CI1: lower limit
__ul1           float   %9.0g                 CI1: upper limit
(156,589 observations deleted)
(0 observations deleted)

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                11  
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                11  
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                11  
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                11  
    -----------------------------------------
(note: file ../output/fd_models_control.png not found)
(file ../output/fd_models_control.png written in PNG format)
(note: file ../output/fd_models_control.eps not found)
(file ../output/fd_models_control.eps written in EPS format)

. 
end of do-file


Execute:  StataMP-64 /e do "./estimate_heterogeneity.do"

  ___  ____  ____  ____  ____ (R)
 /__    /   ____/   /   ____/
___/   /   /___/   /   /___/   15.1   Copyright 1985-2017 StataCorp LLC
  Statistics/Data Analysis            StataCorp
                                      4905 Lakeway Drive
     MP - Parallel Edition            College Station, Texas 77845 USA
                                      800-STATA-PC        http://www.stata.com
                                      979-696-4600        stata@stata.com
                                      979-696-4601 (fax)

Single-user 32-core Stata perpetual license:
       Serial number:  501506205566
         Licensed to:  KU Leuven FEB (CES)
                       KU Leuven

Notes:
      1.  Stata is running in batch mode.
      2.  Unicode is supported; see help unicode_advice.
      3.  More than 2 billion observations are allowed; see help obs_advice.
      4.  Maximum number of variables is set to 5000; see help set_maxvar.

. do ./estimate_heterogeneity.do 

. clear all

. set more off

. adopath + ../../../lib/stata/gslab_misc/ado
  [1]  (BASE)      "C:\Program Files\Stata15\ado\base/"
  [2]  (SITE)      "C:\Program Files\Stata15\ado\site/"
  [3]              "."
  [4]  (PERSONAL)  "c:\ado\personal/"
  [5]  (PLUS)      "c:\ado\plus/"
  [6]  (OLDPLACE)  "c:\ado/"
  [7]              "../../../lib/stata/gslab_misc/ado"

. adopath + ../../../lib/stata/min_wage/ado
  [1]  (BASE)      "C:\Program Files\Stata15\ado\base/"
  [2]  (SITE)      "C:\Program Files\Stata15\ado\site/"
  [3]              "."
  [4]  (PERSONAL)  "c:\ado\personal/"
  [5]  (PLUS)      "c:\ado\plus/"
  [6]  (OLDPLACE)  "c:\ado/"
  [7]              "../../../lib/stata/gslab_misc/ado"
  [8]              "../../../lib/stata/min_wage/ado"

. set maxvar 32000 


. 
. program main
  1.         local instub "../temp"
  2.         local outstub "../output"
  3. 
.         use "`instub'/fd_rent_panel.dta", clear
  4. 
.         * Heterogeneity
.         foreach var in med_hhinc20105 renthouse_share2010 college_share20105 
> ///
>                                 black_share2010 {  // nonwhite_share2010 work
> _county_share20105
  5. 
.                 build_ytitle, var(`var')
  6. 
.                 plot_static_heterogeneity, depvar(ln_med_rent_psqft) absorb(y
> ear_month) ///
>                         het_var(`var'_st_qtl) cluster(statefips) ytitle(`r(ti
> tle)')
  7.                 graph export "`outstub'/fd_static_heter_`var'.png", replac
> e
  8.                 graph export "`outstub'/fd_static_heter_`var'.eps", replac
> e
  9.         }
 10. 
. end

. 
. program plot_static_heterogeneity
  1.         syntax, depvar(str) absorb(str) cluster(str) het_var(str) ytitle(s
> tr) [qtles(int 4)]
  2. 
.         eststo clear
  3.         reghdfe D.`depvar' c.d_ln_mw#i.`het_var', ///
>                 absorb(`absorb') ///
>                 vce(cluster `cluster') nocons
  4. 
.         coefplot, base graphregion(color(white)) bgcolor(white) ///
>                 ylabel(1 "First quartile" 2 "Second quartile" 3 "Third quarti
> le" 4 "Fourth quartile") ///
>                 ytitle(`ytitle') xtitle("Elasticity of rents to the MW")     
>    ///
>                 xline(0, lcol(black)) mcolor(edkblue) ciopts(recast(rcap) lc(
> edkblue) lw(vthin))
  5. end

. 
. program build_ytitle, rclass
  1.         syntax, var(str)
  2. 
.         if "`var'" == "med_hhinc20105" {
  3.                 return local title "Quintiles of within state 2010 median 
> household income"
  4.         }
  5.         if "`var'" == "renthouse_share2010" {
  6.                 return local title "Quintiles of 2010 share of houses rent
> "
  7.         }
  8.         if "`var'" == "college_share20105" {
  9.                 return local title "Quintiles of 2010 college share"
 10.         }
 11.         if "`var'" == "black_share2010" {
 12.                 return local title "Quintiles of 2010 share of black indiv
> iduals"
 13.         }
 14.         if "`var'" == "nonwhite_share2010" {
 15.                 return local title "Quintiles of 2010 share of non-white i
> ndividuals"
 16.         }
 17.         if "`var'" == "work_county_share20105" {
 18.                 return local title "Quintiles of 2010 share who work in co
> unty"
 19.         }
 20. end

. 
. 
. 
. *Execute 
. main 
(MWFE estimator converged in 1 iterations)

HDFE Linear regression                            Number of obs   =    112,232
Absorbing 1 HDFE group                            F(   4,     40) =       2.57
Statistics robust to heteroskedasticity           Prob > F        =     0.0522
                                                  R-squared       =     0.0219
                                                  Adj R-squared   =     0.0208
                                                  Within R-sq.    =     0.0001
Number of clusters (statefips) =         41       Root MSE        =     0.0279

                             (Std. Err. adjusted for 41 clusters in statefips)
------------------------------------------------------------------------------
D.           |               Robust
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
med_h~st_qtl#|
   c.d_ln_mw |
          1  |   .0419786   .0223804     1.88   0.068    -.0032539    .0872112
          2  |    .021595   .0154718     1.40   0.170    -.0096747    .0528646
          3  |   .0298557   .0250437     1.19   0.240    -.0207596    .0804709
          4  |    .011213   .0125117     0.90   0.376     -.014074       .0365
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
  year_month |       118           0         118     |
-----------------------------------------------------+
(note: file ../output/fd_static_heter_med_hhinc20105.png not found)
(file ../output/fd_static_heter_med_hhinc20105.png written in PNG format)
(note: file ../output/fd_static_heter_med_hhinc20105.eps not found)
(file ../output/fd_static_heter_med_hhinc20105.eps written in EPS format)
(MWFE estimator converged in 1 iterations)

HDFE Linear regression                            Number of obs   =    112,232
Absorbing 1 HDFE group                            F(   4,     40) =       4.35
Statistics robust to heteroskedasticity           Prob > F        =     0.0051
                                                  R-squared       =     0.0219
                                                  Adj R-squared   =     0.0208
                                                  Within R-sq.    =     0.0001
Number of clusters (statefips) =         41       Root MSE        =     0.0279

                             (Std. Err. adjusted for 41 clusters in statefips)
------------------------------------------------------------------------------
D.           |               Robust
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
renth~st_qtl#|
   c.d_ln_mw |
          1  |   .0285549   .0178416     1.60   0.117    -.0075043    .0646141
          2  |   .0125877   .0174773     0.72   0.476    -.0227352    .0479106
          3  |   .0169259   .0234719     0.72   0.475    -.0305125    .0643644
          4  |   .0437843   .0153533     2.85   0.007     .0127542    .0748144
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
  year_month |       118           0         118     |
-----------------------------------------------------+
(note: file ../output/fd_static_heter_renthouse_share2010.png not found)
(file ../output/fd_static_heter_renthouse_share2010.png written in PNG format)
(note: file ../output/fd_static_heter_renthouse_share2010.eps not found)
(file ../output/fd_static_heter_renthouse_share2010.eps written in EPS format)
(MWFE estimator converged in 1 iterations)

HDFE Linear regression                            Number of obs   =    112,232
Absorbing 1 HDFE group                            F(   4,     40) =       2.28
Statistics robust to heteroskedasticity           Prob > F        =     0.0779
                                                  R-squared       =     0.0219
                                                  Adj R-squared   =     0.0208
                                                  Within R-sq.    =     0.0002
Number of clusters (statefips) =         41       Root MSE        =     0.0279

                             (Std. Err. adjusted for 41 clusters in statefips)
------------------------------------------------------------------------------
D.           |               Robust
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
colle~st_qtl#|
   c.d_ln_mw |
          1  |   .0395319   .0198208     1.99   0.053    -.0005274    .0795912
          2  |   .0484266   .0220598     2.20   0.034      .003842    .0930112
          3  |   .0248931   .0215439     1.16   0.255    -.0186487    .0684348
          4  |  -.0014252    .012176    -0.12   0.907    -.0260337    .0231834
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
  year_month |       118           0         118     |
-----------------------------------------------------+
(note: file ../output/fd_static_heter_college_share20105.png not found)
(file ../output/fd_static_heter_college_share20105.png written in PNG format)
(note: file ../output/fd_static_heter_college_share20105.eps not found)
(file ../output/fd_static_heter_college_share20105.eps written in EPS format)
(MWFE estimator converged in 1 iterations)

HDFE Linear regression                            Number of obs   =    112,232
Absorbing 1 HDFE group                            F(   4,     40) =       1.67
Statistics robust to heteroskedasticity           Prob > F        =     0.1750
                                                  R-squared       =     0.0218
                                                  Adj R-squared   =     0.0208
                                                  Within R-sq.    =     0.0001
Number of clusters (statefips) =         41       Root MSE        =     0.0279

                             (Std. Err. adjusted for 41 clusters in statefips)
------------------------------------------------------------------------------
D.           |               Robust
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
black~st_qtl#|
   c.d_ln_mw |
          1  |   .0172449   .0166792     1.03   0.307    -.0164651    .0509549
          2  |   .0225953   .0158814     1.42   0.163    -.0095022    .0546927
          3  |   .0227548   .0143118     1.59   0.120    -.0061705      .05168
          4  |   .0429309   .0169667     2.53   0.015       .00864    .0772218
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
  year_month |       118           0         118     |
-----------------------------------------------------+
(note: file ../output/fd_static_heter_black_share2010.png not found)
(file ../output/fd_static_heter_black_share2010.png written in PNG format)
(note: file ../output/fd_static_heter_black_share2010.eps not found)
(file ../output/fd_static_heter_black_share2010.eps written in EPS format)

. 
end of do-file


Execute:  StataMP-64 /e do "./horse_race_dynamic_models.do"

  ___  ____  ____  ____  ____ (R)
 /__    /   ____/   /   ____/
___/   /   /___/   /   /___/   15.1   Copyright 1985-2017 StataCorp LLC
  Statistics/Data Analysis            StataCorp
                                      4905 Lakeway Drive
     MP - Parallel Edition            College Station, Texas 77845 USA
                                      800-STATA-PC        http://www.stata.com
                                      979-696-4600        stata@stata.com
                                      979-696-4601 (fax)

Single-user 32-core Stata perpetual license:
       Serial number:  501506205566
         Licensed to:  KU Leuven FEB (CES)
                       KU Leuven

Notes:
      1.  Stata is running in batch mode.
      2.  Unicode is supported; see help unicode_advice.
      3.  More than 2 billion observations are allowed; see help obs_advice.
      4.  Maximum number of variables is set to 5000; see help set_maxvar.

. do ./horse_race_dynamic_models.do 

. clear all

. set more off

. adopath + ../../../lib/stata/gslab_misc/ado
  [1]  (BASE)      "C:\Program Files\Stata15\ado\base/"
  [2]  (SITE)      "C:\Program Files\Stata15\ado\site/"
  [3]              "."
  [4]  (PERSONAL)  "c:\ado\personal/"
  [5]  (PLUS)      "c:\ado\plus/"
  [6]  (OLDPLACE)  "c:\ado/"
  [7]              "../../../lib/stata/gslab_misc/ado"

. adopath + ../../../lib/stata/min_wage/ado
  [1]  (BASE)      "C:\Program Files\Stata15\ado\base/"
  [2]  (SITE)      "C:\Program Files\Stata15\ado\site/"
  [3]              "."
  [4]  (PERSONAL)  "c:\ado\personal/"
  [5]  (PLUS)      "c:\ado\plus/"
  [6]  (OLDPLACE)  "c:\ado/"
  [7]              "../../../lib/stata/gslab_misc/ado"
  [8]              "../../../lib/stata/min_wage/ado"

. set maxvar 32000 


. 
. program main
  1.         local instub "../temp"
  2.         local outstub "../output"
  3. 
.         use "`instub'/fd_rent_panel.dta", clear
  4. 
.         make_results_labels, w(5)
  5.         local estlabels "`r(estlabels)'"
  6. 
.         horse_race_models, depvar(ln_med_rent_psqft_sfcc) w(5) ///
>                 absorb(year_month) cluster(statefips)
  7.         esttab * using "`outstub'/horse_race.tex", compress se replace sub
> stitute(\_ _)         ///
>                 order(F5D.ln_mw F4D.ln_mw F3D.ln_mw F2D.ln_mw FD.ln_mw D.ln_m
> w ///
>                 LD.ln_mw L2D.ln_mw L3D.ln_mw L4D.ln_mw L5D.ln_mw LD.ln_med_re
> nt_psqft_sfcc) ///
>                 coeflabels(`estlabels') ///
>                 stats(N, fmt(%9.0gc)            ///
>                 labels("Observations")) star(* 0.10 ** 0.05 *** 0.01)   ///
>                 mtitles("DiD" "\shortstack{Distributed \\ leads and lags}" "\
> shortstack{Distributed \\ Lags}" ///
>                 "\shortstack{AB Distributed \\ leads and lags}" "\shortstack{
> AB Distributed \\ Lags}" ///
>                 "\shortstack{MW Distributed \\ leads and lags}" "\shortstack{
> MW Distributed \\ Lags}") nonote
  8. end

. 
. program horse_race_models
  1.     syntax, depvar(str) w(int) absorb(str) cluster(str) 
  2.         
.     eststo clear
  3.         eststo: qui reghdfe D.`depvar' D.ln_mw, ///
>                 absorb(`absorb') vce(cluster `cluster') nocons
  4.                 
.         eststo: qui reghdfe D.`depvar' L(-`w'/`w').D.ln_mw, ///
>                 absorb(`absorb') vce(cluster `cluster') nocons
  5.                 
.         eststo: qui reghdfe D.`depvar' L(0/`w').D.ln_mw, ///
>                 absorb(`absorb') vce(cluster `cluster') nocons
  6.                 
.         eststo: qui ivreghdfe D.`depvar' L(-`w'/`w').D.ln_mw (L.D.`depvar' = 
> L2.D.`depvar'), ///
>                 absorb(`absorb') cluster (`cluster') nocons
  7. 
.         eststo: qui ivreghdfe D.`depvar' L(0/`w').D.ln_mw (L.D.`depvar' = L2.
> D.`depvar'), ///
>                 absorb(`absorb') cluster (`cluster') nocons
  8.                 
.         eststo: qui ivreghdfe D.`depvar' L(-`w'/`w').D.ln_mw (L.D.`depvar' = 
> L6.D.ln_mw), ///
>                 absorb(`absorb') cluster (`cluster') nocons
  9.                 
.         eststo: qui ivreghdfe D.`depvar' L(0/`w').D.ln_mw (L.D.`depvar' = L6.
> D.ln_mw), ///
>                 absorb(`absorb') cluster (`cluster') nocons
 10. end

. 
. program make_results_labels, rclass
  1.         syntax, w(int)
  2. 
.         local estlabels `"D.ln_mw "$\Delta \ln \underline{w}_{i,t}$""'
  3.         local estlabels `"FD.ln_mw "$\Delta \ln \underline{w}_{i,t-1}$" `e
> stlabels' LD.ln_mw "$\Delta \ln \underline{w}_{i,t+1}$""'
  4.         forvalues i = 2(1)`w'{
  5.                 local estlabels `"F`i'D.ln_mw "$\Delta \ln \underline{w}_{
> i,t-`i'}$" `estlabels' L`i'D.ln_mw "$\Delta \ln \underline{w}_{i,t+`i'}$""'
  6.         }
  7.         local estlabels `"`estlabels' LD.ln_med_rent_psqft_sfcc "$\Delta \
> ln y_{i,t-1}$""'
  8. 
.         return local estlabels "`estlabels'"    
  9. end 

. 
. main
(est1 stored)
(est2 stored)
(est3 stored)
(est4 stored)
(est5 stored)
(est6 stored)
(est7 stored)
(note: file ../output/horse_race.tex not found)
(output written to ../output/horse_race.tex)

. 
end of do-file

 make.py ended: 2020-11-11 12:11:48
