
 make.py started: 2020-12-02 11:00:38 C:\Users\diegog\Desktop\Diego\min_wage_rent\analysis\first_differences\code 




Execute:  StataMP-64 /e do "./preclean.do"

  ___  ____  ____  ____  ____ (R)
 /__    /   ____/   /   ____/
___/   /   /___/   /   /___/   15.1   Copyright 1985-2017 StataCorp LLC
  Statistics/Data Analysis            StataCorp
                                      4905 Lakeway Drive
     MP - Parallel Edition            College Station, Texas 77845 USA
                                      800-STATA-PC        http://www.stata.com
                                      979-696-4600        stata@stata.com
                                      979-696-4601 (fax)

Single-user 32-core Stata perpetual license:
       Serial number:  501506205566
         Licensed to:  KU Leuven FEB (CES)
                       KU Leuven

Notes:
      1.  Stata is running in batch mode.
      2.  Unicode is supported; see help unicode_advice.
      3.  More than 2 billion observations are allowed; see help obs_advice.
      4.  Maximum number of variables is set to 5000; see help set_maxvar.

. do ./preclean.do 

. clear all

. set more off

. adopath + ../../../lib/stata/gslab_misc/ado
  [1]  (BASE)      "C:\Program Files\Stata15\ado\base/"
  [2]  (SITE)      "C:\Program Files\Stata15\ado\site/"
  [3]              "."
  [4]  (PERSONAL)  "c:\ado\personal/"
  [5]  (PLUS)      "c:\ado\plus/"
  [6]  (OLDPLACE)  "c:\ado/"
  [7]              "../../../lib/stata/gslab_misc/ado"

. set maxvar 32000 


. 
. program main
  1.         local instub "../../../drive/derived_large/output"
  2.         local outstub "../temp"
  3.         local logfile "../output/data_file_manifest.log"
  4. 
.         use "`instub'/baseline_rent_panel.dta", clear 
  5.         keep zipcode place_code msa countyfips statefips                  
>                                               ///
>                 year_month calendar_month trend trend_sq trend_cu            
>                                            ///
>                 dactual_mw actual_mw medrentpricepsqft_*                     
>                                    ///
>                 med_hhinc20105 renthouse_share2010 white_share2010 black_shar
> e2010                      ///
>                 college_share20105 work_county_share20105 unemp_share20105 te
> en_share2010   ///
>                 estcount_* avgwwage_* emp_* u1*                              
>                ///
>                 walall_njob_29young_ssh halall_njob_29young_ssh walall_29y_lo
> winc_ssh halall_29y_lowinc_ssh
  6. 
.         
. 
.         local het_vars "med_hhinc20105 unemp_share20105 college_share20105 bl
> ack_share2010"
  7.         local het_vars "`het_vars' renthouse_share2010 teen_share2010"
  8.         local het_vars "`het_vars' walall_njob_29young_ssh halall_njob_29y
> oung_ssh walall_29y_lowinc_ssh halall_29y_lowinc_ssh" 
  9.  
. 
.         create_vars,    log_vars(actual_mw medrentpricepsqft_sfcc emp_* estco
> unt_* avgwwage_* u1*)      ///
>                                         heterogeneity_vars(`het_vars')
 10.         
.         simplify_varnames
 11. 
.         xtset zipcode year_month
 12.         gen d_ln_mw = D.ln_mw
 13. 
.         save_data "`outstub'/fd_rent_panel.dta", key(zipcode year_month) repl
> ace log(`logfile')
 14. end

. 
. program create_vars
  1.         syntax, log_vars(str) heterogeneity_vars(str)
  2. 
.         local log_vars_expanded "" 
  3.         foreach v in `log_vars' {
  4.                 unab this_var: `v'
  5.                 local log_vars_expanded `"`log_vars_expanded' `this_var'"'
  6.         }
  7.         unab bpsvars: u1*
  8.         foreach var in `bpsvars' {
  9.                 replace `var' = 1 + `var'
 10.         }
 11.         foreach var in `log_vars_expanded' {
 12.                 gen ln_`var' = ln(`var')
 13.         }
 14. 
.         gen nonwhite_share2010 = 1 - white_share2010
 15.         
.         gen trend_times2 = 2*trend
 16. 
.         foreach var in `heterogeneity_vars' {
 17. 
.                 gquantiles `var'_nat_qtl = `var', xtile nq(4)
 18. 
.                 gquantiles `var'_st_qtl  = `var', xtile nq(4) by(statefips)
 19.         }
 20. end

. 
. program simplify_varnames
  1.         
.         cap rename ln_actual_mw                  ln_mw 
  2.         cap rename ln_medrentpricepsqft_sfcc     ln_med_rent_psqft_sfcc
  3.         cap rename ln_medrentpricepsqft_2br      ln_med_rent_psqft_2br
  4.         cap rename ln_medrentpricepsqft_mfr5plus ln_med_rent_psqft_mfr5plu
> s
  5. 
. end

. 
. main
(136,332 real changes made)
(136,332 real changes made)
(136,332 real changes made)
(136,332 real changes made)
(136,332 real changes made)
(136,332 real changes made)
(43,225 missing values generated)
(4,266 missing values generated)
(5,523 missing values generated)
(4,266 missing values generated)
(4,266 missing values generated)
(4,302 missing values generated)
(5,028 missing values generated)
(4,266 missing values generated)
(7,515 missing values generated)
(5,544 missing values generated)
(7,224 missing values generated)
(7,704 missing values generated)
(4,266 missing values generated)
(4,266 missing values generated)
(4,266 missing values generated)
(4,266 missing values generated)
(4,266 missing values generated)
(4,266 missing values generated)
(4,266 missing values generated)
(4,266 missing values generated)
(4,266 missing values generated)
(4,266 missing values generated)
(4,791 missing values generated)
(4,473 missing values generated)
(4,266 missing values generated)
(4,266 missing values generated)
(5,523 missing values generated)
(4,266 missing values generated)
(4,266 missing values generated)
(4,302 missing values generated)
(5,028 missing values generated)
(4,266 missing values generated)
(7,515 missing values generated)
(5,544 missing values generated)
(7,224 missing values generated)
(7,704 missing values generated)
(4,266 missing values generated)
(20,637 missing values generated)
(20,637 missing values generated)
(20,791 missing values generated)
(20,422 missing values generated)
(20,422 missing values generated)
(20,632 missing values generated)
       panel variable:  zipcode (strongly balanced)
        time variable:  year_month, 2010m1 to 2019m12
                delta:  1 month
(1,305 missing values generated)
(data already sorted by zipcode year_month)
  variable trend_times2 was float now int
  (313,200 bytes saved)
============================================================================
File: ../temp/fd_rent_panel.dta
Key: zipcode year_month
============================================================================
  156600:136(117629):1450652518:3657499007

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
     zipcode |    156,600    51920.57    29185.78       2113      99577
  year_month |    156,600       659.5    34.63992        600        719
  place_code |    129,840    40657.65    22564.03        410      87240
  countyfips |    156,240    24077.04    16484.28       1003      56021
   statefips |    156,600    23.97854    16.42626          1         56
-------------+---------------------------------------------------------
   actual_mw |    156,600     8.07779    1.207718       7.25         16
  dactual_mw |    156,600    .0152048    .1121804          0       2.21
calendar_m~h |    156,600         6.5    3.452064          1         12
         msa |    156,600    436.1801    240.1675         12        860
       trend |    156,600       225.5    34.63992        166        285
-------------+---------------------------------------------------------
    trend_sq |    156,600    52050.17    15659.42      27556      81225
    trend_cu |    156,600    1.23e+07     5408203    4574296   2.31e+07
medrentpri~c |    113,375    1.188344    .7824813   .4180214   6.731387
medrentpri~r |     24,789     1.84165    .9184999   .5015197   6.499599
medrentpri~s |     37,588    1.842276    1.001968   .5106889    6.48415
-------------+---------------------------------------------------------
white_s~2010 |    156,600    .5392018    .2225559   .0037838   .9401773
black_s~2010 |    156,600     .165993    .2003044    .003148   .9753076
teen_sh~2010 |    156,600    .1391686    .0481773   .0154552   .6235335
renthou~2010 |    156,600    .3834818     .176359   .0644567   .9662035
work_c~20105 |    156,600    .7557563    .2036341   .1421741    .995271
-------------+---------------------------------------------------------
colleg~20105 |    156,600    .4447718    .1662964   .0856991   .9082218
unemp_~20105 |    156,600    .0918395    .0398028   .0211286   .3417086
med_hh~20105 |    156,600    66919.72    24575.33   20527.66   191553.2
estcount_b~v |    152,334    9998.143    9478.137         60      56304
avgwwage_b~v |    152,334    1252.921    434.7633        226       4727
-------------+---------------------------------------------------------
 emp_bizserv |    152,334    134293.3    143883.8        329     642234
estcount_c~t |    152,334    3240.371    2963.656         35      16939
avgwwage_c~t |    152,334    1101.648    300.1755          0       2608
   emp_const |    152,334    33963.15    34828.46          0     173773
estcount_e~e |    152,334    8227.496    21233.92         48     245645
-------------+---------------------------------------------------------
avgwwage_e~e |    152,334    941.4689    149.2949        415       1975
   emp_eduhe |    152,334    115827.1    123161.7        481     835039
estcount_f~v |    152,334    114.6271    78.41068          3        456
avgwwage_f~v |    152,334    1433.109    237.1039        654       2724
  emp_fedgov |    152,334    13996.39    16476.49         42     215436
-------------+---------------------------------------------------------
estcount_fin |    152,334    5103.539    5200.218         31      30238
avgwwage_fin |    152,334    1561.705    965.2143          0       9547
     emp_fin |    152,334    59557.25    75803.56          0     398481
estcount_i~o |    152,334    920.6698    1382.296          4      13212
avgwwage_i~o |    152,334    1504.754    620.2263          0       7381
-------------+---------------------------------------------------------
    emp_info |    152,334    21043.15    35144.92          0     240358
estcount_l~s |    152,334    4278.093    4708.605         27      39222
avgwwage_l~s |    152,334    446.7107    134.2103        203       1131
    emp_leis |    152,334    93087.95    93948.61        279     551791
estcount_l~v |    152,334    307.0594    500.3306          1       4162
-------------+---------------------------------------------------------
avgwwage_l~v |    152,334    961.0816    234.2459          0       2042
  emp_locgov |    152,334    72439.67    83732.02          0     463785
estcount_m~u |    152,334    1585.444    1953.882         10      13469
avgwwage_m~u |    152,334    1272.906    396.7543          0       4970
    emp_manu |    152,334    47068.67    62218.62          0     376653
-------------+---------------------------------------------------------
estcount_n~s |    151,809    211.8363    322.4826          1       1859
avgwwage_n~s |    151,809    1133.199    862.1232          0       8606
  emp_natres |    151,809    5209.704     14256.1          0      97846
estcount_s~v |    152,127    140.9399    411.3288          1       5969
avgwwage_s~v |    152,127     1014.47    299.4505          0       2572
-------------+---------------------------------------------------------
   emp_stgov |    152,127    15709.17    16292.85          0     114555
estcount_t~p |    152,334    9406.654    9421.556         84      59438
avgwwage_t~p |    152,334    861.6196    200.9441        356       3194
  emp_transp |    152,334    143879.2    144973.2        629     872187
    u1_bldgs |    136,332    274.6464    358.5711      -1621       2688
-------------+---------------------------------------------------------
    u1_units |    136,332    274.6464    358.5711      -1621       2688
    u1_value |    136,332    6.74e+07    8.85e+07  -1.35e+08   6.43e+08
 u1rep_bldgs |    136,332    262.2207    357.1151       -477       3759
 u1rep_units |    136,332    262.2207    357.1151       -477       3759
 u1rep_value |    136,332    6.48e+07    8.80e+07  -1.32e+08   8.74e+08
-------------+---------------------------------------------------------
walall_njo~h |    156,240    .0011088     .001684   .0000248   .0190973
halall_njo~h |    156,480    .0011799     .001967   .0000466   .0316029
walall_29y~h |    156,240    .0047145    .0069488   .0001284   .0780198
halall_29y~h |    156,480    .0047388    .0068154   .0000821   .1035602
       ln_mw |    156,600    2.079602    .1327775   1.981001   2.772589
-------------+---------------------------------------------------------
ln_med_ren~c |    113,375    .0472541    .4493362  -.8722228   1.906781
ln_emp_biz~v |    152,334      11.108    1.386834   5.796058   13.37271
ln_emp_const |    151,077    9.898307    1.163937    5.31812   12.06551
ln_emp_eduhe |    152,334    11.04985    1.265766   6.175867   13.63523
ln_emp_fed~v |    152,334    8.916786    1.366298    3.73767   12.28042
-------------+---------------------------------------------------------
  ln_emp_fin |    152,298    10.19513    1.453856   4.454347   12.89542
 ln_emp_info |    151,572    9.006427    1.549256   2.397895   12.38988
 ln_emp_leis |    152,334    10.86033    1.201436   5.631212   13.22092
ln_emp_loc~v |    149,085    10.64621    1.126274   7.035269   13.04718
 ln_emp_manu |    151,056    10.03152     1.30013   4.543295   12.83908
-------------+---------------------------------------------------------
ln_emp_nat~s |    149,376    6.965401    1.822471   .6931472   11.49115
ln_emp_stgov |    148,896    9.034419    1.380182   3.433987   11.64881
ln_emp_tra~p |    152,334    11.32727    1.175193   6.444131   13.67876
ln_estcou~rv |    152,334    8.631106    1.247359   4.094345   10.93852
ln_estcoun~t |    152,334     7.63511    1.038369   3.555348   9.737374
-------------+---------------------------------------------------------
ln_estcoun~e |    152,334    8.181748    1.281099   3.871201   12.41164
ln_estc~dgov |    152,334     4.47362    .8084446   1.098612   6.122493
ln_estcoun~n |    152,334    7.954816    1.209698   3.433987   10.31685
ln_estcoun~o |    152,334    6.071127    1.338069   1.386294   9.488881
ln_estcou~is |    152,334    7.826004    1.132324   3.295837   10.57699
-------------+---------------------------------------------------------
ln_estc~cgov |    152,334     5.01103    1.182176          0   8.333751
ln_estcoun~u |    152,334    6.723692    1.232639   2.302585   9.508146
ln_estcou~es |    151,809    4.487308    1.395918          0   7.527794
ln_estc~tgov |    152,127     4.15392    1.108557          0   8.694335
ln_estcoun~p |    152,334    8.611787     1.14944   4.430817   10.99269
-------------+---------------------------------------------------------
ln_avgwwa~rv |    152,334    7.078686     .326307   5.420535   8.461046
ln_avgwwag~t |    151,077    6.982866    .2416437   6.122493   7.866339
ln_avgwwag~e |    152,334    6.835003    .1581551   6.028278   7.588324
ln_avgw~dgov |    152,334    7.254022    .1652418   6.483108   7.909857
ln_avgwwag~n |    152,298    7.248846    .4144515   6.180017   9.163982
-------------+---------------------------------------------------------
ln_avgwwag~o |    151,572    7.255305    .3551565   5.888878   8.906665
ln_avgwwa~is |    152,334     6.06221    .2759165   5.313206   7.030858
ln_avgw~cgov |    149,085    6.872041    .1863058    6.05444   7.621685
ln_avgwwag~u |    151,056    7.120315    .2656149   6.139884   8.511175
ln_avgwwa~es |    149,376    6.864521    .5646428   5.384495   9.060215
-------------+---------------------------------------------------------
ln_avgw~tgov |    148,896    6.912444    .2492661   6.001415   7.852439
ln_avgwwag~p |    152,334    6.733492    .2227758   5.874931   8.069029
 ln_u1_bldgs |    135,963    4.775056    1.589248          0   7.896553
 ln_u1_units |    135,963    4.775056    1.589248          0   7.896553
 ln_u1_value |    135,809    16.64258    3.649391          0   20.28197
-------------+---------------------------------------------------------
ln_u1rep_b~s |    136,178    4.599205    1.755203          0   8.231908
ln_u1rep_u~s |    136,178    4.599205    1.755203          0   8.231908
ln_u1rep_v~e |    135,968    16.17866    4.454632          0   20.58904
nonwhit~2010 |    156,600    .4607982    .2225559   .0598227   .9962162
trend_times2 |    156,600         451    69.27985        332        570
-------------+---------------------------------------------------------
med_h~at_qtl |    156,600    2.498851     1.11838          1          4
med_h~st_qtl |    156,600    2.467433    1.120644          1          4
unemp~at_qtl |    156,600    2.498851     1.11838          1          4
unemp~st_qtl |    156,600    2.467433    1.120644          1          4
colle~at_qtl |    156,600    2.498851     1.11838          1          4
-------------+---------------------------------------------------------
colle~st_qtl |    156,600    2.467433    1.120644          1          4
black~at_qtl |    156,600    2.498851     1.11838          1          4
black~st_qtl |    156,600    2.467433    1.120644          1          4
renth~at_qtl |    156,600    2.498851     1.11838          1          4
renth~st_qtl |    156,600    2.467433    1.120644          1          4
-------------+---------------------------------------------------------
teen_~at_qtl |    156,600    2.498851     1.11838          1          4
teen_~st_qtl |    156,600    2.467433    1.120644          1          4
walall_njo.. |    156,240    2.499232    1.118037          1          4
walall_njo.. |    156,240    2.469278    1.120361          1          4
halall_njo.. |    156,480         2.5    1.118038          1          4
-------------+---------------------------------------------------------
halall_njo.. |    156,480    2.468558    1.120337          1          4
walall_29y.. |    156,240    2.499232    1.118037          1          4
walall_29y.. |    156,240    2.469278    1.120361          1          4
halall_29y.. |    156,480         2.5    1.118038          1          4
halall_29y.. |    156,480    2.468558    1.120337          1          4
-------------+---------------------------------------------------------
     d_ln_mw |    155,295    .0016445    .0119584   -.290338   .2412503




(note: file ../temp/fd_rent_panel.dta not found)
file ../temp/fd_rent_panel.dta saved

. 
end of do-file


Execute:  StataMP-64 /e do "./estimates.do"

  ___  ____  ____  ____  ____ (R)
 /__    /   ____/   /   ____/
___/   /   /___/   /   /___/   15.1   Copyright 1985-2017 StataCorp LLC
  Statistics/Data Analysis            StataCorp
                                      4905 Lakeway Drive
     MP - Parallel Edition            College Station, Texas 77845 USA
                                      800-STATA-PC        http://www.stata.com
                                      979-696-4600        stata@stata.com
                                      979-696-4601 (fax)

Single-user 32-core Stata perpetual license:
       Serial number:  501506205566
         Licensed to:  KU Leuven FEB (CES)
                       KU Leuven

Notes:
      1.  Stata is running in batch mode.
      2.  Unicode is supported; see help unicode_advice.
      3.  More than 2 billion observations are allowed; see help obs_advice.
      4.  Maximum number of variables is set to 5000; see help set_maxvar.

. do ./estimates.do 

. clear all

. set more off

. adopath + ../../../lib/stata/gslab_misc/ado
  [1]  (BASE)      "C:\Program Files\Stata15\ado\base/"
  [2]  (SITE)      "C:\Program Files\Stata15\ado\site/"
  [3]              "."
  [4]  (PERSONAL)  "c:\ado\personal/"
  [5]  (PLUS)      "c:\ado\plus/"
  [6]  (OLDPLACE)  "c:\ado/"
  [7]              "../../../lib/stata/gslab_misc/ado"

. adopath + ../../../lib/stata/min_wage/ado
  [1]  (BASE)      "C:\Program Files\Stata15\ado\base/"
  [2]  (SITE)      "C:\Program Files\Stata15\ado\site/"
  [3]              "."
  [4]  (PERSONAL)  "c:\ado\personal/"
  [5]  (PLUS)      "c:\ado\plus/"
  [6]  (OLDPLACE)  "c:\ado/"
  [7]              "../../../lib/stata/gslab_misc/ado"
  [8]              "../../../lib/stata/min_wage/ado"

. set maxvar 32000


. 
. program main
  1.         local instub "../temp"
  2.         local outstub "../output"
  3. 
.         use "`instub'/fd_rent_panel.dta", clear
  4. 
.         make_results_labels, w(5)
  5.         local estlabels_dyn "`r(estlabels_dyn)'"
  6.         local estlabels_static "`r(estlabels_static)'"
  7. 
.         * Static Model
.         run_static_model, depvar(ln_med_rent_psqft_sfcc) absorb(year_month) c
> luster(statefips)
  8.         esttab * using "`outstub'/fd_table.tex", keep(D.ln_mw) compress se
>  replace substitute(\_ _) ///
>                 b(%9.4f) se(%9.4f) coeflabels(`estlabels_static') ///
>                 stats(ctrl_wage ctrl_emp ctrl_estab r2 N, fmt(%s3 %s3 %s3 %9.
> 3f %9.0gc) ///
>                 labels("Wage controls" "Employment controls" "Establishment-c
> ount controls" ///
>                         "R-squared" "Observations")) star(* 0.10 ** 0.05 *** 
> 0.01) ///
>                 nonote nomtitles
  9. 
.         run_static_model_trend, depvar(ln_med_rent_psqft_sfcc) absorb(year_mo
> nth) cluster(statefips)
 10.         esttab * using "`outstub'/fd_table_trend.tex", keep(D.ln_mw) compr
> ess se replace substitute(\_ _)       ///
>                 b(%9.4f) se(%9.4f) coeflabels(`estlabels_static') ///
>                 stats(zs_trend zs_trend_sq r2 N, fmt(%s3 %s3 %9.3f %9.0gc) //
> /
>                 labels("Zipcode-specifc linear trend" "Zipcode-specific quadr
> atic trend" ///
>                         "R-squared" "Observations")) star(* 0.10 ** 0.05 *** 
> 0.01) nonote nomtitles 
 11. 
.         * Dynamic Model
.         run_dynamic_model, depvar(ln_med_rent_psqft_sfcc) absorb(year_month) 
> ///
>                 cluster(statefips)
 12.         esttab reg_1 reg_2 reg_3 reg_4 reg_5 using "`outstub'/fd_dynamic_t
> able.tex", ///
>                 keep(*.ln_mw) compress se replace substitute(\_ _) ///
>                 b(%9.4f) se(%9.4f) coeflabels(`estlabels_dyn') ///
>                 stats(k cumsum_b cumsum_V k p_value_F ctrl_wage ctrl_emp ctrl
> _estab r2 N, ///
>                         fmt(%s1 %s7 %s7 %s1 %9.3f %s3 %s3 %s3 %9.3f %9.0gc) /
> //
>                 labels("\vspace{-2mm}" "Cumulative effect" " " "\hline" "P-va
> lue no pretrends" ///
>                         "Wage controls" "Employment controls" "Establishment-
> count controls"  ///
>                         "R-squared" "Observations")) ///
>                 star(* 0.10 ** 0.05 *** 0.01) nonote nomtitles
 13. end

. 
. program run_static_model
  1.         syntax, depvar(str) absorb(str) cluster(str)
  2. 
.         eststo clear
  3. 
.         define_controls
  4.         local emp_ctrls "`r(emp_ctrls)'"
  5.         local estcount_ctrls "`r(estcount_ctrls)'"
  6.         local avgwwage_ctrls "`r(avgwwage_ctrls)'"
  7. 
.         eststo: reghdfe D.`depvar' D.ln_mw,     absorb(`absorb') vce(cluster 
> `cluster') nocons
  8.         comment_table_control, emp("No") estab("No") wage("No") housing("N
> o")
  9. 
.         scalar static_effect = _b[D.ln_mw]
 10.         scalar static_effect_se = _se[D.ln_mw]
 11. 
.         eststo: reghdfe D.`depvar' D.ln_mw D.(`avgwwage_ctrls'), absorb(`abso
> rb' zipcode) vce(cluster `cluster') nocons
 12.         comment_table_control, emp("No") estab("No") wage("Yes") housing("
> No")
 13. 
.         eststo: reghdfe D.`depvar' D.ln_mw D.(`emp_ctrls'), absorb(`absorb') 
> vce(cluster `cluster') nocons
 14.         comment_table_control, emp("Yes") estab("No") wage("No") housing("
> No")
 15. 
.         eststo: reghdfe D.`depvar' D.ln_mw D.(`estcount_ctrls'), absorb(`abso
> rb') vce(cluster `cluster') nocons
 16.         comment_table_control, emp("No") estab("Yes") wage("No") housing("
> No")
 17. 
.         eststo: reghdfe D.`depvar' D.ln_mw D.(`avgwwage_ctrls') D.(`emp_ctrls
> ') D.(`estcount_ctrls'), ///
>                 absorb(`absorb') vce(cluster `cluster') nocons
 18.         comment_table_control, emp("Yes") estab("Yes") wage("Yes") housing
> ("No")
 19. end 

. 
. program run_static_model_trend
  1.         syntax, depvar(str) absorb(str) cluster(str)
  2. 
.         eststo clear
  3.         eststo: reghdfe D.`depvar' D.ln_mw, ///
>                 vce(cluster `cluster') nocons absorb(`absorb') 
  4.         comment_table, trend_lin("No") trend_sq("No")
  5. 
.         eststo: reghdfe D.`depvar' D.ln_mw,     ///
>                 vce(cluster `cluster') nocons absorb(`absorb' i.zipcode) 
  6.         comment_table, trend_lin("Yes") trend_sq("No")
  7. 
.         eststo: reghdfe D.`depvar' D.ln_mw, ///
>                 vce(cluster `cluster') nocons absorb(`absorb' i.zipcode c.tre
> nd_times2#i.zipcode) 
  8.         comment_table, trend_lin("Yes") trend_sq("Yes")
  9. end

. 
. program run_dynamic_model
  1.         syntax, depvar(str) absorb(str) cluster(str) [w(int 5) t_plot(real
>  1.645) offset(real 0.09)]
  2. 
.         eststo clear
  3.         define_controls
  4.         local emp_ctrls "`r(emp_ctrls)'"
  5.         local estcount_ctrls "`r(estcount_ctrls)'"
  6.         local avgwwage_ctrls "`r(avgwwage_ctrls)'"
  7. 
.         local lincomest_coeffs "D1.ln_mw + LD.ln_mw"
  8.         local pretrend_test "(F1D.ln_mw = 0)"
  9.         forvalues i = 2(1)`w'{
 10.                 local lincomest_coeffs "`lincomest_coeffs' + L`i'D.ln_mw"
 11.             local pretrend_test " `pretrend_test' (F`i'D.ln_mw = 0)"
 12.         }
 13. 
.         eststo clear
 14.         eststo reg_1: reghdfe D.`depvar' L(-`w'/`w').D.ln_mw, absorb(`abso
> rb') vce(cluster `cluster') nocons
 15.         comment_table_control, emp("No") estab("No") wage("No") housing("N
> o")
 16.         
.         test `pretrend_test'
 17.         estadd scalar p_value_F = r(p)
 18.         estadd local k ""
 19. 
.         add_cumsum, coefficients(`lincomest_coeffs') i(1)
 20. 
.         eststo reg_2: reghdfe D.`depvar' L(-`w'/`w').D.ln_mw D.(`avgwwage_ctr
> ls') `if', ///
>                 absorb(`absorb') vce(cluster `cluster') nocons
 21.         comment_table_control, emp("No") estab("No") wage("Yes") housing("
> No")
 22. 
.         test `pretrend_test'
 23.         estadd scalar p_value_F = r(p)
 24.         estadd local k ""
 25. 
.         add_cumsum, coefficients(`lincomest_coeffs') i(2)
 26. 
.         eststo reg_3: reghdfe D.`depvar' L(-`w'/`w').D.ln_mw D.(`emp_ctrls') 
> `if', ///
>                 absorb(`absorb') vce(cluster `cluster') nocons
 27.         comment_table_control, emp("Yes") estab("No") wage("No") housing("
> No")
 28. 
.         test `pretrend_test'
 29.         estadd scalar p_value_F = r(p)
 30.         estadd local k ""
 31. 
.         add_cumsum, coefficients(`lincomest_coeffs') i(3)
 32. 
.         eststo reg_4: reghdfe D.`depvar' L(-`w'/`w').D.ln_mw `if' D.(`estcoun
> t_ctrls'), ///
>                 absorb(`absorb') vce(cluster `cluster') nocons
 33.         comment_table_control, emp("No") estab("Yes") wage("No") housing("
> No")
 34. 
.         test `pretrend_test'
 35.         estadd scalar p_value_F = r(p)
 36.         estadd local k ""
 37. 
.         add_cumsum, coefficients(`lincomest_coeffs') i(4)
 38. 
.         eststo reg_5: reghdfe D.`depvar' L(-`w'/`w').D.ln_mw ///
>                 D.(`avgwwage_ctrls') D.(`emp_ctrls') D.(`estcount_ctrls') `if
> ', ///
>                 absorb(`absorb') vce(cluster `cluster') nocons
 39.         comment_table_control, emp("Yes") estab("Yes") wage("Yes") housing
> ("No")
 40. 
.         test `pretrend_test'
 41.         estadd scalar p_value_F = r(p)
 42.         estadd local k ""
 43. 
.         add_cumsum, coefficients(`lincomest_coeffs') i(5)
 44. end

. 
. program comment_table_control
  1.         syntax, emp(str) estab(str) wage(str) housing(str)
  2. 
.         estadd local ctrl_emp   "`emp'"
  3.         estadd local ctrl_estab "`estab'"
  4.         estadd local ctrl_wage  "`wage'"
  5.         estadd local ctrl_building "`housing'"
  6. end

. 
. program add_cumsum
  1.         syntax, coefficients(str) i(int)
  2.         lincomest `coefficients'
  3.         mat b = e(b)
  4.         mat V = e(V)
  5.         local b_digits = round(b[1,1], 0.001)
  6.         local se_digits = round(V[1,1]^.5, 0.001)
  7.         if abs(b[1,1]/(V[1,1]^.5)) > 1.96 {
  8.                 local star = "\sym{**}"
  9.         }
 10.         else if abs(b[1,1]/(V[1,1]^.5)) > 1.65 {
 11.                 local star = "\sym{*}"
 12.         }
 13.         else {
 14.                 local star = ""
 15.         }
 16. 
.         estadd local cumsum_b = "0`b_digits'`star'": reg_`i'
 17.         estadd local cumsum_V = "(0`se_digits')":  reg_`i'
 18.         *estadd scalar cumsum_V = V[1,1]^.5: reg_`i'
. end

. 
. program comment_table
  1.         syntax, trend_lin(str) trend_sq(str)
  2. 
.         estadd local zs_trend           "`trend_lin'"
  3.         estadd local zs_trend_sq        "`trend_sq'"
  4. end

. 
. 
. main
(MWFE estimator converged in 1 iterations)

HDFE Linear regression                            Number of obs   =    112,232
Absorbing 1 HDFE group                            F(   1,     40) =       4.13
Statistics robust to heteroskedasticity           Prob > F        =     0.0488
                                                  R-squared       =     0.0218
                                                  Adj R-squared   =     0.0208
                                                  Within R-sq.    =     0.0001
Number of clusters (statefips) =         41       Root MSE        =     0.0279

                             (Std. Err. adjusted for 41 clusters in statefips)
------------------------------------------------------------------------------
D.           |               Robust
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
       ln_mw |
         D1. |   .0260395   .0128154     2.03   0.049     .0001386    .0519404
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
  year_month |       118           0         118     |
-----------------------------------------------------+
(est1 stored)

added macro:
           e(ctrl_emp) : "No"

added macro:
         e(ctrl_estab) : "No"

added macro:
          e(ctrl_wage) : "No"

added macro:
      e(ctrl_building) : "No"
(MWFE estimator converged in 5 iterations)

HDFE Linear regression                            Number of obs   =    107,781
Absorbing 2 HDFE groups                           F(   4,     40) =       2.02
Statistics robust to heteroskedasticity           Prob > F        =     0.1096
                                                  R-squared       =     0.0242
                                                  Adj R-squared   =     0.0127
                                                  Within R-sq.    =     0.0001
Number of clusters (statefips) =         41       Root MSE        =     0.0281

                             (Std. Err. adjusted for 41 clusters in statefips)
------------------------------------------------------------------------------
D.           |               Robust
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
       ln_mw |
         D1. |   .0246141   .0115199     2.14   0.039     .0013316    .0478967
             |
ln_avgwwa~rv |
         D1. |   .0027734   .0024461     1.13   0.264    -.0021705    .0077172
             |
ln_avgwwag~o |
         D1. |   .0012024   .0018305     0.66   0.515    -.0024972     .004902
             |
ln_avgwwag~n |
         D1. |   -.001905   .0012836    -1.48   0.146    -.0044993    .0006893
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
  year_month |       115           0         115     |
     zipcode |      1140        1140           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation
(est2 stored)

added macro:
           e(ctrl_emp) : "No"

added macro:
         e(ctrl_estab) : "No"

added macro:
          e(ctrl_wage) : "Yes"

added macro:
      e(ctrl_building) : "No"
(MWFE estimator converged in 1 iterations)

HDFE Linear regression                            Number of obs   =    107,781
Absorbing 1 HDFE group                            F(   4,     40) =       3.83
Statistics robust to heteroskedasticity           Prob > F        =     0.0099
                                                  R-squared       =     0.0223
                                                  Adj R-squared   =     0.0212
                                                  Within R-sq.    =     0.0002
Number of clusters (statefips) =         41       Root MSE        =     0.0280

                             (Std. Err. adjusted for 41 clusters in statefips)
------------------------------------------------------------------------------
D.           |               Robust
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
       ln_mw |
         D1. |   .0256532   .0123881     2.07   0.045     .0006158    .0506905
             |
ln_emp_biz~v |
         D1. |    .005836   .0044882     1.30   0.201    -.0032349    .0149069
             |
 ln_emp_info |
         D1. |   .0016306    .004369     0.37   0.711    -.0071994    .0104606
             |
  ln_emp_fin |
         D1. |   .0141121   .0050957     2.77   0.008     .0038133    .0244109
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
  year_month |       115           0         115     |
-----------------------------------------------------+
(est3 stored)

added macro:
           e(ctrl_emp) : "Yes"

added macro:
         e(ctrl_estab) : "No"

added macro:
          e(ctrl_wage) : "No"

added macro:
      e(ctrl_building) : "No"
(MWFE estimator converged in 1 iterations)

HDFE Linear regression                            Number of obs   =    108,511
Absorbing 1 HDFE group                            F(   4,     40) =       1.44
Statistics robust to heteroskedasticity           Prob > F        =     0.2385
                                                  R-squared       =     0.0221
                                                  Adj R-squared   =     0.0211
                                                  Within R-sq.    =     0.0002
Number of clusters (statefips) =         41       Root MSE        =     0.0280

                             (Std. Err. adjusted for 41 clusters in statefips)
------------------------------------------------------------------------------
D.           |               Robust
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
       ln_mw |
         D1. |   .0267659   .0125647     2.13   0.039     .0013717    .0521601
             |
ln_estcou~rv |
         D1. |   .0144284   .0140426     1.03   0.310    -.0139528    .0428095
             |
ln_estcoun~o |
         D1. |   .0042301   .0056957     0.74   0.462    -.0072813    .0157415
             |
ln_estcoun~n |
         D1. |   .0003288   .0096872     0.03   0.973    -.0192498    .0199073
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
  year_month |       115           0         115     |
-----------------------------------------------------+
(est4 stored)

added macro:
           e(ctrl_emp) : "No"

added macro:
         e(ctrl_estab) : "Yes"

added macro:
          e(ctrl_wage) : "No"

added macro:
      e(ctrl_building) : "No"
(MWFE estimator converged in 1 iterations)

HDFE Linear regression                            Number of obs   =    107,781
Absorbing 1 HDFE group                            F(  10,     40) =       4.21
Statistics robust to heteroskedasticity           Prob > F        =     0.0005
                                                  R-squared       =     0.0223
                                                  Adj R-squared   =     0.0212
                                                  Within R-sq.    =     0.0002
Number of clusters (statefips) =         41       Root MSE        =     0.0280

                             (Std. Err. adjusted for 41 clusters in statefips)
------------------------------------------------------------------------------
D.           |               Robust
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
       ln_mw |
         D1. |   .0257442   .0123973     2.08   0.044     .0006884    .0508001
             |
ln_avgwwa~rv |
         D1. |   .0027069   .0024858     1.09   0.283    -.0023172    .0077309
             |
ln_avgwwag~o |
         D1. |   .0011886   .0018043     0.66   0.514     -.002458    .0048352
             |
ln_avgwwag~n |
         D1. |  -.0019468   .0012759    -1.53   0.135    -.0045255     .000632
             |
ln_emp_biz~v |
         D1. |    .005149   .0044579     1.16   0.255    -.0038607    .0141586
             |
 ln_emp_info |
         D1. |   .0014924   .0043055     0.35   0.731    -.0072094    .0101942
             |
  ln_emp_fin |
         D1. |   .0134439   .0054271     2.48   0.018     .0024753    .0244125
             |
ln_estcou~rv |
         D1. |   .0153623   .0139853     1.10   0.279     -.012903    .0436276
             |
ln_estcoun~o |
         D1. |    .003682   .0054941     0.67   0.507    -.0074221    .0147861
             |
ln_estcoun~n |
         D1. |  -.0016904   .0095778    -0.18   0.861    -.0210477     .017667
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
  year_month |       115           0         115     |
-----------------------------------------------------+
(est5 stored)

added macro:
           e(ctrl_emp) : "Yes"

added macro:
         e(ctrl_estab) : "Yes"

added macro:
          e(ctrl_wage) : "Yes"

added macro:
      e(ctrl_building) : "No"
(note: file ../output/fd_table.tex not found)
(output written to ../output/fd_table.tex)
(MWFE estimator converged in 1 iterations)

HDFE Linear regression                            Number of obs   =    112,232
Absorbing 1 HDFE group                            F(   1,     40) =       4.13
Statistics robust to heteroskedasticity           Prob > F        =     0.0488
                                                  R-squared       =     0.0218
                                                  Adj R-squared   =     0.0208
                                                  Within R-sq.    =     0.0001
Number of clusters (statefips) =         41       Root MSE        =     0.0279

                             (Std. Err. adjusted for 41 clusters in statefips)
------------------------------------------------------------------------------
D.           |               Robust
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
       ln_mw |
         D1. |   .0260395   .0128154     2.03   0.049     .0001386    .0519404
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
  year_month |       118           0         118     |
-----------------------------------------------------+
(est1 stored)

added macro:
           e(zs_trend) : "No"

added macro:
        e(zs_trend_sq) : "No"
(MWFE estimator converged in 5 iterations)

HDFE Linear regression                            Number of obs   =    112,232
Absorbing 2 HDFE groups                           F(   1,     40) =       4.56
Statistics robust to heteroskedasticity           Prob > F        =     0.0389
                                                  R-squared       =     0.0236
                                                  Adj R-squared   =     0.0125
                                                  Within R-sq.    =     0.0001
Number of clusters (statefips) =         41       Root MSE        =     0.0281

                             (Std. Err. adjusted for 41 clusters in statefips)
------------------------------------------------------------------------------
D.           |               Robust
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
       ln_mw |
         D1. |   .0256987   .0120325     2.14   0.039     .0013801    .0500173
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
  year_month |       118           0         118     |
     zipcode |      1143        1143           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation
(est2 stored)

added macro:
           e(zs_trend) : "Yes"

added macro:
        e(zs_trend_sq) : "No"
(MWFE estimator converged in 31 iterations)

HDFE Linear regression                            Number of obs   =    112,232
Absorbing 3 HDFE groups                           F(   1,     40) =       4.79
Statistics robust to heteroskedasticity           Prob > F        =     0.0345
                                                  R-squared       =     0.0264
                                                  Adj R-squared   =     0.0051
                                                  Within R-sq.    =     0.0001
Number of clusters (statefips) =         41       Root MSE        =     0.0282

                             (Std. Err. adjusted for 41 clusters in statefips)
------------------------------------------------------------------------------
D.           |               Robust
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
       ln_mw |
         D1. |    .025532   .0116619     2.19   0.034     .0019624    .0491016
------------------------------------------------------------------------------

Absorbed degrees of freedom:
----------------------------------------------------------------+
            Absorbed FE | Categories  - Redundant  = Num. Coefs |
------------------------+---------------------------------------|
             year_month |       118           0         118     |
                zipcode |      1143        1143           0    *|
 zipcode#c.trend_times2 |      1143           0        1143    ?|
----------------------------------------------------------------+
? = number of redundant parameters may be higher
* = FE nested within cluster; treated as redundant for DoF computation
(est3 stored)

added macro:
           e(zs_trend) : "Yes"

added macro:
        e(zs_trend_sq) : "Yes"
(note: file ../output/fd_table_trend.tex not found)
(output written to ../output/fd_table_trend.tex)
(MWFE estimator converged in 1 iterations)

HDFE Linear regression                            Number of obs   =    106,446
Absorbing 1 HDFE group                            F(  11,     40) =       5.26
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.0222
                                                  Adj R-squared   =     0.0211
                                                  Within R-sq.    =     0.0002
Number of clusters (statefips) =         41       Root MSE        =     0.0280

                             (Std. Err. adjusted for 41 clusters in statefips)
------------------------------------------------------------------------------
D.           |               Robust
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
       ln_mw |
        F5D. |  -.0148356   .0090279    -1.64   0.108    -.0330816    .0034104
        F4D. |  -.0023735   .0115976    -0.20   0.839    -.0258131     .021066
        F3D. |   .0011058   .0091637     0.12   0.905    -.0174147    .0196264
        F2D. |   .0060276   .0115539     0.52   0.605    -.0173236    .0293788
         FD. |  -.0002217   .0122864    -0.02   0.986    -.0250534      .02461
         D1. |   .0270699   .0126282     2.14   0.038     .0015474    .0525925
         LD. |   .0135805    .007154     1.90   0.065    -.0008782    .0280392
        L2D. |  -.0070232   .0133453    -0.53   0.602     -.033995    .0199487
        L3D. |   .0036262   .0080799     0.45   0.656    -.0127038    .0199563
        L4D. |   .0107927   .0069339     1.56   0.127    -.0032212    .0248065
        L5D. |    .008621   .0068652     1.26   0.216    -.0052542    .0224961
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
  year_month |       109           0         109     |
-----------------------------------------------------+

added macro:
           e(ctrl_emp) : "No"

added macro:
         e(ctrl_estab) : "No"

added macro:
          e(ctrl_wage) : "No"

added macro:
      e(ctrl_building) : "No"

 ( 1)  FD.ln_mw = 0
 ( 2)  F2D.ln_mw = 0
 ( 3)  F3D.ln_mw = 0
 ( 4)  F4D.ln_mw = 0
 ( 5)  F5D.ln_mw = 0

       F(  5,    40) =    0.78
            Prob > F =    0.5675

added scalar:
          e(p_value_F) =  .56754406

added macro:
                  e(k) : ""
Confidence interval for formula:
D1.ln_mw+LD.ln_mw+L2D.ln_mw+L3D.ln_mw+L4D.ln_mw+L5D.ln_mw

------------------------------------------------------------------------------
D.           |
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .0566671   .0346332     1.64   0.110    -.0133293    .1266635
------------------------------------------------------------------------------
(MWFE estimator converged in 1 iterations)

HDFE Linear regression                            Number of obs   =    105,452
Absorbing 1 HDFE group                            F(  14,     40) =       4.95
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.0224
                                                  Adj R-squared   =     0.0212
                                                  Within R-sq.    =     0.0003
Number of clusters (statefips) =         41       Root MSE        =     0.0280

                             (Std. Err. adjusted for 41 clusters in statefips)
------------------------------------------------------------------------------
D.           |               Robust
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
       ln_mw |
        F5D. |  -.0143713   .0089074    -1.61   0.115    -.0323739    .0036312
        F4D. |  -.0019441   .0115599    -0.17   0.867    -.0253074    .0214193
        F3D. |   .0005155     .00936     0.06   0.956    -.0184017    .0194328
        F2D. |   .0063097   .0117498     0.54   0.594    -.0174376     .030057
         FD. |  -.0003545   .0123045    -0.03   0.977    -.0252228    .0245137
         D1. |   .0256916   .0123146     2.09   0.043     .0008028    .0505804
         LD. |   .0146272   .0072124     2.03   0.049     .0000504    .0292039
        L2D. |  -.0065692   .0133073    -0.49   0.624    -.0334642    .0203258
        L3D. |   .0044902   .0077836     0.58   0.567     -.011241    .0202214
        L4D. |   .0092827   .0065865     1.41   0.166    -.0040291    .0225946
        L5D. |   .0094949   .0065184     1.46   0.153    -.0036792     .022669
             |
ln_avgwwa~rv |
         D1. |   .0026871   .0024721     1.09   0.284    -.0023093    .0076834
             |
ln_avgwwag~o |
         D1. |   .0013014   .0018316     0.71   0.482    -.0024004    .0050031
             |
ln_avgwwag~n |
         D1. |  -.0019604   .0012475    -1.57   0.124    -.0044818    .0005609
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
  year_month |       109           0         109     |
-----------------------------------------------------+

added macro:
           e(ctrl_emp) : "No"

added macro:
         e(ctrl_estab) : "No"

added macro:
          e(ctrl_wage) : "Yes"

added macro:
      e(ctrl_building) : "No"

 ( 1)  FD.ln_mw = 0
 ( 2)  F2D.ln_mw = 0
 ( 3)  F3D.ln_mw = 0
 ( 4)  F4D.ln_mw = 0
 ( 5)  F5D.ln_mw = 0

       F(  5,    40) =    0.72
            Prob > F =    0.6109

added scalar:
          e(p_value_F) =  .61091197

added macro:
                  e(k) : ""
Confidence interval for formula:
D1.ln_mw+LD.ln_mw+L2D.ln_mw+L3D.ln_mw+L4D.ln_mw+L5D.ln_mw

------------------------------------------------------------------------------
D.           |
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .0570173   .0344083     1.66   0.105    -.0125243     .126559
------------------------------------------------------------------------------
(MWFE estimator converged in 1 iterations)

HDFE Linear regression                            Number of obs   =    105,452
Absorbing 1 HDFE group                            F(  14,     40) =       6.02
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.0224
                                                  Adj R-squared   =     0.0212
                                                  Within R-sq.    =     0.0003
Number of clusters (statefips) =         41       Root MSE        =     0.0280

                             (Std. Err. adjusted for 41 clusters in statefips)
------------------------------------------------------------------------------
D.           |               Robust
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
       ln_mw |
        F5D. |    -.01445   .0088966    -1.62   0.112    -.0324307    .0035306
        F4D. |  -.0019481   .0114824    -0.17   0.866    -.0251548    .0212586
        F3D. |   .0007145   .0091907     0.08   0.938    -.0178607    .0192897
        F2D. |   .0061598   .0116423     0.53   0.600      -.01737    .0296897
         FD. |  -.0004889   .0123627    -0.04   0.969    -.0254749    .0244971
         D1. |   .0258477   .0124375     2.08   0.044     .0007105    .0509848
         LD. |   .0142067   .0072109     1.97   0.056     -.000367    .0287804
        L2D. |  -.0063754    .013239    -0.48   0.633    -.0331324    .0203816
        L3D. |   .0046855   .0077813     0.60   0.550    -.0110412    .0204121
        L4D. |   .0103556   .0063823     1.62   0.113    -.0025435    .0232547
        L5D. |   .0099091   .0065338     1.52   0.137    -.0032961    .0231143
             |
ln_emp_biz~v |
         D1. |    .006304   .0043494     1.45   0.155    -.0024866    .0150945
             |
 ln_emp_info |
         D1. |   .0018681   .0042866     0.44   0.665    -.0067954    .0105316
             |
  ln_emp_fin |
         D1. |   .0139183   .0051964     2.68   0.011      .003416    .0244205
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
  year_month |       109           0         109     |
-----------------------------------------------------+

added macro:
           e(ctrl_emp) : "Yes"

added macro:
         e(ctrl_estab) : "No"

added macro:
          e(ctrl_wage) : "No"

added macro:
      e(ctrl_building) : "No"

 ( 1)  FD.ln_mw = 0
 ( 2)  F2D.ln_mw = 0
 ( 3)  F3D.ln_mw = 0
 ( 4)  F4D.ln_mw = 0
 ( 5)  F5D.ln_mw = 0

       F(  5,    40) =    0.74
            Prob > F =    0.5977

added scalar:
          e(p_value_F) =  .59770539

added macro:
                  e(k) : ""
Confidence interval for formula:
D1.ln_mw+LD.ln_mw+L2D.ln_mw+L3D.ln_mw+L4D.ln_mw+L5D.ln_mw

------------------------------------------------------------------------------
D.           |
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .0586291   .0343887     1.70   0.096    -.0108731    .1281313
------------------------------------------------------------------------------
(MWFE estimator converged in 1 iterations)

HDFE Linear regression                            Number of obs   =    106,160
Absorbing 1 HDFE group                            F(  14,     40) =       5.49
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.0223
                                                  Adj R-squared   =     0.0211
                                                  Within R-sq.    =     0.0003
Number of clusters (statefips) =         41       Root MSE        =     0.0280

                             (Std. Err. adjusted for 41 clusters in statefips)
------------------------------------------------------------------------------
D.           |               Robust
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
       ln_mw |
        F5D. |  -.0146186   .0089769    -1.63   0.111    -.0327616    .0035243
        F4D. |  -.0021844   .0115544    -0.19   0.851    -.0255367    .0211679
        F3D. |   .0005257   .0091103     0.06   0.954    -.0178869    .0189384
        F2D. |   .0059253   .0115417     0.51   0.611    -.0174013     .029252
         FD. |   4.19e-06   .0122035     0.00   1.000    -.0246601    .0246685
         D1. |   .0269249   .0126125     2.13   0.039      .001434    .0524157
         LD. |   .0135053   .0072099     1.87   0.068    -.0010665    .0280772
        L2D. |  -.0068188    .013312    -0.51   0.611    -.0337233    .0200857
        L3D. |    .003285   .0079416     0.41   0.681    -.0127656    .0193356
        L4D. |   .0107168    .006864     1.56   0.126    -.0031559    .0245895
        L5D. |   .0088274   .0067232     1.31   0.197    -.0047607    .0224155
             |
ln_estcou~rv |
         D1. |   .0139697   .0142453     0.98   0.333    -.0148212    .0427606
             |
ln_estcoun~o |
         D1. |   .0041293    .005727     0.72   0.475    -.0074453    .0157039
             |
ln_estcoun~n |
         D1. |   .0002781   .0096927     0.03   0.977    -.0193114    .0198677
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
  year_month |       109           0         109     |
-----------------------------------------------------+

added macro:
           e(ctrl_emp) : "No"

added macro:
         e(ctrl_estab) : "Yes"

added macro:
          e(ctrl_wage) : "No"

added macro:
      e(ctrl_building) : "No"

 ( 1)  FD.ln_mw = 0
 ( 2)  F2D.ln_mw = 0
 ( 3)  F3D.ln_mw = 0
 ( 4)  F4D.ln_mw = 0
 ( 5)  F5D.ln_mw = 0

       F(  5,    40) =    0.75
            Prob > F =    0.5911

added scalar:
          e(p_value_F) =  .59107139

added macro:
                  e(k) : ""
Confidence interval for formula:
D1.ln_mw+LD.ln_mw+L2D.ln_mw+L3D.ln_mw+L4D.ln_mw+L5D.ln_mw

------------------------------------------------------------------------------
D.           |
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .0564406   .0344378     1.64   0.109    -.0131608    .1260419
------------------------------------------------------------------------------
(MWFE estimator converged in 1 iterations)

HDFE Linear regression                            Number of obs   =    105,452
Absorbing 1 HDFE group                            F(  20,     40) =       7.90
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.0224
                                                  Adj R-squared   =     0.0213
                                                  Within R-sq.    =     0.0004
Number of clusters (statefips) =         41       Root MSE        =     0.0280

                             (Std. Err. adjusted for 41 clusters in statefips)
------------------------------------------------------------------------------
D.           |               Robust
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
       ln_mw |
        F5D. |  -.0143932   .0089046    -1.62   0.114    -.0323899    .0036036
        F4D. |  -.0019439   .0114803    -0.17   0.866    -.0251464    .0212587
        F3D. |  -.0000419   .0092207    -0.00   0.996    -.0186776    .0185938
        F2D. |   .0063769   .0116682     0.55   0.588    -.0172054    .0299592
         FD. |  -.0004965   .0123488    -0.04   0.968    -.0254545    .0244614
         D1. |   .0258958   .0124338     2.08   0.044     .0007661    .0510255
         LD. |   .0145243    .007205     2.02   0.051    -.0000375    .0290861
        L2D. |  -.0063871   .0132312    -0.48   0.632    -.0331284    .0203542
        L3D. |   .0040907   .0076558     0.53   0.596    -.0113822    .0195637
        L4D. |   .0096189   .0065357     1.47   0.149    -.0035902     .022828
        L5D. |   .0098726   .0065184     1.51   0.138    -.0033016    .0230468
             |
ln_avgwwa~rv |
         D1. |   .0026007   .0025247     1.03   0.309    -.0025018    .0077033
             |
ln_avgwwag~o |
         D1. |   .0012401   .0018112     0.68   0.498    -.0024206    .0049007
             |
ln_avgwwag~n |
         D1. |  -.0020238    .001245    -1.63   0.112      -.00454    .0004923
             |
ln_emp_biz~v |
         D1. |   .0056356    .004305     1.31   0.198    -.0030652    .0143363
             |
 ln_emp_info |
         D1. |   .0017397   .0042132     0.41   0.682    -.0067754    .0102548
             |
  ln_emp_fin |
         D1. |   .0132773   .0055574     2.39   0.022     .0020453    .0245092
             |
ln_estcou~rv |
         D1. |   .0148151   .0141417     1.05   0.301    -.0137664    .0433967
             |
ln_estcoun~o |
         D1. |   .0035158    .005508     0.64   0.527    -.0076163    .0146479
             |
ln_estcoun~n |
         D1. |   -.001661   .0096212    -0.17   0.864    -.0211063    .0177842
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
  year_month |       109           0         109     |
-----------------------------------------------------+

added macro:
           e(ctrl_emp) : "Yes"

added macro:
         e(ctrl_estab) : "Yes"

added macro:
          e(ctrl_wage) : "Yes"

added macro:
      e(ctrl_building) : "No"

 ( 1)  FD.ln_mw = 0
 ( 2)  F2D.ln_mw = 0
 ( 3)  F3D.ln_mw = 0
 ( 4)  F4D.ln_mw = 0
 ( 5)  F5D.ln_mw = 0

       F(  5,    40) =    0.70
            Prob > F =    0.6260

added scalar:
          e(p_value_F) =  .62598491

added macro:
                  e(k) : ""
Confidence interval for formula:
D1.ln_mw+LD.ln_mw+L2D.ln_mw+L3D.ln_mw+L4D.ln_mw+L5D.ln_mw

------------------------------------------------------------------------------
D.           |
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .0576152   .0341964     1.68   0.100    -.0114984    .1267288
------------------------------------------------------------------------------
(note: file ../output/fd_dynamic_table.tex not found)
(output written to ../output/fd_dynamic_table.tex)

. 
end of do-file


Execute:  StataMP-64 /e do "./figures.do"

  ___  ____  ____  ____  ____ (R)
 /__    /   ____/   /   ____/
___/   /   /___/   /   /___/   15.1   Copyright 1985-2017 StataCorp LLC
  Statistics/Data Analysis            StataCorp
                                      4905 Lakeway Drive
     MP - Parallel Edition            College Station, Texas 77845 USA
                                      800-STATA-PC        http://www.stata.com
                                      979-696-4600        stata@stata.com
                                      979-696-4601 (fax)

Single-user 32-core Stata perpetual license:
       Serial number:  501506205566
         Licensed to:  KU Leuven FEB (CES)
                       KU Leuven

Notes:
      1.  Stata is running in batch mode.
      2.  Unicode is supported; see help unicode_advice.
      3.  More than 2 billion observations are allowed; see help obs_advice.
      4.  Maximum number of variables is set to 5000; see help set_maxvar.

. do ./figures.do 

. clear all

. set more off

. adopath + ../../../lib/stata/gslab_misc/ado
  [1]  (BASE)      "C:\Program Files\Stata15\ado\base/"
  [2]  (SITE)      "C:\Program Files\Stata15\ado\site/"
  [3]              "."
  [4]  (PERSONAL)  "c:\ado\personal/"
  [5]  (PLUS)      "c:\ado\plus/"
  [6]  (OLDPLACE)  "c:\ado/"
  [7]              "../../../lib/stata/gslab_misc/ado"

. adopath + ../../../lib/stata/min_wage/ado
  [1]  (BASE)      "C:\Program Files\Stata15\ado\base/"
  [2]  (SITE)      "C:\Program Files\Stata15\ado\site/"
  [3]              "."
  [4]  (PERSONAL)  "c:\ado\personal/"
  [5]  (PLUS)      "c:\ado\plus/"
  [6]  (OLDPLACE)  "c:\ado/"
  [7]              "../../../lib/stata/gslab_misc/ado"
  [8]              "../../../lib/stata/min_wage/ado"

. set maxvar 32000 


. 
. program main
  1.         local instub "../temp"
  2.         local outstub "../output"
  3. 
.         use "`instub'/fd_rent_panel.dta", clear
  4. 
.         build_coeff_plot, depvar(ln_med_rent_psqft_sfcc) absorb(year_month) /
> //
>                 cluster(statefips) outstub(`outstub')
  5. 
.         foreach w in 3 6 9 {
  6.                 use "`instub'/fd_rent_panel.dta", clear
  7. 
.                 build_coeff_plot, depvar(ln_med_rent_psqft_sfcc) absorb(year_
> month) ///
>                         cluster(statefips) outstub(`outstub') w(`w')
  8.         }
  9. 
.         use "`instub'/fd_rent_panel.dta", clear
 10.         
.         build_cumsum_plot, depvar(ln_med_rent_psqft_sfcc) absorb(year_month) 
> ///
>                 cluster(statefips) outstub(`outstub')
 11. 
.         use "`instub'/fd_rent_panel.dta", clear
 12. 
.         build_coeff_plot_controls, depvar(ln_med_rent_psqft_sfcc) absorb(year
> _month) ///
>                 cluster(statefips) outstub(`outstub')
 13. end

. 
. program build_coeff_plot
  1.         syntax, depvar(str) absorb(str) cluster(str) outstub(str) [w(int 5
> ) t_plot(real 1.645) offset(real 0.09)]
  2. 
.         eststo clear
  3.         reghdfe D.`depvar' D.ln_mw,     absorb(`absorb') vce(cluster `clus
> ter') nocons
  4. 
.         scalar static_effect = _b[D.ln_mw]
  5.         scalar static_effect_se = _se[D.ln_mw]
  6. 
.         define_controls estcount avgwwage
  7.         local emp_ctrls "`r(emp_ctrls)'"
  8.         local estcount_ctrls "`r(estcount_ctrls)'"
  9.         local avgwwage_ctrls "`r(avgwwage_ctrls)'"
 10. 
.         qui reghdfe D.`depvar' L(-`w'/`w').D.ln_mw, absorb(`absorb') vce(clus
> ter `cluster') nocons
 11.         
.         preserve
 12.                 coefplot, vertical base gen
 13.                 keep __at __b __se
 14.                 rename (__at __b __se) (at b_full se_full)
 15.                 
.                 keep if !missing(at)
 16. 
.                 gen b_full_lb = b_full - `t_plot'*se_full
 17.                 gen b_full_ub = b_full + `t_plot'*se_full
 18. 
.                 gen static_path = . 
 19.                 replace static_path = scalar(static_effect) if at > `w'
 20. 
.                 save "../temp/plot_coeffs.dta", replace
 21.         restore
 22. 
.         qui reghdfe D.`depvar' L(0/`w').D.ln_mw, absorb(`absorb') vce(cluster
>  `cluster') nocons
 23.         
.         coefplot, vertical base gen
 24.         keep __at __b __se
 25.         rename (__at __b __se) (at b_lags se_lags)
 26.         tset at
 27. 
.         keep if !missing(at)
 28. 
.         gen b_lags_lb = b_lags - 1.645*se_lags
 29.         gen b_lags_ub = b_lags + 1.645*se_lags
 30. 
.         gen cumsum_b_lags = b_lags[1]
 31.         replace cumsum_b_lags = cumsum_b_lags[_n-1] + b_lags[_n] if _n > 1
 32. 
.         replace at = at + `w'
 33.         save "../temp/plot_coeffs_lags.dta", replace
 34.                 
.         merge 1:1 at using "../temp/plot_coeffs.dta", nogen
 35.         sort at
 36. 
.         gen at_full = at - (`w'/5)*`offset'                 // To prevent lin
> es from overlapping perfectly
 37.         gen at_lags = at + (`w'/5)*`offset'
 38.         replace at_full = at if _n <= `w'
 39.         replace at_lags = at if _n <= `w'
 40.         replace cumsum_b_lags = . if at < `w' - 1
 41. 
.         // Figure
.         make_plot_xlabels, w(`w')
 42. 
.         twoway  (scatter b_full at_full, mcol(navy)) ///
>                                 (rcap b_full_lb b_full_ub at_full, col(navy) 
> lw(vthin)) ///
>                         (scatter b_lags at_lags, mcol(maroon)) ///
>                                 (rcap b_lags_lb b_lags_ub at_lags, col(maroon
> ) lw(vthin)), ///
>                 yline(0, lcol(black)) ///
>                 xlabel(`r(xlab)', labsize(small)) xtitle(" ") ///
>                 ylabel(-0.06(0.02).08, grid labsize(small)) ytitle("Coefficie
> nt") ///
>                 legend(order(1 "Full dynamic model" 3 "Distributed lags model
> ") size(small)) ///
>                 graphregion(color(white)) bgcolor(white)
 43.         graph export "`outstub'/fd_models_coeffs_w`w'.png", replace
 44.         graph export "`outstub'/fd_models_coeffs_w`w'.eps", replace
 45. 
.         if `w' == 5 {
 46.                 make_plot_xlabels, w(`w')
 47. 
.                 twoway  (scatter b_full at_full, mcol(navy)) ///
>                                         (rcap b_full_lb b_full_ub at_full, co
> l(navy) lw(vthin)) ///
>                                 (scatter b_lags at_lags, mcol(maroon)) ///
>                                         (rcap b_lags_lb b_lags_ub at_lags, co
> l(maroon) lw(vthin)) ///
>                                 (line static_path at, lcol(gs4) lpat(dash)) /
> //
>                                 (line cumsum_b_lags at, lcol(maroon) lpat(das
> h)), ///
>                         yline(0, lcol(black)) ///
>                         xlabel(`r(xlab)', labsize(small)) xtitle(" ") ///
>                         ylabel(-0.06(0.02).08, grid labsize(small)) ytitle("C
> oefficient") ///
>                         legend(order(1 "Full dynamic model" 3 "Distributed la
> gs model" ///
>                                 5 "Effects path static model" 6 "Effects path
>  distributed lags model") size(small)) ///
>                         graphregion(color(white)) bgcolor(white)
 48.                 graph export "`outstub'/fd_models_everything.png", replace
 49.                 graph export "`outstub'/fd_models_everything.eps", replace
 50.         }
 51. end

. 
. program build_cumsum_plot
  1.         syntax, depvar(str) absorb(str) cluster(str) outstub(str) [w(int 5
> ) t_plot(real 1.645) offset(real 0.09)]
  2. 
.         eststo clear
  3.         
.         define_controls
  4.         local emp_ctrls "`r(emp_ctrls)'"
  5.         local estcount_ctrls "`r(estcount_ctrls)'"
  6.         local avgwwage_ctrls "`r(avgwwage_ctrls)'"
  7.         
.         local w_minus1 = `w' - 1
  8.         local w_span = 2*`w' + 1
  9.         
.         local names "full lags"
 10.         mat define start = (-`w', 0)
 11. 
.         forvalues i = 1/2 {
 12.                 local name: word `i' of `names'
 13.                 local start_lag = start[1, `i']
 14. 
.                 local coeffs_list "D1.ln_mw LD.ln_mw"
 15.                 forvalues i = 2/`w' {
 16.                         local coeffs_list "`coeffs_list' L`i'D.ln_mw"
 17.                 }
 18.                 local coeffs_list "`coeffs_list' L`w'D.ln_mw"
 19.                 
.                 if `start_lag' < 0 {
 20.                         forvalues i = 1/`w' {
 21.                                 local coeffs_list "F`i'D.ln_mw `coeffs_lis
> t'"
 22.                         }
 23.                 }
 24.                 matrix COEFF = J(`w_span', 5, .)
 25.                 matrix colname COEFF = "at" "cumsum_`name'_b" "cumsum_`nam
> e'_sd" "b_cumsum_`name'_lb" "b_cumsum_`name'_hb"
 26.                 
.                 forvalues i = 1/`w_span' {
 27.                         matrix COEFF[`i',1] = `i'
 28.                         
.                         local this_lag = `i' - `w' - 1
 29.                         
.                         if `this_lag' >= `start_lag' {
 30.                                 local j = `this_lag' - `start_lag' + 1
 31.                                 
.                                 local ll: word `j' of `coeffs_list'
 32.                                 
.                                 if `j' == 1 {
 33.                                         local cumsum_coeffs "`ll'"
 34.                                 }
 35.                                 else {
 36.                                         local cumsum_coeffs "`cumsum_coeff
> s' + `ll'"
 37.                                 }
 38.                         
.                                 qui reghdfe D.`depvar' L(`start_lag'/`w').D.l
> n_mw, absorb(`absorb') vce(cluster `cluster') nocons
 39.                                 lincomest `cumsum_coeffs'
 40.                                 mat b = e(b)
 41.                                 mat V = e(V)
 42. 
.                                 matrix COEFF[`i',2] = b[1, 1]
 43.                                 matrix COEFF[`i',3] = V[1, 1]^.5
 44.                                 matrix COEFF[`i',4] = b[1, 1] - `t_plot'*V
> [1, 1]^.5
 45.                                 matrix COEFF[`i',5] = b[1, 1] + `t_plot'*V
> [1, 1]^.5
 46.                         }
 47.                 }
 48.                 preserve
 49.                         svmat double COEFF, name(col)
 50.                         keep at cumsum_`name'_b cumsum_`name'_sd b_cumsum_
> `name'_lb b_cumsum_`name'_hb
 51.                         drop if missing(at)
 52.                         save "../temp/cumsum_coeffs_`name'.dta", replace
 53.                 restore
 54.         }
 55.         
.         *qui reghdfe D5.`depvar' D5.ln_mw, absorb(`absorb') vce(cluster `clus
> ter') nocons
.         
.         use "../temp/cumsum_coeffs_full.dta", clear
 56.         merge 1:1 at using "../temp/cumsum_coeffs_lags.dta", nogen
 57.         sort at
 58. 
.         // Figure
.         make_plot_xlabels, w(`w')
 59.         
.         replace cumsum_lags_b = 0 if missing(cumsum_lags_b)
 60.         replace b_cumsum_lags_lb = 0 if missing(b_cumsum_lags_lb)
 61.         replace b_cumsum_lags_hb = 0 if missing(b_cumsum_lags_hb)
 62. 
.         twoway  (line b_cumsum_full_lb at, col(navy) lpat(dash)) ///
>                         (line b_cumsum_full_hb at, col(navy) lpat(dash)) ///
>                         (connected cumsum_full_b at, mcol(navy) lcol(navy)) /
> //
>                         (line b_cumsum_lags_lb at, col(maroon) lpat(dash)) //
> /
>                         (line b_cumsum_lags_hb at, col(maroon) lpat(dash)) //
> /                  
>                         (connected cumsum_lags_b at, mcol(maroon) lcol(maroon
> )), ///
>                 yline(0, lcol(black)) ///
>                 xlabel(`r(xlab)', labsize(small))  xtitle(" ") ///
>                 ylabel(-0.06(0.02).1, grid labsize(small)) ytitle("Cumulative
>  sum of effects") ///
>                 legend(order(3 "Full dynamic model" 6 "Distributed lags model
> ") size(small)) ///
>                 graphregion(color(white)) bgcolor(white)
 63.         
.         graph export "`outstub'/fd_models_cumsum.png", replace
 64.         graph export "`outstub'/fd_models_cumsum.eps", replace
 65. end

. 
. program build_coeff_plot_controls
  1.         syntax, depvar(str) absorb(str) cluster(str) outstub(str) [w(int 5
> ) t_plot(real 1.645) offset(real 0.17)]
  2. 
.         eststo clear
  3. 
.         define_controls
  4.         local emp_ctrls "`r(emp_ctrls)'"
  5.         local estab_ctrls "`r(estcount_ctrls)'"
  6.         local wage_ctrls "`r(avgwwage_ctrls)'"
  7. 
.         reghdfe D.`depvar' L(-`w'/`w').D.ln_mw, absorb(`absorb') vce(cluster 
> `cluster') nocons
  8.         store_dynamic_coeffs, model(base) w(`w') t_plot(`t_plot')
  9. 
.         foreach name in emp estab wage {
 10.                 reghdfe D.`depvar' L(-`w'/`w').D.ln_mw D.(``name'_ctrls'),
>  absorb(`absorb') vce(cluster `cluster') nocons
 11.                 store_dynamic_coeffs, model(`name') w(`w') t_plot(`t_plot'
> )
 12.         }
 13.                         
.         reghdfe D.`depvar' L(-`w'/`w').D.ln_mw D.(`emp_ctrls') D.(`estab_ctrl
> s') D.(`wage_ctrls'), ///
>                 absorb(`absorb') vce(cluster `cluster') nocons
 14. 
.         coefplot, vertical base gen
 15.         local winspan = 2*`w' + 1
 16.         keep if _n <= `winspan'
 17.         keep __at __b __se
 18.         rename (__at __b __se) (at b_all se_all)
 19.         keep if !missing(at)
 20. 
.         gen b_all_lb = b_all - `t_plot'*se_all
 21.         gen b_all_ub = b_all + `t_plot'*se_all
 22. 
.         merge 1:1 at using "../temp/plot_coeffs_base.dta", nogen
 23.         merge 1:1 at using "../temp/plot_coeffs_emp.dta", nogen
 24.         merge 1:1 at using "../temp/plot_coeffs_estab.dta", nogen
 25.         merge 1:1 at using "../temp/plot_coeffs_wage.dta", nogen
 26. 
.         sort at
 27.         g at_emp   = at - 2*`offset'
 28.         g at_estab = at - `offset'
 29.         g at_wage  = at + `offset'
 30.         g at_all = at + 2*`offset'
 31. 
.         make_plot_xlabels, w(`w')
 32. 
.         twoway (scatter b_base at, mcol(navy))          (rcap b_base_lb b_bas
> e_ub at, lc(navy) lw(vthin)) ///
>                    (scatter b_emp at_emp, mc(maroon))       (rcap b_emp_lb b_
> emp_ub at_emp, lc(maroon) lw(vthin)) ///
>                    (scatter b_estab at_estab, mc(lavender)) (rcap b_estab_lb 
> b_estab_ub at_est, lc(lavender) lw(vthin)) ///
>                    (scatter b_wage at_wage, mc(dkorange))   (rcap b_wage_lb b
> _wage_ub at_wage, lc(dkorange) lw(vthin)) ///
>                    (scatter b_all at_all, mc(gs10))         (rcap b_all_lb b_
> all_ub at_all, lc(gs10) lw(vthin)), /// 
>                 yline(0, lcol(black)) ///
>                 graphregion(color(white)) bgcolor(white) ///
>                 xlabel(`r(xlab)', labsize(vsmall)) xtitle("Leads and lags of 
> difference in log MW") ///
>                 ytitle("Dynamic coefficients") ylabel(-0.06(0.02).06, grid)  
>    ///
>                 legend(order(1 "Baseline" 3 "Employment" ///
>                         5 "Establishment" 7 "Wage" 9 "All") size(small) rows(
> 1))
 33.         
.         graph export "../output/fd_models_control.png", replace
 34.         graph export "../output/fd_models_control.eps", replace
 35. end

. 
. program store_dynamic_coeffs
  1.         syntax, model(str) w(int) t_plot(real)
  2.         preserve
  3.                 coefplot, vertical base gen
  4.                 local wspan = 2*`w' + 1
  5.                 keep if _n <= `wspan'
  6.                 keep __at __b __se
  7.                 rename (__at __b __se) (at b_`model' se_`model')
  8.         
.                 keep if !missing(at)
  9. 
.                 gen b_`model'_lb = b_`model' - `t_plot'*se_`model'
 10.                 gen b_`model'_ub = b_`model' + `t_plot'*se_`model'
 11.         
.                 save "../temp/plot_coeffs_`model'.dta", replace
 12.         restore
 13. end 

. 
. program make_plot_xlabels, rclass 
  1.         syntax, w(int)
  2. 
.         local xlab ""
  3.         forval lead = 1/`w' {
  4.                 local leadlab = `lead' - `w' - 1
  5.                 local xlab `"`xlab' `lead' "`leadlab'""'
  6.         }
  7.         local zero = `w' + 1
  8.         local xlab `"`xlab' `zero' "0""'
  9.         forval lag = 1/`w' {
 10.                 local coeflag = `zero' + `lag'
 11.                 local xlab `"`xlab' `coeflag' "`lag'""'
 12.         }
 13. 
.         return local xlab `xlab'
 14. end

. 
. main
(MWFE estimator converged in 1 iterations)

HDFE Linear regression                            Number of obs   =    112,232
Absorbing 1 HDFE group                            F(   1,     40) =       4.13
Statistics robust to heteroskedasticity           Prob > F        =     0.0488
                                                  R-squared       =     0.0218
                                                  Adj R-squared   =     0.0208
                                                  Within R-sq.    =     0.0001
Number of clusters (statefips) =         41       Root MSE        =     0.0279

                             (Std. Err. adjusted for 41 clusters in statefips)
------------------------------------------------------------------------------
D.           |               Robust
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
       ln_mw |
         D1. |   .0260395   .0128154     2.03   0.049     .0001386    .0519404
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
  year_month |       118           0         118     |
-----------------------------------------------------+

Generated variables:
              storage   display    value
variable name   type    format     label      variable label
-------------------------------------------------------------------------------
__by            byte    %9.0g      __by       subgraph ID
__plot          byte    %9.0g      __plot     plot ID
__at            byte    %9.0g                 plot position (category axis)
__mlbl          str1    %9s                   marker label
__mlpos         byte    %9.0g                 marker label position
__b             float   %9.0g                 coefficient
__V             float   %9.0g                 variance
__se            float   %9.0g                 standard error
__t             float   %9.0g                 t or z statistic
__df            byte    %9.0g                 degrees of freedom
__pval          float   %9.0g                 p-value
__ll1           float   %9.0g                 CI1: lower limit
__ul1           float   %9.0g                 CI1: upper limit
(156,589 observations deleted)
(11 missing values generated)
(6 real changes made)
(note: file ../temp/plot_coeffs.dta not found)
file ../temp/plot_coeffs.dta saved

Generated variables:
              storage   display    value
variable name   type    format     label      variable label
-------------------------------------------------------------------------------
__by            byte    %9.0g      __by       subgraph ID
__plot          byte    %9.0g      __plot     plot ID
__at            byte    %9.0g                 plot position (category axis)
__mlbl          str1    %9s                   marker label
__mlpos         byte    %9.0g                 marker label position
__b             float   %9.0g                 coefficient
__V             float   %9.0g                 variance
__se            float   %9.0g                 standard error
__t             float   %9.0g                 t or z statistic
__df            byte    %9.0g                 degrees of freedom
__pval          float   %9.0g                 p-value
__ll1           float   %9.0g                 CI1: lower limit
__ul1           float   %9.0g                 CI1: upper limit
        time variable:  at, 1 to 6
                delta:  1 unit
(156,594 observations deleted)
(5 real changes made)
(6 real changes made)
(note: file ../temp/plot_coeffs_lags.dta not found)
file ../temp/plot_coeffs_lags.dta saved

    Result                           # of obs.
    -----------------------------------------
    not matched                             5
        from master                         0  
        from using                          5  

    matched                                 6  
    -----------------------------------------
(5 real changes made)
(5 real changes made)
(0 real changes made)
(note: file ../output/fd_models_coeffs_w5.png not found)
(file ../output/fd_models_coeffs_w5.png written in PNG format)
(note: file ../output/fd_models_coeffs_w5.eps not found)
(file ../output/fd_models_coeffs_w5.eps written in EPS format)
(note: file ../output/fd_models_everything.png not found)
(file ../output/fd_models_everything.png written in PNG format)
(note: file ../output/fd_models_everything.eps not found)
(file ../output/fd_models_everything.eps written in EPS format)
(MWFE estimator converged in 1 iterations)

HDFE Linear regression                            Number of obs   =    112,232
Absorbing 1 HDFE group                            F(   1,     40) =       4.13
Statistics robust to heteroskedasticity           Prob > F        =     0.0488
                                                  R-squared       =     0.0218
                                                  Adj R-squared   =     0.0208
                                                  Within R-sq.    =     0.0001
Number of clusters (statefips) =         41       Root MSE        =     0.0279

                             (Std. Err. adjusted for 41 clusters in statefips)
------------------------------------------------------------------------------
D.           |               Robust
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
       ln_mw |
         D1. |   .0260395   .0128154     2.03   0.049     .0001386    .0519404
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
  year_month |       118           0         118     |
-----------------------------------------------------+

Generated variables:
              storage   display    value
variable name   type    format     label      variable label
-------------------------------------------------------------------------------
__by            byte    %9.0g      __by       subgraph ID
__plot          byte    %9.0g      __plot     plot ID
__at            byte    %9.0g                 plot position (category axis)
__mlbl          str1    %9s                   marker label
__mlpos         byte    %9.0g                 marker label position
__b             float   %9.0g                 coefficient
__V             float   %9.0g                 variance
__se            float   %9.0g                 standard error
__t             float   %9.0g                 t or z statistic
__df            byte    %9.0g                 degrees of freedom
__pval          float   %9.0g                 p-value
__ll1           float   %9.0g                 CI1: lower limit
__ul1           float   %9.0g                 CI1: upper limit
(156,593 observations deleted)
(7 missing values generated)
(4 real changes made)
file ../temp/plot_coeffs.dta saved

Generated variables:
              storage   display    value
variable name   type    format     label      variable label
-------------------------------------------------------------------------------
__by            byte    %9.0g      __by       subgraph ID
__plot          byte    %9.0g      __plot     plot ID
__at            byte    %9.0g                 plot position (category axis)
__mlbl          str1    %9s                   marker label
__mlpos         byte    %9.0g                 marker label position
__b             float   %9.0g                 coefficient
__V             float   %9.0g                 variance
__se            float   %9.0g                 standard error
__t             float   %9.0g                 t or z statistic
__df            byte    %9.0g                 degrees of freedom
__pval          float   %9.0g                 p-value
__ll1           float   %9.0g                 CI1: lower limit
__ul1           float   %9.0g                 CI1: upper limit
        time variable:  at, 1 to 4
                delta:  1 unit
(156,596 observations deleted)
(3 real changes made)
(4 real changes made)
file ../temp/plot_coeffs_lags.dta saved

    Result                           # of obs.
    -----------------------------------------
    not matched                             3
        from master                         0  
        from using                          3  

    matched                                 4  
    -----------------------------------------
(3 real changes made)
(3 real changes made)
(0 real changes made)
(note: file ../output/fd_models_coeffs_w3.png not found)
(file ../output/fd_models_coeffs_w3.png written in PNG format)
(note: file ../output/fd_models_coeffs_w3.eps not found)
(file ../output/fd_models_coeffs_w3.eps written in EPS format)
(MWFE estimator converged in 1 iterations)

HDFE Linear regression                            Number of obs   =    112,232
Absorbing 1 HDFE group                            F(   1,     40) =       4.13
Statistics robust to heteroskedasticity           Prob > F        =     0.0488
                                                  R-squared       =     0.0218
                                                  Adj R-squared   =     0.0208
                                                  Within R-sq.    =     0.0001
Number of clusters (statefips) =         41       Root MSE        =     0.0279

                             (Std. Err. adjusted for 41 clusters in statefips)
------------------------------------------------------------------------------
D.           |               Robust
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
       ln_mw |
         D1. |   .0260395   .0128154     2.03   0.049     .0001386    .0519404
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
  year_month |       118           0         118     |
-----------------------------------------------------+

Generated variables:
              storage   display    value
variable name   type    format     label      variable label
-------------------------------------------------------------------------------
__by            byte    %9.0g      __by       subgraph ID
__plot          byte    %9.0g      __plot     plot ID
__at            byte    %9.0g                 plot position (category axis)
__mlbl          str1    %9s                   marker label
__mlpos         byte    %9.0g                 marker label position
__b             float   %9.0g                 coefficient
__V             float   %9.0g                 variance
__se            float   %9.0g                 standard error
__t             float   %9.0g                 t or z statistic
__df            byte    %9.0g                 degrees of freedom
__pval          float   %9.0g                 p-value
__ll1           float   %9.0g                 CI1: lower limit
__ul1           float   %9.0g                 CI1: upper limit
(156,587 observations deleted)
(13 missing values generated)
(7 real changes made)
file ../temp/plot_coeffs.dta saved

Generated variables:
              storage   display    value
variable name   type    format     label      variable label
-------------------------------------------------------------------------------
__by            byte    %9.0g      __by       subgraph ID
__plot          byte    %9.0g      __plot     plot ID
__at            byte    %9.0g                 plot position (category axis)
__mlbl          str1    %9s                   marker label
__mlpos         byte    %9.0g                 marker label position
__b             float   %9.0g                 coefficient
__V             float   %9.0g                 variance
__se            float   %9.0g                 standard error
__t             float   %9.0g                 t or z statistic
__df            byte    %9.0g                 degrees of freedom
__pval          float   %9.0g                 p-value
__ll1           float   %9.0g                 CI1: lower limit
__ul1           float   %9.0g                 CI1: upper limit
        time variable:  at, 1 to 7
                delta:  1 unit
(156,593 observations deleted)
(6 real changes made)
(7 real changes made)
file ../temp/plot_coeffs_lags.dta saved

    Result                           # of obs.
    -----------------------------------------
    not matched                             6
        from master                         0  
        from using                          6  

    matched                                 7  
    -----------------------------------------
(6 real changes made)
(6 real changes made)
(0 real changes made)
(note: file ../output/fd_models_coeffs_w6.png not found)
(file ../output/fd_models_coeffs_w6.png written in PNG format)
(note: file ../output/fd_models_coeffs_w6.eps not found)
(file ../output/fd_models_coeffs_w6.eps written in EPS format)
(MWFE estimator converged in 1 iterations)

HDFE Linear regression                            Number of obs   =    112,232
Absorbing 1 HDFE group                            F(   1,     40) =       4.13
Statistics robust to heteroskedasticity           Prob > F        =     0.0488
                                                  R-squared       =     0.0218
                                                  Adj R-squared   =     0.0208
                                                  Within R-sq.    =     0.0001
Number of clusters (statefips) =         41       Root MSE        =     0.0279

                             (Std. Err. adjusted for 41 clusters in statefips)
------------------------------------------------------------------------------
D.           |               Robust
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
       ln_mw |
         D1. |   .0260395   .0128154     2.03   0.049     .0001386    .0519404
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
  year_month |       118           0         118     |
-----------------------------------------------------+

Generated variables:
              storage   display    value
variable name   type    format     label      variable label
-------------------------------------------------------------------------------
__by            byte    %9.0g      __by       subgraph ID
__plot          byte    %9.0g      __plot     plot ID
__at            byte    %9.0g                 plot position (category axis)
__mlbl          str1    %9s                   marker label
__mlpos         byte    %9.0g                 marker label position
__b             float   %9.0g                 coefficient
__V             float   %9.0g                 variance
__se            float   %9.0g                 standard error
__t             float   %9.0g                 t or z statistic
__df            byte    %9.0g                 degrees of freedom
__pval          float   %9.0g                 p-value
__ll1           float   %9.0g                 CI1: lower limit
__ul1           float   %9.0g                 CI1: upper limit
(156,581 observations deleted)
(19 missing values generated)
(10 real changes made)
file ../temp/plot_coeffs.dta saved

Generated variables:
              storage   display    value
variable name   type    format     label      variable label
-------------------------------------------------------------------------------
__by            byte    %9.0g      __by       subgraph ID
__plot          byte    %9.0g      __plot     plot ID
__at            byte    %9.0g                 plot position (category axis)
__mlbl          str1    %9s                   marker label
__mlpos         byte    %9.0g                 marker label position
__b             float   %9.0g                 coefficient
__V             float   %9.0g                 variance
__se            float   %9.0g                 standard error
__t             float   %9.0g                 t or z statistic
__df            byte    %9.0g                 degrees of freedom
__pval          float   %9.0g                 p-value
__ll1           float   %9.0g                 CI1: lower limit
__ul1           float   %9.0g                 CI1: upper limit
        time variable:  at, 1 to 10
                delta:  1 unit
(156,590 observations deleted)
(9 real changes made)
(10 real changes made)
file ../temp/plot_coeffs_lags.dta saved

    Result                           # of obs.
    -----------------------------------------
    not matched                             9
        from master                         0  
        from using                          9  

    matched                                10  
    -----------------------------------------
(9 real changes made)
(9 real changes made)
(0 real changes made)
(note: file ../output/fd_models_coeffs_w9.png not found)
(file ../output/fd_models_coeffs_w9.png written in PNG format)
(note: file ../output/fd_models_coeffs_w9.eps not found)
(file ../output/fd_models_coeffs_w9.eps written in EPS format)
Confidence interval for formula:
F5D.ln_mw

------------------------------------------------------------------------------
D.           |
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |  -.0148356   .0090279    -1.64   0.108    -.0330816    .0034104
------------------------------------------------------------------------------
Confidence interval for formula:
F5D.ln_mw+F4D.ln_mw

------------------------------------------------------------------------------
D.           |
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |  -.0172091   .0179255    -0.96   0.343    -.0534378    .0190196
------------------------------------------------------------------------------
Confidence interval for formula:
F5D.ln_mw+F4D.ln_mw+F3D.ln_mw

------------------------------------------------------------------------------
D.           |
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |  -.0161033   .0225818    -0.71   0.480    -.0617428    .0295363
------------------------------------------------------------------------------
Confidence interval for formula:
F5D.ln_mw+F4D.ln_mw+F3D.ln_mw+F2D.ln_mw

------------------------------------------------------------------------------
D.           |
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |  -.0100757   .0223365    -0.45   0.654    -.0552195    .0350681
------------------------------------------------------------------------------
Confidence interval for formula:
F5D.ln_mw+F4D.ln_mw+F3D.ln_mw+F2D.ln_mw+F1D.ln_mw

------------------------------------------------------------------------------
D.           |
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |  -.0102974   .0212103    -0.49   0.630     -.053165    .0325702
------------------------------------------------------------------------------
Confidence interval for formula:
F5D.ln_mw+F4D.ln_mw+F3D.ln_mw+F2D.ln_mw+F1D.ln_mw+D1.ln_mw

------------------------------------------------------------------------------
D.           |
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .0167726   .0211133     0.79   0.432     -.025899    .0594441
------------------------------------------------------------------------------
Confidence interval for formula:
F5D.ln_mw+F4D.ln_mw+F3D.ln_mw+F2D.ln_mw+F1D.ln_mw+D1.ln_mw+LD.ln_mw

------------------------------------------------------------------------------
D.           |
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .0303531   .0226043     1.34   0.187    -.0153319     .076038
------------------------------------------------------------------------------
Confidence interval for formula:
F5D.ln_mw+F4D.ln_mw+F3D.ln_mw+F2D.ln_mw+F1D.ln_mw+D1.ln_mw+LD.ln_mw+L2D.ln_mw

------------------------------------------------------------------------------
D.           |
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .0233299   .0287011     0.81   0.421    -.0346771    .0813369
------------------------------------------------------------------------------
Confidence interval for formula:
F5D.ln_mw+F4D.ln_mw+F3D.ln_mw+F2D.ln_mw+F1D.ln_mw+D1.ln_mw+LD.ln_mw+L2D.ln_mw+L
> 3D.ln_mw

------------------------------------------------------------------------------
D.           |
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .0269561   .0304571     0.89   0.381       -.0346    .0885123
------------------------------------------------------------------------------
Confidence interval for formula:
F5D.ln_mw+F4D.ln_mw+F3D.ln_mw+F2D.ln_mw+F1D.ln_mw+D1.ln_mw+LD.ln_mw+L2D.ln_mw+L
> 3D.ln_mw+L4D.ln_mw

------------------------------------------------------------------------------
D.           |
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .0377488   .0326681     1.16   0.255     -.028276    .1037735
------------------------------------------------------------------------------
Confidence interval for formula:
F5D.ln_mw+F4D.ln_mw+F3D.ln_mw+F2D.ln_mw+F1D.ln_mw+D1.ln_mw+LD.ln_mw+L2D.ln_mw+L
> 3D.ln_mw+L4D.ln_mw+L5D.ln_mw

------------------------------------------------------------------------------
D.           |
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .0463697   .0329062     1.41   0.167    -.0201362    .1128756
------------------------------------------------------------------------------
(156,589 observations deleted)
(note: file ../temp/cumsum_coeffs_full.dta not found)
file ../temp/cumsum_coeffs_full.dta saved
Confidence interval for formula:
D1.ln_mw

------------------------------------------------------------------------------
D.           |
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |    .026255   .0129005     2.04   0.048     .0001821    .0523278
------------------------------------------------------------------------------
Confidence interval for formula:
D1.ln_mw+LD.ln_mw

------------------------------------------------------------------------------
D.           |
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .0422103    .016636     2.54   0.015     .0085877     .075833
------------------------------------------------------------------------------
Confidence interval for formula:
D1.ln_mw+LD.ln_mw+L2D.ln_mw

------------------------------------------------------------------------------
D.           |
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .0357295   .0268873     1.33   0.191    -.0186118    .0900709
------------------------------------------------------------------------------
Confidence interval for formula:
D1.ln_mw+LD.ln_mw+L2D.ln_mw+L3D.ln_mw

------------------------------------------------------------------------------
D.           |
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .0391075    .032332     1.21   0.234    -.0262378    .1044529
------------------------------------------------------------------------------
Confidence interval for formula:
D1.ln_mw+LD.ln_mw+L2D.ln_mw+L3D.ln_mw+L4D.ln_mw

------------------------------------------------------------------------------
D.           |
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |    .049739   .0346227     1.44   0.159     -.020236     .119714
------------------------------------------------------------------------------
Confidence interval for formula:
D1.ln_mw+LD.ln_mw+L2D.ln_mw+L3D.ln_mw+L4D.ln_mw+L5D.ln_mw

------------------------------------------------------------------------------
D.           |
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .0559579   .0351085     1.59   0.119     -.014999    .1269148
------------------------------------------------------------------------------
(156,589 observations deleted)
(note: file ../temp/cumsum_coeffs_lags.dta not found)
file ../temp/cumsum_coeffs_lags.dta saved

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                11  
    -----------------------------------------
(5 real changes made)
(5 real changes made)
(5 real changes made)
(note: file ../output/fd_models_cumsum.png not found)
(file ../output/fd_models_cumsum.png written in PNG format)
(note: file ../output/fd_models_cumsum.eps not found)
(file ../output/fd_models_cumsum.eps written in EPS format)
(MWFE estimator converged in 1 iterations)

HDFE Linear regression                            Number of obs   =    106,446
Absorbing 1 HDFE group                            F(  11,     40) =       5.26
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.0222
                                                  Adj R-squared   =     0.0211
                                                  Within R-sq.    =     0.0002
Number of clusters (statefips) =         41       Root MSE        =     0.0280

                             (Std. Err. adjusted for 41 clusters in statefips)
------------------------------------------------------------------------------
D.           |               Robust
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
       ln_mw |
        F5D. |  -.0148356   .0090279    -1.64   0.108    -.0330816    .0034104
        F4D. |  -.0023735   .0115976    -0.20   0.839    -.0258131     .021066
        F3D. |   .0011058   .0091637     0.12   0.905    -.0174147    .0196264
        F2D. |   .0060276   .0115539     0.52   0.605    -.0173236    .0293788
         FD. |  -.0002217   .0122864    -0.02   0.986    -.0250534      .02461
         D1. |   .0270699   .0126282     2.14   0.038     .0015474    .0525925
         LD. |   .0135805    .007154     1.90   0.065    -.0008782    .0280392
        L2D. |  -.0070232   .0133453    -0.53   0.602     -.033995    .0199487
        L3D. |   .0036262   .0080799     0.45   0.656    -.0127038    .0199563
        L4D. |   .0107927   .0069339     1.56   0.127    -.0032212    .0248065
        L5D. |    .008621   .0068652     1.26   0.216    -.0052542    .0224961
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
  year_month |       109           0         109     |
-----------------------------------------------------+

Generated variables:
              storage   display    value
variable name   type    format     label      variable label
-------------------------------------------------------------------------------
__by            byte    %9.0g      __by       subgraph ID
__plot          byte    %9.0g      __plot     plot ID
__at            byte    %9.0g                 plot position (category axis)
__mlbl          str1    %9s                   marker label
__mlpos         byte    %9.0g                 marker label position
__b             float   %9.0g                 coefficient
__V             float   %9.0g                 variance
__se            float   %9.0g                 standard error
__t             float   %9.0g                 t or z statistic
__df            byte    %9.0g                 degrees of freedom
__pval          float   %9.0g                 p-value
__ll1           float   %9.0g                 CI1: lower limit
__ul1           float   %9.0g                 CI1: upper limit
(156,589 observations deleted)
(0 observations deleted)
(note: file ../temp/plot_coeffs_base.dta not found)
file ../temp/plot_coeffs_base.dta saved
(MWFE estimator converged in 1 iterations)

HDFE Linear regression                            Number of obs   =    105,452
Absorbing 1 HDFE group                            F(  14,     40) =       6.02
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.0224
                                                  Adj R-squared   =     0.0212
                                                  Within R-sq.    =     0.0003
Number of clusters (statefips) =         41       Root MSE        =     0.0280

                             (Std. Err. adjusted for 41 clusters in statefips)
------------------------------------------------------------------------------
D.           |               Robust
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
       ln_mw |
        F5D. |    -.01445   .0088966    -1.62   0.112    -.0324307    .0035306
        F4D. |  -.0019481   .0114824    -0.17   0.866    -.0251548    .0212586
        F3D. |   .0007145   .0091907     0.08   0.938    -.0178607    .0192897
        F2D. |   .0061598   .0116423     0.53   0.600      -.01737    .0296897
         FD. |  -.0004889   .0123627    -0.04   0.969    -.0254749    .0244971
         D1. |   .0258477   .0124375     2.08   0.044     .0007105    .0509848
         LD. |   .0142067   .0072109     1.97   0.056     -.000367    .0287804
        L2D. |  -.0063754    .013239    -0.48   0.633    -.0331324    .0203816
        L3D. |   .0046855   .0077813     0.60   0.550    -.0110412    .0204121
        L4D. |   .0103556   .0063823     1.62   0.113    -.0025435    .0232547
        L5D. |   .0099091   .0065338     1.52   0.137    -.0032961    .0231143
             |
ln_emp_biz~v |
         D1. |    .006304   .0043494     1.45   0.155    -.0024866    .0150945
             |
 ln_emp_info |
         D1. |   .0018681   .0042866     0.44   0.665    -.0067954    .0105316
             |
  ln_emp_fin |
         D1. |   .0139183   .0051964     2.68   0.011      .003416    .0244205
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
  year_month |       109           0         109     |
-----------------------------------------------------+

Generated variables:
              storage   display    value
variable name   type    format     label      variable label
-------------------------------------------------------------------------------
__by            byte    %9.0g      __by       subgraph ID
__plot          byte    %9.0g      __plot     plot ID
__at            byte    %9.0g                 plot position (category axis)
__mlbl          str1    %9s                   marker label
__mlpos         byte    %9.0g                 marker label position
__b             float   %9.0g                 coefficient
__V             float   %9.0g                 variance
__se            float   %9.0g                 standard error
__t             float   %9.0g                 t or z statistic
__df            byte    %9.0g                 degrees of freedom
__pval          float   %9.0g                 p-value
__ll1           float   %9.0g                 CI1: lower limit
__ul1           float   %9.0g                 CI1: upper limit
(156,589 observations deleted)
(0 observations deleted)
(note: file ../temp/plot_coeffs_emp.dta not found)
file ../temp/plot_coeffs_emp.dta saved
(MWFE estimator converged in 1 iterations)

HDFE Linear regression                            Number of obs   =    106,160
Absorbing 1 HDFE group                            F(  14,     40) =       5.49
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.0223
                                                  Adj R-squared   =     0.0211
                                                  Within R-sq.    =     0.0003
Number of clusters (statefips) =         41       Root MSE        =     0.0280

                             (Std. Err. adjusted for 41 clusters in statefips)
------------------------------------------------------------------------------
D.           |               Robust
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
       ln_mw |
        F5D. |  -.0146186   .0089769    -1.63   0.111    -.0327616    .0035243
        F4D. |  -.0021844   .0115544    -0.19   0.851    -.0255367    .0211679
        F3D. |   .0005257   .0091103     0.06   0.954    -.0178869    .0189384
        F2D. |   .0059253   .0115417     0.51   0.611    -.0174013     .029252
         FD. |   4.19e-06   .0122035     0.00   1.000    -.0246601    .0246685
         D1. |   .0269249   .0126125     2.13   0.039      .001434    .0524157
         LD. |   .0135053   .0072099     1.87   0.068    -.0010665    .0280772
        L2D. |  -.0068188    .013312    -0.51   0.611    -.0337233    .0200857
        L3D. |    .003285   .0079416     0.41   0.681    -.0127656    .0193356
        L4D. |   .0107168    .006864     1.56   0.126    -.0031559    .0245895
        L5D. |   .0088274   .0067232     1.31   0.197    -.0047607    .0224155
             |
ln_estcou~rv |
         D1. |   .0139697   .0142453     0.98   0.333    -.0148212    .0427606
             |
ln_estcoun~o |
         D1. |   .0041293    .005727     0.72   0.475    -.0074453    .0157039
             |
ln_estcoun~n |
         D1. |   .0002781   .0096927     0.03   0.977    -.0193114    .0198677
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
  year_month |       109           0         109     |
-----------------------------------------------------+

Generated variables:
              storage   display    value
variable name   type    format     label      variable label
-------------------------------------------------------------------------------
__by            byte    %9.0g      __by       subgraph ID
__plot          byte    %9.0g      __plot     plot ID
__at            byte    %9.0g                 plot position (category axis)
__mlbl          str1    %9s                   marker label
__mlpos         byte    %9.0g                 marker label position
__b             float   %9.0g                 coefficient
__V             float   %9.0g                 variance
__se            float   %9.0g                 standard error
__t             float   %9.0g                 t or z statistic
__df            byte    %9.0g                 degrees of freedom
__pval          float   %9.0g                 p-value
__ll1           float   %9.0g                 CI1: lower limit
__ul1           float   %9.0g                 CI1: upper limit
(156,589 observations deleted)
(0 observations deleted)
(note: file ../temp/plot_coeffs_estab.dta not found)
file ../temp/plot_coeffs_estab.dta saved
(MWFE estimator converged in 1 iterations)

HDFE Linear regression                            Number of obs   =    105,452
Absorbing 1 HDFE group                            F(  14,     40) =       4.95
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.0224
                                                  Adj R-squared   =     0.0212
                                                  Within R-sq.    =     0.0003
Number of clusters (statefips) =         41       Root MSE        =     0.0280

                             (Std. Err. adjusted for 41 clusters in statefips)
------------------------------------------------------------------------------
D.           |               Robust
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
       ln_mw |
        F5D. |  -.0143713   .0089074    -1.61   0.115    -.0323739    .0036312
        F4D. |  -.0019441   .0115599    -0.17   0.867    -.0253074    .0214193
        F3D. |   .0005155     .00936     0.06   0.956    -.0184017    .0194328
        F2D. |   .0063097   .0117498     0.54   0.594    -.0174376     .030057
         FD. |  -.0003545   .0123045    -0.03   0.977    -.0252228    .0245137
         D1. |   .0256916   .0123146     2.09   0.043     .0008028    .0505804
         LD. |   .0146272   .0072124     2.03   0.049     .0000504    .0292039
        L2D. |  -.0065692   .0133073    -0.49   0.624    -.0334642    .0203258
        L3D. |   .0044902   .0077836     0.58   0.567     -.011241    .0202214
        L4D. |   .0092827   .0065865     1.41   0.166    -.0040291    .0225946
        L5D. |   .0094949   .0065184     1.46   0.153    -.0036792     .022669
             |
ln_avgwwa~rv |
         D1. |   .0026871   .0024721     1.09   0.284    -.0023093    .0076834
             |
ln_avgwwag~o |
         D1. |   .0013014   .0018316     0.71   0.482    -.0024004    .0050031
             |
ln_avgwwag~n |
         D1. |  -.0019604   .0012475    -1.57   0.124    -.0044818    .0005609
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
  year_month |       109           0         109     |
-----------------------------------------------------+

Generated variables:
              storage   display    value
variable name   type    format     label      variable label
-------------------------------------------------------------------------------
__by            byte    %9.0g      __by       subgraph ID
__plot          byte    %9.0g      __plot     plot ID
__at            byte    %9.0g                 plot position (category axis)
__mlbl          str1    %9s                   marker label
__mlpos         byte    %9.0g                 marker label position
__b             float   %9.0g                 coefficient
__V             float   %9.0g                 variance
__se            float   %9.0g                 standard error
__t             float   %9.0g                 t or z statistic
__df            byte    %9.0g                 degrees of freedom
__pval          float   %9.0g                 p-value
__ll1           float   %9.0g                 CI1: lower limit
__ul1           float   %9.0g                 CI1: upper limit
(156,589 observations deleted)
(0 observations deleted)
(note: file ../temp/plot_coeffs_wage.dta not found)
file ../temp/plot_coeffs_wage.dta saved
(MWFE estimator converged in 1 iterations)

HDFE Linear regression                            Number of obs   =    105,452
Absorbing 1 HDFE group                            F(  20,     40) =       7.90
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.0224
                                                  Adj R-squared   =     0.0213
                                                  Within R-sq.    =     0.0004
Number of clusters (statefips) =         41       Root MSE        =     0.0280

                             (Std. Err. adjusted for 41 clusters in statefips)
------------------------------------------------------------------------------
D.           |               Robust
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
       ln_mw |
        F5D. |  -.0143932   .0089046    -1.62   0.114    -.0323899    .0036036
        F4D. |  -.0019439   .0114803    -0.17   0.866    -.0251464    .0212587
        F3D. |  -.0000419   .0092207    -0.00   0.996    -.0186776    .0185938
        F2D. |   .0063769   .0116682     0.55   0.588    -.0172054    .0299592
         FD. |  -.0004965   .0123488    -0.04   0.968    -.0254545    .0244614
         D1. |   .0258958   .0124338     2.08   0.044     .0007661    .0510255
         LD. |   .0145243    .007205     2.02   0.051    -.0000375    .0290861
        L2D. |  -.0063871   .0132312    -0.48   0.632    -.0331284    .0203542
        L3D. |   .0040907   .0076558     0.53   0.596    -.0113822    .0195637
        L4D. |   .0096189   .0065357     1.47   0.149    -.0035902     .022828
        L5D. |   .0098726   .0065184     1.51   0.138    -.0033016    .0230468
             |
ln_emp_biz~v |
         D1. |   .0056356    .004305     1.31   0.198    -.0030652    .0143363
             |
 ln_emp_info |
         D1. |   .0017397   .0042132     0.41   0.682    -.0067754    .0102548
             |
  ln_emp_fin |
         D1. |   .0132773   .0055574     2.39   0.022     .0020453    .0245092
             |
ln_estcou~rv |
         D1. |   .0148151   .0141417     1.05   0.301    -.0137664    .0433967
             |
ln_estcoun~o |
         D1. |   .0035158    .005508     0.64   0.527    -.0076163    .0146479
             |
ln_estcoun~n |
         D1. |   -.001661   .0096212    -0.17   0.864    -.0211063    .0177842
             |
ln_avgwwa~rv |
         D1. |   .0026007   .0025247     1.03   0.309    -.0025018    .0077033
             |
ln_avgwwag~o |
         D1. |   .0012401   .0018112     0.68   0.498    -.0024206    .0049007
             |
ln_avgwwag~n |
         D1. |  -.0020238    .001245    -1.63   0.112      -.00454    .0004923
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
  year_month |       109           0         109     |
-----------------------------------------------------+

Generated variables:
              storage   display    value
variable name   type    format     label      variable label
-------------------------------------------------------------------------------
__by            byte    %9.0g      __by       subgraph ID
__plot          byte    %9.0g      __plot     plot ID
__at            byte    %9.0g                 plot position (category axis)
__mlbl          str1    %9s                   marker label
__mlpos         byte    %9.0g                 marker label position
__b             float   %9.0g                 coefficient
__V             float   %9.0g                 variance
__se            float   %9.0g                 standard error
__t             float   %9.0g                 t or z statistic
__df            byte    %9.0g                 degrees of freedom
__pval          float   %9.0g                 p-value
__ll1           float   %9.0g                 CI1: lower limit
__ul1           float   %9.0g                 CI1: upper limit
(156,589 observations deleted)
(0 observations deleted)

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                11  
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                11  
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                11  
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                11  
    -----------------------------------------
(note: file ../output/fd_models_control.png not found)
(file ../output/fd_models_control.png written in PNG format)
(note: file ../output/fd_models_control.eps not found)
(file ../output/fd_models_control.eps written in EPS format)

. 
end of do-file


Execute:  StataMP-64 /e do "./heterogeneity.do"

  ___  ____  ____  ____  ____ (R)
 /__    /   ____/   /   ____/
___/   /   /___/   /   /___/   15.1   Copyright 1985-2017 StataCorp LLC
  Statistics/Data Analysis            StataCorp
                                      4905 Lakeway Drive
     MP - Parallel Edition            College Station, Texas 77845 USA
                                      800-STATA-PC        http://www.stata.com
                                      979-696-4600        stata@stata.com
                                      979-696-4601 (fax)

Single-user 32-core Stata perpetual license:
       Serial number:  501506205566
         Licensed to:  KU Leuven FEB (CES)
                       KU Leuven

Notes:
      1.  Stata is running in batch mode.
      2.  Unicode is supported; see help unicode_advice.
      3.  More than 2 billion observations are allowed; see help obs_advice.
      4.  Maximum number of variables is set to 5000; see help set_maxvar.

. do ./heterogeneity.do 

. clear all

. set more off

. adopath + ../../../lib/stata/gslab_misc/ado
  [1]  (BASE)      "C:\Program Files\Stata15\ado\base/"
  [2]  (SITE)      "C:\Program Files\Stata15\ado\site/"
  [3]              "."
  [4]  (PERSONAL)  "c:\ado\personal/"
  [5]  (PLUS)      "c:\ado\plus/"
  [6]  (OLDPLACE)  "c:\ado/"
  [7]              "../../../lib/stata/gslab_misc/ado"

. adopath + ../../../lib/stata/min_wage/ado
  [1]  (BASE)      "C:\Program Files\Stata15\ado\base/"
  [2]  (SITE)      "C:\Program Files\Stata15\ado\site/"
  [3]              "."
  [4]  (PERSONAL)  "c:\ado\personal/"
  [5]  (PLUS)      "c:\ado\plus/"
  [6]  (OLDPLACE)  "c:\ado/"
  [7]              "../../../lib/stata/gslab_misc/ado"
  [8]              "../../../lib/stata/min_wage/ado"

. set maxvar 32000 


. 
. program main
  1.         local instub "../temp"
  2.         local outstub "../output"
  3. 
.         use "`instub'/fd_rent_panel.dta", clear
  4. 
.         local demovars       "med_hhinc20105 unemp_share20105 college_share20
> 105 black_share2010"
  5.         local demovars_extra "teen_share2010 urb_share2010 youngadult_shar
> e2010 worktravel_10_share20105 worker_foodservice20105"
  6.         local workvars       "walall_29y_lowinc_ssh halall_29y_lowinc_ssh 
> walall_29y_lowinc_zsh halall_29y_lowinc_zsh"
  7.         
.         * Heterogeneity plot - demographics and workers' type
.         foreach var in `demovars' `workvars' `demovars_extra'{
  8. 
.                 build_ytitle, var(`var')
  9. 
.                 plot_dd_static_heterogeneity, depvar(ln_med_rent_psqft_sfcc) 
> absorb(year_month zipcode) ///
>                         het_var(`var'_st_qtl) cluster(statefips) ytitle(`r(ti
> tle)')
 10.                 graph export "`outstub'/fd_static_heter_`var'.png", replac
> e
 11.         }
 12. 
.         *table - demographics 
.         make_table_titles, hetlist(`demovars')
 13.         local het_titles "`r(title_list)'"
 14.         make_dd_static_heterogeneity, depvar(ln_med_rent_psqft_sfcc) absor
> b(year_month zipcode) cluster(statefips) hetlist(`demovars')
 15.         esttab * using "`outstub'/fd_table_het.tex", compress se replace  
>       ///
>                 mtitles(`het_titles') substitute(\_ _)  ///
>                 coeflabels(1.qtl#c.d_ln_mw "$\Delta \ln(MW) \times 1^{st} qtl
> $" ///
>                                    2.qtl#c.d_ln_mw "$\Delta \ln(MW) \times 2^
> {nd} qtl$" ///
>                                    3.qtl#c.d_ln_mw "$\Delta \ln(MW) \times 3^
> {rd} qtl$" ///
>                                    4.qtl#c.d_ln_mw "$\Delta \ln(MW) \times 4^
> {th} qtl$") /// 
>                 stats(r2 N, fmt(%9.3f %9.0gc) labels("R-squared" "Observation
> s")) ///
>                 star(* 0.10 ** 0.05 *** 0.01)  nonote
 16. 
.         *table - workers' type 
.         make_table_titles, hetlist(`workvars')
 17.         local het_titles "`r(title_list)'"
 18.         make_dd_static_heterogeneity, depvar(ln_med_rent_psqft_sfcc) absor
> b(year_month zipcode) cluster(statefips) hetlist(`workvars')
 19.         esttab * using "`outstub'/fd_table_workers.tex", compress se repla
> ce    ///
>                 mtitles(`het_titles') substitute(\_ _)  ///
>                 coeflabels(1.qtl#c.d_ln_mw "$\Delta \ln(MW) \times 1^{st} qtl
> $" ///
>                                    2.qtl#c.d_ln_mw "$\Delta \ln(MW) \times 2^
> {nd} qtl$" ///
>                                    3.qtl#c.d_ln_mw "$\Delta \ln(MW) \times 3^
> {rd} qtl$" ///
>                                    4.qtl#c.d_ln_mw "$\Delta \ln(MW) \times 4^
> {th} qtl$") /// 
>                 stats(r2 N, fmt(%9.3f %9.0gc) labels("R-squared" "Observation
> s")) ///
>                 star(* 0.10 ** 0.05 *** 0.01)  nonote
 20. 
. end

. 
. program plot_static_heterogeneity
  1.         syntax, depvar(str) absorb(str) cluster(str) het_var(str) ytitle(s
> tr) [qtles(int 4)]
  2. 
.         eststo clear
  3.         reghdfe D.`depvar' c.d_ln_mw#i.`het_var', ///
>                 absorb(`absorb') ///
>                 vce(cluster `cluster') nocons
  4. 
.         coefplot, base graphregion(color(white)) bgcolor(white) ///
>                 ylabel(1 "First quartile" 2 "Second quartile" 3 "Third quarti
> le" 4 "Fourth quartile") ///
>                 ytitle(`ytitle') xtitle("Elasticity of rents to the MW")     
>    ///
>                 xline(0, lcol(black)) mcolor(edkblue) ciopts(recast(rcap) lc(
> edkblue) lw(vthin))
  5. end

. 
. program build_ytitle, rclass
  1.         syntax, var(str)
  2. 
.         if "`var'" == "med_hhinc20105" {
  3.                 return local title "Quartiles of 2010 median household inc
> ome"
  4.         }
  5.         if "`var'" == "renthouse_share2010" {
  6.                 return local title "Quartiles of 2010 share of houses rent
> "
  7.         }
  8.         if "`var'" == "college_share20105" {
  9.                 return local title "Quartiles of 2010 college share"
 10.         }
 11.         if "`var'" == "black_share2010" {
 12.                 return local title "Quartiles of 2010 share of black indiv
> iduals"
 13.         }
 14.         if "`var'" == "nonwhite_share2010" {
 15.                 return local title "Quartiles of 2010 share of non-white i
> ndividuals"
 16.         }
 17.         if "`var'" == "work_county_share20105" {
 18.                 return local title "Quartiles of 2010 share who work in co
> unty"
 19.         }
 20.         if "`var'" == "unemp_share20105" {
 21.                 return local title "Quartiles of 2010 unemployment rate"
 22.         }
 23.         if "`var'" == "teen_share2010" {
 24.                 return local title "Quartiles of 2010 share of 15-24 years
>  old residents"
 25.         }
 26.         if "`var'" == "urb_share2010" {
 27.                 return local title "Quartiles of 2010 share of urban popul
> ation"
 28.         }
 29.         if "`var'" == "youngadult_share2010" {
 30.                 return local title "Quartiles of 2010 share of 25-34 years
>  old residents"
 31.         }
 32.         if "`var'" == "worktravel_10_share20105" {
 33.                 return local title "Quartiles of 2010 share of workers com
> muting in 10 minutes"
 34.         }
 35.         if "`var'" == "worker_foodservice20105" {
 36.                 return local title "Quartiles of 2010 share of food and se
> rvice industry workers"
 37.         }
 38.         if "`var'" == "sh_mww_wmean2" {
 39.                 return local title "Quartiles of 2010 share of MW workers 
> (ACS)"
 40.         }
 41.         if "`var'" == "sh_mww_renter_wmean2" {
 42.                 return local title "Quartiles of 2010 share of MW workers 
> and renters (ACS)"
 43.         }
 44.         if "`var'" == "mww_shrenter_wmean2" {
 45.                 return local title "Quartiles of 2010 share of renters tha
> t are MW workers (ACS)"
 46.         }
 47. 
.         if "`var'" == "walall_njob_29young_ssh" {
 48.                 return local title "Workers 29 yrs or younger - workplace 
> state-level share"
 49.         }
 50.         if "`var'" == "halall_njob_29young_ssh" {
 51.                 return local title "Workers 29 yrs or younger - residence 
> state-level share"
 52.         }
 53.         if "`var'" == "walall_29y_lowinc_ssh" {
 54.                 return local title "Low income workers 29 yrs or younger -
>  workplace state-level share"
 55.         }
 56.         if "`var'" == "halall_29y_lowinc_ssh" {
 57.                 return local title "Low income workers 29 yrs or younger -
>  residence state-level share"
 58.         }
 59.         if "`var'" == "walall_29y_lowinc_zsh" {
 60.                 return local title "Low income workers 29 yrs or younger -
>  workplace zipcode-level share"
 61.         }
 62.         if "`var'" == "halall_29y_lowinc_zsh" {
 63.                 return local title "Low income workers 29 yrs or younger -
>  residence zipcode-level share"
 64.         }
 65. 
. 
. end

. 
. program plot_dd_static_heterogeneity
  1.         syntax, depvar(str) absorb(str) cluster(str) het_var(str) ytitle(s
> tr) [qtles(int 4)]
  2. 
.         eststo clear
  3.         reghdfe D.`depvar' c.d_ln_mw#i.`het_var', ///
>                 absorb(`absorb') ///
>                 vce(cluster `cluster') nocons
  4. 
.         coefplot, base graphregion(color(white)) bgcolor(white) ///
>         ylabel(1 "1" 2 "2" 3 "3" 4 "4") levels(90) ///
>         ytitle(`ytitle', size(small)) ///
>         xtitle("Estimated effect of ln MW on ln rents", size(small)) xlabel(-
> .05(.02).1)        ///
>         xline(0, lcol(black)) mc(edkblue) ciopts(recast(rcap) lc(edkblue) lp(
> dash) lw(vthin))
  5. end

. 
. program make_dd_static_heterogeneity
  1.         syntax, depvar(str) absorb(str) cluster(str) hetlist(str) [qtles(i
> nt 4)]
  2. 
.         local hetlist_qtl ""
  3.         foreach var in `hetlist' {
  4.                 local hetlist_qtl `"`hetlist_qtl' `var'_st_qtl"'
  5.         }
  6. 
.         eststo clear
  7.         foreach var in `hetlist_qtl' {
  8.                 rename `var' qtl
  9.                 eststo: reghdfe D.`depvar' c.d_ln_mw#i.qtl, ///
>                         absorb(`absorb') ///
>                         vce(cluster `cluster') nocons   
 10.                 rename qtl `var'
 11.         } 
 12. end 

. 
. program make_table_titles, rclass 
  1.         syntax, hetlist(str) 
  2. 
.         local title_list "" 
  3.         foreach var in `hetlist' {
  4.                 if "`var'" == "med_hhinc20105" {
  5.                         local title_list `"`title_list' "Median Income""'
  6.                 }
  7.                 if "`var'" == "renthouse_share2010" {
  8.                         local title_list `"`title_list' "Rental House (\%)
> ""'
  9.                 }
 10.                 if "`var'" == "college_share20105" {
 11.                         local title_list `"`title_list' "College Grad. (\%
> )""'
 12.                 }
 13.                 if "`var'" == "black_share2010" {
 14.                         local title_list `"`title_list' "African Am. (\%)"
> "'
 15.                 }
 16.                 if "`var'" == "nonwhite_share2010" {
 17.                         local title_list `"`title_list' "Non-white pop. (\
> %)""'
 18.                 }
 19.                 if "`var'" == "work_county_share20105" {
 20.                         local title_list `"`title_list' "Work in county (\
> %)""'
 21.                 }
 22.                 if "`var'" == "unemp_share20105" {
 23.                         local title_list `"`title_list' "Unemp. rate (\%)"
> "'
 24.                 }
 25.                 if "`var'" == "walall_njob_29young_ssh" {
 26.                         local title_list `"`title_list' "\shortstack{Young
>  worker,  \\ workplace}""'            
 27.                 }
 28.                 if "`var'" == "halall_njob_29young_ssh" {
 29.                         local title_list `"`title_list' "\shortstack{Young
>  worker,  \\ residence}""'            
 30.                 }
 31.                 if "`var'" == "walall_29y_lowinc_ssh" {
 32.                         local title_list `"`title_list' "\shortstack{Young
>  low-income worker,  \\ workplace}""'         
 33.                 }
 34.                 if "`var'" == "halall_29y_lowinc_ssh" {
 35.                         local title_list `"`title_list' "\shortstack{Young
>  low-income worker,  \\ residence}""'         
 36.                 }
 37. 
.         }
 38. 
.         return local title_list "`title_list'" 
 39. 
. end 

. 
. 
. *Execute 
. main 
(MWFE estimator converged in 5 iterations)

HDFE Linear regression                            Number of obs   =    112,232
Absorbing 2 HDFE groups                           F(   4,     40) =       3.24
Statistics robust to heteroskedasticity           Prob > F        =     0.0216
                                                  R-squared       =     0.0237
                                                  Adj R-squared   =     0.0125
                                                  Within R-sq.    =     0.0001
Number of clusters (statefips) =         41       Root MSE        =     0.0281

                             (Std. Err. adjusted for 41 clusters in statefips)
------------------------------------------------------------------------------
D.           |               Robust
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
med_h~st_qtl#|
   c.d_ln_mw |
          1  |   .0394661   .0223104     1.77   0.085    -.0056248    .0845571
          2  |   .0201989   .0143865     1.40   0.168    -.0088773     .049275
          3  |   .0303922    .025186     1.21   0.235    -.0205107    .0812951
          4  |   .0133221   .0129913     1.03   0.311    -.0129343    .0395785
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
  year_month |       118           0         118     |
     zipcode |      1143        1143           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation
(note: file ../output/fd_static_heter_med_hhinc20105.png not found)
(file ../output/fd_static_heter_med_hhinc20105.png written in PNG format)
(MWFE estimator converged in 5 iterations)

HDFE Linear regression                            Number of obs   =    112,232
Absorbing 2 HDFE groups                           F(   4,     40) =       3.54
Statistics robust to heteroskedasticity           Prob > F        =     0.0145
                                                  R-squared       =     0.0237
                                                  Adj R-squared   =     0.0126
                                                  Within R-sq.    =     0.0002
Number of clusters (statefips) =         41       Root MSE        =     0.0281

                             (Std. Err. adjusted for 41 clusters in statefips)
------------------------------------------------------------------------------
D.           |               Robust
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
unemp~st_qtl#|
   c.d_ln_mw |
          1  |   .0035677   .0100179     0.36   0.724    -.0166792    .0238146
          2  |    .035516   .0227754     1.56   0.127    -.0105149    .0815469
          3  |   .0268898   .0247989     1.08   0.285    -.0232307    .0770103
          4  |   .0452049   .0172882     2.61   0.013     .0102642    .0801455
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
  year_month |       118           0         118     |
     zipcode |      1143        1143           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation
(note: file ../output/fd_static_heter_unemp_share20105.png not found)
(file ../output/fd_static_heter_unemp_share20105.png written in PNG format)
(MWFE estimator converged in 5 iterations)

HDFE Linear regression                            Number of obs   =    112,232
Absorbing 2 HDFE groups                           F(   4,     40) =       2.14
Statistics robust to heteroskedasticity           Prob > F        =     0.0940
                                                  R-squared       =     0.0237
                                                  Adj R-squared   =     0.0126
                                                  Within R-sq.    =     0.0002
Number of clusters (statefips) =         41       Root MSE        =     0.0281

                             (Std. Err. adjusted for 41 clusters in statefips)
------------------------------------------------------------------------------
D.           |               Robust
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
colle~st_qtl#|
   c.d_ln_mw |
          1  |   .0372544   .0196448     1.90   0.065    -.0024491     .076958
          2  |   .0473069   .0222446     2.13   0.040     .0023489    .0922649
          3  |   .0257521   .0213841     1.20   0.236    -.0174668    .0689711
          4  |  -.0003687   .0115744    -0.03   0.975    -.0237614    .0230241
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
  year_month |       118           0         118     |
     zipcode |      1143        1143           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation
(note: file ../output/fd_static_heter_college_share20105.png not found)
(file ../output/fd_static_heter_college_share20105.png written in PNG format)
(MWFE estimator converged in 5 iterations)

HDFE Linear regression                            Number of obs   =    112,232
Absorbing 2 HDFE groups                           F(   4,     40) =       1.73
Statistics robust to heteroskedasticity           Prob > F        =     0.1620
                                                  R-squared       =     0.0237
                                                  Adj R-squared   =     0.0125
                                                  Within R-sq.    =     0.0001
Number of clusters (statefips) =         41       Root MSE        =     0.0281

                             (Std. Err. adjusted for 41 clusters in statefips)
------------------------------------------------------------------------------
D.           |               Robust
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
black~st_qtl#|
   c.d_ln_mw |
          1  |   .0177799   .0162893     1.09   0.282     -.015142    .0507018
          2  |   .0217611   .0162509     1.34   0.188    -.0110833    .0546055
          3  |   .0230675   .0133438     1.73   0.092    -.0039013    .0500362
          4  |   .0419422   .0163945     2.56   0.014     .0088076    .0750768
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
  year_month |       118           0         118     |
     zipcode |      1143        1143           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation
(note: file ../output/fd_static_heter_black_share2010.png not found)
(file ../output/fd_static_heter_black_share2010.png written in PNG format)
(MWFE estimator converged in 5 iterations)

HDFE Linear regression                            Number of obs   =    112,010
Absorbing 2 HDFE groups                           F(   4,     38) =       1.79
Statistics robust to heteroskedasticity           Prob > F        =     0.1517
                                                  R-squared       =     0.0235
                                                  Adj R-squared   =     0.0124
                                                  Within R-sq.    =     0.0001
Number of clusters (statefips) =         39       Root MSE        =     0.0281

                             (Std. Err. adjusted for 39 clusters in statefips)
------------------------------------------------------------------------------
D.           |               Robust
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
walall_29y..#|
   c.d_ln_mw |
          1  |   .0238093   .0131811     1.81   0.079    -.0028743     .050493
          2  |   .0344878    .019675     1.75   0.088    -.0053423    .0743178
          3  |    .019727   .0192483     1.02   0.312     -.019239    .0586931
          4  |    .025703   .0328875     0.78   0.439    -.0408743    .0922804
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
  year_month |       118           0         118     |
     zipcode |      1140        1140           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation
(note: file ../output/fd_static_heter_walall_29y_lowinc_ssh.png not found)
(file ../output/fd_static_heter_walall_29y_lowinc_ssh.png written in PNG format
> )
(MWFE estimator converged in 5 iterations)

HDFE Linear regression                            Number of obs   =    112,155
Absorbing 2 HDFE groups                           F(   4,     39) =       3.60
Statistics robust to heteroskedasticity           Prob > F        =     0.0136
                                                  R-squared       =     0.0236
                                                  Adj R-squared   =     0.0125
                                                  Within R-sq.    =     0.0002
Number of clusters (statefips) =         40       Root MSE        =     0.0281

                             (Std. Err. adjusted for 40 clusters in statefips)
------------------------------------------------------------------------------
D.           |               Robust
ln_med_ren~c |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
halall_29y..#|
   c.d_ln_mw |
          1  |  -.0016582   .0101494    -0.16   0.871    -.0221872    .0188709
          2  |   .0294243   .0135025     2.18   0.035      .002113    .0567356
          3  |   .0512395   .0201653     2.54   0.015     .0104512    .0920277
          4  |   .0289738   .0196542     1.47   0.148    -.0107806    .0687281
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
  year_month |       118           0         118     |
     zipcode |      1142        1142           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation
(note: file ../output/fd_static_heter_halall_29y_lowinc_ssh.png not found)
(file ../output/fd_static_heter_halall_29y_lowinc_ssh.png written in PNG format
> )
variable walall_29y_lowinc_zsh_st_qtl not found
r(111);

end of do-file
r(111);


Execute:  StataMP-64 /e do "./horse_race.do"

  ___  ____  ____  ____  ____ (R)
 /__    /   ____/   /   ____/
___/   /   /___/   /   /___/   15.1   Copyright 1985-2017 StataCorp LLC
  Statistics/Data Analysis            StataCorp
                                      4905 Lakeway Drive
     MP - Parallel Edition            College Station, Texas 77845 USA
                                      800-STATA-PC        http://www.stata.com
                                      979-696-4600        stata@stata.com
                                      979-696-4601 (fax)

Single-user 32-core Stata perpetual license:
       Serial number:  501506205566
         Licensed to:  KU Leuven FEB (CES)
                       KU Leuven

Notes:
      1.  Stata is running in batch mode.
      2.  Unicode is supported; see help unicode_advice.
      3.  More than 2 billion observations are allowed; see help obs_advice.
      4.  Maximum number of variables is set to 5000; see help set_maxvar.

. do ./horse_race.do 

. clear all

. set more off

. adopath + ../../../lib/stata/gslab_misc/ado
  [1]  (BASE)      "C:\Program Files\Stata15\ado\base/"
  [2]  (SITE)      "C:\Program Files\Stata15\ado\site/"
  [3]              "."
  [4]  (PERSONAL)  "c:\ado\personal/"
  [5]  (PLUS)      "c:\ado\plus/"
  [6]  (OLDPLACE)  "c:\ado/"
  [7]              "../../../lib/stata/gslab_misc/ado"

. adopath + ../../../lib/stata/min_wage/ado
  [1]  (BASE)      "C:\Program Files\Stata15\ado\base/"
  [2]  (SITE)      "C:\Program Files\Stata15\ado\site/"
  [3]              "."
  [4]  (PERSONAL)  "c:\ado\personal/"
  [5]  (PLUS)      "c:\ado\plus/"
  [6]  (OLDPLACE)  "c:\ado/"
  [7]              "../../../lib/stata/gslab_misc/ado"
  [8]              "../../../lib/stata/min_wage/ado"

. set maxvar 32000 


. 
. program main
  1.         local instub "../temp"
  2.         local outstub "../output"
  3. 
.         use "`instub'/fd_rent_panel.dta", clear
  4. 
.         make_results_labels, w(5)
  5.         local estlabels "`r(estlabels_with_lagged_y)'"
  6. 
.         horse_race_models, depvar(ln_med_rent_psqft_sfcc) w(5) ///
>                 absorb(year_month) cluster(statefips)
  7.         esttab * using "`outstub'/horse_race.tex", compress se replace sub
> stitute(\_ _)         ///
>                 order(F5D.ln_mw F4D.ln_mw F3D.ln_mw F2D.ln_mw FD.ln_mw D.ln_m
> w ///
>                 LD.ln_mw L2D.ln_mw L3D.ln_mw L4D.ln_mw L5D.ln_mw LD.ln_med_re
> nt_psqft_sfcc) ///
>                 coeflabels(`estlabels') ///
>                 stats(N, fmt(%9.0gc)            ///
>                 labels("Observations")) star(* 0.10 ** 0.05 *** 0.01)   ///
>                 mtitles("DiD" "\shortstack{Distributed \\ leads and lags}" "\
> shortstack{Distributed \\ Lags}" ///
>                 "\shortstack{AB Distributed \\ leads and lags}" "\shortstack{
> AB Distributed \\ Lags}" ///
>                 "\shortstack{MW Distributed \\ leads and lags}" "\shortstack{
> MW Distributed \\ Lags}") nonote
  8. end

. 
. program horse_race_models
  1.     syntax, depvar(str) w(int) absorb(str) cluster(str) 
  2.         
.     eststo clear
  3.         eststo: qui reghdfe D.`depvar' D.ln_mw, ///
>                 absorb(`absorb') vce(cluster `cluster') nocons
  4.                 
.         eststo: qui reghdfe D.`depvar' L(-`w'/`w').D.ln_mw, ///
>                 absorb(`absorb') vce(cluster `cluster') nocons
  5.                 
.         eststo: qui reghdfe D.`depvar' L(0/`w').D.ln_mw, ///
>                 absorb(`absorb') vce(cluster `cluster') nocons
  6.                 
.         eststo: qui ivreghdfe D.`depvar' L(-`w'/`w').D.ln_mw (L.D.`depvar' = 
> L2.D.`depvar'), ///
>                 absorb(`absorb') cluster (`cluster') nocons
  7. 
.         eststo: qui ivreghdfe D.`depvar' L(0/`w').D.ln_mw (L.D.`depvar' = L2.
> D.`depvar'), ///
>                 absorb(`absorb') cluster (`cluster') nocons
  8.                 
.         eststo: qui ivreghdfe D.`depvar' L(-`w'/`w').D.ln_mw (L.D.`depvar' = 
> L6.D.ln_mw), ///
>                 absorb(`absorb') cluster (`cluster') nocons
  9.                 
.         eststo: qui ivreghdfe D.`depvar' L(0/`w').D.ln_mw (L.D.`depvar' = L6.
> D.ln_mw), ///
>                 absorb(`absorb') cluster (`cluster') nocons
 10. end

. 
. 
. main
(est1 stored)
(est2 stored)
(est3 stored)
(est4 stored)
(est5 stored)
(est6 stored)
(est7 stored)
(note: file ../output/horse_race.tex not found)
(output written to ../output/horse_race.tex)

. 
end of do-file

 make.py ended: 2020-12-02 11:02:38
