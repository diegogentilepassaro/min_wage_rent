%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%                              APPENDIX                                 %%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{A dynamic supply and demand model}\label{sec:dyn_theory_model}

The geography is represented by a set of ZIP codes $\Z$.
There is an exogenously given distribution of people with differing 
residence $i$ and 
workplace $z$ locations across these ZIP codes which,
as in the main body of the paper, we denote by $\{L_{iz}\}_{i,z\in\Z\times\Z}$.

Let $H_{it}$ be the stock of square feet rented in period $t$, where $t$ is 
characterized by a month $m$ and year $y$.
This stock is composed of contracts starting at different calendar months. 
We assume that all contracts last for one year.
We impose that $H_{it} \leq S_i$ for all $t$, 
where $S_i$ denotes the total number of available square feet in $i$.

We further decompose $H_{it}$ as follows.
Let $h_{izt} = h_{iz}\left(R_{it}, \MW_{it}, \MW_{zt}\right)$ be the 
per-capita demand of housing of group $(i,z)$ in period $t$,
which depends on the prevailing MW at the time of contract sign-up.
We assume that this demand function is decreasing in residence MW and decreasing
in workplace MW, just as in Section \ref{sec:model}.
For simplicity, we omitted the mediation channels of prices and income.
Let $\lambda_{it}$ denote the share of $i$'s residents who started their contracts 
in period $t$.%
\footnote{We assume that these shares do not vary by workplace.}
Then, we can write the stock of contracted square feet during period $t$ as
$$
H_{it} = \sum_{\tau = t - 11}^{t} \lambda_{i\tau} \sum_{z\in\Z} L_{iz} 
h_{iz\tau} (r_{i\tau}, \MW_{i\tau}, \MW_{z\tau})
$$
where 
$r_{i\tau}$ represents rents \textit{per square foot} in period $\tau$.
It is convenient to define the stock of contracted square feet excluding the ones 
that were signed 12 months ago. We denote them by
$$
\tilde H_{it} = \sum_{\tau = t - 10}^{t} \lambda_{i\tau} \sum_{z\in\Z} L_{iz} 
h_{iz\tau} (r_{i\tau}, \MW_{i\tau}, \MW_{z\tau}) .
$$

We assume that all square feet are homogeneous, and so they have the same price 
in the market.

\subsection*{Within-period equilibrium}

Within this simple model, we assume the following timing: 
(1) At the beginning of period $t$, a share $\lambda_{it}$ of people's contracts 
expire (the ones that started on $t-12$);
(2) The square feet from expiring contracts are added to the pool of available 
rental space for new renters;
(3) Renters in $t$ and a flow supply of rental space in $t$ determine equilibrium 
rents $R_{it}$.
We now develop each of these steps more formally.

As of the start of every period $t$, $\lambda_{i,t-12} \sum_z L_{iz} h_{iz,t-12}$ 
square feet become available for rent from each group of workers $(i,z)$.
The square feet available to rent in period $t$ (vacant) are then
$$
\lambda_{i,t-12} \sum_z L_{iz} h_{iz,t-12} + (S_i - H_{i,t-1}) = S_i - \tilde H_{i,t-1}.
$$
Note that $(S_i - H_{i,t-1})$ are the non-rented square feet as of $t-1$.

We denote by $V_{it}(R_{it}, \lambda_t)$ the supply of housing, increasing in 
$R_{it}$.
A feasibility constraint is that 
\begin{equation}\label{eq:feasibility}
    V_{it}(R_{it}, \lambda_t) \leq S_i - \tilde H_{i,t-1} .
\end{equation}

The flow demand for new rentals in $t$ by those whose contract expired is given by
$$
\lambda_{it} \sum_z L_{iz} h_{izt} \left(R_{it}, \MW_{it}, \MW_{zt} \right) .
$$
This demand arises because a share of the ZIP code's contracts expired. 
Those people go to the market and may desire to rent more square feet given changes 
in their income.

The market in period $t$ cleans if
\begin{equation}\label{eq:equilibrium_dynamic}
    \lambda_t \sum_z L_{iz} h_{iz} \left(R_{it}, \MW_{it}, \MW_{zt} \right) = 
    V_{it}(R_{it}, \lambda_t) .
\end{equation}
Given minimum wages in $t$, $\{\MW_{it}\}_{i\in\Z}$,
the share of workers looking to rent in period $t$, $\lambda_t$, 
and a number of vacancies that satisfies \eqref{eq:feasibility}, 
equation \eqref{eq:equilibrium_dynamic} determines equilibrium rents in period $t$.
Because the properties of housing demand and housing supply are the same as in the
model in Section \ref{sec:model},
the equilibrium condition \eqref{eq:equilibrium_dynamic} implies an analogue of 
Propositions \ref{prop:comparative_statics} and \ref{prop:representation}.


\clearpage
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Matching census blocks to USPS ZIP codes}
\label{sec:blocks_to_uspszip}

One challenge of this project is that LODES data on commuting patterns are 
aggregated at the census-block level of the 2010 US Census.
However, Zillow data are aggregated at the level of \textit{USPS ZIP codes},
and census blocks and USPS ZIP codes are not nested.
In this appendix we describe the steps we took to construct a correspondence
table between these geographies.

First, we collected the GIS map of 11,053,116 census blocks from 
\textcite{cbTiger} and computed their centroids.
Second, we assigned each block to a unique USPS ZIP code using the GIS map 
from \textcite{ESRI} based on assigning to each block the USPS ZIP code 
that contains its centroid.
If the centroid falls outside the block, we pick a point inside it at random.
We assigned 11,013,203 using the spatial match (99.64 percent of the total).%
\footnote{545,566 of ZIP codes assigned via spatial match use 
a point of the census block picked at random (4.94 percent of the total).}
Third, for the blocks that remain unassigned we used the 
tract-to-USPS-ZIP-code correspondence from \textcite{hudCrosswalks}.
Specifically, for each tract we keep the USPS ZIP code where the largest number 
of houses of the tract fall, and we assign it to each block using the tract 
identifier.
We assigned 22,819 blocks using this approach (0.21 percent).
There remain 17,094 unassigned blocks (0.15 percent), which we drop from the 
analysis.
This creates a unique mapping from census blocks to USPS ZIP codes.

In the end, there are 11,036,022 census blocks which are assigned to 31,754 
ZIP codes, implying an average of 347.55 census blocks per ZIP code.
Thus, even though there may be blocks that go beyond one ZIP code, 
we expect the error introduced by this process to be very small.

%% DGP: Reminder to document these numbers!

\clearpage
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Assigning minimum wage levels to ZIP codes}
\label{sec:assigning_mw_levels}

Our main rents data is aggregated at the level of the USPS ZIP code.
To match this geographical level, we assign statutory MW levels to ZIP codes.
ZIP codes usually cross jurisdictions, and as a result parts of them
are subject to different statutory MW levels.
Trying to overcome this problem, we assign averages of the relevant statutory MW 
levels to each ZIP code.

We proceed as follows.
First, we collect a census crosswalk constructed by \parencite{CensusLODES} that 
contains, for each block, identifiers for block group, tract, county, CBSA 
(i.e., core-based statistical area), place (i.e., census-designated place), and 
state.
Second, we assign the MW level of each jurisdiction to the relevant block.
We use the state code for state MW policies, and we match local MW policies 
based on the names of the county and the place.
We define the statutory MW at each census block as the maximum of the federal,
state, county, and place levels.
Then, based on the original correspondence table described in Appendix 
\ref{sec:blocks_to_uspszip}, we assign a ZIP code to each block.
Finally, we define \textit{the statutory MW} at ZIP code $i$ and month $t$, 
$\MW_{it}$, as the weighted average of the statutory MW levels in its
constituent blocks, where the weights are given by the number of housing 
units.%
\footnote{ZIP codes between 00001 and 00199 correspond to federal territories.
Thus, we assign as statutory MW the federal level.}
For ZIP codes that have no housing units in them, such as those corresponding to 
universities or airports, we use a simple average instead.

\subsubsection*{Locating Minimum Wage Earners}

We approximate the share of people that earn at or below the MW as follows.
First, we collect data on the number of workers in each \textit{census tract}
from the 5-year 2010-2014 American Community Survey \parencite[ACS;][]{CensusACS}.
Using our assignment of hourly statutory MW in January 2014 we compute 
the total yearly wage of a full-time worker earning the MW in each 
\textit{census tract}, which we denote by $\underline{YW}$.%
\footnote{We use the definition of full-time workers from \textcite{IRSfulltime}.
Specifically, we assume that a full-time employee works for 130 hours per week
for 12 months.}
We keep track of what wage bin $\underline{YW}$ falls into.
We estimate the number of MW earners in a tract as the total number of workers 
in all bins below that one plus a fraction of the total number of workers in 
that bin given by 
$\left(\underline{YW} - b_\ell\right)/\left(b_h - b_\ell\right),$
where $b_h$ and $b_\ell$ represent the upper and lower limits of 
the bin.
We impute the tract estimates to ZIP codes proportionally to the share of 
houses in each tract that fall in every ZIP code the tract overlaps with.%
\footnote{More precisely, we compute a tract to ZIP code correspondence from
the LODES correspondence between blocks and tracts, available in 
\parencite{CensusLODES}, and the geographical match between blocks and ZIP codes
in Appendix \ref{sec:blocks_to_uspszip}.
For each tract, we compute the share of houses that fall in each ZIP code, and 
we assume that the share in the tract-ZIP code combination equals the share of
houses times the estimated number of MW workers in the tract.}
Finally, we compute the share of MW workers who reside in each ZIP 
code dividing our estimate of the number of MW workers by the total
number of workers in the data.

Due to limitations in the ACS data, it is not possible to use the same approach 
to estimate the workplace location of workers.

\clearpage
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Measuring housing expenditure at the ZIP code level}
\label{sec:measure_housing_expenditure}

For our counterfactual exercises we require several pieces of information.
First, to estimate the overall incidence of a MW policy we need the levels 
of total wages and total housing expenditure in each location.
Second, to estimate the ZIP code-specific incidence, we require a housing 
expenditure share that varies by ZIP code.
We construct these measures for 2018 using data from the \textcite{IRS} and
the \textcite{hudSAFMR}.

To construct these data we start by collecting the following variables.
We approximate the levels of total wages and housing expenditure using per 
household variables.
From the IRS we obtain annual wage per household, which we 
divide by 12 to obtain a monthly measure.
From the HUD, we use the 2-bedroom SAFMR series as our monthly housing 
expenditure variable.%
\footnote{Average rents in a location would be better approximated as a
weighted average of rents for houses with different number of bedrooms,
weighted by the share of households that rent each type of housing.
However, these data are not publicly available.}
We define the ZIP code-specific housing share as the ratio of these two 
variables.

The computed variables have several missing values across the board, and 
small percentage of missing values within urban CBSAs 
(as defined in Table \ref{tab:stats_zip_samples}).
We impute missing values independently for each variable using an OLS
regression based on sociodemographic characteristics of each ZIP code 
(including data from the US Census and LODES) and CBSA by county fixed effects.
To limit the influence of outliers, we winsorize the results at the 0.5th and 
99.5th percentiles. 
The percentage of urban ZIP codes with non-imputed housing expenditure shares 
is $93.23$.
%% Documented in analysis/expenditure_shares/share_missing_s.txt

\clearpage
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Identification in a potential outcomes framework}
\label{sec:potential_outcomes}

Following Section \ref{sec:model}, we assume that the effect of MW policies 
across locations can be summarized in the residence and workplace MW measures.
Thus, we consider the following causal model
\begin{equation}\label{eq:causal_model}
    r_{it} = r_{it}(\mw_{it}^{\res}, \mw_{it}^{\wkp}) .
\end{equation}

For this section we consider the following data:
$\left\{\{r_{it}, \mw^{\res}_{it}, \mw^{\wkp}_{it}\}
       _{t=\underline{T}}^{\overline{T}}\right\}_{i\in\Z}$,
where monthly dates run from $\underline{T}$ to $\overline{T}$ for every unit,
and $\Z$ is the set of ZIP codes.
We assume that the data are $iid$.
We impose no anticipation, so units do not change their pretreatment outcome 
given future changes in the MW measures.

In every month in which some jurisdiction changing the level of the MW there 
will be units that are treated directly and units that are treated indirectly.
We follow \textcite{AngristImbens1995, CallawayEtAl2021} to define the 
treatment effects of interest.
We denote a unit's causal response to the residence MW as
$\partial r_{it}(\mw_{it}^{\res}, \mw_{it}^{\wkp})/\partial \mw_{it}^{\res} ,$
and to the workplace MW as 
$\partial r_{it}(\mw_{it}^{\res}, \mw_{it}^{\wkp})/\partial \mw_{it}^{\wkp} .$
Let the federal MW level be $\mw^{\fed}$.

\begin{definition}[Treatment Effects]\label{def:treatment_effects}
    Consider a group with a residence MW level of $w^{\res}$ and a workplace
    MW level of $w^{\wkp}$.
    Focus on the effect of the workplace MW.
    The average treatment effect on that group is
    \begin{equation*}
        ATT^{\wkp}(w^{\wkp} | w^{\res}, w^{\wkp}) 
            = \E\left[r_{it}(w^{\res}, w^{\wkp}) - r_{it}(w^{\res}, \mw^{\fed}) 
                    \big| w^{\res},  w^{\wkp}\right] .
    \end{equation*}
    The average causal response of the same group to the workplace MW is given by
    \begin{equation*}
        ACRT^{\wkp}(w^{\wkp} | w^{\res}, w^{\wkp}) 
            = \frac{\partial \E\left[r_{it}(w^{\res}, l) |  w^{\res}, w^{\wkp}\right]}
                    {\partial \mw^{\wkp}} \Bigg|_{l=w^{\wkp}} .
    \end{equation*}
    These treatment effects may be heterogeneous across the joint distribution 
    of the residence and workplace MW.
    The average causal response across all groups treated with different 
    levels of the workplace and residence MW is
    \begin{equation*}
        ACR^{\wkp}(w^{\wkp}) = \frac{\partial \E\left[r_{it}(w^{\res}, w^{\wkp}) \right] }
                                    {\partial w^{\wkp}} .
    \end{equation*}
    We consider analogous parameters for the residence MW: $ATT^{\res}$, 
    $ACRT^{\res}(w^{\res} | w^{\res}, w^{\wkp})$, and $ACR^{\res}(w^{\res})$.
\end{definition}

Our main interest lies in the rent gradient to the MW, i.e., the 
average causal response of rents to each of the MW measures.
For that, we make a parallel trends assumption.

\begin{assu}[Parallel trends] \label{assu:PT}
    We assume that, for all levels of $w^{\res}$ and $w^{\wkp}$,
    \begin{align*}\label{eq:PT}
        \E\big[r_{it}(\mw^{\fed}, \mw^{\fed}) - & r_{i,t-1}(\mw^{\fed}, \mw^{\fed}) 
                \big| w^{\res}, w^{\wkp} \big] \\
        & = \E\big[r_{it}(\mw^{\fed}, \mw^{\fed}) - r_{i,t-1}(\mw^{\fed}, \mw^{\fed})
                \big| w^{\res}, \mw^{\fed} \big] \\
        & = \E\Big[r_{it}(\mw^{\fed}, \mw^{\fed}) - r_{i,t-1}(\mw^{\fed}, \mw^{\fed})
                \big| \mw^{\fed}, w^{\wkp} \big] .
    \end{align*}
\end{assu}

Assumption \ref{assu:PT} states that the untreated outcomes evolve in parallel 
for ZIP codes experiencing treatment levels $w^{\res}$ and $w^{\wkp}$ and 
(a) ZIP codes with the same level of the residence MW but unchanged workplace MW and
(b) ZIP codes with the same workplace MW but unchanged residence MW.
We further maintain a second assumption.

\begin{assu}[No selection on gains] \label{assu:no_selection}
    We assume that
    \begin{equation*}\label{eq:no_selection_workplace}
        \frac{\partial ATT^{\wkp}(w^{\wkp} | w^{\res}, l)}
             {\partial \mw^{\wkp}} \Big|_{l = w^{\wkp}} = 0
        \quad\text{\textit{ and }}\quad
        \frac{\partial ATT^{\res}(w^{\res} | l, w^{\wkp})}
             {\partial \mw^{\res}} \Big|_{l = w^{\res}} = 0 .
    \end{equation*}
\end{assu}

To identify $ACRT^{\wkp}$ we will compare ZIP codes that received similar levels 
of the residence MW and different levels of the workplace MW.
Analogous comparisons of ZIP codes with different residence MW and similar 
workplace MW will idenfity $ACRT^{\res}$.

\begin{prop}[Identification]\label{prop:PO_identification}
    Under assumption \ref{assu:PT} we have that
    \begin{equation*}
        \frac{\partial \E\left[r_{it}(w^{\res}, w^{\wkp}) | w^{\res}, w^{\wkp}\right]}
        {\partial w^{\wkp}} 
       = ACRT^{\wkp}(w^{\res} | w^{\res}, w^{\wkp}) 
          + \frac{\partial ATT^{\wkp}(w^{\res} | w^{\res}, l)}{\partial w} \Big|_{l = w^{\res}} .
    \end{equation*}
    Furthermore, if Assumption \ref{assu:no_selection} holds, then
    \begin{equation*}
        \frac{\partial \E\left[r_{it}(w^{\res}, w^{\wkp}) | w^{\res}, w^{\wkp}\right]}
        {\partial w^{\wkp}} 
       = ACRT^{\wkp}(w | w^{\res}, w) .
    \end{equation*}
    Analogous expressions hold for the residence MW.
\end{prop}
\begin{proof}
    The setting is analogous to \textcite{CallawayEtAl2021} but with two 
    treatment variables.
    The proof is analogous as well, with the only difference being that one 
    must condition on the residence MW when deriving the expression for the 
    workplace MW, and viceversa.
\end{proof}

As extensively discussed by \textcite{CallawayEtAl2021}, Assumption \ref{assu:PT} 
is not enough to identify the average causal response in the context of 
continuous treatments.
The gradient of our rents function for the group $(w^{\res}, w^{\wkp})$ is a mix
of the average causal response of interest and a ``selection bias'' term that
captures the fact that the treatment for the particular group that received
$(w^{\res}, w^{\wkp})$ may be different for other groups at that level of 
treatment.
Assumption \ref{assu:no_selection} imposes that those selection bias
terms are zero.%
\footnote{There are several alternatives to this assumption. 
See \textcite[][Section 3.3]{CallawayEtAl2021} and discussion therein.}

Will this assumption hold?
Because we maintain that commuting shares are fixed, workers are not allowed
to change location right at the moment of treatment.
Any selection then must be based on historical reasons.
It is unlikely that workers would have selected in the past in such a way that 
will cause the selection bias term to have a particular shape across the 
distribution of residence and workplace MW levels.
They would need to anticipate the future MW policies and how they would affect
the future rental market.
The view that worker's sorting is approximated by a random process for ZIP codes 
that receive similar levels of the residence and workplace MW 
(and thus are compared to identify the causal response parameters) 
seems more plausible.


\clearpage
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Estimation of the effect of the MW on ZIP code-level wages}
\label{sec:mw_on_income}

Our main data source to estimate the effect of the MW on wage income are
the yearly ZIP code aggregates from \textcite{IRS}.
Thus, we construct a ZIP code by month panel where we collect, for each ZIP code
and year between 2010 and 2018, IRS income aggregates, the yearly average of our 
MW measures, and the yearly average of our QCEW variables. 
See Section \ref{sec:data} for details on the construction of these data.

We estimate versions of
\begin{equation*}\label{eq:wage_level_model}
    y_{it} = \gamma_i + \psi_t + \varepsilon \overline{\mw_{it}^{\wkp}} + 
                 \overline{\mathbf{X}^{'}_{it}}\eta + \nu_{it} ,
\end{equation*}
where 
$y_{it} = \log Y_{it}$ is the log of total wages at ZIP code $i$ in year $t$,
$\gamma_i$ and $\psi_t$ are ZIP code and year fixed effects,
$\overline{\mw_{it}^{\wkp}}$ is the yearly average of the workplace MW,
$\overline{\mathbf{X}^{'}_{it}}$ represents the yearly average of economic 
controls, and
$\nu_{it}$ is an error term.
Sometimes we interact the year fixed effects with indicators for different
geographies.
We use a level model because it is not feasible to take monthly first differences 
with yearly data.
A yearly model estimated with monthly averaged variables is identified under the 
same assumptions as the corresponding monthly model.
%%
%% Note that here we can think of $y_{it}$ as the monthly average of yearly 
%%    wages and everything works out
%%

Appendix Table \ref{tab:static_wages} shows estimates of $\varepsilon$ for 
different specifications of the model given in \eqref{eq:wage_level_model}.
Columns (1) through (3) estimate the effect of the workplace MW on log total
wages under different specifications.
The estimates of $\varepsilon$ fluctuate between 0.1083 and 0.1488.
Our preferred specification in column (3) suggests that a 10 percent increase
in the workplace MW generates a 1.08 percent increase in total wages.
These estimates are consistent with those in \textcite{CegnizEtAl2019}.
\textcite[][Table I]{CegnizEtAl2019} estimates that a MW event increases wages
by 6.8 percent, and in their data the average MW event represents an increase in 
the statutory MW of 10.1 percent.
For illustration, assume that 15 percent of workers in a location earn the
minimum wage.
Then, \citeauthor{CegnizEtAl2019}'s (\citeyear{CegnizEtAl2019}) estimates imply 
that a 10 percent increase in the MW will increase total wages by 
$(6.8/10.1)\times 10\times 0.15 \approx 1.01$ percent.

Column (4) of Appendix Table \ref{tab:static_wages} replicates column (3)
but interacts the workplace MW measure with the standarized share of MW workers
estimated as explained in Appendix \ref{sec:assigning_mw_levels}.
As expected, we find that a higher share of MW workers makes the effect of
workplace MW increases larger.
Column (5) of Appendix Table \ref{tab:static_wages} shows, as a falsification
test, estimates of the same model as in column (3) but using the log of total
dividends as dependent variable.
We obtain a positive but much lower effect that is statistically 
indistinguishable from zero, suggesting that dividends do not respond to the 
MW as wages do.
