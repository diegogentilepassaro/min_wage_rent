%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%                         EMPIRICAL STRATEGY                             %%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

In this section, we present the empirical strategy adopted to study the effect of MW 
on rents and we discuss the assumptions required for identification of the effect of 
interest. We begin with a \textit{static} difference-in-differences (DiD) specification 
that imposes no dynamics in the effects. To ease concerns of contemporaneous shocks 
systematically affecting both changes in rents and the MW within a zipcode, we 
directly control for several county-level time-varying proxies of the health of the 
local labor and housing markets.\footnote{Economic controls that vary at the zipcode 
	and	monthly date levels are not readily available. As a second best we use data 
	from the QCEW that vary at county-month and county-quarter levels. We map each 
	zipcode to a single county as explained in \autoref{sec:data}.} 

This static model has several shortcomings that motivate the inclusion of leads and 
lags of MW changes. This \textit{dynamic} model both allows the effect to persist for 
more than one period and permits a test of the underlying parallel-trends assumption. 
One may also worry that the dependent variable presents auto-correlation, which would 
imply bias in our estimates. To account for this possibility we present a 
panel-specification that includes the lagged dependent variable following 
\textcite{ArellanoBond1991} and related literature. We test the robustness of our 
results by adding zipcode-level linear and quadratic trends as non-parametric 
controls of local dynamics. 

Our specifications are distinct from the usual event-study models used 
commonly in the literature \parencite[discussed in, e.g.,][]{BorusyakJaravel2017, 
abraham2018}. First, while traditional event-study models struggle to allow for 
units treated more than once, our models allow for this possibility. Secondly, 
our model allows for the inclusion of never-treated units, which aid in the 
identification of time-period effects diminishing concerns of under-identification 
\parencite{BorusyakJaravel2017}. Finally, our specifications identify the treatment 
effect of minimum wages on median rents exploiting not only the timing of a MW change 
but also its intensity.
    
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{A static model}
Consider the following two-way fixed effects model relating rents and the minimum wage.

\begin{equation*} \label{eq:did_lev}
    y_{ict} = \alpha_i + \hat{\delta}_t 
    		+ \beta \underline{w}_{ict} 
    		+ \mathbf{X}^{'}_{ct}\eta 
    		+ \varepsilon_{it} \ .
\end{equation*}    
where $y_{ict}$ is the log rent per square foot for the Zillow SFCC series in zipcode 
$i$ county $c$ month $t$, $\underline{w}$ is the log of the minimum wage, $\alpha_i$ and 
$\hat{\delta}_t$ are zipcode and monthly date fixed effects, respectively, and 
$\mathbf{X}_{ct}$ is a vector of county-level time-varying controls. Time runs from 
$\underline{T} = \text{January 2020}$ to $\overline{T} = \text{December 2019}$. By taking 
first differences on this expression we obtain our main \textit{static} model given by
    
\begin{equation}\label{eq:did}
	\Delta y_{ict} = \delta_t
				   + \beta \Delta \underline{w}_{ict}
				   + \Delta \mathbf{X}^{'}_{ct} \eta
				   + \Delta \varepsilon_{ict} \ ,
\end{equation}
where $\delta_t = \hat{\delta}_t - \hat{\delta}_{t-1}$, and $\beta$ can be interpreted 
as the elasticity of rents to the MW. We spell out the model in first differences because 
we believe that the unobserved shocks to rental prices are likely to be persistent over 
time. Both the first differences and the level models are consistent under similar assumption 
but the first difference model is more efficient if the shocks are serially correlated.
%% ADD TEST FOR SERIAL CORRELATION OF ERROR TERM IN APPENDIX AND REFERENCE HERE

Estimates of the parameter $\beta$ can be interpreted casually under the assumption of
\textit{strict exogeneity}. That is, we require the unobserved shock to be uncorrelated
with past and present values of the minimum wage \parencite[][chapter 10]
{wooldridge2010}.\footnote{To be more precise, we assume that in every period $t$ the set of 
	conditions 
	$$E[\Delta \underline{w}_{ic\tau} \Delta \varepsilon_{ict} | I_t, \Delta \mathbf{X}_{ct}] = 0
	\ \ \ \forall \tau \in \{\underline{T}, ..., \overline{T}\}$$
	hold, where $I_t$ is a time period indicator.}
This assumption has two important implications. First of all, it implies no pre-trends in 
rents leading up to a minimum wage change (conditional on controls). We will test this 
implication more formally by including leads of the minimum wage. The assumption also implies
no dynamic effects of the MW on rents, which is added easily by including lags of the MW 
variable. Secondly, this assumption rules out feedback effects from current values of rents 
on our controls, i.e., MW changes are assumed not to be influenced by past values of rents. 
While we think this is a reasonable assumption (minimum wages are usually not set by considering 
their effects on the housing market), we allow this type of feedback effects in our panel 
specifications described in the upcoming subsection. Importantly, our identifying assumption 
allows for arbitrary correlation between the zipcode effects $\alpha_i$ and minimum wages 
--e.g., our empirical strategy is robust to the fact that richer districts tend to vote for 
MW policies.

%within a zipcode, the change of the logarithm of the minimum wage $\Delta 
%\underline{w}_{it}$ is mean independent of the change in the unobserved shock 
%$\Delta \varepsilon_{it}$ conditional on the controls.

We worry that unobserved shocks may systematically affect both rents and minimum wage 
changes, such as economic cycles at the local level. We deploy two strategies to account 
for those. First of all, we include economic controls from the Quarterly Census of 
Employment and Wages. These data are aggregated at the county level, and represent a 
second best given the unavailability of controls at the zipcode level. Specifically, we 
use average weekly wages, employment and establishment count for the sectors 
``Professional and business services'', ``Information'', and ``Financial activities''. 
We assume that these sectors are not affected by the minimum wage.\footnote{SOME ARGUMENT
	ON WHY THIS ASSUMPTION IS LIKELY TO HOLD.}
We believe that these controls plausibly capture variation arising from unobserved trends 
in the rental market. Secondly, we present results from models with zipcode-specific linear 
and quadratic trends in the appendix. This accounts for unobserved heterogeneity not 
captured by our economic controls that follows this pattern.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Dynamic models}

One potential concern with the static model is that, despite controlling for economic 
factors or zipcode-specific trends, preexisting time-paths of rents per square foot might 
be different in zipcodes that had a MW change relative to zipcodes that did not experience 
a change due to either economic shocks not captured by our controls or anticipatory effects 
in the supply of rentals. In order to assess whether pre-trends are present we extend our 
static model with leads and lags of our minimum wage variable. In addition, one may be 
believe that the effect of MW changes on rents is not a one-time discrete level jump but 
that it has persistence. In such cases the estimated coefficient $\beta$ from \autoref{eq:did} 
might only have limited relevance for evaluating the policy of interest 
\parencite{callaway2019}. Extending the model with leads and lags of the MW allows us to 
explore this possibility as well. The \textit{dynamic} difference-in-differences model is

\begin{equation} \label{eq:leads_lags}
	\Delta y_{ict} = \delta_t
				  + \sum_{r=-s}^{s} \beta_r \Delta \underline{w}_{ic,t+r}
    			  +  \Delta X^{'}_{ct}\eta
    			  + \Delta \varepsilon_{ict} \ ,
\end{equation}
where $s$ is the number of months of a symmetric window around the MW change. Our baseline
specification sets $s = 5$. We show in the appendix that our results are very similar for
$s \in \{3, 6, 9\}$. Results hold for larger values of $s$. However, increasing $s$ implies dropping observations at the start and the end of the panel, which decreases our sample size and makes the results less reliable.

Importantly, this model allows us to test whether $\beta_{-s} = \beta_{-s+1} = ... 
= \beta_{-1} = 0$. Under the assumption that the supply of rentals is fixed in the short-run, 
we interpret the absence of pre-trends as evidence against the presence of unobserved economic 
shocks driving our results. We think that, given the high frequency of our data, the 
assumption of fixed supply is reasonable. We further present evidence in favor of this 
assumption by showing that MW changes do not predict the number of listings of houses for sale 
in Zillow.\footnote{Ideally, we would run this regression on the number of rental units. 
	Unfortunately, this information is not available.}

Imposing the assumption of no pre-trends, we can gain efficiency by estimating a model with 
distributed lags only. %\footnote{Such a model can be written as
	%$$ \Delta y_{it} = \delta_t
	%				 + \sum_{r=0}^{s}\beta_r \Delta \underline{w}_{i(t-r)}
	%				 + \Delta X^{'}_{ct}\eta
	%s				 + \Delta \varepsilon_{it} \ .$$}
The identifying assumption has a similar flavor to the static model: we now require the 
unobserved shock to be uncorrelated with past and present values of MW changes conditional 
on the entire set of leads and lags. That is, for $I_t$ a time period indicator, we assume 
that
\begin{equation*}\label{eq:identifying-lags}
	E\left[\Delta \underline{w}_{ic \tau} \Delta \varepsilon_{ict} | 
			I_t, \Delta \mathbf{X}_{ct}, \{\underline{w}_{ic,t+r}\}_{r=0}^s \right] = 0
	\ \ \ \forall t \in \{\underline{T}, ..., \overline{T} - s\} 
\end{equation*}
holds for all periods $t$.

%% SH: Make sure this condition is right guys. We should write down the math to be sure

This model allows us to estimate the dynamics of the logarithm of the rent per square foot 
around changes in the MW. Now, the elasticity of rents to MW is defined as $\sum_{r=0}^s 
\beta_r$. We present estimates for both the individual coefficients and the cumulative sum 
in the results section. 

% SH: Following Jesse's suggestion I comment out the below. I think that, once we run the model
%     at different levels of aggregation, we should write a brief appendix and point the reader 
%     to it for more discussion on why our results differ

%In past settings using yearly data \parencite{Tidemann2018, Yamagishi2019}, MW changes are so common 
%in a given geographic area relative to the timespan of the data that it is very hard to credibly 
%estimate the lags. Intuitively, this is the case because it is hard to distinguish which variation 
%of the rental price is due to the current MW change or to a preceding one. In our estimates that 
%concern is not justified, as given that we have month to month variation, we use short windows 
%(5 months) in which there is no overlap in MW changes within a zipcode. 

As mentioned in \autoref{sec:data}, part of the variation in the median rental price arises 
from unobserved changes in the Zillow inventory for a given zipcode through time. This may 
pose a threat to identification in the case which changes to MW directly affect the composition 
of rentals posted on the platform in a given zipcode-month period. Such concerns are partly 
mitigated by directly controlling for county-level time-varying housing market conditions. We 
additionally investigate the issue by leveraging the richer set of information Zillow provides 
on houses listed \textit{for sale}. Specifically, we can track the number of houses listed for 
sale in the selected zipcodes during the period 2013-2019 for our preferred house type (SFCC). 
We use such series to run a placebo regression where we estimate \autoref{eq:did} and 
\autoref{eq:leads_lags} using the (log) change in listings as outcome variable. Significant 
effects of MW changes, or pronounced pre-trends will indicate that policy changes actually 
affect the Zillow inventory composition and cast doubt on the identifying assumption.

Finally, in our appendix, we consider a dynamic panel specification that includes the lagged
dependent variable as a control. Such a model has two important advantages. First and most 
important, it accounts for the possibility of auto-correlation in the rents variable that 
would bias our results. This is in fact a possibility, given that some listings likely remain 
in the Zillow data for more than one month. Secondly, it allows us to relax the strict 
exogeneity assumption \parencite{ArellanoHonore2001}. The less stringent \textit{sequential 
exogeneity} assumption allows for feedback effects of minimum wages on rents. The model 
can be written as

\begin{equation}\label{eq:ab_panel}
	\Delta y_{ict} = \delta_t
				   + \sum_{r=0}^{s} \beta_r \Delta \underline{w}_{ic,t+r}
				   + \gamma \Delta y_{ic,t-1} + \Delta \mathbf{X}^{'}_{ct}\eta
				   + \Delta \varepsilon_{ict} \ ,
\end{equation}

In here, we are also interested in the parameter $\gamma$ since, per the properties of time
series, the long run effect of minimum wages on rents is given by 
$(\beta_0 + \beta_1)/\gamma$. %% SH: Make sure this is the case. DO THE MATH
Estimation is not that straightforward, however, since by construction we now have that 
$\Delta y_{ic,t-1}$ is correlated with the error term. To address that, we take two separate 
approaches. First, we follow \textcite{ArellanoBond1991} %% SH: Is this the paper we want to cite? Make sure
and, as it is customary in the literature, we instrument $\Delta y_{ic,t-1}$ with
$\Delta y_{ic,t-2}$. Second, we follow \textcite{MeerWest2016} and instrument 
$\Delta y_{ic,t-1}$ with an off-window lag of the change in the logarithm of the MW. 
In particular, as most of our models have a window $s=5$, we use as an instrument 
$\Delta \underline{w}_{ic,t-6}$. Intuitively, if there is an effect of MW changes to 
rents past MW changes should predict future rents and past MW changes should not be 
correlated with contemporaneous unobserved determinants of rents once we take into account 
the dynamic effect of MW on rents. 


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Heterogeneity by Zipcode Characteristics}

We extend the baseline panel difference-in-differences model defined in \autoref{eq:did} 
by interacting the local MW change variable with dummies for the zipcode belonging to each 
quartile of zipcode level distribution over some characteristic. This allows us to 
test for heterogeneous effects of MW changes based on zipcode characteristics, therefore
assessing whether our effects are driven by zipcodes that are expected to have more 
MW workers. The model is

\begin{equation}\label{eq:diff_main_hetero} 
    \Delta y_{it} = \theta_t + \gamma_i 
    		+ \sum_{q = 1}^4 \beta_q \mathds{1}\{i \in q\} \Delta \underline{w}_{it} 
    		+ \Delta \varepsilon_{it} \ ,
\end{equation}
where $q$ identifies quartiles of some zipcode level characteristic, and $\mathds{1}\{ \cdot \}$ is 
the indicator function. We report results for these models in \autoref{sec:heter}.

To minimize any type of concern about zipcode characteristics being endogenous to MW changes, 
we use use socio-demographic data from the 2010 Census and the 5-years 2008-2012 ACS that predate 
our panel.
