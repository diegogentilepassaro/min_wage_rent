%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%                         EMPIRICAL STRATEGY                            %%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Potential Outcomes Framework}

Following Section \ref{sec:model}, we assume that the effect of MW policies 
across locations can be summarized in the residence and workplace MW measures.
Thus, we consider the following causal model
\begin{equation}\label{eq:causal_model}
    r_{it} = r_{it}(\mw_{it}^{\res}, \mw_{it}^{\wkp}) .
\end{equation}

Our data consists of $\{r_{it}, \mw^{\res}_{it}, \mw{\wkp}_{it}, X_{it}\}_{i,t}$,
although for this section we abstract away from the covariates.
We assume that the data are $iid$ and we impose no anticipation, so units 
do not change their pretreatment outcome given future changes in the MW 
measures.
In every month with some jurisdiction changing the level of the MW there will 
be units that are treated directly and units that are treated indirectly.
We follow \textcite{AngristImbens1995, CallawayEtAl2021} to define the 
treatment effects of interest.
We denote a unit's causal response to the residence MW as
$\partial r_{it}(\mw_{it}^{\res}, \mw_{it}^{\wkp})/\partial \mw_{it}^{\res} ,$
and to the workplace MW as 
$\partial r_{it}(\mw_{it}^{\res}, \mw_{it}^{\wkp})/\partial \mw_{it}^{\wkp} .$
We denote the federal MW level as $\mw^{\fed}$.

\begin{definition}[Treatment Effects]\label{def:treatment_effects}
    Consider a group with a residence MW level of $w^{\res}$ and a workplace
    MW level of $w^{\wkp}$.
    Focus on the effect of the workplace MW.
    The average treatment effect on that group is
    \begin{equation*}
        ATT^{\wkp}(w^{\wkp} | w^{\res}, w^{\wkp}) 
            = \E\left[r_{it}(w^{\res}, w^{\wkp}) - r_{it}(w^{\res}, \mw^{\fed}) 
                    \big| w^{\res},  w^{\wkp}\right] .
    \end{equation*}
    The average causal response of the same group to the workplace MW is given by
    \begin{equation*}
        ACRT^{\wkp}(w^{\wkp} | w^{\res}, w^{\wkp}) 
            = \frac{\partial \E\left[r_{it}(w^{\res}, l) |  w^{\res}, w^{\wkp}\right]}
                    {\partial \mw^{\wkp}} \Bigg|_{l=w^{\wkp}} .
    \end{equation*}
    These treatment effects may be heterogeneous across groups.
    The average causal response across all groups treated with different 
    levels of the workplace and residence MW is
    \begin{equation*}
        ACR^{\wkp}(w^{\wkp}) = \frac{\partial \E\left[r_{it}(w^{\res}, w^{\wkp}) \right] }
                                    {\partial w^{\wkp}} .
    \end{equation*}
    We consider analogous parameters for the residence MW: $ATT^{\res}$, 
    $ACRT^{\wkp}(w^{\res} | w^{\res}, w^{\wkp})$, and $ACR^{\res}(w^{\res})$.
\end{definition}

Our main interest lies in the rent gradient to the MW, i.e., the 
average causal response of rents to each of the MW measures.
For that, we make a parallel trends assumption.

\begin{assu}[Parallel trends] \label{assu:PT}
    We assume that, for all levels of $w^{\res}$ and $w^{\wkp}$,
    \begin{align*}\label{eq:PT}
        \E\big[r_{it}(\mw^{\fed}, \mw^{\fed}) - & r_{i,t-1}(\mw^{\fed}, \mw^{\fed}) 
                \big| w^{\res}, w^{\wkp} \big] \\
        & = \E\big[r_{it}(\mw^{\fed}, \mw^{\fed}) - r_{i,t-1}(\mw^{\fed}, \mw^{\fed})
                \big| w^{\res}, \mw^{\fed} \big] \\
        & = \E\Big[r_{it}(\mw^{\fed}, \mw^{\fed}) - r_{i,t-1}(\mw^{\fed}, \mw^{\fed})
                \big| \mw^{\fed}, w^{\wkp} \big] .
    \end{align*}
\end{assu}

Assumption \ref{assu:PT} states that the untreated outcomes evolve in parallel 
for ZIP codes experiencing treatment levels $w^{\res}$ and $w^{\wkp}$ and 
(a) ZIP codes with the same level of the residence MW but unchanged workplace MW and
(b) ZIP codes with the same workplace MW but unchanged residence MW.
Our identification result is next.
To identify $ACRT^{\wkp}$ we will compare ZIP codes that received similar levels 
of the residence MW and different levels of the workplace MW.
Analogous comparisons of ZIP codes with different residence MW and similar 
workplace MW will idenfity $ACRT^{\res}$.

\begin{prop}[Identification]\label{prop:identification}
    Under assumption \ref{assu:PT} we have that
    \begin{equation*}
        \frac{\partial \E\left[r_{it}(w^{\res}, w^{\wkp}) | w^{\res}, w^{\wkp}\right]}
        {\partial w^{\wkp}} 
       = ACRT^{\wkp}(w | \mw_0, w) + \frac{\partial ATT^{\wkp}(w | \mw_0, l)}{\partial w} \Big|_{l = w}
    \end{equation*}
    An analogous expression holds for the workplace MW.
\end{prop}
\begin{proof}
    See Proposition 3 of \textcite{CallawayEtAl2021}.
\end{proof}

As extensively discussed by \textcite{CallawayEtAl2021}, a parallel trends 
assumption is not enough to identify the average causal response in the 
context of continuous treatments.
The gradient of our rents function for the group $(w^{\res}, w^{\wkp})$ is a mix
of the average causal response of interest and a ``selection bias'' term that
captures the fact that the treatment for the particular group that received
$(w^{\res}, w^{\wkp})$ may be different for other groups at that level of 
treatment.
We maintain that the selection bias terms are zero.%
\footnote{There are several alternatives to this assumption. 
See \textcite[][Section 3.3]{CallawayEtAl2021} and discussion therein.}

\begin{assu}[No selection bias] \label{assu:no_selection}
    We assume that
    \begin{equation*}\label{eq:no_selection_workplace}
        \frac{\partial ATT^{\wkp}(w^{\wkp} | w^{\res}, l)}
             {\partial \mw^{\wkp}} \Big|_{l = w^{\wkp}} = 0
        \quad\text{\textit{ and }}\quad
        \frac{\partial ATT^{\res}(w^{\res} | l, w^{\wkp})}
             {\partial \mw^{\res}} \Big|_{l = w^{\res}} = 0 .
    \end{equation*}
\end{assu}

Will this assumption hold?
Because we maintain that commuting shares are fixed, workers are not allowed
to change location right at the moment of the treatment.
Any selection then must be based on historical reasons.
It is unlikely that workers would have selected in the past in such a way that 
will cause the selection bias term to have a particular shape across the 
distribution of residence and workplace MW levels.
They would need to anticipate the future MW policies and how they would affect
the future rental market.
The view that worker's sorting is random for ZIP codes that receive
similar levels of the residence and workplace MW (and thus are compared to 
identify the causal response parameters) seems more plausible.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Parametric Model}

We start our results showing non-parametric identification results that support
the linearity assumption between log rents and the MW measures, as suggested
by Proposition \ref{prop:representation}.
Thus, we assume that
\begin{equation*} \label{eq:did_lev}
    r_{it} = \alpha_i + \tilde{\delta}_t 
           + \gamma \mw^{\res}_{it} + \beta \mw^{\wkp}_{it}
           + \mathbf{X}^{'}_{it}\eta
           + \varepsilon_{it} \ 
\end{equation*}    
where
$i$ and $t$ index ZIP codes and time periods (months), respectively,
$r_{it}$ represents the log of rents per square foot,
$\mw^{\res}_{it}$ is the ZIP code's residence MW, defined as 
$\ln \MW_{it}$,
$\mw^{\wkp}_{it}$ is the ZIP code's workplace MW, defined as 
$\sum_{z\in\Z(i)} \pi_{iz}\ln \MW_{zt}$,
$\alpha_i$ and $\hat{\delta}_t$ are fixed effects, and 
$\mathbf{X}_{it}$ is a vector of time-varying controls.
%% SH: I removed the c(i) from the controls. 
%%                Why? Sometimes we use zip code-specific trends
The parameters of interest are $\gamma$ and $\beta$ which, 
following the model in Section \ref{sec:model}, 
we interpret as the elasticity of rents to the residence and workplace MW, 
respectively.
This functional form assumption also implies 
$ACRT^{\wkp} = ACR^{\wkp} = \beta$ and
$ACRT^{\res} = ACR^{\res} = \gamma$.
Under this functional form there is no selection bias, satisfying Assumption 
\ref{assu:no_selection}.

By taking first differences on the previous equation we obtain
\begin{equation}\label{eq:fd}
    \Delta r_{it} = \delta_t
                  + \gamma \Delta \mw^{\res}_{it} + \beta \Delta \mw^{\wkp}_{it}
                  + \Delta \mathbf{X}^{'}_{it}\eta
                  + \Delta \varepsilon_{it} ,
\end{equation}
where $\delta_t = \tilde{\delta}_t - \tilde{\delta}_{t-1}$.
We estimate the model in first differences because we expect unobserved shocks
to rental prices to be serially auto-correlated over time, making the levels
model less efficient.
Appendix Table \ref{tab:autocorrelation} shows strong evidence of serial 
auto-correlation in the error term of the model in levels.
While the model in levels shares coefficients signs with the one in first 
differences, standard errors are seven to eight times larger.

The main results of the paper are obtained using variations of the model 
in \eqref{eq:fd}.

\subsubsection*{Parallel trends assumption}

Assumption \ref{assu:PT}, which corresponds to an assumption 
of \textit{strict exogenity} of the residence and the workplace MW measures 
in the panel model, implies that changes in the MW measures do not predict 
future changes in rents.
We evaluate this assumption using models that include leads and lags of the 
MW variables:
\begin{equation} \label{eq:fd_leads_lags}
    \Delta r_{it} = \delta_t
                  + \sum_{k=-s}^{s} \gamma_k \Delta \mw^{\res}_{ik} 
                  + \sum_{k=-s}^{s} \beta_k \Delta \mw^{\wkp}_{ik}
                  + \Delta \mathbf{X}^{'}_{it}\eta
                  + \Delta \varepsilon_{it} .
\end{equation}
In this equation,
$k$ represents time relative to a MW change and 
$s$ is the number of months of a symmetric window around the event.
We use $s=6$ throughout the paper. However, our results are very similar for 
windows of 3 or 9 months.
%%% SH:
%%%     We decided that, for now, we won't show results for alternative windows.
%%%
Because the MW measures are strongly correlated, adding leads and lags of both 
results in a decline in precision.
Thus, we try models with leads and lags of only one of the MW measures as well.

Under the assumption that there are no anticipatory effects in the housing 
market, we interpret the absence of pre-trends as evidence against the presence 
of unobserved economic shocks driving our results.
We think that, given the high frequency of our data and the focus on short 
windows around MW changes, the assumption of no anticipatory effects seems 
plausible.%
\footnote{We can also interpret the absence of pre-trends as a test for 
anticipatory effects if we are willing to assume that the controls embedded in 
$\mathbf{X}_{it}$ capture all relevant unobserved heterogeneity arising from 
local business cycles.
While we find the interpretation given in the text more palatable, the data are 
consistent with both.}
% We further present evidence in favor of this assumption by showing that our MW 
% measures do not predict the number of listings of houses for sale in Zillow.%
% \footnote{Ideally, we would run this regression on the number of rental units.
% Unfortunately this information is not available in the Zillow data.
% Specifically, we track the number of houses listed for sale in a sample of ZIP 
% codes during the period 2013-2019 for our preferred house type (SFCC).}

% DGP: Adding back this sentence and footnote above seem like a good idea. Actually,
% Matt Pecenco suggested something like this after the dissertation presentation.

We note that our identifying assumption allows for arbitrary 
correlation between ZIP code effects $\alpha_i$ and both MW variables
(e.g., our empirical strategy is robust to the fact that districts with more
expensive housing tend to vote for MW policies).

\subsubsection*{Confounding factors}

We worry that unobserved shocks, such as those caused by local business cycles, 
may systematically affect both rents and minimum wage changes.
If so, our identifying assumption may only hold condition on those factors.

To account for common trends in the housing market we include time-period 
fixed effects.
In some specifications we allow these trends to vary by different geographic 
jurisdictions.
To control for variation arising from unobserved trends in local labor markets 
we include economic controls from the QCEW.%
\footnote{These data are aggregated at the county level, and represent a second 
best given the unavailability of local business cycle data at the ZIP code 
level.}
Specifically, we control for average weekly wage and establishment counts at the 
county-quarter level, and for employment counts at the county-month level, 
for the sectors 
``Professional and business services,'' ``Information,'' and 
``Financial activities.''
We assume that these sectors are not affected by the minimum wage.%
\footnote{In fact, according to \textcite[][Table 5]{MinWorkersReportBLS}, in 
2019 the percent of workers earning at or below the minimum wage in those 
industries was 0.8, 1.5, and 0.2, respectively.}
We also try models where we control for ZIP code-specific linear
trends, which should account for time-varying heterogeneity not controlled for 
by our economic controls that follows a linear pattern.

A further confounding factor may be a change in the composition of the sample
across time periods, which is why we estimate \ref{eq:fd} on a balanced panel.
We also conduct an estimation exercise using an unbalanced panel with all 
ZIP codes with Zillow rental data in the SFCC category from February 2010 
to December 2019, controlling for time-period by year-quarter-of-entry fixed 
effects.

\subsubsection*{Does the first differences model identify the ACRT?}

Exploring the properties of the OLS estimators of $\gamma$ and $\beta$ in 
equation \ref{eq:fd} is beyond the scope of this paper.
However, since recent literature has shown the negative consequences of 
treatment-effect heterogeneity on TWFE estimates in the context of 
a unique treatment \parencite{deChaisemartinEtAl2022,RothEtAl2022},
we do worry that invalid comparisons may introduce bias in our 
estimates.
To account for this we construct a ``stacked'' implementation of our model in 
which we take 6 months of data around MW changes for ZIP codes in CBSAs where 
some ZIP codes did not receive a direct MW change, and then estimate equation 
\eqref{eq:fd} on this restricted sample including event-by-time fixed effects.
These strategies limit the comparisons that identify the coefficients of 
interest to ZIP codes within the same metropolitan area and around the same
change in a jurisdiction's MW policy.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Sample Selection Concerns and Heterogeneity}\label{sec:emp_start_heterogeneity}

Because our ZIP codes come from a selected sample, they may not represent
the causal effect for the average urban US ZIP code.
To obtain effects that are more representative we follow 
\textcite{Hainmueller2012} and estimate our main models re-weighting 
observations to match key moments of the distribution of characteristics of 
urban ZIP codes.

If the mechanism proposed in Section \ref{sec:model} is correct, then we
expect the effect of the residence MW to be stronger in locations with many 
MW workers.
The reason is that the production of non-tradable goods presumably uses more
low-wage work, and thus the increase in the MW would affect prices more.
Similarly, we expect the effect of the workplace MW to be stronger in locations
with lots of MW workers as income would increase more strongly there.
We then estimate the following model:
\begin{equation}\label{eq:fd_heterogeneity}
    \Delta r_{it} = \delta_t
                  + \tilde\gamma_0 \Delta \mw^{\res}_{it}
                  + \tilde\gamma_1 \iota_i \Delta \mw^{\res}_{it}
                  + \tilde\beta_0 \Delta \mw^{\wkp}_{it}
                  + \tilde\beta_1 \iota_i \Delta \mw^{\wkp}_{it}
                  + \Delta \mathbf{X}^{'}_{it}\eta
                  + \Delta \varepsilon_{it} ,
\end{equation}
where $\iota_i$ represents the standardized share of MW workers in a ZIP code.
Because we cannot estimate the share of MW workers working in a given location,
we interact both the residence and workplace MW with the share of MW residents.%
\footnote{We discuss our estimates of the share of MW workers in 
Section \ref{sec:data_income_housing}.}

We conduct similar heterogeneity exercises with the standardized median household 
income from the ACS \parencite{CensusACS} and the standardized share of public 
housing units in each ZIP code from the HUD \parencite{hudHousing}.
